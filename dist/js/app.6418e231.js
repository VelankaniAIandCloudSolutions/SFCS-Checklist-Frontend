(function(){"use strict";var e={1645:function(e,t,a){var s=a(9242),i=a(3396);const l={id:"app"},n={key:0},o={key:1};function c(e,t,a,s,c,d){const r=(0,i.up)("LoginForm"),m=(0,i.up)("AdminLte"),u=(0,i.up)("notifications");return(0,i.wg)(),(0,i.iD)("div",l,["/login"==d.activeRoute?((0,i.wg)(),(0,i.iD)("div",n,[(0,i.Wm)(r)])):((0,i.wg)(),(0,i.iD)("div",o,[(0,i._)("div",null,[(0,i.Wm)(m)])])),(0,i.Wm)(u,{position:"bottom right",classes:"alert"})])}const d=e=>((0,i.dD)("data-v-8f884696"),e=e(),(0,i.Cn)(),e),r={class:"wrapper"},m={class:"main-header navbar navbar-expand navbar-white navbar-light"},u={class:"navbar-nav"},h=d((()=>(0,i._)("li",{class:"nav-item"},[(0,i._)("a",{class:"nav-link","data-widget":"pushmenu",href:"#",role:"button"},[(0,i._)("i",{class:"fas fa-bars"})])],-1))),p={class:"nav-item"},b=d((()=>(0,i._)("i",{class:"fas fa-home"},null,-1))),g={class:"navbar-nav ml-auto"},f={class:"nav-item"},_=d((()=>(0,i._)("i",{class:"fas fa-sign-out-alt"},null,-1))),v=[_],y={class:"main-sidebar sidebar-dark-primary elevation-4"},k=d((()=>(0,i._)("a",{href:"/",class:"brand-link"},[(0,i._)("img",{src:"https://content.jdmagicbox.com/comp/bangalore/73/080ppe03673/catalogue/velankani-software-pvt-ltd-electronic-city-bangalore-computer-software-developers-2rgz2h5-250.jpg",alt:"AdminLTE Logo",class:"brand-image img-circle elevation-3",style:{opacity:"0.8"}}),(0,i._)("span",{class:"brand-text font-weight-light"},"Velankani SFCS")],-1))),w={class:"sidebar"},C={class:"mt-2"},D={class:"nav nav-pills nav-sidebar flex-column","data-widget":"treeview",role:"menu","data-accordion":"false"},S={key:0,class:"nav-item text-left"},M=d((()=>(0,i._)("a",{href:"#",class:"nav-link"},[(0,i._)("i",{class:"nav-icon fas fa-users"}),(0,i._)("p",null,[(0,i.Uk)(" Accounts "),(0,i._)("i",{class:"right fas fa-angle-left"})])],-1))),P={class:"nav nav-treeview"},I={class:"nav-item"},x=d((()=>(0,i._)("i",{class:"fas fa-user-plus nav-icon"},null,-1))),L=d((()=>(0,i._)("p",null,"Users",-1))),R={key:1,class:"nav-item text-left"},B=d((()=>(0,i._)("a",{href:"#",class:"nav-link"},[(0,i._)("i",{class:"nav-icon fas fa-store"}),(0,i._)("p",null,[(0,i.Uk)(" Store "),(0,i._)("i",{class:"right fas fa-angle-left"})])],-1))),$={class:"nav nav-treeview"},E={class:"nav-item"},U=d((()=>(0,i._)("i",{class:"fas fa-chart-line nav-icon"},null,-1))),N=d((()=>(0,i._)("p",null,"Dashboard",-1))),T={class:"nav-item"},O=d((()=>(0,i._)("i",{class:"fas fa-list-ul nav-icon"},null,-1))),A=d((()=>(0,i._)("p",null,"Checklist",-1))),q={class:"nav-item"},F=d((()=>(0,i._)("i",{class:"fas fa-chart-bar nav-icon"},null,-1))),j=d((()=>(0,i._)("p",null,"Reports",-1))),W={key:2,class:"nav-item text-left"},V=d((()=>(0,i._)("a",{href:"#",class:"nav-link"},[(0,i._)("i",{class:"nav-icon fas fa-shopping-cart"}),(0,i._)("p",null,[(0,i.Uk)(" Orders "),(0,i._)("i",{class:"right fas fa-angle-left"})])],-1))),z={class:"nav nav-treeview"},Z={class:"nav-item"},G=d((()=>(0,i._)("i",{class:"fas fa-receipt nav-icon"},null,-1))),H=d((()=>(0,i._)("p",null,"Orders",-1))),Q={key:3,class:"nav-item text-left"},Y=d((()=>(0,i._)("a",{href:"#",class:"nav-link"},[(0,i._)("i",{class:"nav-icon fas fa-industry"}),(0,i._)("p",null,[(0,i.Uk)(" Material Management "),(0,i._)("i",{class:"right fas fa-angle-left"})])],-1))),K={class:"nav nav-treeview"},J={class:"nav-item"},X=d((()=>(0,i._)("i",{class:"fas fa-clipboard-list nav-icon"},null,-1))),ee=d((()=>(0,i._)("p",null,"Bill Of Materials",-1))),te={class:"nav-item"},ae=d((()=>(0,i._)("i",{class:"fas fa-project-diagram nav-icon"},null,-1))),se=d((()=>(0,i._)("p",null,"Projects",-1))),ie={key:4,class:"nav-item text-left"},le=d((()=>(0,i._)("a",{href:"#",class:"nav-link"},[(0,i._)("i",{class:"nav-icon fas fa-clipboard-check"}),(0,i._)("p",null,[(0,i.Uk)(" IQC "),(0,i._)("i",{class:"right fas fa-angle-left"})])],-1))),ne={class:"nav nav-treeview"},oe={class:"nav-item"},ce=d((()=>(0,i._)("i",{class:"fas fa-tasks nav-icon"},null,-1))),de=d((()=>(0,i._)("p",null,"IQC Checklist",-1))),re={key:5,class:"nav-item text-left"},me=d((()=>(0,i._)("a",{href:"#",class:"nav-link"},[(0,i._)("i",{class:"nav-icon fas fa-tag"}),(0,i._)("p",null,[(0,i.Uk)(" Pricing "),(0,i._)("i",{class:"right fas fa-angle-left"})])],-1))),ue={class:"nav nav-treeview"},he={class:"nav-item"},pe=d((()=>(0,i._)("i",{class:"fas fa-money-bill nav-icon"},null,-1))),be=d((()=>(0,i._)("p",null,"Project Pricing Details",-1))),ge={key:6,class:"nav-item text-left"},fe=d((()=>(0,i._)("a",{href:"#",class:"nav-link"},[(0,i._)("i",{class:"nav-icon fas fa-cogs"}),(0,i._)("p",null,[(0,i.Uk)(" Machine Management "),(0,i._)("i",{class:"right fas fa-angle-left"})])],-1))),_e={class:"nav nav-treeview"},ve={key:0,class:"nav-item"},ye=d((()=>(0,i._)("i",{class:"fa fa-calendar-alt nav-icon"},null,-1))),ke=d((()=>(0,i._)("p",null,"Plan Creation",-1))),we={key:1,class:"nav-item"},Ce=d((()=>(0,i._)("i",{class:"fas fa-calendar-alt nav-icon"},null,-1))),De=d((()=>(0,i._)("p",null,"Supervisor Plan",-1))),Se={class:"nav-item"},Me=d((()=>(0,i._)("i",{class:"fas fa-calendar-xmark nav-icon"},null,-1))),Pe=d((()=>(0,i._)("p",null,"Maintenance Execution",-1))),Ie={key:2,class:"nav-item"},xe=d((()=>(0,i._)("i",{class:"fas fa-file-excel nav-icon"},null,-1))),Le=d((()=>(0,i._)("p",null,"Report Generation",-1))),Re={class:"nav-item"},Be=d((()=>(0,i._)("i",{class:"fa-solid fa-list nav-icon"},null,-1))),$e=d((()=>(0,i._)("p",null,"Machine List",-1))),Ee={key:7,class:"nav-item text-left"},Ue=d((()=>(0,i._)("a",{href:"#",class:"nav-link"},[(0,i._)("i",{class:"nav-icon fas fa-robot"}),(0,i._)("p",null,[(0,i.Uk)(" Defect Recognition "),(0,i._)("i",{class:"right fas fa-angle-left"})])],-1))),Ne={class:"nav nav-treeview"},Te={class:"nav-item"},Oe=d((()=>(0,i._)("i",{class:"fas fa-microchip nav-icon"},null,-1))),Ae=d((()=>(0,i._)("p",null,"Inspection Board",-1))),qe={key:8,class:"nav-item text-left"},Fe=d((()=>(0,i._)("a",{href:"#",class:"nav-link"},[(0,i._)("i",{class:"nav-icon fas fa-tools"}),(0,i._)("p",null,[(0,i.Uk)(" Machine Logs "),(0,i._)("i",{class:"right fas fa-angle-left"})])],-1))),je={class:"nav nav-treeview"},We={class:"nav-item"},Ve=d((()=>(0,i._)("i",{class:"fas fa-chart-line nav-icon"},null,-1))),ze=d((()=>(0,i._)("p",null,"Board Logs Dashboard",-1))),Ze={class:"nav-item"},Ge=d((()=>(0,i._)("i",{class:"fas fa-file-alt nav-icon"},null,-1))),He=d((()=>(0,i._)("p",null,"Board Reports",-1))),Qe={class:"nav-item"},Ye=d((()=>(0,i._)("i",{class:"fas fa-file nav-icon"},null,-1))),Ke=d((()=>(0,i._)("p",null,"Machine Reports",-1))),Je={key:0,class:"content-wrapper"},Xe={key:1,class:"content-wrapper"};function et(e,t,a,s,l,n){const o=(0,i.up)("router-link"),c=(0,i.up)("RestrictedAccess"),d=(0,i.up)("router-view");return(0,i.wg)(),(0,i.iD)("div",r,[(0,i._)("nav",m,[(0,i._)("ul",u,[h,(0,i._)("li",p,[(0,i.Wm)(o,{to:"/",class:"nav-link"},{default:(0,i.w5)((()=>[b])),_:1})])]),(0,i._)("ul",g,[(0,i._)("li",f,[(0,i._)("a",{href:"#",class:"nav-link",onClick:t[0]||(t[0]=(...e)=>n.logout&&n.logout(...e))},v)])])]),(0,i._)("aside",y,[k,(0,i._)("div",w,[(0,i._)("nav",C,[(0,i._)("ul",D,[e.$store.state.user.is_superuser?((0,i.wg)(),(0,i.iD)("li",S,[M,(0,i._)("ul",P,[(0,i._)("li",I,[(0,i.Wm)(o,{to:"/users",class:"nav-link"},{default:(0,i.w5)((()=>[x,L])),_:1})])])])):(0,i.kq)("",!0),e.$store.state.user.is_superuser||e.$store.state.user.is_store_team?((0,i.wg)(),(0,i.iD)("li",R,[B,(0,i._)("ul",$,[(0,i._)("li",E,[(0,i.Wm)(o,{to:"/dashboard",class:"nav-link"},{default:(0,i.w5)((()=>[U,N])),_:1})]),(0,i._)("li",T,[(0,i.Wm)(o,{to:"/checklist",class:"nav-link"},{default:(0,i.w5)((()=>[O,A])),_:1})]),(0,i._)("li",q,[(0,i.Wm)(o,{to:"/reports",class:"nav-link"},{default:(0,i.w5)((()=>[F,j])),_:1})])])])):(0,i.kq)("",!0),e.$store.state.user.is_superuser||e.$store.state.user.is_design_team?((0,i.wg)(),(0,i.iD)("li",W,[V,(0,i._)("ul",z,[(0,i._)("li",Z,[(0,i.Wm)(o,{to:"/orders",class:"nav-link"},{default:(0,i.w5)((()=>[G,H])),_:1})])])])):(0,i.kq)("",!0),e.$store.state.user.is_superuser||e.$store.state.user.is_design_team?((0,i.wg)(),(0,i.iD)("li",Q,[Y,(0,i._)("ul",K,[(0,i._)("li",J,[(0,i.Wm)(o,{to:"/bom",class:"nav-link"},{default:(0,i.w5)((()=>[X,ee])),_:1})]),(0,i._)("li",te,[(0,i.Wm)(o,{to:"/projects",class:"nav-link"},{default:(0,i.w5)((()=>[ae,se])),_:1})])])])):(0,i.kq)("",!0),e.$store.state.user.is_superuser||e.$store.state.user.is_design_team?((0,i.wg)(),(0,i.iD)("li",ie,[le,(0,i._)("ul",ne,[(0,i._)("li",oe,[(0,i.Wm)(o,{to:"/iqc",class:"nav-link"},{default:(0,i.w5)((()=>[ce,de])),_:1})])])])):(0,i.kq)("",!0),e.$store.state.user.is_superuser?((0,i.wg)(),(0,i.iD)("li",re,[me,(0,i._)("ul",ue,[(0,i._)("li",he,[(0,i.Wm)(o,{to:"/project-pricing",class:"nav-link"},{default:(0,i.w5)((()=>[pe,be])),_:1})])])])):(0,i.kq)("",!0),e.$store.state.user.is_superuser||e.$store.state.user.is_machine_maintenance_supervisor_team||e.$store.state.user.is_machine_maintenance_staff_team?((0,i.wg)(),(0,i.iD)("li",ge,[fe,(0,i._)("ul",_e,[e.$store.state.user.is_superuser||e.$store.state.user.is_machine_maintenance_supervisor_team?((0,i.wg)(),(0,i.iD)("li",ve,[(0,i.Wm)(o,{to:"/machine/plan-creation",class:"nav-link"},{default:(0,i.w5)((()=>[ye,ke])),_:1})])):(0,i.kq)("",!0),e.$store.state.user.is_superuser||e.$store.state.user.is_machine_maintenance_supervisor_team?((0,i.wg)(),(0,i.iD)("li",we,[(0,i.Wm)(o,{to:"/machine/calendar-yearly-view",class:"nav-link"},{default:(0,i.w5)((()=>[Ce,De])),_:1})])):(0,i.kq)("",!0),(0,i._)("li",Se,[(0,i.Wm)(o,{to:"/machine/mark-maintenance-plan",class:"nav-link"},{default:(0,i.w5)((()=>[Me,Pe])),_:1})]),e.$store.state.user.is_superuser||e.$store.state.user.is_machine_maintenance_supervisor_team?((0,i.wg)(),(0,i.iD)("li",Ie,[(0,i.Wm)(o,{to:"/machine/report-generation",class:"nav-link"},{default:(0,i.w5)((()=>[xe,Le])),_:1})])):(0,i.kq)("",!0),(0,i._)("li",Re,[(0,i.Wm)(o,{to:"/machine/machine-list",class:"nav-link"},{default:(0,i.w5)((()=>[Be,$e])),_:1})])])])):(0,i.kq)("",!0),e.$store.state.user.is_superuser?((0,i.wg)(),(0,i.iD)("li",Ee,[Ue,(0,i._)("ul",Ne,[(0,i._)("li",Te,[(0,i.Wm)(o,{to:"/inspection-boards",class:"nav-link"},{default:(0,i.w5)((()=>[Oe,Ae])),_:1})])])])):(0,i.kq)("",!0),e.$store.state.user.is_superuser?((0,i.wg)(),(0,i.iD)("li",qe,[Fe,(0,i._)("ul",je,[(0,i._)("li",We,[(0,i.Wm)(o,{to:"/machine-logs/dashboard",class:"nav-link"},{default:(0,i.w5)((()=>[Ve,ze])),_:1})]),(0,i._)("li",Ze,[(0,i.Wm)(o,{to:"/machine-logs/board-report",class:"nav-link"},{default:(0,i.w5)((()=>[Ge,He])),_:1})]),(0,i._)("li",Qe,[(0,i.Wm)(o,{to:"/machine-logs/machine-report",class:"nav-link"},{default:(0,i.w5)((()=>[Ye,Ke])),_:1})])])])):(0,i.kq)("",!0)])])])]),l.showLogInModal?((0,i.wg)(),(0,i.iD)("div",Je,[(0,i.Wm)(c,{onCloseLogInModal:n.handleCloseLogInModal,show:l.showLogInModal},null,8,["onCloseLogInModal","show"])])):((0,i.wg)(),(0,i.iD)("div",Xe,[(0,i.Wm)(d)]))])}a(560);var tt=a(1076);const at={key:0,class:"modal fade show",id:"customRestrictedAccessModal",tabindex:"-1","aria-labelledby":"customRestrictedAccessLabel","aria-modal":"true",role:"dialog",style:{display:"block"}},st={class:"modal-dialog"},it={class:"modal-content"},lt=(0,i._)("div",{class:"modal-header"},[(0,i._)("h4",{class:"modal-title",id:"customRestrictedAccessLabel"},[(0,i._)("strong",{style:{color:"#333"}},"Restriced Access")])],-1),nt={class:"modal-body"},ot={class:"row justify-content-center"},ct=(0,i._)("h6",null,"Please Log In to Continue",-1),dt={class:"button mb-2"};function rt(e,t,a,s,l,n){return(0,i.wg)(),(0,i.iD)("div",null,[a.show?((0,i.wg)(),(0,i.iD)("div",at,[(0,i._)("div",st,[(0,i._)("div",it,[lt,(0,i._)("div",nt,[(0,i._)("div",ot,[ct,(0,i._)("div",dt,[(0,i._)("button",{onClick:t[0]||(t[0]=t=>e.$emit("closeLogInModal")),class:"btn btn-outline-success btn-block",type:"button"}," Log In ")])])])])])])):(0,i.kq)("",!0),a.show?((0,i.wg)(),(0,i.iD)("div",{key:1,class:"modal-backdrop fade show",id:"customRestrictedAccessBackdrop",style:{display:"block"},onClick:t[1]||(t[1]=(...e)=>n.closeModal&&n.closeModal(...e))})):(0,i.kq)("",!0)])}var mt={data(){return{}},props:{show:{type:Boolean,required:!0,default:!1}},methods:{closeModal(){document.getElementById("customRestrictedAccessBackdrop").style.display="none",document.getElementById("customRestrictedAccessModal").style.display="none",document.getElementById("customRestrictedAccessModal").classList.remove("show")}}},ut=a(89);const ht=(0,ut.Z)(mt,[["render",rt]]);var pt=ht,bt={data(){return{showLogInModal:!1}},mounted(){this.checkLogin()},components:{RestrictedAccess:pt},methods:{async logout(){await tt.Z.post("token/logout/").then((e=>{console.log("Logged out",e.data),this.$store.commit("removeToken"),window.location.href="/login"})).catch((e=>{console.log(e)}))},async checkLogin(){await tt.Z.get("accounts/check-login").then((e=>{200===e.status?this.showLogInModal=!1:this.showLogInModal=!0})).catch((e=>{console.error("Error in API call:",e),this.showLogInModal=!0,localStorage.removeItem("token"),this.$store.commit("removeToken")}))},handleCloseLogInModal(){this.showLogInModal=!1,this.$router.push("/login")}}};const gt=(0,ut.Z)(bt,[["render",et],["__scopeId","data-v-8f884696"]]);var ft=gt,_t=a(7139);const vt=e=>((0,i.dD)("data-v-095c853c"),e=e(),(0,i.Cn)(),e),yt={class:"container"},kt={class:"login"},wt=vt((()=>(0,i._)("h1",null,"Velankani SFCS",-1))),Ct={class:"input-box"},Dt=vt((()=>(0,i._)("i",{class:"fa fa-envelope"},null,-1))),St={class:"input-box"},Mt=["type"],Pt=vt((()=>(0,i._)("button",{type:"submit"},"Login",-1)));function It(e,t,a,l,n,o){return(0,i.wg)(),(0,i.iD)("div",yt,[(0,i._)("div",kt,[wt,(0,i._)("form",{onSubmit:t[3]||(t[3]=(0,s.iM)(((...e)=>o.handleSubmit&&o.handleSubmit(...e)),["prevent"]))},[(0,i._)("div",Ct,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>n.email=e),type:"email",placeholder:"Email"},null,512),[[s.nr,n.email]]),Dt]),(0,i._)("div",St,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>n.password=e),type:n.showPassword?"text":"password",placeholder:"Password"},null,8,Mt),[[s.YZ,n.password]]),(0,i._)("i",{onClick:t[2]||(t[2]=(...e)=>o.togglePasswordVisibility&&o.togglePasswordVisibility(...e)),class:(0,_t.C_)(n.showPassword?"fa fa-eye-slash":"fa fa-eye")},null,2)]),Pt],32)])])}var xt={data(){return{email:"",password:"",errors:[],showPassword:!1}},methods:{togglePasswordVisibility(){this.showPassword=!this.showPassword},async handleSubmit(){if(this.$store.commit("setIsLoading",!0),this.errors=[],""===this.email&&this.errors.push("The email is missing!"),""===this.password&&this.errors.push("The password is missing!"),this.errors.length)this.$store.commit("setIsLoading",!1);else{const e={email:this.email,password:this.password};await tt.Z.post("token/login/",e).then((e=>{this.$notify({title:"Login successful",type:"bg-success-subtle text-success",duration:5e3}),setTimeout((async()=>{const t=e.data.auth_token;this.$store.commit("setToken",t),tt.Z.defaults.headers.common["Authorization"]="Token "+t,localStorage.setItem("token",t),console.log("Received Token:",t);const a=await tt.Z.get("accounts/user/authenticated/"),s=a.data;console.log("User Details:",s),localStorage.setItem("userDetails",JSON.stringify(s)),this.$store.commit("setUserDetails",s),this.$store.state.user.is_machine_maintenance_supervisor_team||this.$store.state.user.is_machine_maintenance_staff_team?window.location.href="/machine/plan-creation":this.$store.state.user.is_superuser&&(window.location.href="/dashboard")}),1e3)})).catch((e=>{this.$notify({title:"Login failed. Please check your credentials.",type:"bg-danger-subtle text-danger",duration:"5000"}),console.error("Login failed:",e.response.data),this.errors.push("Login failed. Please check your credentials.")})).finally((()=>{this.$store.commit("setIsLoading",!1)}))}}}};const Lt=(0,ut.Z)(xt,[["render",It],["__scopeId","data-v-095c853c"]]);var Rt=Lt,Bt={name:"App",components:{LoginForm:Rt,AdminLte:ft},data(){return{}},computed:{activeRoute(){return this.$route.path}},methods:{}};const $t=(0,ut.Z)(Bt,[["render",c]]);var Et=$t,Ut=(a(8052),a(2483));const Nt=e=>((0,i.dD)("data-v-02bacf85"),e=e(),(0,i.Cn)(),e),Tt={key:0,class:"container text-center"},Ot=Nt((()=>(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1))),At=Nt((()=>(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1))),qt=[Ot,At],Ft={key:1,class:"container"},jt={class:"row align-items-center"},Wt={class:"d-flex align-items-center mt-4"},Vt=Nt((()=>(0,i._)("h2",{class:"mb-0"},"Upload Bill Of Materials",-1))),zt=Nt((()=>(0,i._)("span",{class:"ms-3 fs-4 text-muted"},"|",-1))),Zt={"aria-label":"breadcrumb",class:"d-inline-block ms-3"},Gt={class:"breadcrumb bg-transparent m-0 p-0"},Ht=Nt((()=>(0,i._)("li",{class:"breadcrumb-item"},[(0,i._)("a",{href:"/"},[(0,i._)("i",{class:"fas fa-home me-1"}),(0,i.Uk)("Home")])],-1))),Qt={class:"breadcrumb-item"},Yt=Nt((()=>(0,i._)("i",{class:"fas fa-clipboard-list me-1"},null,-1))),Kt=Nt((()=>(0,i._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,i._)("i",{class:"fas fa-upload me-1"}),(0,i.Uk)(" Upload the bom ")],-1))),Jt={class:"card p-3 mb-4 mt-4"},Xt={class:"row mb-3"},ea={class:"col-md-6"},ta=Nt((()=>(0,i._)("label",{for:"projectDropdown",class:"form-label"},[(0,i.Uk)("Select Project "),(0,i._)("span",{class:"text-danger"},"*")],-1))),aa=["value"],sa={class:"col-md-6"},ia=Nt((()=>(0,i._)("label",{for:"productCode",class:"form-label"},[(0,i.Uk)("Product "),(0,i._)("span",{class:"text-danger"},"*")],-1))),la=["value"],na={class:"row mb-3"},oa={class:"col-md-6"},ca=Nt((()=>(0,i._)("label",{for:"bomType",class:"form-label"},"BOM Type",-1))),da={class:"col-md-6"},ra=Nt((()=>(0,i._)("label",{for:"bomRevNo",class:"form-label"},[(0,i.Uk)("BOM REV No "),(0,i._)("span",{class:"text-danger"},"*")],-1))),ma={key:0,class:"text-danger"},ua={class:"row mb-3 justify-content-center"},ha={class:"col-md-6"},pa=Nt((()=>(0,i._)("label",{for:"issueDate",class:"form-label"},[(0,i.Uk)("Issue Date "),(0,i._)("span",{class:"text-danger"},"*")],-1))),ba={class:"card p-3 mb-4"},ga=Nt((()=>(0,i._)("label",{for:"bomFileInput",class:"form-label"},[(0,i._)("i",{class:"fas fa-cloud-upload-alt mr-2"}),(0,i.Uk)(" Choose BOM Excel file "),(0,i._)("span",{class:"text-danger"},"*")],-1))),fa={class:"custom-file"},_a={class:"custom-file-label",for:"bomFileInput"},va=Nt((()=>(0,i._)("div",{style:{"margin-bottom":"10px"}},null,-1))),ya=Nt((()=>(0,i._)("label",{for:"pcbFileInput",class:"form-label"},[(0,i._)("i",{class:"fas fa-cloud-upload-alt mr-2"}),(0,i.Uk)(" Choose PCB BBT Test Report ")],-1))),ka={class:"custom-file"},wa={class:"custom-file-label",for:"pcbFileInput"},Ca=Nt((()=>(0,i._)("div",{style:{"margin-bottom":"10px"}},null,-1))),Da={class:"card p-3"};function Sa(e,t,a,l,n,o){const c=(0,i.up)("router-link"),d=(0,i.up)("CustomModal");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",Tt,qt)):((0,i.wg)(),(0,i.iD)("div",Ft,[(0,i._)("div",jt,[(0,i._)("div",Wt,[Vt,zt,(0,i._)("nav",Zt,[(0,i._)("ol",Gt,[Ht,(0,i._)("li",Qt,[(0,i.Wm)(c,{to:"/bom"},{default:(0,i.w5)((()=>[Yt,(0,i.Uk)(" Bill Of Materials ")])),_:1})]),Kt])])])]),(0,i._)("section",Jt,[(0,i._)("div",Xt,[(0,i._)("div",ea,[ta,(0,i.wy)((0,i._)("select",{class:"form-select",id:"projectDropdown","onUpdate:modelValue":t[0]||(t[0]=e=>n.selectedProject=e),onChange:t[1]||(t[1]=(...t)=>e.loadProducts&&e.loadProducts(...t)),required:""},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.projects,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e.id,value:e.id},(0,_t.zw)(e.name),9,aa)))),128))],544),[[s.bM,n.selectedProject]])]),(0,i._)("div",sa,[ia,(0,i.wy)((0,i._)("select",{class:"form-select",id:"productCode","onUpdate:modelValue":t[2]||(t[2]=e=>n.selectedProduct=e),required:""},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.filteredProducts,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e.id,value:e.id},(0,_t.zw)(e.name),9,la)))),128))],512),[[s.bM,n.selectedProduct]])])]),(0,i._)("div",na,[(0,i._)("div",oa,[ca,(0,i.wy)((0,i._)("input",{type:"text",class:"form-control",id:"bomType","onUpdate:modelValue":t[3]||(t[3]=e=>n.bomType=e),required:""},null,512),[[s.nr,n.bomType]])]),(0,i._)("div",da,[ra,(0,i.wy)((0,i._)("input",{type:"text",class:"form-control",id:"bomRevNo","onUpdate:modelValue":t[4]||(t[4]=e=>n.bomRevNo=e),onInput:t[5]||(t[5]=(...e)=>o.validateBomRevNo&&o.validateBomRevNo(...e)),required:""},null,544),[[s.nr,n.bomRevNo]]),""===n.bomRevNo||n.isValidBomRevNo?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("p",ma," BOM REV No should be a decimal type with a minimum of 1.0. "))])]),(0,i._)("div",ua,[(0,i._)("div",ha,[pa,(0,i.wy)((0,i._)("input",{type:"date",class:"form-control",id:"issueDate","onUpdate:modelValue":t[6]||(t[6]=e=>n.issueDate=e),required:""},null,512),[[s.nr,n.issueDate]])])])]),(0,i._)("div",ba,[ga,(0,i._)("div",fa,[(0,i._)("input",{type:"file",class:"custom-file-input",id:"bomFileInput",onChange:t[7]||(t[7]=e=>o.handleFileUpload(e,"bom")),accept:".xls, .xlsx",required:""},null,32),(0,i._)("label",_a,(0,_t.zw)(n.uploadedFileNameBOM||"Select file"),1)]),va,ya,(0,i._)("div",ka,[(0,i._)("input",{type:"file",class:"custom-file-input",id:"pcbFileInput",onChange:t[8]||(t[8]=e=>o.handleFileUpload(e,"pcb")),accept:".xls, .xlsx,.pdf",required:""},null,32),(0,i._)("label",wa,(0,_t.zw)(n.uploadedFileNamePCB||"Select file"),1)])]),Ca,(0,i._)("div",Da,[(0,i._)("button",{type:"button",class:"btn btn-primary",onClick:t[9]||(t[9]=(...e)=>o.submitForm&&o.submitForm(...e))}," Upload BOM ")]),(0,i.Wm)(d,{show:n.isCustomModalVisible,onCloseModal:o.handleCloseModal,onHandleModalSubmitted:o.handleModalSubmission,onDismissModal:o.handleCloseModal},null,8,["show","onCloseModal","onHandleModalSubmitted","onDismissModal"])]))}const Ma={key:0,class:"modal fade show",id:"customBomRevisionModal",tabindex:"-1","aria-labelledby":"customBomRevisionLabel","aria-modal":"true",role:"dialog",style:{display:"block"}},Pa={class:"modal-dialog",role:"document"},Ia={class:"modal-content"},xa={class:"modal-header"},La=(0,i._)("h4",{class:"modal-title",id:"customBomRevisionLabel"},[(0,i._)("strong",{style:{color:"#333"}}," Reason for BOM Revision")],-1),Ra={class:"modal-body"},Ba={class:"row justify-content-center"},$a={class:"needs-validation",novalidate:""},Ea={class:"mb-4"},Ua=(0,i._)("div",{class:"invalid-feedback"},"Reason is required.",-1),Na={class:"button mb-2"};function Ta(e,t,a,l,n,o){return(0,i.wg)(),(0,i.iD)("div",null,[a.show?((0,i.wg)(),(0,i.iD)("div",Ma,[(0,i._)("div",Pa,[(0,i._)("div",Ia,[(0,i._)("div",xa,[La,(0,i._)("button",{type:"button",class:"btn-close","aria-label":"Close",onClick:t[0]||(t[0]=(...e)=>o.closeModal&&o.closeModal(...e))})]),(0,i._)("div",Ra,[(0,i._)("div",Ba,[(0,i._)("form",$a,[(0,i._)("div",Ea,[(0,i.wy)((0,i._)("textarea",{"onUpdate:modelValue":t[1]||(t[1]=e=>n.bom_rev_change_note=e),class:"form-control",id:"revisionReason",required:"",placeholder:"Please provide the reason for the change...",style:{height:"150px"}},null,512),[[s.nr,n.bom_rev_change_note]]),Ua]),(0,i._)("div",Na,[(0,i._)("button",{class:"btn btn-outline-success btn-block",type:"button",onClick:t[2]||(t[2]=(...e)=>o.submitCustomBomRevision&&o.submitCustomBomRevision(...e))}," Submit ")])])])])])])])):(0,i.kq)("",!0),a.show?((0,i.wg)(),(0,i.iD)("div",{key:1,class:"modal-backdrop fade show",id:"customBomRevisionBackdrop",style:{display:"block"},onClick:t[3]||(t[3]=(...e)=>o.closeModal&&o.closeModal(...e))})):(0,i.kq)("",!0)])}var Oa={data(){return{bom_rev_change_note:""}},props:{show:{type:Boolean,required:!0,default:!1}},methods:{closeModal(){document.getElementById("customBomRevisionBackdrop").style.display="none",document.getElementById("customBomRevisionModal").style.display="none",document.getElementById("customBomRevisionModal").classList.remove("show")},submitCustomBomRevision(){this.$emit("handle-modal-submitted",this.bom_rev_change_note),this.closeModal()}}};const Aa=(0,ut.Z)(Oa,[["render",Ta]]);var qa=Aa,Fa={components:{CustomModal:qa},data(){return{productName:"",productCode:"",bomType:"",bomRevNo:"",isValidBomRevNo:!0,issueDate:"",batchQuantity:1,productRevNo:"",uploadedFileName:null,uploadedFile:null,uploadedFileNameBOM:"",uploadedFileNamePCB:"",uploadedFileBOM:null,uploadedFilePCB:null,selectedProject:null,selectedProduct:null,projects:[],products:[],bom_rev_change_note:"",isCustomModalVisible:!1}},computed:{filteredProducts(){if(this.products&&this.projects&&this.products.length&&this.projects.length){if(console.log("selectedProject",this.selectedProject),null!==this.selectedProject){const e=this.products.filter((e=>{const t=e.project;return t===this.selectedProject}));return console.log("Filtered Products:",e),e}return console.log("All Products:",this.products),[]}return console.log("No Products or Projects available."),[]}},mounted(){this.getData()},methods:{openCustomModal(){this.isCustomModalVisible=!0},handleCloseModal(){this.isCustomModalVisible=!1},validateBomRevNo(){const e=/^\d+\.\d+$/;e.test(this.bomRevNo)?this.isValidBomRevNo=!0:this.isValidBomRevNo=!1},async getData(){try{const e=await tt.Z.get("store/create-order/");console.log(e.data),this.projects=e.data.projects,this.projects=e.data.projects,this.products=e.data.products,console.log(this.projects)}catch(e){console.error("Error fetching projects:",e)}},async submitForm(){this.$store.commit("setIsLoading",!0);const e=new FormData;e.append("project_id",this.selectedProject),e.append("product_id",this.selectedProduct),e.append("bom_type",this.bomType),e.append("bom_rev_no",this.bomRevNo),e.append("issue_date",this.issueDate),e.append("bom_file",this.uploadedFileBOM),e.append("bom_rev_change_note",this.bom_rev_change_note),e.append("pcb_file",this.uploadedFilePCB),console.log("FormData:",e);try{const t=await tt.Z.post("store/handle-bom-cases/",e,{headers:{"Content-Type":"multipart/form-data"}});if(console.log("Response from handle-bom-cases API:",t.data),200===t.status)console.log("hiiiiiiii",t.data.message),this.$notify({title:`BOM Already Exists With Rev No: ${t.data.bom_rev_number}`,type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1);else if(201===t.status)console.log("inside case two block"),console.log(t.data.message),this.$store.commit("setIsLoading",!1),console.log("Before setting isCustomModalVisible:",this.isCustomModalVisible),this.isCustomModalVisible=!0,console.log("After setting isCustomModalVisible:",this.isCustomModalVisible);else if(204===t.status){console.log(t.data.message),this.$store.commit("setIsLoading",!0);const a=await tt.Z.post("store/upload-bom/",e,{headers:{"Content-Type":"multipart/form-data"}});console.log(a.data);const s=a.data.task_id;"IN PROGRESS"===a.data.task_status||"PENDING"===a.data.task_status?setTimeout((()=>{this.checkTaskStatus(s)}),1e4):"SUCCESS"===a.data.task_status?(this.$notify({title:"BOM Uploaded Successfully",type:"bg-success-subtle text-success",duration:"5000"}),this.$store.commit("setIsLoading",!1),this.$router.push("/bom")):(this.$notify({title:"BOM Upload Failed",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1))}}catch(t){console.log("error:",t),this.$notify({title:"An error occurred, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1)}},async uploadBom(e){this.$store.commit("setIsLoading",!0);try{const t=await tt.Z.post("store/upload-bom/",e,{headers:{"Content-Type":"multipart/form-data"}});console.log(t.data);const a=t.data.task_id;"IN PROGRESS"===t.data.task_status||"PENDING"===t.data.task_status?setTimeout((()=>{this.checkTaskStatus(a)}),1e4):"SUCCESS"===t.data.task_status?(this.$notify({title:"BOM Uploaded Successfully",type:"bg-success-subtle text-success",duration:"5000"}),this.$store.commit("setIsLoading",!1),this.$router.push("/bom")):(this.$notify({title:"BOM Upload Failed",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1))}catch(t){console.log("error:",t),this.$notify({title:"An error occurred, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1)}},async checkTaskStatus(e){try{const t=await tt.Z.get(`store/check-task-status/${e}/`);"IN PROGRESS"===t.data.task_status||"PENDING"===t.data.task_status?setTimeout((()=>{this.checkTaskStatus(e)}),5e3):"SUCCESS"===t.data.task_status?(this.$notify({title:"BOM Uploaded Successfully",type:"bg-success-subtle text-success",duration:"5000"}),this.$router.push("/bom"),this.$store.commit("setIsLoading",!1)):(this.$notify({title:"BOM Upload Failed",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1))}catch(t){console.log("error:",t),this.$notify({title:"An error occurred, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1)}},handleFileUpload(e,t){const a=e.target.files[0];a&&(console.log("Uploaded file:",a),"bom"===t?(console.log("BOM file uploaded:",a.name),this.uploadedFileNameBOM=a.name,this.uploadedFileBOM=a):"pcb"===t&&(console.log("PCB file uploaded:",a.name),this.uploadedFileNamePCB=a.name,this.uploadedFilePCB=a),this.uploadedFileBOM&&console.log("Uploaded BOM file:",this.uploadedFileBOM),this.uploadedFilePCB&&console.log("Uploaded PCB file:",this.uploadedFilePCB))},async handleModalSubmission(e){console.log("inside handleModal Submisison which will revece CHANGE NOTE IN ARFUMENT"),console.log("this is the change note ",e);const t=new FormData;t.append("project_id",this.selectedProject),t.append("product_id",this.selectedProduct),t.append("bom_type",this.bomType),t.append("bom_rev_no",this.bomRevNo),t.append("issue_date",this.issueDate),t.append("bom_file",this.uploadedFileBOM),t.append("pcb_file",this.uploadedFilePCB),t.append("bom_rev_change_note",e),console.log("FormData:",t),await this.uploadBom(t)},saveChanges(){this.bom_rev_change_note=this.bom_rev_change_note.trim(),""!==this.bom_rev_change_note?(console.log("BOM Revision Change Note:",this.bom_rev_change_note),this.formData.append(this.bom_rev_change_note),this.bom_rev_change_note=""):console.log("Error: BOM Revision Change Note is empty")}}};const ja=(0,ut.Z)(Fa,[["render",Sa],["__scopeId","data-v-02bacf85"]]);var Wa=ja;const Va={key:0,class:"container text-center"},za=(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1),Za=(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1),Ga=[za,Za],Ha={key:1,class:"container"},Qa={class:"row align-items-center"},Ya=(0,i.uE)('<div class="col-md-6 mt-4"><div class="d-flex align-items-center"><h2 class="mb-0">Bill Of Materials</h2><span class="ms-3 fs-4 text-muted">|</span><nav aria-label="breadcrumb" class="d-inline-block ms-3"><ol class="breadcrumb bg-transparent m-0 p-0"><li class="breadcrumb-item"><a href="/"><i class="fas fa-home me-1"></i>Home</a></li><li class="breadcrumb-item active" aria-current="page"><i class="fas fa-clipboard-list me-1"></i> Bill Of Materials </li></ol></nav></div></div>',1),Ka={class:"col-md-6 d-flex justify-content-end mt-4"};function Ja(e,t,a,s,l,n){const o=(0,i.up)("router-link"),c=(0,i.up)("BomDetailsTable");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",Va,Ga)):((0,i.wg)(),(0,i.iD)("div",Ha,[(0,i._)("div",Qa,[Ya,(0,i._)("div",Ka,[(0,i.Wm)(o,{to:"/bom/upload",class:"btn btn-primary btn-sm ms-2"},{default:(0,i.w5)((()=>[(0,i.Uk)(" Upload BOM ")])),_:1})])]),(0,i.Wm)(c,{style:{"margin-top":"20px"},boms:l.boms,onRowClicked:n.handleRowClicked,onRowSelected:n.handleRowSelected},null,8,["boms","onRowClicked","onRowSelected"])]))}const Xa=e=>((0,i.dD)("data-v-1f2a71f0"),e=e(),(0,i.Cn)(),e),es={class:"modal fade",id:"bomRevisionNoteModal",tabindex:"-1","aria-labelledby":"bomRevisionNoteModalLabel","aria-hidden":"true"},ts={class:"modal-dialog"},as={class:"modal-content"},ss=Xa((()=>(0,i._)("div",{class:"modal-header"},[(0,i._)("h5",{class:"modal-title",id:"bomRevisionNoteModalLabel"}," BOM Revision Note "),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),is={class:"modal-body"};function ls(e,t,a,s,l,n){const o=(0,i.up)("ag-grid-vue");return(0,i.wg)(),(0,i.iD)("div",null,[a.boms.length>0?((0,i.wg)(),(0,i.j4)(o,{key:0,style:{height:"500px"},class:"ag-theme-quartz",rowData:a.boms,defaultColDef:l.defaultColDef,columnDefs:l.colDefs,pagination:!0,onRowClicked:n.onRowClicked,onRowSelected:n.onRowSelected},null,8,["rowData","defaultColDef","columnDefs","onRowClicked","onRowSelected"])):(0,i.kq)("",!0),(0,i._)("div",es,[(0,i._)("div",ts,[(0,i._)("div",as,[ss,(0,i._)("div",is,[(0,i._)("p",null,(0,_t.zw)(l.selectedBomRevisionNote),1)])])])])])}var ns=a(6732),os={name:"BombDetailsTable",components:{AgGridVue:ns.n},props:{boms:{type:Array,required:!0}},data(){return{colDefs:[{field:"id",hide:!0},{field:"product.project.name",headerCheckboxSelection:!0,checkboxSelection:!0,headerName:"Project Name"},{field:"product.name",headerName:"Product Name"},{field:"product.product_code",headerName:"Product Code"},{field:"bom_type.name",headerName:"BOM Type"},{field:"issue_date",headerName:"Issue Date"},{field:"product.product_rev_number",headerName:"Product Rev No"},{field:"bom_rev_number",headerName:"BOM Rev No"},{headerName:"BOM Revision Note",cellRenderer:this.bomRevisionNoteRenderer},{headerName:"Actions",cellRenderer:this.editButtonRenderer}],defaultColDef:{filter:!0,sortable:!0,resizable:!0,autoSize:!0},selectedRows:[],selectedBomRevisionNote:""}},methods:{onRowClicked(e){this.$emit("rowClicked",e.data),this.$router.push(`/bom/edit/${e.data.id}`)},onRowSelected(e){e.node.isSelected()&&this.$emit("rowSelected",e.node.data)},onSelectionChanged(){this.$refs.agGrid&&this.$refs.agGrid.api&&(this.selectedRows=this.$refs.agGrid.api.getSelectedRows())},editButtonRenderer(e){console.log(e);const t=document.createElement("button");return t.innerHTML='<i class="fas fa-edit"></i>',t.classList.add("btn","btn-primary"),t.addEventListener("click",(()=>this.onEditClick(e.data.id))),t},onEditClick(e){this.$router.push(`/bom/edit/${e}`)},bomRevisionNoteRenderer(e){const t=document.createElement("div");if(e.data.change_note){const a=document.createElement("button");a.innerHTML='<i class="fas fa-eye"></i>',a.classList.add("btn","btn-secondary"),a.dataset.bsToggle="modal",a.dataset.bsTarget="#bomRevisionNoteModal",a.addEventListener("click",(t=>{t.stopPropagation(),this.loadBomRevisionChangeNoteInModal(e.data)})),t.appendChild(a)}else{const e=document.createElement("span");e.innerText="No Change",e.classList.add("text-muted"),t.appendChild(e)}return t},loadBomRevisionChangeNoteInModal(e){console.log("to set the data in the modal",e),console.log("revision note",e.change_note),this.selectedBomRevisionNote=e.change_note}}};const cs=(0,ut.Z)(os,[["render",ls],["__scopeId","data-v-1f2a71f0"]]);var ds=cs,rs={components:{BomDetailsTable:ds},data(){return{boms:[]}},methods:{async fetchData(){try{this.$store.commit("setIsLoading",!0);const e=await tt.Z.get("store/get-boms/");console.log("response.data",e.data),this.boms=e.data.boms,console.log("boms",this.boms),this.$store.commit("setIsLoading",!1)}catch(e){console.error("Error fetching BOM data:",e),this.$store.commit("setIsLoading",!1)}},handleRowClicked(e){console.log("Clicked Row:",e)},handleRowSelected(e){console.log("Row Selected:",e),this.selectedRow=e}},mounted(){this.fetchData()}};const ms=(0,ut.Z)(rs,[["render",Ja]]);var us=ms;const hs=e=>((0,i.dD)("data-v-0fd0776e"),e=e(),(0,i.Cn)(),e),ps={key:0,class:"container text-center"},bs=hs((()=>(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1))),gs=hs((()=>(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1))),fs=[bs,gs],_s={key:1,class:"container"},vs={class:"row align-items-center"},ys={class:"d-flex align-items-center mt-4"},ks=hs((()=>(0,i._)("h2",{class:"mb-0"},"BOM Details",-1))),ws=hs((()=>(0,i._)("span",{class:"ms-3 fs-4 text-muted"},"|",-1))),Cs={"aria-label":"breadcrumb",class:"d-inline-block ms-3"},Ds={class:"breadcrumb bg-transparent m-0 p-0"},Ss=hs((()=>(0,i._)("li",{class:"breadcrumb-item"},[(0,i._)("a",{href:"/"},[(0,i._)("i",{class:"fas fa-home me-1"}),(0,i.Uk)("Home")])],-1))),Ms={class:"breadcrumb-item"},Ps=hs((()=>(0,i._)("i",{class:"fas fa-clipboard-list me-1"},null,-1))),Is=hs((()=>(0,i._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,i._)("i",{class:"fas fa-list-alt me-1"}),(0,i.Uk)(" Bom Details ")],-1))),xs={class:"card",style:{"margin-top":"20px",padding:"10px"}},Ls={class:"card-body"},Rs={class:"row"},Bs={class:"col-md-4 mb-2"},$s=hs((()=>(0,i._)("label",{class:"fw-bold"},"Project Name:",-1))),Es={key:0},Us={class:"col-md-4 mb-2"},Ns=hs((()=>(0,i._)("label",{class:"fw-bold"},"BOM Type:",-1))),Ts={key:0},Os={class:"col-md-4 mb-2"},As=hs((()=>(0,i._)("label",{class:"fw-bold"},"Issue Date:",-1))),qs={key:0},Fs={class:"col-md-4 mb-2"},js=hs((()=>(0,i._)("label",{class:"fw-bold"},"Product Name:",-1))),Ws={key:0},Vs={class:"col-md-4 mb-2"},zs=hs((()=>(0,i._)("label",{class:"fw-bold"},"BOM Rev No:",-1))),Zs={key:0},Gs={class:"col-md-4 mb-2"},Hs=hs((()=>(0,i._)("label",{class:"fw-bold"},"Product Rev No:",-1))),Qs={key:0},Ys=hs((()=>(0,i._)("div",{class:"mt-4"},null,-1)));function Ks(e,t,a,s,l,n){const o=(0,i.up)("router-link"),c=(0,i.up)("BomItemsTable");return(0,i.wg)(),(0,i.iD)("div",null,[e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",ps,fs)):((0,i.wg)(),(0,i.iD)("div",_s,[(0,i._)("div",vs,[(0,i._)("div",ys,[ks,ws,(0,i._)("nav",Cs,[(0,i._)("ol",Ds,[Ss,(0,i._)("li",Ms,[(0,i.Wm)(o,{to:"/bom"},{default:(0,i.w5)((()=>[Ps,(0,i.Uk)("Bill of Materials")])),_:1})]),Is])]),(0,i._)("button",{class:"btn-sm btn-warning ml-auto",onClick:t[0]||(t[0]=(...e)=>n.downloadPCBReport&&n.downloadPCBReport(...e))}," Open PCB Report "),(0,i._)("button",{class:"btn-sm btn-primary ml-3",onClick:t[1]||(t[1]=(...e)=>n.downloadBOM&&n.downloadBOM(...e))}," Download BOM ")])]),(0,i._)("div",xs,[(0,i._)("div",Ls,[(0,i._)("div",Rs,[(0,i._)("div",Bs,[$s,l.bom.product?((0,i.wg)(),(0,i.iD)("div",Es,(0,_t.zw)(l.bom.product.project.name),1)):(0,i.kq)("",!0)]),(0,i._)("div",Us,[Ns,l.bom.bom_type?((0,i.wg)(),(0,i.iD)("div",Ts,(0,_t.zw)(l.bom.bom_type.name),1)):(0,i.kq)("",!0)]),(0,i._)("div",Os,[As,l.bom.issue_date?((0,i.wg)(),(0,i.iD)("div",qs,(0,_t.zw)(l.bom.issue_date),1)):(0,i.kq)("",!0)]),(0,i._)("div",Fs,[js,l.bom.product?((0,i.wg)(),(0,i.iD)("div",Ws,(0,_t.zw)(l.bom.product.name),1)):(0,i.kq)("",!0)]),(0,i._)("div",Vs,[zs,l.bom.bom_rev_number?((0,i.wg)(),(0,i.iD)("div",Zs,(0,_t.zw)(l.bom.bom_rev_number),1)):(0,i.kq)("",!0)]),(0,i._)("div",Gs,[Hs,l.bom.product?((0,i.wg)(),(0,i.iD)("div",Qs,(0,_t.zw)(l.bom.product.product_rev_number),1)):(0,i.kq)("",!0)])])])]),Ys,(0,i.Wm)(c,{bom:l.bom.bom_line_items,onRowClicked:n.handleRowClicked,onRowSelected:n.handleRowSelected},null,8,["bom","onRowClicked","onRowSelected"])]))])}function Js(e,t,a,s,l,n){const o=(0,i.up)("ag-grid-vue");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(o,{style:{height:"500px"},class:"ag-theme-quartz",rowData:a.bom,defaultColDef:l.defaultColDef,columnDefs:l.colDefs,pagination:!0,onRowClicked:n.onRowClicked,frameworkComponents:{editButtonRenderer:n.editButtonRenderer}},null,8,["rowData","defaultColDef","columnDefs","onRowClicked","frameworkComponents"])])}var Xs={name:"BomItemDetails",components:{AgGridVue:ns.n},props:{bom:{type:Array,required:!0}},data(){return{colDefs:[{headerName:"ID",field:"id",hide:!0},{headerName:" Level",field:"level"},{headerName:"VEPL Part Number",field:"part_number"},{headerName:"Priority Level",field:"priority_level"},{headerName:"Value",field:"value"},{headerName:"PCB Footprint",field:"pcb_footprint"},{headerName:"Type",field:"line_item_type.name"},{headerName:"Description",field:"description"},{headerName:"References",valueGetter:function(e){const t=e.data.references;if(t&&t.length>0){const e=t.map((e=>e.name));return e.join(", ")}return""}},{headerName:"Manufacturer Parts",valueGetter:function(e){const t=e.data.manufacturer_parts;if(t&&t.length>0){const e=t.map((e=>{const t=e.manufacturer;return t?`${e.part_number} - ${t.name}`:""}));return e.join(", ")}return""}},{headerName:"Customer Part Number",field:"customer_part_number"},{headerName:"Quantity",field:"quantity"},{headerName:"UOM",field:"uom"},{headerName:"Assembly Stage",field:"assembly_stage.name"},{headerName:"ECN",field:"ecn"},{headerName:"MSL",field:"msl"},{headerName:"Remarks",field:"remarks"}],defaultColDef:{filter:!0,sortable:!0,resizable:!0,autoSize:!0},selectedRows:[]}},mounted(){},methods:{onRowClicked(e){this.$emit("rowClicked",e.data)},onRowSelected(e){e.node.isSelected()&&this.$emit("rowSelected",e.node.data)},editButtonRenderer(e){const t=document.createElement("button");return t.innerHTML='<i class="fas fa-edit"></i>',t.classList.add("btn","btn-primary"),t.addEventListener("click",(()=>this.onEditClick(e.data.id))),t},onEditClick(e){this.$router.push({name:"BomLineItemEdit",params:{id:e}})}}};const ei=(0,ut.Z)(Xs,[["render",Js]]);var ti=ei,ai={components:{BomItemsTable:ti},data(){return{bom:""}},methods:{handleRowClicked(e){console.log("Row clicked:",e)},handleRowSelected(e){console.log("Row selected:",e)},async fetchData(){this.$store.commit("setIsLoading",!0),await tt.Z.get(`store/get-boms/${this.$route.params.id}/`).then((e=>{console.log(e.data),this.bom=e.data.bom,this.$store.commit("setIsLoading",!1)})).catch((e=>{console.error("Error fetching data:",e),this.$store.commit("setIsLoading",!1)}))},downloadBOM(){try{const e=this.bom.bom_file_url,t=document.createElement("a");t.href=e,t.download=this.bom.bom_file_name,document.body.appendChild(t),t.click(),document.body.removeChild(t)}catch(e){console.error("Error downloading BOM:",e)}},downloadPCBReport(){try{const e=this.bom.pcb_file_url;if(!e)return void alert("PCB report is not available, as it was not attached.");const t=document.createElement("a");t.href=e,t.target="_blank",document.body.appendChild(t),t.click(),document.body.removeChild(t)}catch(e){console.error("Error opening PCB report in a new tab:",e)}}},mounted(){this.fetchData()}};const si=(0,ut.Z)(ai,[["render",Ks],["__scopeId","data-v-0fd0776e"]]);var ii=si;const li={key:0,class:"container text-center"},ni=(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1),oi=(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1),ci=[ni,oi],di={key:1,class:"container"},ri={class:"row align-items-center"},mi=(0,i.uE)('<div class="col-md-6 mt-4"><div class="d-flex align-items-center"><h2 class="mb-0">Checklist</h2><span class="ms-3 fs-4 text-muted">|</span><nav aria-label="breadcrumb" class="d-inline-block ms-3"><ol class="breadcrumb bg-transparent m-0 p-0"><li class="breadcrumb-item"><a href="/"><i class="fas fa-home me-1"></i>Home</a></li><li class="breadcrumb-item active" aria-current="page"><i class="fas fa-list-alt me-1"></i> Checklist </li></ol></nav></div></div>',1),ui={class:"col-md-6 mt-4 text-end"},hi={class:"container has-text-centered"},pi={class:"d-flex"},bi=["disabled"],gi=["disabled"],fi=["disabled"],_i={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},vi={class:"modal-dialog"},yi={class:"modal-content"},ki=(0,i._)("div",{class:"modal-header"},[(0,i._)("h1",{class:"modal-title fs-5",id:"exampleModalLabel"}," Fill the Required Batch Quantity "),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),wi={class:"modal-body"},Ci={class:"modal-footer"},Di=(0,i._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1);function Si(e,t,a,l,n,o){const c=(0,i.up)("BomDetailsTableWithoutEdit");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",li,ci)):((0,i.wg)(),(0,i.iD)("div",di,[(0,i._)("div",ri,[mi,(0,i._)("div",ui,[(0,i._)("div",hi,[(0,i._)("div",pi,[(0,i._)("button",{type:"button",disabled:!n.isButtonEnabled,class:"btn btn-primary btn-sm","data-bs-toggle":"modal","data-bs-target":"#exampleModal"}," Generate New Checklist ",8,bi),(0,i._)("button",{onClick:t[0]||(t[0]=(...e)=>o.checkExistingChecklist&&o.checkExistingChecklist(...e)),disabled:!n.isButtonEnabled,class:"btn btn-warning btn-sm ms-2"}," View Ongoing Checklist ",8,gi),(0,i._)("button",{onClick:t[1]||(t[1]=(...e)=>o.viewGeneratedChecklists&&o.viewGeneratedChecklists(...e)),disabled:!n.isButtonEnabled,class:"btn btn-success btn-sm ms-2"}," View Generated Checklists ",8,fi)])])])]),(0,i.Wm)(c,{style:{"margin-top":"20px"},rowData:n.rowData,onRowClicked:o.handleRowClicked,onRowSelected:o.handleRowSelected,onRowDeselected:o.handleRowDeselected},null,8,["rowData","onRowClicked","onRowSelected","onRowDeselected"]),(0,i._)("div",_i,[(0,i._)("div",vi,[(0,i._)("div",yi,[ki,(0,i._)("div",wi,[(0,i.wy)((0,i._)("input",{type:"number",class:"form-control",id:"requiredBatchQuantity","onUpdate:modelValue":t[2]||(t[2]=e=>n.batch_quantity=e),placeholder:"Enter Batch Quantity",min:"1"},null,512),[[s.nr,n.batch_quantity]])]),(0,i._)("div",Ci,[Di,(0,i._)("button",{onClick:t[3]||(t[3]=(...e)=>o.checkAndGenerateChecklist&&o.checkAndGenerateChecklist(...e)),type:"button",class:"btn btn-primary","data-bs-dismiss":"modal"}," Generate Checklist ")])])])])]))}function Mi(e,t,a,s,l,n){const o=(0,i.up)("ag-grid-vue");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(o,{style:{height:"500px"},class:"ag-theme-quartz",rowData:a.rowData,defaultColDef:l.defaultColDef,columnDefs:l.colDefs,pagination:!0,rowSelection:"single",onRowClicked:n.onRowClicked,onSelectionChanged:n.onSelectionChanged},null,8,["rowData","defaultColDef","columnDefs","onRowClicked","onSelectionChanged"])])}var Pi={name:"App",components:{AgGridVue:ns.n},props:{rowData:{type:Array,required:!0}},data(){return{colDefs:[{field:"id",hide:!0},{field:"product.name",headerCheckboxSelection:!0,checkboxSelection:!0,headerName:"Product Name"},{field:"product.product_code",headerName:"Product Code"},{field:"bom_type.name",headerName:"BOM Type"},{field:"bom_rev_number",headerName:"BOM Rev No"},{field:"issue_date",headerName:"Issue Date"},{field:"product.product_rev_number",headerName:"Product Rev No"}],defaultColDef:{filter:!0,sortable:!0,resizable:!0,autoSize:!0},selectedRows:[]}},methods:{onRowClicked(e){this.$emit("rowClicked",e.data)},onSelectionChanged(e){const t=e.api.getSelectedRows(),a=t.length>0?t[0]:null;a?this.$emit("rowSelected",a):this.$emit("rowDeselected")},onEditClick(e){this.$router.push(`/bom/edit/${e}`)}}};const Ii=(0,ut.Z)(Pi,[["render",Mi]]);var xi=Ii,Li={components:{BomDetailsTableWithoutEdit:xi},data(){return{rowData:[],selectedRow:null,clickedRowId:null,isButtonEnabled:!1,isExisting:!1,isActive:!1,batch_quantity:1}},methods:{async fetchData(){try{this.$store.commit("setIsLoading",!0);const e=await tt.Z.get("store/get-boms/");this.rowData=e.data.boms,console.log(e.data.boms),this.$store.commit("setIsLoading",!1)}catch(e){console.error("Error fetching BOM data:",e),this.$store.commit("setIsLoading",!1)}},handleRowClicked(e){console.log("Clicked Row:",e)},handleRowSelected(e){console.log("Row Selected:",e),e&&e.id&&(this.selectedRow=e,this.clickedRowId=e.id,this.isButtonEnabled=!0)},handleRowDeselected(){console.log("Row Deselected:"),this.isButtonEnabled=!1},async checkAndGenerateChecklist(){this.$store.commit("setIsLoading",!0),await tt.Z.post(`store/check-existing-checklist/${this.clickedRowId}/`).then((e=>{console.log(e.data),this.isActive=e.data.is_active,this.isExisting=e.data.is_existing,this.isExisting?this.$notify({title:"There is already an active ongoing checklist for this bom, please end that checklist by viewing the ongoing checklist to generate a new one.",type:"bg-danger-subtle text-danger",duration:"5000"}):this.generateChecklist()})).catch((e=>{console.log("error:",e),this.$notify({title:"An error occured, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"})})).finally((()=>{this.$store.commit("setIsLoading",!1)}))},async generateChecklist(){this.$store.commit("setIsLoading",!0);const e={batch_quantity:this.batch_quantity};await tt.Z.post(`store/generate-new-checklist/${this.clickedRowId}/`,e).then((e=>{console.log(e.data),this.$router.push(`/begin-checklist/${this.clickedRowId}`)})).catch((e=>{console.log("error:",e),this.$notify({title:e.response.data.error,type:"bg-danger-subtle text-danger",duration:"5000"})})).finally((()=>{this.$store.commit("setIsLoading",!1)}))},async checkExistingChecklist(){this.$store.commit("setIsLoading",!0),await tt.Z.post(`store/check-existing-checklist/${this.clickedRowId}/`).then((e=>{console.log(e.data),this.isActive=e.data.is_active,this.isExisting=e.data.is_existing,this.isExisting?this.isActive?this.$router.push(`/begin-checklist/${this.clickedRowId}`):this.$notify({title:"No active checklist found for this bom, please generate a new checklist.",type:"bg-danger-subtle text-danger",duration:"5000"}):this.$notify({title:"No ongoing checklist found for this bom, please generate a new checklist",type:"bg-danger-subtle text-danger",duration:"5000"})})).catch((e=>{console.log("error:",e),this.$notify({title:"An error occurred, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"})})).finally((()=>{this.$store.commit("setIsLoading",!1)}))},viewOngoingChecklists(){this.clickedRowId&&this.$router.push(`/begin-checklist/${this.clickedRowId}`)},viewGeneratedChecklists(){this.clickedRowId&&this.$router.push(`/generated-checklists/${this.clickedRowId}`)}},mounted(){this.fetchData()}};const Ri=(0,ut.Z)(Li,[["render",Si]]);var Bi=Ri;const $i=e=>((0,i.dD)("data-v-090ed38e"),e=e(),(0,i.Cn)(),e),Ei={key:0,class:"container text-center"},Ui=$i((()=>(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1))),Ni=$i((()=>(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1))),Ti=[Ui,Ni],Oi={key:1,class:"container"},Ai={class:"row align-items-center"},qi={class:"col-md-6 mt-4"},Fi={class:"d-flex align-items-center"},ji=$i((()=>(0,i._)("h2",{class:"mb-0"},"Checklist",-1))),Wi=$i((()=>(0,i._)("span",{class:"ms-3 fs-4 text-muted me-3"},"|",-1))),Vi={"aria-label":"breadcrumb"},zi={class:"breadcrumb bg-transparent m-0 p-0 justify-content-end"},Zi=$i((()=>(0,i._)("li",{class:"breadcrumb-item"},[(0,i._)("a",{href:"/"},[(0,i._)("i",{class:"fas fa-home me-1"}),(0,i.Uk)("Home")])],-1))),Gi={class:"breadcrumb-item active","aria-current":"page"},Hi=$i((()=>(0,i._)("i",{class:"fas fa-list-alt me-1"},null,-1))),Qi=$i((()=>(0,i._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,i._)("i",{class:"fas fa-spinner me-1"}),(0,i.Uk)(" Ongoing Checklist ")],-1))),Yi={class:"col-md-6 mt-4"},Ki={class:"container"},Ji={class:"d-flex justify-content-end"},Xi=$i((()=>(0,i._)("button",{type:"button","data-bs-toggle":"modal","data-bs-target":"#endChecklistModal",class:"btn btn-danger"}," End Checklist ",-1))),el={class:"modal fade",id:"generateLabelModal",tabindex:"-1","aria-labelledby":"generateLabelModalLabel","aria-hidden":"true"},tl={class:"modal-dialog"},al={class:"modal-content"},sl=$i((()=>(0,i._)("div",{class:"modal-header"},[(0,i._)("h1",{class:"modal-title fs-5",id:"generateLabelModalLabel"}," Generate Label "),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),il={class:"modal-body"},ll={key:0},nl={key:0,id:"printable-content"},ol=["src"],cl={key:1},dl={key:1},rl={class:"modal-footer"},ml=$i((()=>(0,i._)("button",{type:"button",class:"btn btn-dark","data-bs-dismiss":"modal"}," Cancel ",-1))),ul={key:0},hl={class:"modal fade",id:"endChecklistModal",tabindex:"-1","aria-labelledby":"endChecklistModalLabel","aria-hidden":"true"},pl={class:"modal-dialog"},bl={class:"modal-content"},gl=$i((()=>(0,i._)("div",{class:"modal-header"},[(0,i._)("h1",{class:"modal-title fs-5",id:"endChecklistModalLabel"}," End Checklist "),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),fl=$i((()=>(0,i._)("div",{class:"modal-body"}," Are you sure you want to end this checklist? ",-1))),_l={class:"modal-footer"},vl=$i((()=>(0,i._)("button",{type:"button",class:"btn btn-dark","data-bs-dismiss":"modal"}," Cancel ",-1))),yl={class:"card border-primary mb-4 mt-4"},kl=$i((()=>(0,i._)("div",{class:"card-header bg-primary text-white"},[(0,i._)("h4",{class:"mb-0"},"Active Bom Details")],-1))),wl={class:"card-body"},Cl={class:"row"},Dl={key:0,class:"col"},Sl=$i((()=>(0,i._)("strong",null,"Project Name:",-1))),Ml={key:1,class:"col"},Pl=$i((()=>(0,i._)("strong",null,"Product Name:",-1))),Il={class:"col"},xl=$i((()=>(0,i._)("strong",null,"BOM Rev No:",-1))),Ll={class:"col"},Rl=$i((()=>(0,i._)("strong",null,"Issue Date:",-1))),Bl={class:"col"},$l=$i((()=>(0,i._)("strong",null,"Batch Quantity:",-1))),El={class:"accordion",id:"accordionPanelsStayOpenExample"},Ul={class:"accordion-item"},Nl={class:"accordion-header",id:"panelsStayOpen-headingOne"},Tl={class:"accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseOne","aria-expanded":"true","aria-controls":"panelsStayOpen-collapseOne"},Ol={key:0,class:"spinner-border ms-2",role:"status"},Al=$i((()=>(0,i._)("span",{class:"visually-hidden"},"Loading...",-1))),ql=[Al],Fl={key:1},jl=$i((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),Wl=[jl],Vl={id:"panelsStayOpen-collapseOne",class:"accordion-collapse collapse show","aria-labelledby":"panelsStayOpen-headingOne"},zl={class:"accordion-body"},Zl={class:"accordion-item"},Gl={class:"accordion-header",id:"panelsStayOpen-headingTwo"},Hl={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseTwo","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseTwo"},Ql={key:0,class:"spinner-border ms-2",role:"status"},Yl=$i((()=>(0,i._)("span",{class:"visually-hidden"},"Loading...",-1))),Kl=[Yl],Jl={key:1},Xl=$i((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),en=[Xl],tn={id:"panelsStayOpen-collapseTwo",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingTwo"},an={class:"accordion-body"},sn={class:"accordion-item"},ln={class:"accordion-header",id:"panelsStayOpen-headingThree"},nn={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseThree","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseThree"},on={key:0,class:"spinner-border ms-2",role:"status"},cn=$i((()=>(0,i._)("span",{class:"visually-hidden"},"Loading...",-1))),dn=[cn],rn={key:1},mn=$i((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),un=[mn],hn={id:"panelsStayOpen-collapseThree",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingThree"},pn={class:"accordion-body"},bn={class:"accordion-item"},gn={class:"accordion-header",id:"panelsStayOpen-headingFour"},fn={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseFour","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseFour"},_n={key:0,class:"spinner-border ms-2",role:"status"},vn=$i((()=>(0,i._)("span",{class:"visually-hidden"},"Loading...",-1))),yn=[vn],kn={key:1},wn=$i((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),Cn=[wn],Dn={id:"panelsStayOpen-collapseFour",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingFour"},Sn={class:"accordion-body"},Mn={class:"accordion-item"},Pn={class:"accordion-header",id:"panelsStayOpen-headingFive"},In={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseFive","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseFive"},xn={key:0,class:"spinner-border ms-2",role:"status"},Ln=$i((()=>(0,i._)("span",{class:"visually-hidden"},"Loading...",-1))),Rn=[Ln],Bn={key:1},$n=$i((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),En=[$n],Un={id:"panelsStayOpen-collapseFive",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingFive"},Nn={class:"accordion-body"},Tn={class:"accordion-item"},On={class:"accordion-header",id:"panelsStayOpen-headingSix"},An={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseSix","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseSix"},qn={key:0,class:"spinner-border ms-2",role:"status"},Fn=$i((()=>(0,i._)("span",{class:"visually-hidden"},"Loading...",-1))),jn=[Fn],Wn={key:1},Vn=$i((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),zn=[Vn],Zn={id:"panelsStayOpen-collapseSix",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingSix"},Gn={class:"accordion-body"},Hn={class:"accordion-item"},Qn={class:"accordion-header",id:"panelsStayOpen-headingSeven"},Yn={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseSeven","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseSeven"},Kn={key:0,class:"spinner-border ms-2",role:"status"},Jn=$i((()=>(0,i._)("span",{class:"visually-hidden"},"Loading...",-1))),Xn=[Jn],eo={key:1},to=$i((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),ao=[to],so={id:"panelsStayOpen-collapseSeven",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingSeven"},io={class:"accordion-body"},lo={class:"accordion-item"},no={class:"accordion-header",id:"panelsStayOpen-headingEight"},oo={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseEight","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseEight"},co={key:0,class:"spinner-border ms-2",role:"status"},ro=$i((()=>(0,i._)("span",{class:"visually-hidden"},"Loading...",-1))),mo=[ro],uo={key:1},ho=$i((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),po=[ho],bo={id:"panelsStayOpen-collapseEight",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingEight"},go={class:"accordion-body"},fo={class:"accordion-item"},_o={class:"accordion-header",id:"panelsStayOpen-headingNine"},vo={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseNine","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseNine"},yo={key:0,class:"spinner-border ms-2",role:"status"},ko=$i((()=>(0,i._)("span",{class:"visually-hidden"},"Loading...",-1))),wo=[ko],Co={key:1},Do=$i((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),So=[Do],Mo={id:"panelsStayOpen-collapseNine",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingNine"},Po={class:"accordion-body"},Io={class:"accordion-item"},xo={class:"accordion-header",id:"panelsStayOpen-headingTen"},Lo={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseTen","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseTen"},Ro={key:0,class:"spinner-border ms-2",role:"status"},Bo=$i((()=>(0,i._)("span",{class:"visually-hidden"},"Loading...",-1))),$o=[Bo],Eo={key:1},Uo=$i((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),No=[Uo],To={id:"panelsStayOpen-collapseTen",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingTen"},Oo={class:"accordion-body"};function Ao(e,t,a,s,l,n){const o=(0,i.up)("router-link"),c=(0,i.up)("CheckListTable");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",Ei,Ti)):((0,i.wg)(),(0,i.iD)("div",Oi,[(0,i._)("div",Ai,[(0,i._)("div",qi,[(0,i._)("div",Fi,[ji,Wi,(0,i._)("nav",Vi,[(0,i._)("ol",zi,[Zi,(0,i._)("li",Gi,[(0,i.Wm)(o,{to:"/checklist"},{default:(0,i.w5)((()=>[Hi,(0,i.Uk)(" Checklist")])),_:1})]),Qi])])])]),(0,i._)("div",Yi,[(0,i._)("div",Ki,[(0,i._)("div",Ji,[(0,i._)("button",{type:"button",class:"btn btn-warning btn-pause-checklist me-2",onClick:t[0]||(t[0]=(...e)=>n.pauseChecklist&&n.pauseChecklist(...e))}," Pause Checklist "),(0,i._)("button",{class:"btn btn-primary me-2",onClick:t[1]||(t[1]=(...e)=>n.downloadBOM&&n.downloadBOM(...e))}," Download BOM "),Xi])])])]),(0,i._)("div",el,[(0,i._)("div",tl,[(0,i._)("div",al,[sl,(0,i._)("div",il,[l.isChecklistPassed?((0,i.wg)(),(0,i.iD)("div",ll,[l.generatedQRCode?((0,i.wg)(),(0,i.iD)("div",nl,[(0,i._)("img",{src:l.generatedQRCode,alt:"QR Code"},null,8,ol)])):((0,i.wg)(),(0,i.iD)("p",cl," All Checks passed successfully, generate a label by pressing the generate button. "))])):((0,i.wg)(),(0,i.iD)("div",dl," You can only generate a label if all checks are passed "))]),(0,i._)("div",rl,[ml,l.isChecklistPassed?((0,i.wg)(),(0,i.iD)("div",ul,[l.generatedQRCode?((0,i.wg)(),(0,i.iD)("button",{key:0,type:"button",class:"btn btn-success",onClick:t[2]||(t[2]=(...e)=>n.printQRCode&&n.printQRCode(...e))}," Print ")):((0,i.wg)(),(0,i.iD)("button",{key:1,type:"button",class:"btn btn-success",onClick:t[3]||(t[3]=(...e)=>n.generateQRCode&&n.generateQRCode(...e))}," Generate "))])):(0,i.kq)("",!0)])])])]),(0,i._)("div",hl,[(0,i._)("div",pl,[(0,i._)("div",bl,[gl,fl,(0,i._)("div",_l,[vl,(0,i._)("button",{type:"button",class:"btn btn-danger",onClick:t[4]||(t[4]=(...e)=>n.endChecklist&&n.endChecklist(...e)),"data-bs-dismiss":"modal"}," End ")])])])]),(0,i._)("div",yl,[kl,(0,i._)("div",wl,[(0,i._)("div",Cl,[l.activeBom.product?((0,i.wg)(),(0,i.iD)("div",Dl,[Sl,(0,i.Uk)(" "+(0,_t.zw)(l.activeBom.product.project.name),1)])):(0,i.kq)("",!0),l.activeBom.product?((0,i.wg)(),(0,i.iD)("div",Ml,[Pl,(0,i.Uk)(" "+(0,_t.zw)(l.activeBom.product.name),1)])):(0,i.kq)("",!0),(0,i._)("div",Il,[xl,(0,i.Uk)(" "+(0,_t.zw)(l.activeBom.bom_rev_number),1)]),(0,i._)("div",Ll,[Rl,(0,i.Uk)(" "+(0,_t.zw)(l.activeBom.issue_date),1)]),(0,i._)("div",Bl,[$l,(0,i.Uk)(" "+(0,_t.zw)(l.checklist.batch_quantity),1)])])])]),(0,i._)("div",El,[(0,i._)("div",Ul,[(0,i._)("h2",Nl,[(0,i._)("button",Tl,[(0,i.Uk)(" Raw Material Check "),!1===l.isRawMaterialSufficient?((0,i.wg)(),(0,i.iD)("div",Ol,ql)):((0,i.wg)(),(0,i.iD)("div",Fl,Wl))])]),(0,i._)("div",Vl,[(0,i._)("div",zl,[(0,i.Wm)(c,{checklistItems:l.filteredChecklistItems["Raw Material"],onChecklistItemUpdated:n.updateChecklistItem,checklistStatus:this.checklistStatus},null,8,["checklistItems","onChecklistItemUpdated","checklistStatus"])])])]),(0,i._)("div",Zl,[(0,i._)("h2",Gl,[(0,i._)("button",Hl,[(0,i.Uk)(" PCB Check "),!1===l.isPcbSufficient?((0,i.wg)(),(0,i.iD)("div",Ql,Kl)):((0,i.wg)(),(0,i.iD)("div",Jl,en))])]),(0,i._)("div",tn,[(0,i._)("div",an,[(0,i.Wm)(c,{checklistItems:l.filteredChecklistItems["PCB"],onChecklistItemUpdated:n.updateChecklistItem,checklistStatus:this.checklistStatus},null,8,["checklistItems","onChecklistItemUpdated","checklistStatus"])])])]),(0,i._)("div",sn,[(0,i._)("h2",ln,[(0,i._)("button",nn,[(0,i.Uk)(" Solder Paste Check "),!1===l.isSolderPasteSufficient?((0,i.wg)(),(0,i.iD)("div",on,dn)):((0,i.wg)(),(0,i.iD)("div",rn,un))])]),(0,i._)("div",hn,[(0,i._)("div",pn,[(0,i.Wm)(c,{checklistItems:l.filteredChecklistItems["Solder Paste"],onChecklistItemUpdated:n.updateChecklistItem,checklistStatus:this.checklistStatus},null,8,["checklistItems","onChecklistItemUpdated","checklistStatus"])])])]),(0,i._)("div",bn,[(0,i._)("h2",gn,[(0,i._)("button",fn,[(0,i.Uk)(" Solder Bar Check "),!1===l.isSolderBarSufficient?((0,i.wg)(),(0,i.iD)("div",_n,yn)):((0,i.wg)(),(0,i.iD)("div",kn,Cn))])]),(0,i._)("div",Dn,[(0,i._)("div",Sn,[(0,i.Wm)(c,{checklistItems:l.filteredChecklistItems["Solder Bar"],onChecklistItemUpdated:n.updateChecklistItem,checklistStatus:this.checklistStatus},null,8,["checklistItems","onChecklistItemUpdated","checklistStatus"]),(0,i.Uk)("> ")])])]),(0,i._)("div",Mn,[(0,i._)("h2",Pn,[(0,i._)("button",In,[(0,i.Uk)(" Solder Flux Check "),!1===l.isSolderFluxSufficient?((0,i.wg)(),(0,i.iD)("div",xn,Rn)):((0,i.wg)(),(0,i.iD)("div",Bn,En))])]),(0,i._)("div",Un,[(0,i._)("div",Nn,[(0,i.Wm)(c,{checklistItems:l.filteredChecklistItems["Solder Flux"],onChecklistItemUpdated:n.updateChecklistItem,checklistStatus:this.checklistStatus},null,8,["checklistItems","onChecklistItemUpdated","checklistStatus"])])])]),(0,i._)("div",Tn,[(0,i._)("h2",On,[(0,i._)("button",An,[(0,i.Uk)(" IPA Check "),!1===l.isIpaSufficient?((0,i.wg)(),(0,i.iD)("div",qn,jn)):((0,i.wg)(),(0,i.iD)("div",Wn,zn))])]),(0,i._)("div",Zn,[(0,i._)("div",Gn,[(0,i.Wm)(c,{checklistItems:l.filteredChecklistItems["IPA"],onChecklistItemUpdated:n.updateChecklistItem,checklistStatus:this.checklistStatus},null,8,["checklistItems","onChecklistItemUpdated","checklistStatus"])])])]),(0,i._)("div",Hn,[(0,i._)("h2",Qn,[(0,i._)("button",Yn,[(0,i.Uk)(" Solder Wire Check "),!1===l.isSolderWireSufficient?((0,i.wg)(),(0,i.iD)("div",Kn,Xn)):((0,i.wg)(),(0,i.iD)("div",eo,ao))])]),(0,i._)("div",so,[(0,i._)("div",io,[(0,i.Wm)(c,{checklistItems:l.filteredChecklistItems["Solder Wire"],onChecklistItemUpdated:n.updateChecklistItem,checklistStatus:this.checklistStatus},null,8,["checklistItems","onChecklistItemUpdated","checklistStatus"])])])]),(0,i._)("div",lo,[(0,i._)("h2",no,[(0,i._)("button",oo,[(0,i.Uk)(" SMT Pallet Check "),!1===l.isSMTPalletSufficient?((0,i.wg)(),(0,i.iD)("div",co,mo)):((0,i.wg)(),(0,i.iD)("div",uo,po))])]),(0,i._)("div",bo,[(0,i._)("div",go,[(0,i.Wm)(c,{checklistItems:l.filteredChecklistItems["SMT Pallet"],onChecklistItemUpdated:n.updateChecklistItem,checklistStatus:this.checklistStatus},null,8,["checklistItems","onChecklistItemUpdated","checklistStatus"])])])]),(0,i._)("div",fo,[(0,i._)("h2",_o,[(0,i._)("button",vo,[(0,i.Uk)(" Wave Pallet Check "),!1===l.isWavePalletSufficient?((0,i.wg)(),(0,i.iD)("div",yo,wo)):((0,i.wg)(),(0,i.iD)("div",Co,So))])]),(0,i._)("div",Mo,[(0,i._)("div",Po,[(0,i.Wm)(c,{checklistItems:l.filteredChecklistItems["Wave Pallet"],onChecklistItemUpdated:n.updateChecklistItem,checklistStatus:this.checklistStatus},null,8,["checklistItems","onChecklistItemUpdated","checklistStatus"])])])]),(0,i._)("div",Io,[(0,i._)("h2",xo,[(0,i._)("button",Lo,[(0,i.Uk)(" PCB Serial Number Label Check "),!1===l.isLabelSufficient?((0,i.wg)(),(0,i.iD)("div",Ro,$o)):((0,i.wg)(),(0,i.iD)("div",Eo,No))])]),(0,i._)("div",To,[(0,i._)("div",Oo,[(0,i.Wm)(c,{checklistItems:l.filteredChecklistItems["PCB Serial Number Label"],onChecklistItemUpdated:n.updateChecklistItem,checklistStatus:this.checklistStatus},null,8,["checklistItems","onChecklistItemUpdated","checklistStatus"])])])])])]))}const qo=e=>((0,i.dD)("data-v-6a8127b4"),e=e(),(0,i.Cn)(),e),Fo={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},jo={class:"modal-dialog modal-lg"},Wo={class:"modal-content"},Vo=qo((()=>(0,i._)("div",{class:"modal-header"},[(0,i._)("h1",{class:"modal-title fs-5 font-weight-bold",id:"exampleModalLabel"}," Change The Present Quantity "),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),zo={class:"modal-body"},Zo={class:"col-auto"},Go=qo((()=>(0,i._)("label",{for:"issuedToProduction",class:"form-label ml-2"},"Part Already Issued to production",-1))),Ho={class:"mt-3"},Qo=qo((()=>(0,i._)("label",{for:"editedQuantity",class:"form-label"},"Present Quantity",-1))),Yo={key:0,class:"text-danger mt-2"},Ko={key:1,class:"mt-3"},Jo=qo((()=>(0,i._)("label",{for:"reasonForChange",class:"form-label"},"Reason For Change",-1))),Xo={class:"modal-footer"},ec=qo((()=>(0,i._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1))),tc=["disabled"];function ac(e,t,a,l,n,o){const c=(0,i.up)("ag-grid-vue");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(c,{ref:"agGrid",style:{height:"550px"},class:"ag-theme-quartz",rowData:a.checklistItems,checklistStatus:a.checklistStatus,defaultColDef:n.defaultColDef,columnDefs:n.colDefs,pagination:!0,onFirstDataRendered:o.onFirstDataRendered,onRowClicked:o.onRowClicked,onRowSelected:o.onRowSelected,onRowDeselected:o.onRowDeselected,onGridReady:o.onGridReady},null,8,["rowData","checklistStatus","defaultColDef","columnDefs","onFirstDataRendered","onRowClicked","onRowSelected","onRowDeselected","onGridReady"]),(0,i._)("div",Fo,[(0,i._)("div",jo,[(0,i._)("div",Wo,[Vo,(0,i._)("div",zo,[(0,i._)("div",Zo,[(0,i.wy)((0,i._)("input",{type:"checkbox",id:"issuedToProduction",class:"form-check-input","onUpdate:modelValue":t[0]||(t[0]=e=>n.activeRow.is_issued_to_production=e),onChange:t[1]||(t[1]=(...e)=>o.onIssuedToProductionChange&&o.onIssuedToProductionChange(...e))},null,544),[[s.e8,n.activeRow.is_issued_to_production]]),Go]),(0,i._)("div",Ho,[Qo,(0,i.wy)((0,i._)("input",{type:"number",id:"editedQuantity",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=e=>n.activeRow.present_quantity=e),min:"1"},null,512),[[s.nr,n.activeRow.present_quantity]])]),n.activeRow.is_issued_to_production&&n.activeRow.present_quantity<n.activeRow.required_quantity?((0,i.wg)(),(0,i.iD)("div",Yo," Present quantity that is "+(0,_t.zw)(n.activeRow.present_quantity)+" cannot be less than required quantity. ",1)):(0,i.kq)("",!0),n.activeRow.is_issued_to_production?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",Ko,[Jo,(0,i.wy)((0,i._)("textarea",{id:"reasonForChange",class:"form-control","onUpdate:modelValue":t[3]||(t[3]=e=>n.activeRow.present_quantity_change_note=e)},null,512),[[s.nr,n.activeRow.present_quantity_change_note]])]))]),(0,i._)("div",Xo,[ec,(0,i._)("button",{type:"button",class:"btn btn-primary",onClick:t[4]||(t[4]=(...e)=>o.updatePresentQuantity&&o.updatePresentQuantity(...e)),"data-bs-dismiss":"modal",disabled:!n.activeRow.present_quantity_change_note&&n.activeRow.present_quantity<n.activeRow.required_quantity}," Save changes ",8,tc)])])])])])}var sc={props:{checklistItems:{type:Array,required:!0},checklistStatus:{type:String,required:!0}},components:{AgGridVue:ns.n},watch:{checklistItems:function(e,t){console.log("watch called"),console.log("new",e),e!==t&&(this.gridApi.setRowData(e),this.gridApi.refreshCells({force:!0}))}},computed:{presentQuantityModel(){return this.partIssuedToProduction?this.activeRow.required_quantity:this.activeRow.present_quantity}},data(){return{reasonForChange:"",gridApi:null,isGridReady:!1,partIssuedToProduction:!1,colDefs:[{headerName:"VEPL Part No",field:"bom_line_item.part_number"},{headerName:"UID",field:"checklist_item_uids",valueFormatter:function(e){if(!e.value||0===e.value.length)return null;const t=e.value.map((e=>e.uid));return t.join(", ")}},{headerName:"Present Quantity",field:"present_quantity",cellRenderer:e=>{if("In Progress"===this.checklistStatus){const t=document.createElement("button");t.classList.add("btn","btn-sm","btn-outline-primary","edit-button"),t.innerHTML='<i class="far fa-edit"></i>',t.dataset.bsToggle="modal",t.dataset.bsTarget="#exampleModal",t.addEventListener("click",(()=>{this.setActiveRow(e)}));const a=document.createElement("div");return a.classList.add("present-quantity-cell","d-flex","align-items-center"),a.innerHTML=`\n      <span class="me-5">${e.value}</span>`,a.appendChild(t),a}return`<span>${e.value}</span>`}},{headerName:"Required Quantity",field:"required_quantity"},{headerName:"Delta",valueGetter:function(e){const t=e.data.present_quantity,a=e.data.required_quantity,s=t-a;return s>=0?`+${s}`:`-${Math.abs(s)}`}},{headerName:"Is Present",field:"is_present",cellRenderer:e=>e.value?'<i class="fas fa-check-circle text-success"></i>':'<i class="fa-solid fa-circle-xmark text-danger"></i>'},{headerName:"Is Quantity Sufficient",field:"is_quantity_sufficient",cellRenderer:e=>e.value?'<i class="fas fa-check-circle text-success"></i>':'<i class="fa-solid fa-circle-xmark text-danger"></i>'},{headerName:"Updated At",field:"updated_at"}],defaultColDef:{filter:!0,sortable:!0,resizable:!0,autoSize:!0,domLayout:"autoHeight"},selectedRows:[],activeRow:{},editedQuantity:""}},mounted(){},methods:{onIssuedToProductionChange(){this.activeRow.is_issued_to_production&&(this.activeRow.present_quantity=this.activeRow.required_quantity,this.activeRow.present_quantity_change_note="")},setActiveRow(e){console.log("isnide setActiveRow"),console.log("thsi si aprams data",e.data),this.activeRow=e.data},statusCellRenderer(e){return e.value?"":""},onRowClicked(e){this.$emit("rowClicked",e.data)},onRowSelected(e){e.node.isSelected()&&this.$emit("rowSelected",e.node.data),this.onSelectionChanged()},onRowDeselected(){this.onSelectionChanged()},onSelectionChanged(){this.selectedRows=this.gridApi.getSelectedRows()},onFirstDataRendered(e){e.api&&(this.gridApi=e.api,this.isGridReady=!0)},onGridReady(e){this.gridApi=e.api,this.isGridReady=!0},updatePresentQuantity(){console.log("id of checklist item clicked",this.activeRow.id),console.log("quantity",this.activeRow.present_quantity),console.log("reason for change",this.reasonForChange),tt.Z.put(`store/update-checklist-item/${this.activeRow.id}/`,{present_quantity:this.activeRow.present_quantity,reason_for_change:this.activeRow.present_quantity_change_note,is_issued_to_production:this.activeRow.is_issued_to_production}).then((e=>{console.log("Present quantity updated successfully:",e.data),this.$emit("checklistItemUpdated",e.data),this.$notify({title:"Present quantity updated successfully",type:"bg-success-subtle text-success",duration:"5000"})})).catch((e=>{console.error("Error updating present quantity:",e.response.data.message),this.$notify({title:e.response.data.message,type:"bg-danger-subtle text-danger",duration:"5000"})}))}}};const ic=(0,ut.Z)(sc,[["render",ac],["__scopeId","data-v-6a8127b4"]]);var lc=ic,nc=a(8385),oc={components:{CheckListTable:lc},data(){return{activeBom:"",checklist:"",checklistItems:[],checklistStatus:"",isChecklistPassed:!1,isChecklistEnded:!1,isRawMaterialSufficient:!1,isPcbSufficient:!1,isSolderPasteSufficient:!1,isSolderBarSufficient:!1,isSolderFluxSufficient:!1,isIpaSufficient:!1,isSolderWireSufficient:!1,isSMTPalletSufficient:!1,isWavePalletSufficient:!1,isLabelSufficient:!1,pollingInterval:"",generatedQRCode:"",filteredChecklistItems:{"Raw Material":[],PCB:[],"Solder Paste":[],"Solder Bar":[],"Solder Flux":[],Ipa:[],"Solder Wire":[],"SMT Pallet":[],"Wave Pallet":[],"PCB Serial Number Label":[]},scannedEntries:[],ws:null,isChecklistOngoing:!0}},mounted(){this.getChecklistBeginning(),this.ws=new WebSocket(`${this.$websocketURL}checklist/`),this.ws.addEventListener("open",(()=>{console.log("WebSocket connection opened")})),this.ws.addEventListener("message",(e=>{console.log("thi ssi event.data raw ",e.data);const t=JSON.parse(e.data);console.log("event.data after parsing",t),console.log("Received active checklist:",t.active_checklist),this.checklist=t.active_checklist,this.checklistStatus=t.active_checklist.status,this.checklistItems=this.checklist.checklist_items,console.log("chehcklist items hereeeeee",this.checklistItems);const a=this.filterChecklistItemsByType("Raw Material"),s=this.filterChecklistItemsByType("PCB"),i=this.filterChecklistItemsByType("Solder Paste"),l=this.filterChecklistItemsByType("Solder Bar"),n=this.filterChecklistItemsByType("Solder Flux"),o=this.filterChecklistItemsByType("IPA"),c=this.filterChecklistItemsByType("Solder Wire"),d=this.filterChecklistItemsByType("SMT Pallet"),r=this.filterChecklistItemsByType("Wave Pallet"),m=this.filterChecklistItemsByType("PCB Serial Number Label");this.isChecklistPassed=this.checklist.is_passed,this.activeBom=this.checklist.bom,this.filteredChecklistItems={"Raw Material":a,PCB:s,"Solder Paste":i,"Solder Bar":l,"Solder Flux":n,IPA:o,"Solder Wire":c,"SMT Pallet":d,"Wave Pallet":r,"PCB Serial Number Label":m},console.log("filered checklsit items",this.filteredChecklistItems),this.isRawMaterialSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Raw Material"),this.isPcbSufficient=this.isItemsSufficient(this.filteredChecklistItems,"PCB"),this.isSolderPasteSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Paste"),this.isSolderBarSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Bar"),console.log("checking solder bar",this.isSolderBarSufficient),this.isSolderFluxSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Flux"),this.isIpaSufficient=this.isItemsSufficient(this.filteredChecklistItems,"IPA"),this.isSolderWireSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Wire"),this.isSMTPalletSufficient=this.isItemsSufficient(this.filteredChecklistItems,"SMT Pallet"),this.isWavePalletSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Wave Pallet"),this.isLabelSufficient=this.isItemsSufficient(this.filteredChecklistItems,"PCB Serial Number Label"),"Completed"!=this.checklist.status&&"Failed"!=this.checklist.status||(this.isChecklistEnded=!0),this.checklist.qr_code_link&&(this.generatedQRCode=this.checklist.qr_code_link)})),this.ws.addEventListener("close",(()=>{console.log("WebSocket connection closed")}))},beforeUnmount(){this.ws.close()},methods:{async getChecklistBeginning(){this.$store.commit("setIsLoading",!0),await tt.Z.get(`store/get-active-checklist/${this.$route.params.id}/`).then((e=>{console.log(e.data),this.checklist=e.data.checklist,this.checklistStatus=e.data.checklist.status,this.checklistItems=this.checklist.checklist_items,console.log("checklists items hereeeeee",this.checklistItems);const t=this.filterChecklistItemsByType("Raw Material"),a=this.filterChecklistItemsByType("PCB"),s=this.filterChecklistItemsByType("Solder Paste"),i=this.filterChecklistItemsByType("Solder Bar"),l=this.filterChecklistItemsByType("Solder Flux"),n=this.filterChecklistItemsByType("IPA"),o=this.filterChecklistItemsByType("Solder Wire"),c=this.filterChecklistItemsByType("SMT Pallet"),d=this.filterChecklistItemsByType("Wave Pallet"),r=this.filterChecklistItemsByType("PCB Serial Number Label");this.isChecklistPassed=this.checklist.is_passed,this.activeBom=this.checklist.bom,this.filteredChecklistItems={"Raw Material":t,PCB:a,"Solder Paste":s,"Solder Bar":i,"Solder Flux":l,IPA:n,"Solder Wire":o,"SMT Pallet":c,"Wave Pallet":d,"PCB Serial Number Label":r},console.log("filered checklsit items",this.filteredChecklistItems),this.isRawMaterialSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Raw Material"),this.isPcbSufficient=this.isItemsSufficient(this.filteredChecklistItems,"PCB"),this.isSolderPasteSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Paste"),console.log("checking solder paste",this.isSolderPasteSufficient),this.isSolderBarSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Bar"),console.log("checkinsssg solder bar",this.isSolderBarSufficient),this.isSolderFluxSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Flux"),this.isIpaSufficient=this.isItemsSufficient(this.filteredChecklistItems,"IPA"),this.isSolderWireSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Wire"),this.isSMTPalletSufficient=this.isItemsSufficient(this.filteredChecklistItems,"SMT Pallet"),this.isWavePalletSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Wave Pallet"),this.isLabelSufficient=this.isItemsSufficient(this.filteredChecklistItems,"PCB Serial Number Label"),"Completed"!=this.checklist.status&&"Failed"!=this.checklist.status||(this.isChecklistEnded=!0),this.checklist.qr_code_link&&(this.generatedQRCode=this.checklist.qr_code_link),this.$store.commit("setIsLoading",!1)})).catch((e=>{console.log("error:",e),this.$notify({title:"An error occured, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1)}))},pauseChecklist(){this.$store.commit("setIsLoading",!0),console.log("this is the checklist id",this.checklist.id),tt.Z.post(`/store/pause-checklist/${this.checklist.id}/`).then((e=>{console.log(e.data.message),this.$router.push(`/checklist-details/${this.checklist.id}`),200===e.status?this.$notify({title:e.data.message,type:"bg-success-subtle text-success",duration:"5000"}):this.$notify({title:e.data.error,type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1)})).catch((e=>{console.error("An error occurred:",e.response.data),this.$notify({title:e.response.data.error,type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1)}))},async getChecklist(){await tt.Z.get(`store/get-active-checklist/${this.$route.params.id}/`).then((e=>{console.log(e.data),this.checklist=e.data.checklist,this.checklistItems=this.checklist.checklist_items,console.log("chehcklist items hereeeeee",this.checklistItems);const t=this.filterChecklistItemsByType("Raw Material"),a=this.filterChecklistItemsByType("PCB"),s=this.filterChecklistItemsByType("Solder Paste"),i=this.filterChecklistItemsByType("Solder Bar"),l=this.filterChecklistItemsByType("Solder Flux"),n=this.filterChecklistItemsByType("IPA"),o=this.filterChecklistItemsByType("Solder Wire"),c=this.filterChecklistItemsByType("SMT Pallet"),d=this.filterChecklistItemsByType("Wave Pallet"),r=this.filterChecklistItemsByType("PCB Serial Number Label");this.isChecklistPassed=this.checklist.is_passed,this.activeBom=this.checklist.bom,this.filteredChecklistItems={"Raw Material":t,PCB:a,"Solder Paste":s,"Solder Bar":i,"Solder Flux":l,IPA:n,"Solder Wire":o,"SMT Pallet":c,"Wave Pallet":d,"PCB Serial Number Label":r},console.log("filered checklsit items",this.filteredChecklistItems),this.isRawMaterialSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Raw Material"),this.isPcbSufficient=this.isItemsSufficient(this.filteredChecklistItems,"PCB"),this.isSolderPasteSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Paste"),this.isSolderBarSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Bar"),console.log("checking solder bar",this.isSolderBarSufficient),this.isSolderFluxSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Flux"),this.isIpaSufficient=this.isItemsSufficient(this.filteredChecklistItems,"IPA"),this.isSolderWireSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Wire"),this.isSMTPalletSufficient=this.isItemsSufficient(this.filteredChecklistItems,"SMT Pallet"),this.isWavePalletSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Wave Pallet"),this.isLabelSufficient=this.isItemsSufficient(this.filteredChecklistItems,"PCB Serial Number Label"),"Completed"!=this.checklist.status&&"Failed"!=this.checklist.status||(this.isChecklistEnded=!0),this.checklist.qr_code_link&&(this.generatedQRCode=this.checklist.qr_code_link)})).catch((e=>{console.log("error:",e),this.$notify({title:"An error occured, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"})}))},async endChecklist(){this.$store.commit("setIsLoading",!0),clearInterval(this.pollingInterval),console.log("this is the checklsit id",this.checklist.id),await tt.Z.get(`store/end-checklist/${this.checklist.id}/`).then((e=>{console.log(e.data),this.$notify({title:"Checklist ended",type:"bg-danger-subtle text-danger",duration:"5000"}),this.checklist=e.data.checklist,this.isChecklistPassed=this.checklist.is_passed,this.activeBom=this.checklist.bom,"Completed"!=this.checklist.status&&"Failed"!=this.checklist.status||(this.isChecklistEnded=!0),this.$router.push(`/generated-checklists/${this.$route.params.id}`),this.$store.commit("setIsLoading",!1)})).catch((e=>{console.log("error:",e),this.$notify({title:"An error occured, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1)}))},async generateQRCode(){const e=this.generateUniqueCode();console.log(e);const t=await nc.toDataURL(e),a={uniqueCode:e,qrCodeDataURL:t};this.saveQRCode(a)},generateUniqueCode(){const e=Date.now().toString(),t=Math.random().toString(36).substring(7);return`${e}-${t}`},async saveQRCode(e){await tt.Z.post(`store/save-qr-code/${this.checklist.id}/`,e).then((t=>{console.log(t.data),this.generatedQRCode=e.qrCodeDataURL,this.$notify({title:"QR Code generated and saved successfully",type:"bg-success-subtle text-success",duration:"5000"})})).catch((e=>{console.log("error:",e),this.$notify({title:"An error occured, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"})}))},printQRCode(){if(this.generatedQRCode){const e=document.getElementById("printable-content"),t=window.open("","","height=1000,width=1000");t.document.write(e.innerHTML),t.print()}},filterChecklistItemsByType(e){return this.checklistItems.filter((t=>{const a=t.checklist_item_type;return!(!a||!a.name)&&a.name.toUpperCase()===e.toUpperCase()}))},isItemsSufficient(e,t){const a=this.filteredChecklistItems[t];if(a){if(0===a.length)return!0;const e=a.filter((e=>!0===e.is_quantity_sufficient));return e.length===a.length}return!1},downloadBOM(){try{const e=this.checklist.bom.bom_file_url;console.log("file url",e);const t=document.createElement("a");t.href=e,t.download=this.checklist.bom.bom_file_name,document.body.appendChild(t),t.click(),document.body.removeChild(t)}catch(e){console.error("Error downloading BOM:",e)}},updateChecklistItem(e){this.getChecklist(),console.log(e)}}};const cc=(0,ut.Z)(oc,[["render",Ao],["__scopeId","data-v-090ed38e"]]);var dc=cc;const rc=e=>((0,i.dD)("data-v-a325eeac"),e=e(),(0,i.Cn)(),e),mc={key:0,class:"container text-center"},uc=rc((()=>(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1))),hc=rc((()=>(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1))),pc=[uc,hc],bc={key:1,class:"container"},gc={class:"row align-items-center"},fc={class:"col-md-6 mt-4"},_c={class:"d-flex align-items-center"},vc=rc((()=>(0,i._)("h2",{class:"mb-0"},"Checklist",-1))),yc=rc((()=>(0,i._)("span",{class:"ms-3 fs-4 text-muted me-3"},"|",-1))),kc={"aria-label":"breadcrumb"},wc={class:"breadcrumb bg-transparent m-0 p-0 justify-content-end"},Cc=rc((()=>(0,i._)("li",{class:"breadcrumb-item"},[(0,i._)("a",{href:"/"},[(0,i._)("i",{class:"fas fa-home me-1"}),(0,i.Uk)("Home")])],-1))),Dc={class:"breadcrumb-item active","aria-current":"page"},Sc=rc((()=>(0,i._)("i",{class:"fas fa-list-alt me-1"},null,-1))),Mc=rc((()=>(0,i._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,i._)("i",{class:"fas fa-spinner me-1"}),(0,i.Uk)(" Ongoing Checklist ")],-1))),Pc={class:"col-md-6 mt-4"},Ic={class:"container"},xc={class:"d-flex justify-content-end"},Lc={key:0,type:"button","data-bs-toggle":"modal","data-bs-target":"#generateLabelModal",class:"btn btn-success me-2"},Rc={key:1,type:"button","data-bs-toggle":"modal","data-bs-target":"#generateLabelModal",class:"btn btn-success me-2"},Bc=rc((()=>(0,i._)("button",{type:"button","data-bs-toggle":"modal","data-bs-target":"#endChecklistModal",class:"btn btn-danger"}," End Checklist ",-1))),$c={class:"modal fade",id:"generateLabelModal",tabindex:"-1","aria-labelledby":"generateLabelModalLabel","aria-hidden":"true"},Ec={class:"modal-dialog"},Uc={class:"modal-content"},Nc=rc((()=>(0,i._)("div",{class:"modal-header"},[(0,i._)("h1",{class:"modal-title fs-5",id:"generateLabelModalLabel"}," Generate Label "),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),Tc={class:"modal-body"},Oc={key:0},Ac={key:0,id:"printable-content"},qc=["src"],Fc={key:1},jc={key:1},Wc={class:"modal-footer"},Vc=rc((()=>(0,i._)("button",{type:"button",class:"btn btn-dark","data-bs-dismiss":"modal"}," Cancel ",-1))),zc={key:0},Zc={class:"modal fade",id:"endChecklistModal",tabindex:"-1","aria-labelledby":"endChecklistModalLabel","aria-hidden":"true"},Gc={class:"modal-dialog"},Hc={class:"modal-content"},Qc=rc((()=>(0,i._)("div",{class:"modal-header"},[(0,i._)("h1",{class:"modal-title fs-5",id:"endChecklistModalLabel"}," End Checklist "),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),Yc=rc((()=>(0,i._)("div",{class:"modal-body"}," Are you sure you want to end this checklist? ",-1))),Kc={class:"modal-footer"},Jc=rc((()=>(0,i._)("button",{type:"button",class:"btn btn-dark","data-bs-dismiss":"modal"}," Cancel ",-1))),Xc={class:"card border-primary mb-4 mt-4"},ed=rc((()=>(0,i._)("div",{class:"card-header bg-primary text-white"},[(0,i._)("h4",{class:"mb-0"},"Active Bom Details")],-1))),td={class:"card-body"},ad={class:"row"},sd={key:0,class:"col"},id=rc((()=>(0,i._)("strong",null,"Project Name:",-1))),ld={key:1,class:"col"},nd=rc((()=>(0,i._)("strong",null,"Product Name:",-1))),od={class:"col"},cd=rc((()=>(0,i._)("strong",null,"BOM Rev No:",-1))),dd={class:"col"},rd=rc((()=>(0,i._)("strong",null,"Issue Date:",-1))),md={class:"col"},ud=rc((()=>(0,i._)("strong",null,"Batch Quantity:",-1))),hd={class:"accordion",id:"accordionPanelsStayOpenExample"},pd={class:"accordion-item"},bd={class:"accordion-header",id:"panelsStayOpen-headingOne"},gd={class:"accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseOne","aria-expanded":"true","aria-controls":"panelsStayOpen-collapseOne"},fd={key:0,class:"spinner-border ms-2",role:"status"},_d=rc((()=>(0,i._)("span",{class:"visually-hidden"},"Loading...",-1))),vd=[_d],yd={key:1},kd=rc((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),wd=[kd],Cd={id:"panelsStayOpen-collapseOne",class:"accordion-collapse collapse show","aria-labelledby":"panelsStayOpen-headingOne"},Dd={class:"accordion-body"},Sd={class:"accordion-item"},Md={class:"accordion-header",id:"panelsStayOpen-headingTwo"},Pd={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseTwo","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseTwo"},Id={key:0,class:"spinner-border ms-2",role:"status"},xd=rc((()=>(0,i._)("span",{class:"visually-hidden"},"Loading...",-1))),Ld=[xd],Rd={key:1},Bd=rc((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),$d=[Bd],Ed={id:"panelsStayOpen-collapseTwo",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingTwo"},Ud={class:"accordion-body"},Nd={class:"accordion-item"},Td={class:"accordion-header",id:"panelsStayOpen-headingThree"},Od={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseThree","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseThree"},Ad={key:0,class:"spinner-border ms-2",role:"status"},qd=rc((()=>(0,i._)("span",{class:"visually-hidden"},"Loading...",-1))),Fd=[qd],jd={key:1},Wd=rc((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),Vd=[Wd],zd={id:"panelsStayOpen-collapseThree",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingThree"},Zd={class:"accordion-body"},Gd={class:"accordion-item"},Hd={class:"accordion-header",id:"panelsStayOpen-headingFour"},Qd={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseFour","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseFour"},Yd={key:0,class:"spinner-border ms-2",role:"status"},Kd=rc((()=>(0,i._)("span",{class:"visually-hidden"},"Loading...",-1))),Jd=[Kd],Xd={key:1},er=rc((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),tr=[er],ar={id:"panelsStayOpen-collapseFour",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingFour"},sr={class:"accordion-body"},ir={class:"accordion-item"},lr={class:"accordion-header",id:"panelsStayOpen-headingFive"},nr={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseFive","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseFive"},or={key:0,class:"spinner-border ms-2",role:"status"},cr=rc((()=>(0,i._)("span",{class:"visually-hidden"},"Loading...",-1))),dr=[cr],rr={key:1},mr=rc((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),ur=[mr],hr={id:"panelsStayOpen-collapseFive",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingFive"},pr={class:"accordion-body"},br={class:"accordion-item"},gr={class:"accordion-header",id:"panelsStayOpen-headingSix"},fr={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseSix","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseSix"},_r={key:0,class:"spinner-border ms-2",role:"status"},vr=rc((()=>(0,i._)("span",{class:"visually-hidden"},"Loading...",-1))),yr=[vr],kr={key:1},wr=rc((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),Cr=[wr],Dr={id:"panelsStayOpen-collapseSix",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingSix"},Sr={class:"accordion-body"},Mr={class:"accordion-item"},Pr={class:"accordion-header",id:"panelsStayOpen-headingSeven"},Ir={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseSeven","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseSeven"},xr={key:0,class:"spinner-border ms-2",role:"status"},Lr=rc((()=>(0,i._)("span",{class:"visually-hidden"},"Loading...",-1))),Rr=[Lr],Br={key:1},$r=rc((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),Er=[$r],Ur={id:"panelsStayOpen-collapseSeven",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingSeven"},Nr={class:"accordion-body"},Tr={class:"accordion-item"},Or={class:"accordion-header",id:"panelsStayOpen-headingEight"},Ar={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseEight","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseEight"},qr={key:0,class:"spinner-border ms-2",role:"status"},Fr=rc((()=>(0,i._)("span",{class:"visually-hidden"},"Loading...",-1))),jr=[Fr],Wr={key:1},Vr=rc((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),zr=[Vr],Zr={id:"panelsStayOpen-collapseEight",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingEight"},Gr={class:"accordion-body"},Hr={class:"accordion-item"},Qr={class:"accordion-header",id:"panelsStayOpen-headingNine"},Yr={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseNine","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseNine"},Kr={key:0,class:"spinner-border ms-2",role:"status"},Jr=rc((()=>(0,i._)("span",{class:"visually-hidden"},"Loading...",-1))),Xr=[Jr],em={key:1},tm=rc((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),am=[tm],sm={id:"panelsStayOpen-collapseNine",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingNine"},im={class:"accordion-body"},lm={class:"accordion-item"},nm={class:"accordion-header",id:"panelsStayOpen-headingTen"},om={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseTen","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseTen"},cm={key:0,class:"spinner-border ms-2",role:"status"},dm=rc((()=>(0,i._)("span",{class:"visually-hidden"},"Loading...",-1))),rm=[dm],mm={key:1},um=rc((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),hm=[um],pm={id:"panelsStayOpen-collapseTen",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingTen"},bm={class:"accordion-body"};function gm(e,t,a,s,l,n){const o=(0,i.up)("router-link"),c=(0,i.up)("CheckListTable");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",mc,pc)):((0,i.wg)(),(0,i.iD)("div",bc,[(0,i._)("div",gc,[(0,i._)("div",fc,[(0,i._)("div",_c,[vc,yc,(0,i._)("nav",kc,[(0,i._)("ol",wc,[Cc,(0,i._)("li",Dc,[(0,i.Wm)(o,{to:"/checklist"},{default:(0,i.w5)((()=>[Sc,(0,i.Uk)(" Checklist")])),_:1})]),Mc])])])]),(0,i._)("div",Pc,[(0,i._)("div",Ic,[(0,i._)("div",xc,[l.generatedQRCode?((0,i.wg)(),(0,i.iD)("button",Lc," View Generated Label ")):((0,i.wg)(),(0,i.iD)("button",Rc," Generate Label ")),(0,i._)("button",{class:"btn btn-primary me-2",onClick:t[0]||(t[0]=(...e)=>n.downloadBOM&&n.downloadBOM(...e))}," Download BOM "),Bc])])])]),(0,i._)("div",$c,[(0,i._)("div",Ec,[(0,i._)("div",Uc,[Nc,(0,i._)("div",Tc,[l.isChecklistPassed?((0,i.wg)(),(0,i.iD)("div",Oc,[l.generatedQRCode?((0,i.wg)(),(0,i.iD)("div",Ac,[(0,i._)("img",{src:l.generatedQRCode,alt:"QR Code"},null,8,qc)])):((0,i.wg)(),(0,i.iD)("p",Fc," All Checks passed successfully, generate a label by pressing the generate button. "))])):((0,i.wg)(),(0,i.iD)("div",jc," You can only generate a label if all checks are passed "))]),(0,i._)("div",Wc,[Vc,l.isChecklistPassed?((0,i.wg)(),(0,i.iD)("div",zc,[l.generatedQRCode?((0,i.wg)(),(0,i.iD)("button",{key:0,type:"button",class:"btn btn-success",onClick:t[1]||(t[1]=(...e)=>n.printQRCode&&n.printQRCode(...e))}," Print ")):((0,i.wg)(),(0,i.iD)("button",{key:1,type:"button",class:"btn btn-success",onClick:t[2]||(t[2]=(...e)=>n.generateQRCode&&n.generateQRCode(...e))}," Generate "))])):(0,i.kq)("",!0)])])])]),(0,i._)("div",Zc,[(0,i._)("div",Gc,[(0,i._)("div",Hc,[Qc,Yc,(0,i._)("div",Kc,[Jc,(0,i._)("button",{type:"button",class:"btn btn-danger",onClick:t[3]||(t[3]=(...e)=>n.endChecklist&&n.endChecklist(...e)),"data-bs-dismiss":"modal"}," End ")])])])]),(0,i._)("div",Xc,[ed,(0,i._)("div",td,[(0,i._)("div",ad,[l.activeBom.product?((0,i.wg)(),(0,i.iD)("div",sd,[id,(0,i.Uk)(" "+(0,_t.zw)(l.activeBom.product.project.name),1)])):(0,i.kq)("",!0),l.activeBom.product?((0,i.wg)(),(0,i.iD)("div",ld,[nd,(0,i.Uk)(" "+(0,_t.zw)(l.activeBom.product.name),1)])):(0,i.kq)("",!0),(0,i._)("div",od,[cd,(0,i.Uk)(" "+(0,_t.zw)(l.activeBom.bom_rev_number),1)]),(0,i._)("div",dd,[rd,(0,i.Uk)(" "+(0,_t.zw)(l.activeBom.issue_date),1)]),(0,i._)("div",md,[ud,(0,i.Uk)(" "+(0,_t.zw)(l.checklist.batch_quantity),1)])])])]),(0,i._)("div",hd,[(0,i._)("div",pd,[(0,i._)("h2",bd,[(0,i._)("button",gd,[(0,i.Uk)(" Raw Material Check "),!1===l.isRawMaterialSufficient?((0,i.wg)(),(0,i.iD)("div",fd,vd)):((0,i.wg)(),(0,i.iD)("div",yd,wd))])]),(0,i._)("div",Cd,[(0,i._)("div",Dd,[(0,i.Wm)(c,{checklistItems:l.filteredChecklistItems["Raw Material"]},null,8,["checklistItems"])])])]),(0,i._)("div",Sd,[(0,i._)("h2",Md,[(0,i._)("button",Pd,[(0,i.Uk)(" PCB Check "),!1===l.isPcbSufficient?((0,i.wg)(),(0,i.iD)("div",Id,Ld)):((0,i.wg)(),(0,i.iD)("div",Rd,$d))])]),(0,i._)("div",Ed,[(0,i._)("div",Ud,[(0,i.Wm)(c,{checklistItems:l.filteredChecklistItems["PCB"]},null,8,["checklistItems"])])])]),(0,i._)("div",Nd,[(0,i._)("h2",Td,[(0,i._)("button",Od,[(0,i.Uk)(" Solder Paste Check "),!1===l.isSolderPasteSufficient?((0,i.wg)(),(0,i.iD)("div",Ad,Fd)):((0,i.wg)(),(0,i.iD)("div",jd,Vd))])]),(0,i._)("div",zd,[(0,i._)("div",Zd,[(0,i.Wm)(c,{checklistItems:l.filteredChecklistItems["Solder Paste"]},null,8,["checklistItems"])])])]),(0,i._)("div",Gd,[(0,i._)("h2",Hd,[(0,i._)("button",Qd,[(0,i.Uk)(" Solder Bar Check "),!1===l.isSolderBarSufficient?((0,i.wg)(),(0,i.iD)("div",Yd,Jd)):((0,i.wg)(),(0,i.iD)("div",Xd,tr))])]),(0,i._)("div",ar,[(0,i._)("div",sr,[(0,i.Wm)(c,{checklistItems:l.filteredChecklistItems["Solder Bar"]},null,8,["checklistItems"]),(0,i.Uk)("> ")])])]),(0,i._)("div",ir,[(0,i._)("h2",lr,[(0,i._)("button",nr,[(0,i.Uk)(" Solder Flux Check "),!1===l.isSolderFluxSufficient?((0,i.wg)(),(0,i.iD)("div",or,dr)):((0,i.wg)(),(0,i.iD)("div",rr,ur))])]),(0,i._)("div",hr,[(0,i._)("div",pr,[(0,i.Wm)(c,{checklistItems:l.filteredChecklistItems["Solder Flux"]},null,8,["checklistItems"])])])]),(0,i._)("div",br,[(0,i._)("h2",gr,[(0,i._)("button",fr,[(0,i.Uk)(" IPA Check "),!1===l.isIpaSufficient?((0,i.wg)(),(0,i.iD)("div",_r,yr)):((0,i.wg)(),(0,i.iD)("div",kr,Cr))])]),(0,i._)("div",Dr,[(0,i._)("div",Sr,[(0,i.Wm)(c,{checklistItems:l.filteredChecklistItems["IPA"]},null,8,["checklistItems"])])])]),(0,i._)("div",Mr,[(0,i._)("h2",Pr,[(0,i._)("button",Ir,[(0,i.Uk)(" Solder Wire Check "),!1===l.isSolderWireSufficient?((0,i.wg)(),(0,i.iD)("div",xr,Rr)):((0,i.wg)(),(0,i.iD)("div",Br,Er))])]),(0,i._)("div",Ur,[(0,i._)("div",Nr,[(0,i.Wm)(c,{checklistItems:l.filteredChecklistItems["Solder Wire"]},null,8,["checklistItems"])])])]),(0,i._)("div",Tr,[(0,i._)("h2",Or,[(0,i._)("button",Ar,[(0,i.Uk)(" SMT Pallet Check "),!1===l.isSMTPalletSufficient?((0,i.wg)(),(0,i.iD)("div",qr,jr)):((0,i.wg)(),(0,i.iD)("div",Wr,zr))])]),(0,i._)("div",Zr,[(0,i._)("div",Gr,[(0,i.Wm)(c,{checklistItems:l.filteredChecklistItems["SMT Pallet"]},null,8,["checklistItems"])])])]),(0,i._)("div",Hr,[(0,i._)("h2",Qr,[(0,i._)("button",Yr,[(0,i.Uk)(" Wave Pallet Check "),!1===l.isWavePalletSufficient?((0,i.wg)(),(0,i.iD)("div",Kr,Xr)):((0,i.wg)(),(0,i.iD)("div",em,am))])]),(0,i._)("div",sm,[(0,i._)("div",im,[(0,i.Wm)(c,{checklistItems:l.filteredChecklistItems["Wave Pallet"]},null,8,["checklistItems"])])])]),(0,i._)("div",lm,[(0,i._)("h2",nm,[(0,i._)("button",om,[(0,i.Uk)(" PCB Serial Number Label Check "),!1===l.isLabelSufficient?((0,i.wg)(),(0,i.iD)("div",cm,rm)):((0,i.wg)(),(0,i.iD)("div",mm,hm))])]),(0,i._)("div",pm,[(0,i._)("div",bm,[(0,i.Wm)(c,{checklistItems:l.filteredChecklistItems["PCB Serial Number Label"]},null,8,["checklistItems"])])])])])]))}var fm={components:{CheckListTable:lc},data(){return{activeBom:"",checklist:"",checklistItems:[],isChecklistPassed:!1,isChecklistEnded:!1,isRawMaterialSufficient:!1,isPcbSufficient:!1,isSolderPasteSufficient:!1,isSolderBarSufficient:!1,isSolderFluxSufficient:!1,isIpaSufficient:!1,isSolderWireSufficient:!1,isSMTPalletSufficient:!1,isWavePalletSufficient:!1,isLabelSufficient:!1,pollingInterval:"",generatedQRCode:"",filteredChecklistItems:{"Raw Material":[],PCB:[],"Solder Paste":[],"Solder Bar":[],"Solder Flux":[],Ipa:[],"Solder Wire":[],"SMT Pallet":[],"Wave Pallet":[],"PCB Serial Number Label":[]},scannedEntries:[],ws:null}},mounted(){this.getChecklistBeginning(),this.ws=new WebSocket("wss://sfcsdev.xtractautomation.com/ws/checklist/"),this.ws.addEventListener("open",(()=>{console.log("WebSocket connection opened")})),this.ws.addEventListener("message",(e=>{console.log("thi ssi event.data raw dedede ",e.data);const t=JSON.parse(e.data);console.log("event.data after parsing",t),console.log("Received active checklist:",t.active_checklist),this.checklist=t.active_checklist,this.checklistItems=this.checklist.checklist_items,console.log("chehcklist items hereeeeee",this.checklistItems);const a=this.filterChecklistItemsByType("Raw Material"),s=this.filterChecklistItemsByType("PCB"),i=this.filterChecklistItemsByType("Solder Paste"),l=this.filterChecklistItemsByType("Solder Bar"),n=this.filterChecklistItemsByType("Solder Flux"),o=this.filterChecklistItemsByType("IPA"),c=this.filterChecklistItemsByType("Solder Wire"),d=this.filterChecklistItemsByType("SMT Pallet"),r=this.filterChecklistItemsByType("Wave Pallet"),m=this.filterChecklistItemsByType("PCB Serial Number Label");this.isChecklistPassed=this.checklist.is_passed,this.activeBom=this.checklist.bom,this.filteredChecklistItems={"Raw Material":a,PCB:s,"Solder Paste":i,"Solder Bar":l,"Solder Flux":n,IPA:o,"Solder Wire":c,"SMT Pallet":d,"Wave Pallet":r,"PCB Serial Number Label":m},console.log("filered checklsit items",this.filteredChecklistItems),this.isRawMaterialSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Raw Material"),this.isPcbSufficient=this.isItemsSufficient(this.filteredChecklistItems,"PCB"),this.isSolderPasteSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Paste"),this.isSolderBarSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Bar"),console.log("checking solder bar",this.isSolderBarSufficient),this.isSolderFluxSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Flux"),this.isIpaSufficient=this.isItemsSufficient(this.filteredChecklistItems,"IPA"),this.isSolderWireSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Wire"),this.isSMTPalletSufficient=this.isItemsSufficient(this.filteredChecklistItems,"SMT Pallet"),this.isWavePalletSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Wave Pallet"),this.isLabelSufficient=this.isItemsSufficient(this.filteredChecklistItems,"PCB Serial Number Label"),"Completed"!=this.checklist.status&&"Failed"!=this.checklist.status||(this.isChecklistEnded=!0),this.checklist.qr_code_link&&(this.generatedQRCode=this.checklist.qr_code_link)})),this.ws.addEventListener("close",(()=>{console.log("WebSocket connection closed")}))},beforeUnmount(){this.ws.close()},methods:{async getChecklistBeginning(){this.$store.commit("setIsLoading",!0),await tt.Z.get(`store/get-active-checklist/${this.$route.params.id}/`).then((e=>{console.log(e.data),this.checklist=e.data.checklist,this.checklistItems=this.checklist.checklist_items,console.log("checklists items hereeeeee",this.checklistItems);const t=this.filterChecklistItemsByType("Raw Material"),a=this.filterChecklistItemsByType("PCB"),s=this.filterChecklistItemsByType("Solder Paste"),i=this.filterChecklistItemsByType("Solder Bar"),l=this.filterChecklistItemsByType("Solder Flux"),n=this.filterChecklistItemsByType("IPA"),o=this.filterChecklistItemsByType("Solder Wire"),c=this.filterChecklistItemsByType("SMT Pallet"),d=this.filterChecklistItemsByType("Wave Pallet"),r=this.filterChecklistItemsByType("PCB Serial Number Label");this.isChecklistPassed=this.checklist.is_passed,this.activeBom=this.checklist.bom,this.filteredChecklistItems={"Raw Material":t,PCB:a,"Solder Paste":s,"Solder Bar":i,"Solder Flux":l,IPA:n,"Solder Wire":o,"SMT Pallet":c,"Wave Pallet":d,"PCB Serial Number Label":r},console.log("filered checklsit items",this.filteredChecklistItems),this.isRawMaterialSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Raw Material"),this.isPcbSufficient=this.isItemsSufficient(this.filteredChecklistItems,"PCB"),this.isSolderPasteSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Paste"),console.log("checking solder paste",this.isSolderPasteSufficient),this.isSolderBarSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Bar"),console.log("checkinsssg solder bar",this.isSolderBarSufficient),this.isSolderFluxSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Flux"),this.isIpaSufficient=this.isItemsSufficient(this.filteredChecklistItems,"IPA"),this.isSolderWireSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Wire"),this.isSMTPalletSufficient=this.isItemsSufficient(this.filteredChecklistItems,"SMT Pallet"),this.isWavePalletSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Wave Pallet"),this.isLabelSufficient=this.isItemsSufficient(this.filteredChecklistItems,"PCB Serial Number Label"),"Completed"!=this.checklist.status&&"Failed"!=this.checklist.status||(this.isChecklistEnded=!0),this.checklist.qr_code_link&&(this.generatedQRCode=this.checklist.qr_code_link),this.$store.commit("setIsLoading",!1)})).catch((e=>{console.log("error:",e),this.$notify({title:"An error occured, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1)}))},async getChecklist(){await tt.Z.get(`store/get-active-checklist/${this.$route.params.id}/`).then((e=>{console.log(e.data),this.checklist=e.data.checklist,this.checklistItems=this.checklist.checklist_items,console.log("chehcklist items hereeeeee",this.checklistItems);const t=this.filterChecklistItemsByType("Raw Material"),a=this.filterChecklistItemsByType("PCB"),s=this.filterChecklistItemsByType("Solder Paste"),i=this.filterChecklistItemsByType("Solder Bar"),l=this.filterChecklistItemsByType("Solder Flux"),n=this.filterChecklistItemsByType("IPA"),o=this.filterChecklistItemsByType("Solder Wire"),c=this.filterChecklistItemsByType("SMT Pallet"),d=this.filterChecklistItemsByType("Wave Pallet"),r=this.filterChecklistItemsByType("PCB Serial Number Label");this.isChecklistPassed=this.checklist.is_passed,this.activeBom=this.checklist.bom,this.filteredChecklistItems={"Raw Material":t,PCB:a,"Solder Paste":s,"Solder Bar":i,"Solder Flux":l,IPA:n,"Solder Wire":o,"SMT Pallet":c,"Wave Pallet":d,"PCB Serial Number Label":r},console.log("filered checklsit items",this.filteredChecklistItems),this.isRawMaterialSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Raw Material"),this.isPcbSufficient=this.isItemsSufficient(this.filteredChecklistItems,"PCB"),this.isSolderPasteSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Paste"),this.isSolderBarSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Bar"),console.log("checking solder bar",this.isSolderBarSufficient),this.isSolderFluxSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Flux"),this.isIpaSufficient=this.isItemsSufficient(this.filteredChecklistItems,"IPA"),this.isSolderWireSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Wire"),this.isSMTPalletSufficient=this.isItemsSufficient(this.filteredChecklistItems,"SMT Pallet"),this.isWavePalletSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Wave Pallet"),this.isLabelSufficient=this.isItemsSufficient(this.filteredChecklistItems,"PCB Serial Number Label"),"Completed"!=this.checklist.status&&"Failed"!=this.checklist.status||(this.isChecklistEnded=!0),this.checklist.qr_code_link&&(this.generatedQRCode=this.checklist.qr_code_link)})).catch((e=>{console.log("error:",e),this.$notify({title:"An error occured, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"})}))},async endChecklist(){this.$store.commit("setIsLoading",!0),clearInterval(this.pollingInterval),await tt.Z.get(`store/end-checklist/${this.checklist.id}/`).then((e=>{console.log(e.data),this.$notify({title:"Checklist ended",type:"bg-danger-subtle text-danger",duration:"5000"}),this.checklist=e.data.checklist,this.isChecklistPassed=this.checklist.is_passed,this.activeBom=this.checklist.bom,"Completed"!=this.checklist.status&&"Failed"!=this.checklist.status||(this.isChecklistEnded=!0),this.$router.push(`/generated-checklists/${this.$route.params.id}`),this.$store.commit("setIsLoading",!1)})).catch((e=>{console.log("error:",e),this.$notify({title:"An error occured, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1)}))},async generateQRCode(){const e=this.generateUniqueCode();console.log(e);const t=await nc.toDataURL(e),a={uniqueCode:e,qrCodeDataURL:t};this.saveQRCode(a)},generateUniqueCode(){const e=Date.now().toString(),t=Math.random().toString(36).substring(7);return`${e}-${t}`},async saveQRCode(e){await tt.Z.post(`store/save-qr-code/${this.checklist.id}/`,e).then((t=>{console.log(t.data),this.generatedQRCode=e.qrCodeDataURL,this.$notify({title:"QR Code generated and saved successfully",type:"bg-success-subtle text-success",duration:"5000"})})).catch((e=>{console.log("error:",e),this.$notify({title:"An error occured, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"})}))},printQRCode(){if(this.generatedQRCode){const e=document.getElementById("printable-content"),t=window.open("","","height=1000,width=1000");t.document.write(e.innerHTML),t.print()}},filterChecklistItemsByType(e){return this.checklistItems.filter((t=>{const a=t.checklist_item_type;return!(!a||!a.name)&&a.name.toUpperCase()===e.toUpperCase()}))},isItemsSufficient(e,t){const a=this.filteredChecklistItems[t];if(a){if(0===a.length)return!0;const e=a.filter((e=>!0===e.is_quantity_sufficient));return e.length===a.length}return!1},downloadBOM(){try{const e=this.checklist.bom.bom_file_url;console.log("file url",e);const t=document.createElement("a");t.href=e,t.download=this.checklist.bom.bom_file_name,document.body.appendChild(t),t.click(),document.body.removeChild(t)}catch(e){console.error("Error downloading BOM:",e)}}}};const _m=(0,ut.Z)(fm,[["render",gm],["__scopeId","data-v-a325eeac"]]);var vm=_m;const ym={key:0,class:"container text-center"},km=(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1),wm=(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1),Cm=[km,wm],Dm={key:1,class:"container"},Sm={class:"row align-items-center"},Mm={class:"col-md-12 mt-4"},Pm={class:"d-flex align-items-center"},Im=(0,i._)("h2",{class:"mb-0 me-3"},"Generated Checklists",-1),xm=(0,i._)("span",{class:"fs-4 text-muted"},"|",-1),Lm={"aria-label":"breadcrumb",class:"d-inline-block ms-3"},Rm={class:"breadcrumb bg-transparent m-0 p-0"},Bm=(0,i._)("li",{class:"breadcrumb-item"},[(0,i._)("a",{href:"/"},[(0,i._)("i",{class:"fas fa-home me-1"}),(0,i.Uk)("Home")])],-1),$m={class:"breadcrumb-item"},Em=(0,i._)("i",{class:"fas fa-list-alt me-1"},null,-1),Um=(0,i._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,i._)("i",{class:"fa-solid fa-list-check me-1"}),(0,i.Uk)(" Generated Checklists ")],-1);function Nm(e,t,a,s,l,n){const o=(0,i.up)("router-link"),c=(0,i.up)("CheckListsTable");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",ym,Cm)):((0,i.wg)(),(0,i.iD)("div",Dm,[(0,i._)("div",Sm,[(0,i._)("div",Mm,[(0,i._)("div",Pm,[Im,xm,(0,i._)("nav",Lm,[(0,i._)("ol",Rm,[Bm,(0,i._)("li",$m,[(0,i.Wm)(o,{to:"/checklist"},{default:(0,i.w5)((()=>[Em,(0,i.Uk)(" Checklist")])),_:1})]),Um])])])])]),(0,i.Wm)(c,{style:{"margin-top":"20px"},rowData:l.rowData},null,8,["rowData"])]))}function Tm(e,t,a,s,l,n){const o=(0,i.up)("ag-grid-vue");return(0,i.wg)(),(0,i.iD)("div",null,[a.rowData.length>0?((0,i.wg)(),(0,i.j4)(o,{key:0,style:{height:"500px"},class:"ag-theme-quartz",rowData:a.rowData,defaultColDef:l.defaultColDef,columnDefs:l.colDefs,pagination:!0,onRowClicked:n.onRowClicked,onRowSelected:n.onRowSelected},null,8,["rowData","defaultColDef","columnDefs","onRowClicked","onRowSelected"])):(0,i.kq)("",!0)])}var Om={components:{AgGridVue:ns.n},props:{rowData:{type:Array}},data(){return{colDefs:[{field:"id",hide:!0},{headerName:"Checklist ID",field:"id",headerCheckboxSelection:!0,checkboxSelection:!0},{headerName:"Unique Code",field:"unique_code",valueFormatter:function(e){return null===e.value?"null":e.value}},{headerName:"Project Name",field:"bom.product.project.name"},{headerName:"Product Name",field:"bom.product.name"},{headerName:"Product Code",field:"bom.product.product_code"},{headerName:"Batch Quantity",field:"batch_quantity"},{headerName:"Updated At",field:"updated_at"},{headerName:"Status",field:"status"},{headerName:"Actions",cellRenderer:this.editButtonRenderer}],defaultColDef:{filter:!0,sortable:!0,resizable:!0,autoSize:!0},selectedRows:[]}},methods:{onRowClicked(e){this.$emit("rowClicked",e.data)},onRowSelected(e){e.node.isSelected()&&this.$emit("rowSelected",e.node.data)},onSelectionChanged(){this.$refs.agGrid&&this.$refs.agGrid.api&&(this.selectedRows=this.$refs.agGrid.api.getSelectedRows())},editButtonRenderer(e){const t=document.createElement("button");return t.innerHTML='<i class="fas fa-eye"></i>',t.classList.add("btn","btn-success"),t.addEventListener("click",(()=>this.onViewClick(e.data))),t},onViewClick(e){"In Progress"===e.status?this.$router.push(`/begin-checklist/${e.bom.id}`):this.$router.push(`/checklist-details/${e.id}`)}}};const Am=(0,ut.Z)(Om,[["render",Tm],["__scopeId","data-v-4d2eec7a"]]);var qm=Am,Fm={components:{CheckListsTable:qm},data(){return{rowData:[]}},mounted(){this.fetchData()},methods:{async fetchData(){try{this.$store.commit("setIsLoading",!0);const e=await tt.Z.get(`store/generated-checklists/${this.$route.params.id}`);this.rowData=e.data,console.log("checklists",e.data),this.$store.commit("setIsLoading",!1)}catch(e){console.error("Error fetching CheckLists data:",e),this.$store.commit("setIsLoading",!1)}}}};const jm=(0,ut.Z)(Fm,[["render",Nm]]);var Wm=jm;const Vm=e=>((0,i.dD)("data-v-85661090"),e=e(),(0,i.Cn)(),e),zm={key:0,class:"container text-center"},Zm=Vm((()=>(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1))),Gm=Vm((()=>(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1))),Hm=[Zm,Gm],Qm={key:1,class:"container"},Ym={class:"row align-items-center"},Km={class:"col-md-6 mt-4"},Jm={class:"d-flex align-items-center"},Xm=Vm((()=>(0,i._)("h2",{class:"mb-0"},"Checklist Details",-1))),eu=Vm((()=>(0,i._)("span",{class:"ms-3 fs-4 text-muted me-3"},"|",-1))),tu={"aria-label":"breadcrumb",class:"flex-grow-1"},au={class:"breadcrumb bg-transparent m-0 p-0 d-flex flex-wrap"},su={class:"breadcrumb-item"},iu=Vm((()=>(0,i._)("i",{class:"fas fa-list-alt me-1"},null,-1))),lu={class:"breadcrumb-item"},nu=["href"],ou=Vm((()=>(0,i._)("i",{class:"fas fa-list-alt me-1"},null,-1))),cu=Vm((()=>(0,i._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,i._)("i",{class:"fa-solid fa-list-check me-1"}),(0,i.Uk)(" Checklist Details ")],-1))),du={class:"col-md-6 mt-4 d-flex justify-content-end"},ru={class:"container"},mu={class:"d-flex justify-content-end"},uu={class:"modal fade",id:"generateLabelModal",tabindex:"-1","aria-labelledby":"generateLabelModalLabel","aria-hidden":"true"},hu={class:"modal-dialog"},pu={class:"modal-content"},bu=Vm((()=>(0,i._)("div",{class:"modal-header"},[(0,i._)("h1",{class:"modal-title fs-5",id:"generateLabelModalLabel"}," Generate Label "),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),gu={class:"modal-body"},fu={key:0},_u={key:0,id:"printable-content"},vu=["src"],yu={key:1},ku={key:1},wu={class:"modal-footer"},Cu=Vm((()=>(0,i._)("button",{type:"button",class:"btn btn-dark","data-bs-dismiss":"modal"}," Cancel ",-1))),Du={key:0},Su={class:"card border-primary mb-4 mt-4"},Mu=Vm((()=>(0,i._)("div",{class:"card-header bg-primary text-white"},[(0,i._)("h4",{class:"mb-0"},"BOM Details")],-1))),Pu={class:"card-body"},Iu={class:"row"},xu={key:0,class:"col"},Lu=Vm((()=>(0,i._)("strong",null,"Project Name:",-1))),Ru={key:1,class:"col"},Bu=Vm((()=>(0,i._)("strong",null,"Product Name:",-1))),$u={class:"col"},Eu=Vm((()=>(0,i._)("strong",null,"BOM Rev No:",-1))),Uu={class:"col"},Nu=Vm((()=>(0,i._)("strong",null,"Issue Date:",-1))),Tu={class:"accordion",id:"accordionPanelsStayOpenExample"},Ou={class:"accordion-item"},Au={class:"accordion-header",id:"panelsStayOpen-headingOne"},qu={class:"accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseOne","aria-expanded":"true","aria-controls":"panelsStayOpen-collapseOne"},Fu={key:0},ju=Vm((()=>(0,i._)("i",{class:"fas fa-pause-circle fs-4 ms-2"},null,-1))),Wu=[ju],Vu={key:1},zu={key:0},Zu=Vm((()=>(0,i._)("i",{class:"bi bi-x-circle-fill fs-4 ms-2"},null,-1))),Gu=[Zu],Hu={key:1},Qu=Vm((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),Yu=[Qu],Ku={id:"panelsStayOpen-collapseOne",class:"accordion-collapse collapse show","aria-labelledby":"panelsStayOpen-headingOne"},Ju={class:"accordion-body"},Xu={class:"accordion-item"},eh={class:"accordion-header",id:"panelsStayOpen-headingTwo"},th={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseTwo","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseTwo"},ah={key:0},sh=Vm((()=>(0,i._)("i",{class:"fas fa-pause-circle fs-4 ms-2"},null,-1))),ih=[sh],lh={key:1},nh={key:0},oh=Vm((()=>(0,i._)("i",{class:"bi bi-x-circle-fill fs-4 ms-2"},null,-1))),ch=[oh],dh={key:1},rh=Vm((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),mh=[rh],uh={id:"panelsStayOpen-collapseTwo",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingTwo"},hh={class:"accordion-body"},ph={class:"accordion-item"},bh={class:"accordion-header",id:"panelsStayOpen-headingThree"},gh={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseThree","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseThree"},fh={key:0},_h=Vm((()=>(0,i._)("i",{class:"fas fa-pause-circle fs-4 ms-2"},null,-1))),vh=[_h],yh={key:1},kh={key:0},wh=Vm((()=>(0,i._)("i",{class:"bi bi-x-circle-fill fs-4 ms-2"},null,-1))),Ch=[wh],Dh={key:1},Sh=Vm((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),Mh=[Sh],Ph={id:"panelsStayOpen-collapseThree",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingThree"},Ih={class:"accordion-body"},xh={class:"accordion-item"},Lh={class:"accordion-header",id:"panelsStayOpen-headingFour"},Rh={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseFour","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseFour"},Bh={key:0},$h=Vm((()=>(0,i._)("i",{class:"fas fa-pause-circle fs-4 ms-2"},null,-1))),Eh=[$h],Uh={key:1},Nh={key:0},Th=Vm((()=>(0,i._)("i",{class:"bi bi-x-circle-fill fs-4 ms-2"},null,-1))),Oh=[Th],Ah={key:1},qh=Vm((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),Fh=[qh],jh={id:"panelsStayOpen-collapseFour",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingFour"},Wh={class:"accordion-body"},Vh={class:"accordion-item"},zh={class:"accordion-header",id:"panelsStayOpen-headingFive"},Zh={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseFive","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseFive"},Gh={key:0},Hh=Vm((()=>(0,i._)("i",{class:"fas fa-pause-circle fs-4 ms-2"},null,-1))),Qh=[Hh],Yh={key:1},Kh={key:0},Jh=Vm((()=>(0,i._)("i",{class:"bi bi-x-circle-fill fs-4 ms-2"},null,-1))),Xh=[Jh],ep={key:1},tp=Vm((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),ap=[tp],sp={"data-bs-toggle":"modal","data-bs-target":"#generateLabelModal",id:"panelsStayOpen-collapseFive",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingFive"},ip={class:"accordion-body"},lp={class:"accordion-item"},np={class:"accordion-header",id:"panelsStayOpen-headingSix"},op={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseSix","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseSix"},cp={key:0},dp=Vm((()=>(0,i._)("i",{class:"fas fa-pause-circle fs-4 ms-2"},null,-1))),rp=[dp],mp={key:1},up={key:0},hp=Vm((()=>(0,i._)("i",{class:"bi bi-x-circle-fill fs-4 ms-2"},null,-1))),pp=[hp],bp={key:1},gp=Vm((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),fp=[gp],_p={id:"panelsStayOpen-collapseSix",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingSix"},vp={class:"accordion-body"},yp={class:"accordion-item"},kp={class:"accordion-header",id:"panelsStayOpen-headingSeven"},wp={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseSeven","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseSeven"},Cp={key:0},Dp=Vm((()=>(0,i._)("i",{class:"fas fa-pause-circle fs-4 ms-2"},null,-1))),Sp=[Dp],Mp={key:1},Pp={key:0},Ip=Vm((()=>(0,i._)("i",{class:"bi bi-x-circle-fill fs-4 ms-2"},null,-1))),xp=[Ip],Lp={key:1},Rp=Vm((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),Bp=[Rp],$p={id:"panelsStayOpen-collapseSeven",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingSeven"},Ep={class:"accordion-body"},Up={class:"accordion-item"},Np={class:"accordion-header",id:"panelsStayOpen-headingEight"},Tp={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseEight","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseEight"},Op={key:0},Ap=Vm((()=>(0,i._)("i",{class:"fas fa-pause-circle fs-4 ms-2"},null,-1))),qp=[Ap],Fp={key:1},jp={key:0},Wp=Vm((()=>(0,i._)("i",{class:"bi bi-x-circle-fill fs-4 ms-2"},null,-1))),Vp=[Wp],zp={key:1},Zp=Vm((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),Gp=[Zp],Hp={id:"panelsStayOpen-collapseEight",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingEight"},Qp={class:"accordion-body"},Yp={class:"accordion-item"},Kp={class:"accordion-header",id:"panelsStayOpen-headingNine"},Jp={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseNine","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseNine"},Xp={key:0},eb=Vm((()=>(0,i._)("i",{class:"fas fa-pause-circle fs-4 ms-2"},null,-1))),tb=[eb],ab={key:1},sb={key:0},ib=Vm((()=>(0,i._)("i",{class:"bi bi-x-circle-fill fs-4 ms-2"},null,-1))),lb=[ib],nb={key:1},ob=Vm((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),cb=[ob],db={id:"panelsStayOpen-collapseNine",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingNine"},rb={class:"accordion-body"},mb={class:"accordion-item"},ub={class:"accordion-header",id:"panelsStayOpen-headingTen"},hb={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseTen","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseTen"},pb={key:0},bb=Vm((()=>(0,i._)("i",{class:"fas fa-pause-circle fs-4 ms-2"},null,-1))),gb=[bb],fb={key:1},_b={key:0},vb=Vm((()=>(0,i._)("i",{class:"bi bi-x-circle-fill fs-4 ms-2"},null,-1))),yb=[vb],kb={key:1},wb=Vm((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),Cb=[wb],Db={id:"panelsStayOpen-collapseTen",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingTen"},Sb={class:"accordion-body"};function Mb(e,t,a,s,l,n){const o=(0,i.up)("router-link"),c=(0,i.up)("CheckListTable");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",zm,Hm)):((0,i.wg)(),(0,i.iD)("div",Qm,[(0,i._)("div",Ym,[(0,i._)("div",Km,[(0,i._)("div",Jm,[Xm,eu,(0,i._)("nav",tu,[(0,i._)("ol",au,[(0,i._)("li",su,[(0,i.Wm)(o,{to:"/checklist"},{default:(0,i.w5)((()=>[iu,(0,i.Uk)(" Checklist ")])),_:1})]),(0,i._)("li",lu,[this.checklist&&this.checklist.bom&&this.checklist.bom.id?((0,i.wg)(),(0,i.iD)("a",{key:0,href:"/generated-checklists/"+this.checklist.bom.id},[ou,(0,i.Uk)(" Generated Checklists ")],8,nu)):(0,i.kq)("",!0)]),cu])])])]),(0,i._)("div",du,[(0,i._)("div",ru,[(0,i._)("div",mu,[this.checklist&&"Paused"===this.checklist.status?((0,i.wg)(),(0,i.iD)("button",{key:0,type:"button",class:"btn btn-success me-2",onClick:t[0]||(t[0]=(...e)=>n.resumeChecklist&&n.resumeChecklist(...e))}," Resume Checklist ")):(0,i.kq)("",!0)])])])]),(0,i._)("div",uu,[(0,i._)("div",hu,[(0,i._)("div",pu,[bu,(0,i._)("div",gu,[l.isChecklistPassed?((0,i.wg)(),(0,i.iD)("div",fu,[l.generatedQRCode?((0,i.wg)(),(0,i.iD)("div",_u,[(0,i._)("img",{src:l.generatedQRCode,alt:"QR Code"},null,8,vu)])):((0,i.wg)(),(0,i.iD)("p",yu," All Checks passed successfully, generate a label by pressing the generate button. "))])):((0,i.wg)(),(0,i.iD)("div",ku," You can only generate a label if all checks are passed "))]),(0,i._)("div",wu,[Cu,l.isChecklistPassed?((0,i.wg)(),(0,i.iD)("div",Du,[l.generatedQRCode?((0,i.wg)(),(0,i.iD)("button",{key:0,type:"button",class:"btn btn-success",onClick:t[1]||(t[1]=(...e)=>n.printQRCode&&n.printQRCode(...e))}," Print ")):((0,i.wg)(),(0,i.iD)("button",{key:1,type:"button",class:"btn btn-success",onClick:t[2]||(t[2]=(...e)=>n.generateQRCode&&n.generateQRCode(...e))}," Generate "))])):(0,i.kq)("",!0)])])])]),(0,i._)("div",Su,[Mu,(0,i._)("div",Pu,[(0,i._)("div",Iu,[l.activeBom.product?((0,i.wg)(),(0,i.iD)("div",xu,[Lu,(0,i.Uk)(" "+(0,_t.zw)(l.activeBom.product.project.name),1)])):(0,i.kq)("",!0),l.activeBom.product?((0,i.wg)(),(0,i.iD)("div",Ru,[Bu,(0,i.Uk)(" "+(0,_t.zw)(l.activeBom.product.name),1)])):(0,i.kq)("",!0),(0,i._)("div",$u,[Eu,(0,i.Uk)(" "+(0,_t.zw)(l.activeBom.bom_rev_number),1)]),(0,i._)("div",Uu,[Nu,(0,i.Uk)(" "+(0,_t.zw)(l.activeBom.issue_date),1)])])])]),(0,i._)("div",Tu,[(0,i._)("div",Ou,[(0,i._)("h2",Au,[(0,i._)("button",qu,[(0,i.Uk)(" Raw Material "),"Paused"==this.checklist.status?((0,i.wg)(),(0,i.iD)("div",Fu,Wu)):((0,i.wg)(),(0,i.iD)("div",Vu,[0==l.isRawMaterialSufficient?((0,i.wg)(),(0,i.iD)("div",zu,Gu)):((0,i.wg)(),(0,i.iD)("div",Hu,Yu))]))])]),(0,i._)("div",Ku,[(0,i._)("div",Ju,[(0,i.Wm)(c,{checklistItems:l.filteredChecklistItems["Raw Material"],checklistStatus:this.checklistStatus},null,8,["checklistItems","checklistStatus"])])])]),(0,i._)("div",Xu,[(0,i._)("h2",eh,[(0,i._)("button",th,[(0,i.Uk)(" PCB Check "),"Paused"==this.checklist.status?((0,i.wg)(),(0,i.iD)("div",ah,ih)):((0,i.wg)(),(0,i.iD)("div",lh,[0==l.isPcbSufficient?((0,i.wg)(),(0,i.iD)("div",nh,ch)):((0,i.wg)(),(0,i.iD)("div",dh,mh))]))])]),(0,i._)("div",uh,[(0,i._)("div",hh,[(0,i.Wm)(c,{checklistItems:l.filteredChecklistItems["PCB"],checklistStatus:this.checklistStatus},null,8,["checklistItems","checklistStatus"])])])]),(0,i._)("div",ph,[(0,i._)("h2",bh,[(0,i._)("button",gh,[(0,i.Uk)(" Solder Paste "),"Paused"==this.checklist.status?((0,i.wg)(),(0,i.iD)("div",fh,vh)):((0,i.wg)(),(0,i.iD)("div",yh,[0==l.isSolderPasteSufficient?((0,i.wg)(),(0,i.iD)("div",kh,Ch)):((0,i.wg)(),(0,i.iD)("div",Dh,Mh))]))])]),(0,i._)("div",Ph,[(0,i._)("div",Ih,[(0,i.Wm)(c,{checklistItems:l.filteredChecklistItems["Solder Paste"],checklistStatus:this.checklistStatus},null,8,["checklistItems","checklistStatus"])])])]),(0,i._)("div",xh,[(0,i._)("h2",Lh,[(0,i._)("button",Rh,[(0,i.Uk)(" Solder Bar "),"Paused"==this.checklist.status?((0,i.wg)(),(0,i.iD)("div",Bh,Eh)):((0,i.wg)(),(0,i.iD)("div",Uh,[0==l.isSolderBarSufficient?((0,i.wg)(),(0,i.iD)("div",Nh,Oh)):((0,i.wg)(),(0,i.iD)("div",Ah,Fh))]))])]),(0,i._)("div",jh,[(0,i._)("div",Wh,[(0,i.Wm)(c,{checklistItems:l.filteredChecklistItems["Solder Bar"],checklistStatus:this.checklistStatus},null,8,["checklistItems","checklistStatus"]),(0,i.Uk)("> ")])])]),(0,i._)("div",Vh,[(0,i._)("h2",zh,[(0,i._)("button",Zh,[(0,i.Uk)(" Solder Flux "),"Paused"==this.checklist.status?((0,i.wg)(),(0,i.iD)("div",Gh,Qh)):((0,i.wg)(),(0,i.iD)("div",Yh,[0==l.isSolderFluxSufficient?((0,i.wg)(),(0,i.iD)("div",Kh,Xh)):((0,i.wg)(),(0,i.iD)("div",ep,ap))]))])]),(0,i._)("div",sp,[(0,i._)("div",ip,[(0,i.Wm)(c,{checklistItems:l.filteredChecklistItems["Solder Flux"],checklistStatus:this.checklistStatus},null,8,["checklistItems","checklistStatus"])])])]),(0,i._)("div",lp,[(0,i._)("h2",np,[(0,i._)("button",op,[(0,i.Uk)(" IPA "),"Paused"==this.checklist.status?((0,i.wg)(),(0,i.iD)("div",cp,rp)):((0,i.wg)(),(0,i.iD)("div",mp,[0==l.isIpaSufficient?((0,i.wg)(),(0,i.iD)("div",up,pp)):((0,i.wg)(),(0,i.iD)("div",bp,fp))]))])]),(0,i._)("div",_p,[(0,i._)("div",vp,[(0,i.Wm)(c,{checklistItems:l.filteredChecklistItems["IPA"],checklistStatus:this.checklistStatus},null,8,["checklistItems","checklistStatus"])])])]),(0,i._)("div",yp,[(0,i._)("h2",kp,[(0,i._)("button",wp,[(0,i.Uk)(" Solder Wire "),"Paused"==this.checklist.status?((0,i.wg)(),(0,i.iD)("div",Cp,Sp)):((0,i.wg)(),(0,i.iD)("div",Mp,[0==l.isSolderWireSufficient?((0,i.wg)(),(0,i.iD)("div",Pp,xp)):((0,i.wg)(),(0,i.iD)("div",Lp,Bp))]))])]),(0,i._)("div",$p,[(0,i._)("div",Ep,[(0,i.Wm)(c,{checklistItems:l.filteredChecklistItems["Solder Wire"],checklistStatus:this.checklistStatus},null,8,["checklistItems","checklistStatus"])])])]),(0,i._)("div",Up,[(0,i._)("h2",Np,[(0,i._)("button",Tp,[(0,i.Uk)(" SMT Pallet "),"Paused"==this.checklist.status?((0,i.wg)(),(0,i.iD)("div",Op,qp)):((0,i.wg)(),(0,i.iD)("div",Fp,[0==l.isSMTPalletSufficient?((0,i.wg)(),(0,i.iD)("div",jp,Vp)):((0,i.wg)(),(0,i.iD)("div",zp,Gp))]))])]),(0,i._)("div",Hp,[(0,i._)("div",Qp,[(0,i.Wm)(c,{checklistItems:l.filteredChecklistItems["SMT Pallet"],checklistStatus:this.checklistStatus},null,8,["checklistItems","checklistStatus"])])])]),(0,i._)("div",Yp,[(0,i._)("h2",Kp,[(0,i._)("button",Jp,[(0,i.Uk)(" Wave Pallet "),"Paused"==this.checklist.status?((0,i.wg)(),(0,i.iD)("div",Xp,tb)):((0,i.wg)(),(0,i.iD)("div",ab,[0==l.isWavePalletSufficient?((0,i.wg)(),(0,i.iD)("div",sb,lb)):((0,i.wg)(),(0,i.iD)("div",nb,cb))]))])]),(0,i._)("div",db,[(0,i._)("div",rb,[(0,i.Wm)(c,{checklistItems:l.filteredChecklistItems["Wave Pallet"],checklistStatus:this.checklistStatus},null,8,["checklistItems","checklistStatus"])])])]),(0,i._)("div",mb,[(0,i._)("h2",ub,[(0,i._)("button",hb,[(0,i.Uk)(" PCB Serial Number Label "),"Paused"==this.checklist.status?((0,i.wg)(),(0,i.iD)("div",pb,gb)):((0,i.wg)(),(0,i.iD)("div",fb,[0==l.isLabelSufficient?((0,i.wg)(),(0,i.iD)("div",_b,yb)):((0,i.wg)(),(0,i.iD)("div",kb,Cb))]))])]),(0,i._)("div",Db,[(0,i._)("div",Sb,[(0,i.Wm)(c,{checklistItems:l.filteredChecklistItems["PCB Serial Number Label"],checklistStatus:this.checklistStatus},null,8,["checklistItems","checklistStatus"])])])])])]))}var Pb={components:{CheckListTable:lc},data(){return{checklistStatus:"",activeBom:"",checklist:"",checklistItems:[],isRawMaterialSufficient:!1,isPcbSufficient:!1,isSolderPasteSufficient:!1,isSolderBarSufficient:!1,isSolderFluxSufficient:!1,isIpaSufficient:!1,isSolderWireSufficient:!1,isSMTPalletSufficient:!1,isWavePalletSufficient:!1,isLabelSufficient:!1,isChecklistPassed:!1,isChecklistEnded:!1,pollingInterval:"",filteredChecklistItems:{"Raw Material":[],PCB:[],"Solder Paste":[],"Solder Bar":[],"Solder Flux":[],IPA:[],"Solder Wire":[],"SMT Pallet":[],"Wave Pallet":[],"PCB Serial Number Label":[]},generatedQRCode:""}},mounted(){this.getChecklist()},methods:{async getChecklist(){this.$store.commit("setIsLoading",!0),await tt.Z.get(`store/get-checklist-details/${this.$route.params.id}/`).then((e=>{console.log("yehh",e.data),this.checklist=e.data.checklist,this.checklistStatus=e.data.checklist.status,this.checklistItems=this.checklist.checklist_items,console.log("chehcklist hereeeeee",this.checklist),console.log("chehcklist items hereeeeee",this.checklistItems);const t=this.filterChecklistItemsByType("Raw Material");console.log(t);const a=this.filterChecklistItemsByType("PCB"),s=this.filterChecklistItemsByType("Solder Paste"),i=this.filterChecklistItemsByType("Solder Bar"),l=this.filterChecklistItemsByType("Solder Flux"),n=this.filterChecklistItemsByType("IPA"),o=this.filterChecklistItemsByType("Solder Wire"),c=this.filterChecklistItemsByType("SMT Pallet"),d=this.filterChecklistItemsByType("Wave Pallet"),r=this.filterChecklistItemsByType("PCB Serial Number Label");this.isChecklistPassed=this.checklist.is_passed,this.activeBom=this.checklist.bom,this.filteredChecklistItems={"Raw Material":t,PCB:a,"Solder Paste":s,"Solder Bar":i,"Solder Flux":l,IPA:n,"Solder Wire":o,"SMT Pallet":c,"Wave Pallet":d,"PCB Serial Number Label":r},console.log("filered checklsit items",this.filteredChecklistItems),this.isRawMaterialSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Raw Material"),this.isPcbSufficient=this.isItemsSufficient(this.filteredChecklistItems,"PCB"),this.isSolderPasteSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Paste"),this.isSolderBarSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Bar"),console.log("checking solder bar",this.isSolderBarSufficient),this.isSolderFluxSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Flux"),this.isIpaSufficient=this.isItemsSufficient(this.filteredChecklistItems,"IPA"),this.isSolderWireSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Wire"),this.isSMTPalletSufficient=this.isItemsSufficient(this.filteredChecklistItems,"SMT Pallet"),this.isWavePalletSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Wave Pallet"),this.isLabelSufficient=this.isItemsSufficient(this.filteredChecklistItems,"PCB Serial Number Label"),this.isChecklistPassed=this.checklist.is_passed,this.activeBom=this.checklist.bom,"Completed"!=this.checklist.status&&"Failed"!=this.checklist.status||(this.isChecklistEnded=!0),this.checklist.qr_code_link&&(this.generatedQRCode=this.checklist.qr_code_link),this.$store.commit("setIsLoading",!1)})).catch((e=>{console.log("error:",e),this.$notify({title:"An error occured, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1)}))},filterChecklistItemsByType(e){return this.checklistItems.filter((t=>{const a=t.checklist_item_type;return!(!a||!a.name)&&a.name.toLowerCase()===e.toLowerCase()}))},isItemsSufficient(e,t){const a=this.filteredChecklistItems[t];if(0===a.length)return!0;const s=a.filter((e=>!0===e.is_quantity_sufficient));return s.length===a.length},async generateQRCode(){const e=this.generateUniqueCode();console.log(e);const t=await nc.toDataURL(e),a={uniqueCode:e,qrCodeDataURL:t};this.saveQRCode(a)},generateUniqueCode(){const e=Date.now().toString(),t=Math.random().toString(36).substring(7);return`${e}-${t}`},async saveQRCode(e){await tt.Z.post(`store/save-qr-code/${this.checklist.id}/`,e).then((t=>{console.log(t.data),this.generatedQRCode=e.qrCodeDataURL,this.$notify({title:"QR Code generated and saved successfully",type:"bg-success-subtle text-success",duration:"5000"})})).catch((e=>{console.log("error:",e),this.$notify({title:"An error occured, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"})}))},printQRCode(){if(this.generatedQRCode){const e=document.getElementById("printable-content"),t=window.open("","","height=1000,width=1000");t.document.write(e.innerHTML),t.print()}},resumeChecklist(){this.$store.commit("setIsLoading",!0),console.log("this is the checklist id",this.checklist.id),tt.Z.post(`/store/resume-checklist/${this.checklist.id}/`).then((e=>{console.log(e.data.message),200===e.status?(this.$router.push(`/begin-checklist/${this.checklist.bom.id}`),this.$notify({title:e.data.message,type:"bg-success-subtle text-success",duration:"5000"})):this.$notify({title:e.data.error,type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1)})).catch((e=>{console.error("An error occurred:",e.response.data),this.$notify({title:e.response.data.error,type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1)}))}}};const Ib=(0,ut.Z)(Pb,[["render",Mb],["__scopeId","data-v-85661090"]]);var xb=Ib;const Lb={class:"container"},Rb=(0,i.uE)('<div class="row align-items-center"><div class="col-md-6 mt-4"><div class="d-flex align-items-center"><h2 class="mb-0">Reports</h2><span class="ms-3 fs-4 text-muted">|</span><nav aria-label="breadcrumb" class="d-inline-block ms-3"><ol class="breadcrumb bg-transparent m-0 p-0"><li class="breadcrumb-item"><a href="/"><i class="fas fa-home me-1"></i>Home</a></li><li class="breadcrumb-item active" aria-current="page"><i class="fas fa-chart-bar me-1"></i> Reports </li></ol></nav></div></div></div>',1),Bb={class:"conatiner"},$b={class:"list-group pt-4"};function Eb(e,t){const a=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",Lb,[Rb,(0,i._)("div",Bb,[(0,i._)("ul",$b,[(0,i.Wm)(a,{class:"list-group-item list-group-item-action text-left",to:"/checklist-report"},{default:(0,i.w5)((()=>[(0,i.Uk)(" Checklist Report ")])),_:1})])])])}const Ub={},Nb=(0,ut.Z)(Ub,[["render",Eb]]);var Tb=Nb;const Ob=e=>((0,i.dD)("data-v-bbcef4d6"),e=e(),(0,i.Cn)(),e),Ab={key:0,class:"container text-center"},qb=Ob((()=>(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1))),Fb=Ob((()=>(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1))),jb=[qb,Fb],Wb={key:1,class:"container"},Vb={class:"row align-items-center"},zb=(0,i.uE)('<div class="col-md-6 mt-4" data-v-bbcef4d6><div class="d-flex align-items-center" data-v-bbcef4d6><h2 class="mb-0" data-v-bbcef4d6>Dashboard</h2><span class="ms-3 fs-4 text-muted" data-v-bbcef4d6>|</span><nav aria-label="breadcrumb" class="d-inline-block ms-3" data-v-bbcef4d6><ol class="breadcrumb bg-transparent m-0 p-0" data-v-bbcef4d6><li class="breadcrumb-item" data-v-bbcef4d6><a href="/" data-v-bbcef4d6><i class="fas fa-home me-1" data-v-bbcef4d6></i>Home</a></li><li class="breadcrumb-item active" aria-current="page" data-v-bbcef4d6><i class="fa fa-tachometer me-1" aria-hidden="true" data-v-bbcef4d6></i> Dashboard </li></ol></nav></div></div>',1),Zb={class:"col-md-6 mt-4 text-end"},Gb={class:"container"},Hb={class:"dropdown"},Qb={class:"btn btn-secondary dropdown-toggle",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"},Yb={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton1"},Kb=Ob((()=>(0,i._)("a",{class:"dropdown-item",href:"#"},"Today",-1))),Jb=[Kb],Xb=Ob((()=>(0,i._)("a",{class:"dropdown-item",href:"#"},"Previous Week",-1))),eg=[Xb],tg=Ob((()=>(0,i._)("a",{class:"dropdown-item",href:"#"},"Previous Month",-1))),ag=[tg],sg=Ob((()=>(0,i._)("li",null,[(0,i._)("button",{type:"button",class:"btn","data-bs-toggle":"modal","data-bs-target":"#exampleModal"}," Custom Date Range ")],-1))),ig={class:"row mt-4",style:{display:"flex",gap:"30px","justify-content":"space-between"}},lg={class:"small-box bg-gradient-success",style:{flex:"1"}},ng={class:"inner"},og=Ob((()=>(0,i._)("p",null,"Completed",-1))),cg=Ob((()=>(0,i._)("div",{class:"icon"},[(0,i._)("i",{class:"fa-solid fa-check"})],-1))),dg={class:"small-box bg-gradient-primary",style:{flex:"1"}},rg={class:"inner"},mg=Ob((()=>(0,i._)("p",null,"In Progress",-1))),ug=Ob((()=>(0,i._)("div",{class:"icon"},[(0,i._)("i",{class:"fa-solid fa-spinner"})],-1))),hg={class:"small-box bg-gradient-danger",style:{flex:"1"}},pg={class:"inner"},bg=Ob((()=>(0,i._)("p",null,"Failed",-1))),gg=Ob((()=>(0,i._)("div",{class:"icon"},[(0,i._)("i",{class:"fa-solid fa-xmark"})],-1))),fg={class:"row mt-4 d-flex"},_g={class:"col-6"},vg={class:"card card-primary"},yg={class:"card-header"},kg=Ob((()=>(0,i._)("h3",{class:"card-title"},"In Progress Checklists",-1))),wg={class:"card-tools"},Cg={class:"card-body"},Dg={class:"row"},Sg={key:0},Mg={class:"list-group list-group-flush"},Pg={key:1},Ig={class:"col-6"},xg={class:"card card-success"},Lg={class:"card-header"},Rg=Ob((()=>(0,i._)("h3",{class:"card-title"},"Completed Checklists",-1))),Bg={class:"card-tools"},$g={class:"card-body"},Eg={class:"row"},Ug={key:0},Ng={class:"list-group list-group-flush"},Tg=["onClick"],Og={key:1},Ag={class:"row mt-4 d-flex"},qg={class:"col-6"},Fg={class:"card card-danger"},jg={class:"card-header"},Wg=Ob((()=>(0,i._)("h3",{class:"card-title"},"Failed Checklists",-1))),Vg={class:"card-tools"},zg={class:"card-body"},Zg={class:"row"},Gg={key:0},Hg={class:"list-group list-group-flush"},Qg=["onClick"],Yg=Ob((()=>(0,i._)("i",{class:"fas fa-eye"},null,-1))),Kg={key:1},Jg=Ob((()=>(0,i._)("div",{class:"col-6"},null,-1))),Xg={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},ef={class:"modal-dialog"},tf={class:"modal-content"},af=Ob((()=>(0,i._)("div",{class:"modal-header"},[(0,i._)("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},[(0,i._)("strong",null,"Custom Date Range")]),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),sf={class:"modal-body"},lf={class:"mb-3"},nf=Ob((()=>(0,i._)("label",{for:"startDate",class:"form-label"},"Start Date:",-1))),of={class:"mb-3"},cf=Ob((()=>(0,i._)("label",{for:"endDate",class:"form-label"},"End Date:",-1))),df={key:0,class:"alert alert-danger mt-3 p-2"},rf=Ob((()=>(0,i._)("i",{class:"fas fa-exclamation-triangle"},null,-1))),mf={class:"modal-footer"},uf=Ob((()=>(0,i._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1))),hf=["disabled"];function pf(e,t,a,l,n,o){return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",Ab,jb)):((0,i.wg)(),(0,i.iD)("div",Wb,[(0,i._)("div",Vb,[zb,(0,i._)("div",Zb,[(0,i._)("div",Gb,[(0,i._)("div",Hb,[(0,i._)("button",Qb,(0,_t.zw)("Previous_Week"===n.selectedOption?"Previous Week":"Previous_Month"===n.selectedOption?"Previous Month":n.selectedOption),1),(0,i._)("ul",Yb,[(0,i._)("li",{onClick:t[0]||(t[0]=e=>o.selectOption("Today")),class:(0,_t.C_)({active:"Today"===n.selectedOption})},Jb,2),(0,i._)("li",{onClick:t[1]||(t[1]=e=>o.selectOption("Previous_Week")),class:(0,_t.C_)({active:"Previous_Week"===n.selectedOption})},eg,2),(0,i._)("li",{onClick:t[2]||(t[2]=e=>o.selectOption("Previous_Month")),class:(0,_t.C_)({active:"Previous_Month"===n.selectedOption})},ag,2),sg])])])])]),(0,i._)("div",ig,[(0,i._)("div",lg,[(0,i._)("div",ng,[(0,i._)("h3",null,(0,_t.zw)(n.result.completed_checklists?n.result.completed_checklists.length:"Loading"),1),og]),cg]),(0,i._)("div",dg,[(0,i._)("div",rg,[(0,i._)("h3",null,(0,_t.zw)(n.result.in_progress?n.result.in_progress.length:"Loading"),1),mg]),ug]),(0,i._)("div",hg,[(0,i._)("div",pg,[(0,i._)("h3",null,(0,_t.zw)(n.result.failed_checklists?n.result.failed_checklists.length:"Loading"),1),bg]),gg])]),(0,i._)("div",fg,[(0,i._)("div",_g,[(0,i._)("div",vg,[(0,i._)("div",yg,[kg,(0,i._)("div",wg,[(0,i._)("button",{class:"btn btn-primary btn-sm",onClick:t[3]||(t[3]=(...e)=>o.redirectToGeneratedChecklistPage&&o.redirectToGeneratedChecklistPage(...e))}," View All ")])]),(0,i._)("div",Cg,[(0,i._)("div",Dg,[n.result&&n.result.in_progress&&n.result.in_progress.length>0?((0,i.wg)(),(0,i.iD)("div",Sg,[(0,i._)("ul",Mg,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.result.in_progress,((e,a)=>((0,i.wg)(),(0,i.iD)("li",{key:a,class:"list-group-item d-flex justify-content-between align-items-center",style:{cursor:"pointer"}},[(0,i.Uk)((0,_t.zw)(e.bom.product.name)+" - "+(0,_t.zw)(e.updated_at)+" ",1),(0,i._)("i",{class:"fas fa-eye",onClick:t[4]||(t[4]=e=>o.InProgressRedirectToChecklist())})])))),128))])])):((0,i.wg)(),(0,i.iD)("div",Pg,"None"))])])])]),(0,i._)("div",Ig,[(0,i._)("div",xg,[(0,i._)("div",Lg,[Rg,(0,i._)("div",Bg,[(0,i._)("button",{class:"btn btn-success btn-sm",onClick:t[5]||(t[5]=e=>o.redirectToGeneratedChecklistPage())}," View All ")])]),(0,i._)("div",$g,[(0,i._)("div",Eg,[n.result&&n.result.completed_checklists&&n.result.completed_checklists.length>0?((0,i.wg)(),(0,i.iD)("div",Ug,[(0,i._)("ul",Ng,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.result.completed_checklists,((e,t)=>((0,i.wg)(),(0,i.iD)("li",{key:t,class:"list-group-item d-flex justify-content-between align-items-center",style:{cursor:"pointer"}},[(0,i.Uk)((0,_t.zw)(e.bom.product.name)+" - "+(0,_t.zw)(e.updated_at)+" ",1),(0,i._)("i",{class:"fas fa-eye",onClick:t=>o.CompletedRedirectToDetailsChecklist(e.id)},null,8,Tg)])))),128))])])):((0,i.wg)(),(0,i.iD)("div",Og,"None"))])])])])]),(0,i._)("div",Ag,[(0,i._)("div",qg,[(0,i._)("div",Fg,[(0,i._)("div",jg,[Wg,(0,i._)("div",Vg,[(0,i._)("button",{class:"btn btn-danger btn-sm",onClick:t[6]||(t[6]=(...e)=>o.redirectToGeneratedChecklistPage&&o.redirectToGeneratedChecklistPage(...e))}," View All ")])]),(0,i._)("div",zg,[(0,i._)("div",Zg,[n.result&&n.result.failed_checklists&&n.result.failed_checklists.length>0?((0,i.wg)(),(0,i.iD)("div",Gg,[(0,i._)("ul",Hg,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.result.failed_checklists,((e,t)=>((0,i.wg)(),(0,i.iD)("li",{key:t,class:"list-group-item d-flex justify-content-between align-items-center",onClick:t=>o.FailedRedirectToDetailsChecklist(e.id),style:{cursor:"pointer"}},[(0,i.Uk)((0,_t.zw)(e.bom.product.name)+" - "+(0,_t.zw)(e.updated_at)+" ",1),Yg],8,Qg)))),128))])])):((0,i.wg)(),(0,i.iD)("div",Kg,"None"))])])])]),Jg]),(0,i._)("div",Xg,[(0,i._)("div",ef,[(0,i._)("div",tf,[af,(0,i._)("div",sf,[(0,i._)("div",lf,[nf,(0,i.wy)((0,i._)("input",{id:"startDate",type:"date","onUpdate:modelValue":t[7]||(t[7]=e=>n.selectedStartDate=e),class:"form-control",placeholder:"Select start date",onInput:t[8]||(t[8]=(...e)=>o.validateDates&&o.validateDates(...e))},null,544),[[s.nr,n.selectedStartDate]])]),(0,i._)("div",of,[cf,(0,i.wy)((0,i._)("input",{id:"endDate",type:"date","onUpdate:modelValue":t[9]||(t[9]=e=>n.selectedEndDate=e),class:"form-control",placeholder:"Select end date",onInput:t[10]||(t[10]=(...e)=>o.validateDates&&o.validateDates(...e))},null,544),[[s.nr,n.selectedEndDate]])]),n.errorMessage?((0,i.wg)(),(0,i.iD)("div",df,[rf,(0,i.Uk)(" "+(0,_t.zw)(n.errorMessage),1)])):(0,i.kq)("",!0)]),(0,i._)("div",mf,[uf,(0,i._)("button",{type:"button",class:"btn btn-success",onClick:t[11]||(t[11]=(...e)=>o.setSelectedOptionAndFetchData&&o.setSelectedOptionAndFetchData(...e)),disabled:o.isFetchButtonDisabled,"data-bs-dismiss":"modal"}," Fetch Checklists ",8,hf)])])])])]))}var bf={components:{},data(){return{selectedOption:"Today",result:{},selectedCustomDate:null,selectedStartDate:"",selectedEndDate:"",errorMessage:""}},computed:{isFetchButtonDisabled(){return!this.selectedStartDate||!this.selectedEndDate||new Date(this.selectedStartDate)>new Date(this.selectedEndDate)||new Date(this.selectedStartDate)>new Date||new Date(this.selectedEndDate)>new Date}},mounted(){this.fetchData()},methods:{validateDates(){if(!this.selectedStartDate)return void(this.errorMessage="Please select a start date.");const e=new Date(this.selectedStartDate),t=new Date;if(e>t)return void(this.errorMessage="Start date cannot be in the future.");if(!this.selectedEndDate)return void(this.errorMessage="");const a=new Date(this.selectedEndDate);this.errorMessage=e>a?"Start date cannot be greater than end date.":a>t?"End date cannot be in the future.":""},selectOption(e){this.selectedOption=e,"Custom"!==this.selectOption&&this.fetchData()},async fetchData(){const e={selected_option:this.selectedOption,start_date:this.selectedStartDate,end_date:this.selectedEndDate};console.log(e.selected_option),console.log(e.start_date),console.log(e.end_date),this.$store.commit("setIsLoading",!0),await tt.Z.post("store/get-checklist-count/",e).then((e=>{this.result=e.data,console.log("backend data",this.result),this.$store.commit("setIsLoading",!1)})).catch((e=>{console.error(e),this.$store.commit("setIsLoading",!1)}))},setSelectedOptionAndFetchData(){this.selectedOption="Custom",this.validateDates(),""===this.errorMessage&&this.fetchData()},redirectToGeneratedChecklistPage(){const e=[...this.result.in_progress,...this.result.completed_checklists,...this.result.failed_checklists],t=e.find((e=>void 0!==e.bom?.id&&null!==e.bom?.id));if(t){const e=t.bom.id;console.log(e),this.$router.push(`/generated-checklists/${e}`)}else console.error("No valid id found in the checklists")},InProgressRedirectToChecklist(){const e=this.result?.in_progress?.[0]?.bom?.id;console.log(e),void 0!==e&&null!==e?this.$router.push(`/begin-checklist/${e}`):console.error("id is not available")},FailedRedirectToDetailsChecklist(e){void 0!==e&&null!==e?this.$router.push(`/checklist-details/${e}`):console.error("checklistId is not available")},CompletedRedirectToDetailsChecklist(e){void 0!==e&&null!==e?this.$router.push(`/checklist-details/${e}`):console.error("checklistId is not available")}}};const gf=(0,ut.Z)(bf,[["render",pf],["__scopeId","data-v-bbcef4d6"]]);var ff=gf;const _f={key:0,class:"container text-center"},vf=(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1),yf=(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1),kf=[vf,yf],wf={key:1,class:"container"},Cf={class:"row align-items-center"},Df={class:"d-flex align-items-center mt-4"},Sf=(0,i._)("h2",{class:"mb-0"},"Checklist Report",-1),Mf=(0,i._)("span",{class:"ms-3 fs-4 text-muted"},"|",-1),Pf={"aria-label":"breadcrumb",class:"d-inline-block ms-3"},If={class:"breadcrumb bg-transparent m-0 p-0"},xf=(0,i._)("li",{class:"breadcrumb-item"},[(0,i._)("a",{href:"/"},[(0,i._)("i",{class:"fas fa-home me-1"}),(0,i.Uk)("Home")])],-1),Lf={class:"breadcrumb-item active"},Rf=(0,i._)("i",{class:"fas fa-chart-bar me-1"},null,-1),Bf=(0,i._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,i._)("i",{class:"fas fa-file-alt me-1"}),(0,i.Uk)(" Reports Checklist ")],-1);function $f(e,t,a,s,l,n){const o=(0,i.up)("router-link"),c=(0,i.up)("ChecklistReportTable");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",_f,kf)):((0,i.wg)(),(0,i.iD)("div",wf,[(0,i._)("div",Cf,[(0,i._)("div",Df,[Sf,Mf,(0,i._)("nav",Pf,[(0,i._)("ol",If,[xf,(0,i._)("li",Lf,[(0,i.Wm)(o,{to:"/reports"},{default:(0,i.w5)((()=>[Rf,(0,i.Uk)("Reports")])),_:1})]),Bf])])])]),(0,i.Wm)(c,{checklists:l.checklists,style:{"margin-top":"20px"}},null,8,["checklists"])]))}const Ef=e=>((0,i.dD)("data-v-4216ffe3"),e=e(),(0,i.Cn)(),e),Uf={class:"card card-outline card-primary mt-3"},Nf={class:"card-body"},Tf={class:"row"},Of={class:"col-md-3 text-center"},Af=Ef((()=>(0,i._)("h6",{class:"lead"},"Total Completed",-1))),qf={class:"display-6"},Ff={class:"col-md-3 text-center"},jf=Ef((()=>(0,i._)("h6",{class:"lead"},"Total In Progress",-1))),Wf={class:"display-6"},Vf={class:"col-md-3 text-center"},zf=Ef((()=>(0,i._)("h6",{class:"lead"},"Total Failed",-1))),Zf={class:"display-6"},Gf={class:"col-md-3 text-center"},Hf=Ef((()=>(0,i._)("h6",{class:"lead"},"Total Checklists",-1))),Qf={class:"display-6"};function Yf(e,t,a,s,l,n){const o=(0,i.up)("ag-grid-vue");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",Uf,[(0,i._)("div",Nf,[(0,i._)("div",Tf,[(0,i._)("div",Of,[Af,(0,i._)("p",qf,(0,_t.zw)(l.total_completed),1)]),(0,i._)("div",Ff,[jf,(0,i._)("p",Wf,(0,_t.zw)(l.total_in_progress),1)]),(0,i._)("div",Vf,[zf,(0,i._)("p",Zf,(0,_t.zw)(l.total_failed),1)]),(0,i._)("div",Gf,[Hf,(0,i._)("p",Qf,(0,_t.zw)(l.total_checklists),1)])])])]),(0,i._)("div",null,[(0,i.Wm)(o,{style:{height:"500px"},class:"ag-theme-quartz",rowData:a.checklists,defaultColDef:l.defaultColDef,columnDefs:l.colDefs,pagination:!0,onFirstDataRendered:n.onFirstDataRendered,onGridReady:n.onGridReady},null,8,["rowData","defaultColDef","columnDefs","onFirstDataRendered","onGridReady"])])])}var Kf={components:{AgGridVue:ns.n},props:{checklists:{type:Array,required:!0}},data(){return{colDefs:[{headerName:"Checklist ID",field:"id"},{headerName:"Unique Code",field:"unique_code",valueFormatter:function(e){return null===e.value?"null":e.value}},{headerName:"Project Name",field:"bom.product.project.name"},{headerName:"Product Name",field:"bom.product.name"},{headerName:"Product Code",field:"bom.product.product_code"},{headerName:"Updated At",field:"updated_at"},{headerName:"Updated By",valueGetter:function(e){if(console.log(e.data.updated_by),null!=e.data.updated_by){const t=e.data.updated_by.first_name||"",a=e.data.updated_by.last_name||"";return t||a?`${t} ${a}`:""}return""}},{headerName:"Created At",field:"created_at"},{headerName:"Created By",valueGetter:function(e){const t=e.data.created_by.first_name||"",a=e.data.created_by.last_name||"";return t||a?`${t} ${a}`:""}},{headerName:"Status",field:"status"},{headerName:"View",cellRenderer:this.viewButtonRenderer}],defaultColDef:{filter:!0,sortable:!0,resizable:!0,autoSize:!0},gridApi:null,total_completed:0,total_in_progress:0,total_failed:0,total_checklists:0}},mounted(){},methods:{onFirstDataRendered(){this.calculateTotalSum(),this.gridApi.addEventListener("filterChanged",this.calculateTotalSum)},onGridReady(e){this.gridApi=e.api},calculateTotalSum(){let e=0,t=0,a=0;this.gridApi.forEachNodeAfterFilter((s=>{"Completed"==s.data.status?e+=1:"In Progress"==s.data.status?t+=1:a+=1})),this.total_completed=e,this.total_failed=a,this.total_in_progress=t,this.total_checklists=this.gridApi.getDisplayedRowCount()},viewButtonRenderer(e){const t=document.createElement("button");return t.innerHTML='<i class="fas fa-eye"></i>',t.classList.add("btn","btn-outline-secondary"),t.addEventListener("click",(()=>this.onViewClick(e.data))),t},onViewClick(e){"In Progress"===e.status?this.$router.push(`/begin-checklist/${e.bom.id}`):this.$router.push(`/checklist-details/${e.id}`)}}};const Jf=(0,ut.Z)(Kf,[["render",Yf],["__scopeId","data-v-4216ffe3"]]);var Xf=Jf,e_={components:{ChecklistReportTable:Xf},data(){return{checklists:[]}},mounted(){this.getChecklistReport()},methods:{async getChecklistReport(){console.log("run"),this.$store.commit("setIsLoading",!0),this.$store.commit("setIsLoading",!1),await tt.Z.get("store/get-checklist-report/").then((e=>{console.log(e.data),this.checklists=e.data.checklists,this.$store.commit("setIsLoading",!1)})).catch((e=>{console.log("error:",e),this.$notify({title:"An error occured, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1)}))}}};const t_=(0,ut.Z)(e_,[["render",$f]]);var a_=t_;const s_=e=>((0,i.dD)("data-v-4239cd5f"),e=e(),(0,i.Cn)(),e),i_={key:0,class:"container text-center"},l_=s_((()=>(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1))),n_=s_((()=>(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1))),o_=[l_,n_],c_={key:1,class:"container"},d_={class:"row align-items-center"},r_={class:"col-md-6 mt-4"},m_={class:"d-flex align-items-center"},u_=s_((()=>(0,i._)("h2",{class:"mb-0"},"Users",-1))),h_=s_((()=>(0,i._)("span",{class:"ms-3 fs-4 text-muted"},"|",-1))),p_={"aria-label":"breadcrumb",class:"d-inline-block ms-3"},b_={class:"breadcrumb bg-transparent m-0 p-0"},g_={class:"breadcrumb-item"},f_=s_((()=>(0,i._)("i",{class:"fas fa-home me-1"},null,-1))),__=s_((()=>(0,i._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,i._)("i",{class:"fas fa-users me-1"}),(0,i.Uk)("Users ")],-1))),v_={class:"col-md-6 mt-4 text-end"},y_=s_((()=>(0,i._)("i",{class:"fas fa-user-plus me-1"},null,-1))),k_={class:"container mt-5"},w_={class:"table table-hover"},C_=s_((()=>(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",null,"Email"),(0,i._)("th",null,"Actions")])],-1))),D_=["onClick"],S_=s_((()=>(0,i._)("i",{class:"fas fa-edit me-1"},null,-1))),M_=["onClick"],P_=s_((()=>(0,i._)("i",{class:"fas fa-trash-alt me-1"},null,-1)));function I_(e,t,a,s,l,n){const o=(0,i.up)("router-link");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",i_,o_)):((0,i.wg)(),(0,i.iD)("div",c_,[(0,i._)("div",d_,[(0,i._)("div",r_,[(0,i._)("div",m_,[u_,h_,(0,i._)("nav",p_,[(0,i._)("ol",b_,[(0,i._)("li",g_,[(0,i.Wm)(o,{to:"/"},{default:(0,i.w5)((()=>[f_,(0,i.Uk)(" Home")])),_:1})]),__])])])]),(0,i._)("div",v_,[(0,i.Wm)(o,{to:"/users/create-user",class:"btn btn-primary btn-sm ms-2"},{default:(0,i.w5)((()=>[y_,(0,i.Uk)(" Create New User ")])),_:1})])]),(0,i._)("div",k_,[(0,i._)("table",w_,[C_,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.userList,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e.id,onClick:t=>n.redirectToEditPage(e.id)},[(0,i._)("td",null,(0,_t.zw)(e.email),1),(0,i._)("td",null,[(0,i.Wm)(o,{to:{name:"EditUser",params:{id:e.id}},class:"btn btn-primary btn-sm"},{default:(0,i.w5)((()=>[S_,(0,i.Uk)(" Edit ")])),_:2},1032,["to"]),(0,i._)("button",{onClick:t=>n.deleteUser(t,e.id),class:"btn btn-danger btn-sm ml-3"},[P_,(0,i.Uk)(" Delete ")],8,M_)])],8,D_)))),128))])])])]))}var x_={name:"UserManagement",data(){return{userList:[]}},mounted(){this.fetchUsers()},methods:{fetchUsers(){this.$store.commit("setIsLoading",!0),tt.Z.get("/accounts/users/").then((e=>{console.log("response.data",e.data),this.userList=e.data,this.$store.commit("setIsLoading",!1)})).catch((e=>{console.error("Error fetching users:",e),this.$store.commit("setIsLoading",!1)}))},redirectToEditPage(e){this.$router.push({name:"EditUser",params:{id:e}})},deleteUser(e,t){e.stopPropagation(),confirm("Are you sure you want to delete this user?")&&tt.Z.delete(`/accounts/users/delete/${t}/`).then((()=>{console.log("User deleted successfully."),alert("User Deleted successfully!"),this.fetchUsers(),this.$router.push("/users")})).catch((e=>{alert("error deleting!"),console.error("Error deleting user:",e)}))}}};const L_=(0,ut.Z)(x_,[["render",I_],["__scopeId","data-v-4239cd5f"]]);var R_=L_;const B_=e=>((0,i.dD)("data-v-fbd71b8a"),e=e(),(0,i.Cn)(),e),$_={key:0,class:"container text-center"},E_=B_((()=>(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1))),U_=B_((()=>(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1))),N_=[E_,U_],T_={key:1,class:"container mt-4"},O_={class:"row align-items-center"},A_={class:"col-md-8 mt-4"},q_={class:"d-flex align-items-center"},F_=B_((()=>(0,i._)("h2",{class:"mb-0"},"Edit Line Item |",-1))),j_={"aria-label":"breadcrumb",class:"ms-3"},W_={class:"breadcrumb bg-transparent m-0 p-0 justify-content-end"},V_=B_((()=>(0,i._)("li",{class:"breadcrumb-item"},[(0,i._)("a",{href:"/"},[(0,i._)("i",{class:"fas fa-home me-1"}),(0,i.Uk)("Home")])],-1))),z_={class:"breadcrumb-item active","aria-current":"page"},Z_=B_((()=>(0,i._)("i",{class:"fas fa-clipboard-list me-1"},null,-1))),G_={class:"breadcrumb-item","aria-current":"page"},H_=B_((()=>(0,i._)("i",{class:"fas fa-list-alt me-1"},null,-1))),Q_=B_((()=>(0,i._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,i._)("i",{class:"fa fa-bars me-1","aria-hidden":"true"}),(0,i.Uk)("BOM Line Item ")],-1))),Y_={class:"col-md-4 mt-4 d-flex justify-content-end"},K_={class:"row mt-5"},J_={class:"row"},X_={class:"col-md-4"},ev={class:"form-group"},tv=B_((()=>(0,i._)("label",{for:"veplPartNumber"},"VEPL Part Number",-1))),av={class:"col-md-4"},sv={class:"form-group"},iv=B_((()=>(0,i._)("label",{for:"level"},"Level",-1))),lv={class:"col-md-4"},nv={class:"form-group"},ov=B_((()=>(0,i._)("label",{for:"priorityLevel"},"Priority Level",-1))),cv={class:"row"},dv={class:"col-md-4"},rv={class:"form-group"},mv=B_((()=>(0,i._)("label",{for:"value"},"Value",-1))),uv={class:"col-md-4"},hv={class:"form-group"},pv=B_((()=>(0,i._)("label",{for:"pcbFootprint"},"PCB Footprint",-1))),bv={class:"col-md-4"},gv={class:"form-group"},fv=B_((()=>(0,i._)("label",{for:"lineItemType"},"Type",-1))),_v=["value"],vv={class:"form-group"},yv=B_((()=>(0,i._)("label",{for:"description"},"Description",-1))),kv={class:"form-group"},wv={for:"references"},Cv=["onClick"],Dv={class:"d-flex align-items-center mt-2"},Sv={class:"form-group"},Mv=B_((()=>(0,i._)("label",{for:"manufacturerParts"},"Manufacturer Parts",-1))),Pv=B_((()=>(0,i._)("br",null,null,-1))),Iv=B_((()=>(0,i._)("button",{type:"button",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#exampleModal"}," Change Manufacturer Parts ",-1))),xv={class:"form-group"},Lv=B_((()=>(0,i._)("label",{for:"customerPartNumber"},"Customer Part Number",-1))),Rv={class:"row"},Bv={class:"col-md-6"},$v={class:"form-group"},Ev=B_((()=>(0,i._)("label",{for:"quantity"},"Quantity",-1))),Uv={class:"col-md-6"},Nv={class:"form-group"},Tv=B_((()=>(0,i._)("label",{for:"uom"},"UOM",-1))),Ov={class:"form-group"},Av=B_((()=>(0,i._)("label",{for:"assemblyStage"},"Assembly Stage",-1))),qv=["value"],Fv={class:"form-group"},jv=B_((()=>(0,i._)("label",{for:"ecn"},"ECN",-1))),Wv={class:"form-group"},Vv=B_((()=>(0,i._)("label",{for:"msl"},"MSL",-1))),zv={class:"form-group"},Zv=B_((()=>(0,i._)("label",{for:"remarks"},"Remarks",-1))),Gv={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Hv={class:"modal-dialog modal-lg"},Qv={class:"modal-content"},Yv=B_((()=>(0,i._)("div",{class:"modal-header"},[(0,i._)("h1",{class:"modal-title fs-5",id:"exampleModalLabel"}," Select the Manufacturer Parts "),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),Kv={class:"modal-body"},Jv=B_((()=>(0,i._)("div",{class:"modal-footer"},[(0,i._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close "),(0,i._)("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal"}," Save changes ")],-1)));function Xv(e,t,a,l,n,o){const c=(0,i.up)("router-link"),d=(0,i.up)("manufacturer-parts-grid");return(0,i.wg)(),(0,i.iD)("div",null,[e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",$_,N_)):((0,i.wg)(),(0,i.iD)("div",T_,[(0,i._)("div",O_,[(0,i._)("div",A_,[(0,i._)("div",q_,[F_,(0,i._)("nav",j_,[(0,i._)("ol",W_,[V_,(0,i._)("li",z_,[(0,i.Wm)(c,{to:"/bom"},{default:(0,i.w5)((()=>[Z_,(0,i.Uk)("Bill Of Materials ")])),_:1})]),(0,i._)("li",G_,[(0,i.Wm)(c,{to:`/bom/edit/${n.bom_id}`},{default:(0,i.w5)((()=>[H_,(0,i.Uk)(" BOM Details ")])),_:1},8,["to"])]),Q_])])])]),(0,i._)("div",Y_,[(0,i._)("button",{type:"button",class:"btn btn-primary me-2",onClick:t[0]||(t[0]=(...e)=>o.saveChanges&&o.saveChanges(...e))}," Update Changes "),(0,i._)("button",{type:"button",class:"btn btn-danger",onClick:t[1]||(t[1]=(...e)=>o.confirmDelete&&o.confirmDelete(...e))}," Delete Line Item ")])]),(0,i._)("div",K_,[(0,i._)("section",null,[(0,i._)("div",J_,[(0,i._)("div",X_,[(0,i._)("div",ev,[tv,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>n.editedBom.part_number=e),type:"text",class:"form-control"},null,512),[[s.nr,n.editedBom.part_number]])])]),(0,i._)("div",av,[(0,i._)("div",sv,[iv,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>n.editedBom.level=e),type:"text",class:"form-control"},null,512),[[s.nr,n.editedBom.level]])])]),(0,i._)("div",lv,[(0,i._)("div",nv,[ov,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>n.editedBom.priority_level=e),type:"text",class:"form-control"},null,512),[[s.nr,n.editedBom.priority_level]])])])]),(0,i._)("div",cv,[(0,i._)("div",dv,[(0,i._)("div",rv,[mv,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>n.editedBom.value=e),type:"text",class:"form-control"},null,512),[[s.nr,n.editedBom.value]])])]),(0,i._)("div",uv,[(0,i._)("div",hv,[pv,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>n.editedBom.pcb_footprint=e),type:"text",class:"form-control"},null,512),[[s.nr,n.editedBom.pcb_footprint]])])]),(0,i._)("div",bv,[(0,i._)("div",gv,[fv,(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[7]||(t[7]=e=>n.editedBom.line_item_type=e),class:"form-control"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.line_item_types,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e.id,value:e.id},(0,_t.zw)(e.name),9,_v)))),128))],512),[[s.bM,n.editedBom.line_item_type]])])])]),(0,i._)("div",vv,[yv,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>n.editedBom.description=e),type:"text",class:"form-control"},null,512),[[s.nr,n.editedBom.description]])]),(0,i._)("div",kv,[(0,i._)("label",wv,[(0,i.Uk)(" References "),(0,i._)("div",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.editedBom.references,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e.id,class:"tag"},[(0,i.Uk)((0,_t.zw)(e.name)+" ",1),(0,i._)("span",{onClick:t=>o.removeReference(e),class:"remove-tag"},"X",8,Cv)])))),128))]),(0,i._)("div",Dv,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>n.newReference=e),onKeyup:t[10]||(t[10]=(0,s.D2)(((...e)=>o.addNewReference&&o.addNewReference(...e)),["enter"])),type:"text",placeholder:"Type to add a new reference",class:"form-control input-large"},null,544),[[s.nr,n.newReference]]),(0,i._)("button",{onClick:t[11]||(t[11]=(...e)=>o.addNewReference&&o.addNewReference(...e)),class:"btn btn-primary ms-2"}," Add ")])])]),(0,i._)("div",Sv,[Mv,Pv,(0,i._)("div",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.editedBom.manufacturer_parts,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e.id,class:"tag"},(0,_t.zw)(e.part_number)+" - "+(0,_t.zw)(e.manufacturer.name),1)))),128))]),Iv]),(0,i._)("div",xv,[Lv,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[12]||(t[12]=e=>n.editedBom.customer_part_number=e),type:"text",class:"form-control"},null,512),[[s.nr,n.editedBom.customer_part_number]])]),(0,i._)("div",Rv,[(0,i._)("div",Bv,[(0,i._)("div",$v,[Ev,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[13]||(t[13]=e=>n.editedBom.quantity=e),type:"text",class:"form-control"},null,512),[[s.nr,n.editedBom.quantity]])])]),(0,i._)("div",Uv,[(0,i._)("div",Nv,[Tv,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[14]||(t[14]=e=>n.editedBom.uom=e),type:"text",class:"form-control"},null,512),[[s.nr,n.editedBom.uom]])])])]),(0,i._)("div",Ov,[Av,(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[15]||(t[15]=e=>n.editedBom.assembly_stage=e),class:"form-control"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.assembly_stages,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e.id,value:e.id},(0,_t.zw)(e.name),9,qv)))),128))],512),[[s.bM,n.editedBom.assembly_stage]])]),(0,i._)("div",Fv,[jv,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[16]||(t[16]=e=>n.editedBom.ecn=e),type:"text",class:"form-control"},null,512),[[s.nr,n.editedBom.ecn]])]),(0,i._)("div",Wv,[Vv,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[17]||(t[17]=e=>n.editedBom.msl=e),type:"text",class:"form-control"},null,512),[[s.nr,n.editedBom.msl]])]),(0,i._)("div",zv,[Zv,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[18]||(t[18]=e=>n.editedBom.remarks=e),type:"text",class:"form-control"},null,512),[[s.nr,n.editedBom.remarks]])])])]),(0,i._)("div",Gv,[(0,i._)("div",Hv,[(0,i._)("div",Qv,[Yv,(0,i._)("div",Kv,[(0,i.Wm)(d,{manufacturerParts:n.manufacturerParts,selectedManufacturerParts:n.editedBom.manufacturer_parts,"onUpdate:selectedManufacturerParts":o.updateManufacturerParts},null,8,["manufacturerParts","selectedManufacturerParts","onUpdate:selectedManufacturerParts"])]),Jv])])])]))])}const ey={class:"ag-theme-quartz",style:{height:"600px"}};function ty(e,t,a,s,l,n){const o=(0,i.up)("ag-grid-vue");return(0,i.wg)(),(0,i.iD)("div",ey,[(0,i.Wm)(o,{ref:"agGrid",gridOptions:l.gridOptions,columnDefs:l.columnDefs,rowData:a.manufacturerParts,onFirstDataRendered:n.onFirstDataRendered,onSelectionChanged:n.onSelectionChanged},null,8,["gridOptions","columnDefs","rowData","onFirstDataRendered","onSelectionChanged"])])}var ay={components:{"ag-grid-vue":ns.n},props:{manufacturerParts:{type:Array,default:()=>[]},selectedManufacturerParts:{type:Array,default:()=>[]}},data(){return{gridOptions:{domLayout:"autoHeight",rowSelection:"multiple",rowMultiSelectWithClick:!0,pagination:!0,paginationPageSize:20},columnDefs:[{headerCheckboxSelection:!0,checkboxSelection:!0,headerName:"Part Number",field:"part_number"},{headerName:"Manufacturer Name",field:"manufacturer.name"}]}},methods:{onFirstDataRendered(e){const t=e.api;t.forEachNode((e=>{const t=e.data,a=this.selectedManufacturerParts.some((e=>e.id===t.id));e.setSelected(a)}))},onSelectionChanged(){const e=this.$refs.agGrid.api.getSelectedRows();this.$emit("update:selectedManufacturerParts",e)}}};const sy=(0,ut.Z)(ay,[["render",ty],["__scopeId","data-v-e9409d6a"]]);var iy=sy,ly={data(){return{editedBom:{part_number:"",level:"",priority_level:"",value:"",pcb_footprint:"",line_item_type:"",description:"",references:[],manufacturer_parts:[],customer_part_number:"",quantity:"",uom:"",assembly_stage:"",ecn:"",msl:"",remarks:""},line_item_types:[],newReference:"",message:"",manufacturerParts:[],assembly_stages:[],bom_id:"",bom_line_item_id:""}},components:{"manufacturer-parts-grid":iy},methods:{async fetchDataFromAPI(){try{this.$store.commit("setIsLoading",!0);const e=await tt.Z.get(`store/edit-bom-line-item/${this.$route.params.id}/`);console.log(" Main API response for line items",e.data),this.editedBom=e.data.bom_line_item,this.bom_id=e.data.bom_line_item.bom.id,this.bom_line_item_id=e.data.bom_line_item.id,console.log("bom-id=",this.bom_id),console.log("bom-line-item-id=",this.bom_line_item_id),this.line_item_types=e.data.line_item_types,this.manufacturerParts=e.data.manufacturers_parts,this.assembly_stages=e.data.assembly_stages,console.log("line_item_types",this.line_item_types),this.line_item_types.length>0&&(this.editedBom.line_item_type=e.data.bom_line_item.line_item_type.id),this.assembly_stages.length>0&&(this.editedBom.assembly_stage=e.data.bom_line_item.assembly_stage.id),console.log("this is edit bom",this.editedBom),this.$store.commit("setIsLoading",!1)}catch(e){console.error("Error fetching data from the API:",e),this.$store.commit("setIsLoading",!1)}},addNewReference(){if(""!==this.newReference.trim()){if(!this.isReferenceExists(this.newReference.trim())){const e={name:this.newReference.trim()};this.editedBom.references.push(e)}this.newReference=""}},isReferenceExists(e){return this.editedBom.references.some((t=>t.name.toLowerCase()===e.toLowerCase()))},removeReference(e){this.editedBom.references=this.editedBom.references.filter((t=>t!==e))},submit(){console.log(this.editedBom)},async saveChanges(){if(confirm("Are you sure you want to update this line item")){this.$store.commit("setIsLoading",!0);try{const e=await tt.Z.put(`store/edit-bom-line-item/${this.$route.params.id}/`,this.editedBom);console.log(e.data),this.$store.commit("setIsLoading",!1),this.$notify({title:"Bom Line Item Updated Successfully",type:"bg-success-subtle text-success",duration:"5000"}),this.$router.push(`/bom/edit/${this.bom_id}`)}catch(e){console.error("Error updating BOM line item:",e),this.$store.commit("setIsLoading",!1),this.$notify({title:"Error Updating Bom Line Item",type:"bg-danger-subtle text-danger",duration:"5000"})}}},async confirmDelete(){if(confirm("Are you sure you want to delete this BOM Line Item?"))try{const e=await tt.Z.delete(`store/delete-bom-line-item/${this.$route.params.id}`);204===e.status?(this.$notify({title:"Bom Line Item Deleted Successfully",type:"bg-success-subtle text-success",duration:5e3}),this.$router.push(`/bom/edit/${this.bom_id}`)):this.$notify({title:"An error occurred while deleting BOM Line Item",type:"alert-danger",duration:5e3})}catch(e){console.error("Error deleting BOM Line Item:",e),this.$notify({title:"An error occurred while deleting BOM Line Item",type:"alert-danger",duration:5e3})}},updateManufacturerParts(e){this.editedBom.manufacturer_parts=e},getReferences(e){return e&&e.length>0?e.map((e=>e.name)).join(", "):""},getManufacturerParts(e){return e&&e.length>0?e.map((e=>`${e.part_number} - ${e.manufacturer.name}`)).join(", "):""}},updateManufacturerParts(e){this.editedBom.manufacturer_parts=e},mounted(){this.fetchDataFromAPI()}};const ny=(0,ut.Z)(ly,[["render",Xv],["__scopeId","data-v-fbd71b8a"]]);var oy=ny;const cy=e=>((0,i.dD)("data-v-6cd7caa1"),e=e(),(0,i.Cn)(),e),dy={key:0,class:"container text-center"},ry=cy((()=>(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1))),my=cy((()=>(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1))),uy=[ry,my],hy={key:1,class:"container"},py={class:"row align-items-center"},by={class:"col-md-6 mt-4"},gy={class:"d-flex align-items-center"},fy=cy((()=>(0,i._)("h2",{class:"mb-0"},"Users",-1))),_y=cy((()=>(0,i._)("span",{class:"ms-3 fs-4 text-muted"},"|",-1))),vy={"aria-label":"breadcrumb",class:"d-inline-block ms-3"},yy={class:"breadcrumb bg-transparent m-0 p-0"},ky={class:"breadcrumb-item"},wy=cy((()=>(0,i._)("i",{class:"fas fa-home me-1"},null,-1))),Cy={class:"breadcrumb-item"},Dy=cy((()=>(0,i._)("i",{class:"fas fa-users me-1"},null,-1))),Sy=cy((()=>(0,i._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,i._)("i",{class:"fas fa-edit me-1"}),(0,i.Uk)(" Edit User ")],-1))),My={class:"col-md-6 mt-4 text-end"},Py=cy((()=>(0,i._)("i",{class:"fas fa-save me-1"},null,-1))),Iy=cy((()=>(0,i._)("i",{class:"fas fa-trash me-1"},null,-1))),xy={class:"card animate__animated animate__fadeIn mt-5"},Ly=(0,i.uE)('<div class="card-header bg-primary text-white" data-v-6cd7caa1><h4 class="card-title" data-v-6cd7caa1><i class="fas fa-user me-1" data-v-6cd7caa1></i> User Information </h4><div class="card-tools" data-v-6cd7caa1><button type="button" class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#changePasswordModal" data-v-6cd7caa1><i class="fas fa-key me-1" data-v-6cd7caa1></i> Edit Password </button></div></div>',1),Ry={class:"card-body"},By={class:"mb-3"},$y=cy((()=>(0,i._)("label",{for:"email",class:"form-label"},"Email:",-1))),Ey={class:"input-group"},Uy=cy((()=>(0,i._)("span",{class:"input-group-text"},[(0,i._)("i",{class:"fas fa-envelope"})],-1))),Ny={key:0,class:"text-danger"},Ty={class:"mb-3 row"},Oy={class:"col"},Ay=cy((()=>(0,i._)("label",{for:"first_name",class:"form-label"},"First Name:",-1))),qy={class:"input-group"},Fy=cy((()=>(0,i._)("span",{class:"input-group-text"},[(0,i._)("i",{class:"fas fa-user"})],-1))),jy={key:0,class:"text-danger"},Wy={class:"col"},Vy=cy((()=>(0,i._)("label",{for:"last_name",class:"form-label"},"Last Name:",-1))),zy={class:"input-group"},Zy=cy((()=>(0,i._)("span",{class:"input-group-text"},[(0,i._)("i",{class:"fas fa-user"})],-1))),Gy={class:"mb-3"},Hy=cy((()=>(0,i._)("label",{for:"phone_number",class:"form-label"},"Phone Number:",-1))),Qy={class:"input-group"},Yy=cy((()=>(0,i._)("span",{class:"input-group-text"},[(0,i._)("i",{class:"fas fa-phone"})],-1))),Ky={class:"mb-3 row"},Jy={class:"col"},Xy={class:"form-check"},ek=cy((()=>(0,i._)("label",{class:"form-check-label",for:"is_superuser"},[(0,i._)("i",{class:"fas fa-user-shield me-1"}),(0,i.Uk)(" Is Admin")],-1))),tk={class:"col"},ak={class:"form-check"},sk=["disabled"],ik=cy((()=>(0,i._)("label",{class:"form-check-label",for:"is_staff"},[(0,i._)("i",{class:"fas fa-user-cog me-1"}),(0,i.Uk)(" Is Staff")],-1))),lk={class:"mb-3 row"},nk={class:"col"},ok={class:"form-check"},ck=["disabled"],dk=cy((()=>(0,i._)("label",{class:"form-check-label",for:"is_store_team"},[(0,i._)("i",{class:"fas fa-user-shield me-1"}),(0,i.Uk)(" Is Store Team")],-1))),rk={class:"col"},mk={class:"form-check"},uk=["disabled"],hk=cy((()=>(0,i._)("label",{class:"form-check-label",for:"is_design_team"},[(0,i._)("i",{class:"fas fa-user-cog me-1"}),(0,i.Uk)(" Is Design Team")],-1))),pk={class:"mb-3 row"},bk={class:"col"},gk={class:"form-check"},fk=["disabled"],_k=cy((()=>(0,i._)("label",{class:"form-check-label",for:"is_store_team"},[(0,i._)("i",{class:"fas fa-user-shield me-1"}),(0,i.Uk)(" Is Machine Maintenance Supervisor")],-1))),vk={class:"col"},yk={class:"form-check"},kk=["disabled"],wk=cy((()=>(0,i._)("label",{class:"form-check-label",for:"is_design_team"},[(0,i._)("i",{class:"fas fa-user-cog me-1"}),(0,i.Uk)(" Is Machine Maintenance Staff Team ")],-1))),Ck={class:"modal fade",id:"changePasswordModal",tabindex:"-1","aria-labelledby":"changePasswordModal","aria-hidden":"true"},Dk={class:"modal-dialog"},Sk={class:"modal-content"},Mk=cy((()=>(0,i._)("div",{class:"modal-header"},[(0,i._)("h1",{class:"modal-title fs-5",id:"changePasswordModal"}," Change Password "),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),Pk={class:"modal-body"},Ik={class:"modal-body"},xk={id:"changePasswordForm"},Lk={class:"mb-3"},Rk=cy((()=>(0,i._)("label",{for:"oldPassword",class:"form-label"},"Old Password",-1))),Bk={class:"input-group"},$k=cy((()=>(0,i._)("span",{class:"input-group-text"},[(0,i._)("i",{class:"fas fa-lock"})],-1))),Ek=["type"],Uk={key:0,class:"text-danger"},Nk={class:"mb-3"},Tk=cy((()=>(0,i._)("label",{for:"newPassword",class:"form-label"},"New Password",-1))),Ok={class:"input-group"},Ak=cy((()=>(0,i._)("span",{class:"input-group-text"},[(0,i._)("i",{class:"fas fa-lock"})],-1))),qk=["type"],Fk={key:0,class:"text-danger"},jk={class:"modal-footer"},Wk=cy((()=>(0,i._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1)));function Vk(e,t,a,l,n,o){const c=(0,i.up)("router-link");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",dy,uy)):((0,i.wg)(),(0,i.iD)("div",hy,[(0,i._)("div",py,[(0,i._)("div",by,[(0,i._)("div",gy,[fy,_y,(0,i._)("nav",vy,[(0,i._)("ol",yy,[(0,i._)("li",ky,[(0,i.Wm)(c,{to:"/"},{default:(0,i.w5)((()=>[wy,(0,i.Uk)(" Home")])),_:1})]),(0,i._)("li",Cy,[(0,i.Wm)(c,{to:"/users"},{default:(0,i.w5)((()=>[Dy,(0,i.Uk)(" Users")])),_:1})]),Sy])])])]),(0,i._)("div",My,[(0,i._)("button",{type:"submit",class:"btn btn-primary btn-sm",onClick:t[0]||(t[0]=(...e)=>o.updateUser&&o.updateUser(...e))},[Py,(0,i.Uk)(" Update User ")]),(0,i._)("button",{type:"button",class:"btn btn-danger ms-2 btn-sm",onClick:t[1]||(t[1]=(...e)=>o.deleteUser&&o.deleteUser(...e))},[Iy,(0,i.Uk)(" Delete User ")])])]),(0,i._)("div",xy,[Ly,(0,i._)("div",Ry,[(0,i._)("div",By,[$y,(0,i._)("div",Ey,[Uy,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>n.editedUser.email=e),type:"email",class:"form-control",id:"email",required:""},null,512),[[s.nr,n.editedUser.email]])]),n.editedUser.email?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("small",Ny,"Email is required."))]),(0,i._)("div",Ty,[(0,i._)("div",Oy,[Ay,(0,i._)("div",qy,[Fy,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>n.editedUser.first_name=e),type:"text",class:"form-control",id:"first_name",required:""},null,512),[[s.nr,n.editedUser.first_name]])]),n.editedUser.first_name?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("small",jy,"First Name is required."))]),(0,i._)("div",Wy,[Vy,(0,i._)("div",zy,[Zy,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>n.editedUser.last_name=e),type:"text",class:"form-control",id:"last_name"},null,512),[[s.nr,n.editedUser.last_name]])])])]),(0,i._)("div",Gy,[Hy,(0,i._)("div",Qy,[Yy,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>n.editedUser.phone_number=e),type:"tel",class:"form-control",id:"phone_number"},null,512),[[s.nr,n.editedUser.phone_number]])])]),(0,i._)("div",Ky,[(0,i._)("div",Jy,[(0,i._)("div",Xy,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>n.editedUser.is_superuser=e),onChange:t[7]||(t[7]=(...e)=>o.updateOthers&&o.updateOthers(...e)),type:"checkbox",class:"form-check-input",id:"is_superuser"},null,544),[[s.e8,n.editedUser.is_superuser]]),ek])]),(0,i._)("div",tk,[(0,i._)("div",ak,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>n.editedUser.is_staff=e),disabled:n.editedUser.is_superuser,type:"checkbox",class:"form-check-input",id:"is_staff"},null,8,sk),[[s.e8,n.editedUser.is_staff]]),ik])])]),(0,i._)("div",lk,[(0,i._)("div",nk,[(0,i._)("div",ok,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>n.editedUser.is_store_team=e),disabled:n.editedUser.is_superuser,type:"checkbox",class:"form-check-input",id:"is_store_team"},null,8,ck),[[s.e8,n.editedUser.is_store_team]]),dk])]),(0,i._)("div",rk,[(0,i._)("div",mk,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>n.editedUser.is_design_team=e),disabled:n.editedUser.is_superuser,type:"checkbox",class:"form-check-input",id:"is_design_team"},null,8,uk),[[s.e8,n.editedUser.is_design_team]]),hk])])]),(0,i._)("div",pk,[(0,i._)("div",bk,[(0,i._)("div",gk,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>n.editedUser.is_machine_maintenance_supervisor_team=e),disabled:n.editedUser.is_superuser,type:"checkbox",class:"form-check-input",id:"is_machine_maintenance_supervisor_team"},null,8,fk),[[s.e8,n.editedUser.is_machine_maintenance_supervisor_team]]),_k])]),(0,i._)("div",vk,[(0,i._)("div",yk,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[12]||(t[12]=e=>n.editedUser.is_machine_maintenance_staff_team=e),disabled:n.editedUser.is_superuser,type:"checkbox",class:"form-check-input",id:"is_machine_maintenance_staff_team"},null,8,kk),[[s.e8,n.editedUser.is_machine_maintenance_staff_team]]),wk])])])])]),(0,i._)("div",Ck,[(0,i._)("div",Dk,[(0,i._)("div",Sk,[Mk,(0,i._)("div",Pk,[(0,i._)("section",Ik,[(0,i._)("form",xk,[(0,i._)("div",Lk,[Rk,(0,i._)("div",Bk,[$k,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[13]||(t[13]=t=>e.oldPassword=t),type:n.showOldPassword?"text":"password",class:"form-control",id:"oldPassword",name:"oldPassword",required:""},null,8,Ek),[[s.YZ,e.oldPassword]]),(0,i._)("button",{class:"btn btn-outline-secondary",type:"button",onClick:t[14]||(t[14]=(...e)=>o.toggleOldPassword&&o.toggleOldPassword(...e))},[(0,i._)("i",{class:(0,_t.C_)(n.showOldPassword?"fas fa-eye-slash":"fas fa-eye")},null,2)])]),e.passwordError?((0,i.wg)(),(0,i.iD)("small",Uk,(0,_t.zw)(e.passwordError),1)):(0,i.kq)("",!0)]),(0,i._)("div",Nk,[Tk,(0,i._)("div",Ok,[Ak,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[15]||(t[15]=t=>e.newPassword=t),type:n.showNewPassword?"text":"password",class:"form-control",id:"newPassword",name:"newPassword",required:""},null,8,qk),[[s.YZ,e.newPassword]]),(0,i._)("button",{class:"btn btn-outline-secondary",type:"button",onClick:t[16]||(t[16]=(...e)=>o.toggleNewPassword&&o.toggleNewPassword(...e))},[(0,i._)("i",{class:(0,_t.C_)(n.showNewPassword?"fas fa-eye-slash":"fas fa-eye")},null,2)])]),e.newPasswordError?((0,i.wg)(),(0,i.iD)("small",Fk,(0,_t.zw)(e.newPasswordError),1)):(0,i.kq)("",!0)])])])]),(0,i._)("div",jk,[Wk,(0,i._)("button",{type:"button",class:"btn btn-primary",onClick:t[17]||(t[17]=(...e)=>o.changePassword&&o.changePassword(...e))}," Save changes ")])])])])]))}var zk={name:"EditUser",data(){return{userId:null,editedUser:{email:"",first_name:"",last_name:"",phone_number:"",is_superuser:!1,is_staff:!1,is_store_team:!1,is_design_team:!1,is_machine_maintenance_supervisor_team:!1,is_machine_maintenance_staff_team:!1,oldPassword:"",newPassword:"",passwordError:"",newPasswordError:""},showOldPassword:!1,showNewPassword:!1}},mounted(){this.userId=this.$route.params.id,this.fetchUserData()},methods:{toggleNewPassword(){console.log("hiii"),this.showNewPassword=!this.showNewPassword,console.log("value after",this.showNewPassword)},toggleOldPassword(){console.log("olds"),this.showOldPassword=!this.showOldPassword,console.log("value after toggling",this.showOldPassword)},fetchUserData(){this.$store.commit("setIsLoading",!0),tt.Z.get(`/accounts/users/${this.userId}/`).then((e=>{console.log("edit user response data",e.data),this.editedUser=e.data,this.$store.commit("setIsLoading",!1)})).catch((e=>{this.$store.commit("setIsLoading",!1),console.error("Error fetching user data:",e)}))},updateOthers(){this.editedUser.is_superuser&&(this.editedUser.is_staff=!0,this.editedUser.is_store_team=!0,this.editedUser.is_design_team=!0,this.editedUser.is_machine_maintenance_supervisor_team=!0,this.editedUser.is_machine_maintenance_staff_team=!0)},updateUser(){confirm("Are you sure you want to update this user?")&&(this.$store.commit("setIsLoading",!0),tt.Z.put(`/accounts/users/update/${this.userId}/`,this.editedUser).then((e=>{console.log("User updated successfully:",e.data),this.$store.commit("setIsLoading",!1),alert("User Updated successfully!")})).catch((e=>{console.error("Error updating user:",e),this.$store.commit("setIsLoading",!1)})))},deleteUser(){confirm("Are you sure you want to delete this user?")&&(this.$store.commit("setIsLoading",!0),tt.Z.delete(`/accounts/users/delete/${this.userId}/`).then((()=>{console.log("User deleted successfully."),this.$store.commit("setIsLoading",!1),alert("User Deleted successfully!"),this.$router.push("/users")})).catch((e=>{alert("error deleting!"),console.error("Error deleting user:",e)})))},changePassword(){this.oldPassword&&this.newPassword?(this.$store.commit("setIsLoading",!0),tt.Z.post(`/accounts/users/verify-password/${this.userId}/`,{old_password:this.oldPassword}).then((e=>{e.data.success?tt.Z.post(`/accounts/users/change-password/${this.userId}/`,{new_password:this.newPassword}).then((e=>{console.log("Password changed successfully:",e.data),this.$store.commit("setIsLoading",!1),this.$notify({title:"Password Updated Successfully",type:"bg-success-subtle text-success",duration:5e3}),this.oldPassword="",this.newPassword="",this.passwordError="",this.newPasswordError=""})).catch((e=>{console.error("Error changing password:",e),this.$store.commit("setIsLoading",!1),this.passwordError="Error changing password. Please try again."})):(this.$store.commit("setIsLoading",!1),this.$notify({title:"Incorrect Old Password",type:"bg-danger-subtle text-danger",duration:5e3}))})).catch((e=>{console.error("Error verifying password:",e),this.$store.commit("setIsLoading",!1),this.passwordError="Error verifying password. Please try again.",this.$notify({title:"Incorrect Old Password",type:"bg-danger-subtle text-danger",duration:5e3})}))):this.passwordError="Please enter old and new passwords."}}};const Zk=(0,ut.Z)(zk,[["render",Vk],["__scopeId","data-v-6cd7caa1"]]);var Gk=Zk;const Hk=e=>((0,i.dD)("data-v-6f16715e"),e=e(),(0,i.Cn)(),e),Qk={class:"container"},Yk={class:"row align-items-center"},Kk={class:"col-md-6 mt-4"},Jk={class:"d-flex align-items-center"},Xk=Hk((()=>(0,i._)("h2",{class:"mb-0"},"Users",-1))),ew=Hk((()=>(0,i._)("span",{class:"ms-3 fs-4 text-muted"},"|",-1))),tw={"aria-label":"breadcrumb",class:"d-inline-block ms-3"},aw={class:"breadcrumb bg-transparent m-0 p-0"},sw={class:"breadcrumb-item"},iw=Hk((()=>(0,i._)("i",{class:"fas fa-home me-1"},null,-1))),lw={class:"breadcrumb-item"},nw=Hk((()=>(0,i._)("i",{class:"fas fa-users me-1"},null,-1))),ow=Hk((()=>(0,i._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,i._)("i",{class:"fa fa-user-plus"}),(0,i.Uk)(" Create User ")],-1))),cw={class:"col-md-6 mt-4 text-end"},dw=Hk((()=>(0,i._)("i",{class:"fas fa-save me-1"},null,-1))),rw={class:"card animate__animated animate__fadeIn mt-5"},mw=Hk((()=>(0,i._)("div",{class:"card-header bg-primary text-white"},[(0,i._)("h4",{class:"card-title"},[(0,i._)("i",{class:"fas fa-user"}),(0,i.Uk)(" User Information")])],-1))),uw={class:"card-body"},hw={class:"mb-3"},pw=Hk((()=>(0,i._)("label",{for:"email",class:"form-label"},"Email:",-1))),bw={class:"input-group"},gw=Hk((()=>(0,i._)("span",{class:"input-group-text"},[(0,i._)("i",{class:"fas fa-envelope"})],-1))),fw={key:0,class:"text-danger"},_w={class:"mb-3"},vw=Hk((()=>(0,i._)("label",{for:"password",class:"form-label"},"Password:",-1))),yw={class:"input-group"},kw=Hk((()=>(0,i._)("span",{class:"input-group-text"},[(0,i._)("i",{class:"fas fa-lock"})],-1))),ww=["type"],Cw={key:0,class:"text-danger"},Dw={key:1,class:"text-danger"},Sw=Hk((()=>(0,i._)("i",{class:"fas fa-exclamation-triangle"},null,-1))),Mw={class:"mb-3 row"},Pw={class:"col"},Iw=Hk((()=>(0,i._)("label",{for:"first_name",class:"form-label"},"First Name:",-1))),xw={class:"input-group"},Lw=Hk((()=>(0,i._)("span",{class:"input-group-text"},[(0,i._)("i",{class:"fas fa-user"})],-1))),Rw={key:0,class:"text-danger"},Bw={class:"col"},$w=Hk((()=>(0,i._)("label",{for:"last_name",class:"form-label"},"Last Name:",-1))),Ew={class:"input-group"},Uw=Hk((()=>(0,i._)("span",{class:"input-group-text"},[(0,i._)("i",{class:"fas fa-user"})],-1))),Nw={class:"mb-3"},Tw=Hk((()=>(0,i._)("label",{for:"phone_number",class:"form-label"},"Phone Number:",-1))),Ow={class:"input-group"},Aw=Hk((()=>(0,i._)("span",{class:"input-group-text"},[(0,i._)("i",{class:"fas fa-phone"})],-1))),qw={class:"mb-3 row"},Fw={class:"col"},jw={class:"form-check"},Ww=Hk((()=>(0,i._)("label",{class:"form-check-label",for:"is_superuser"},"Is Admin",-1))),Vw={class:"col"},zw={class:"form-check"},Zw=["disabled"],Gw=Hk((()=>(0,i._)("label",{class:"form-check-label",for:"is_staff"},"Is Staff",-1))),Hw={class:"mb-3 row"},Qw={class:"col"},Yw={class:"form-check"},Kw=["disabled"],Jw=Hk((()=>(0,i._)("label",{class:"form-check-label",for:"is_store_team"}," Is Store Team",-1))),Xw={class:"col"},eC={class:"form-check"},tC=["disabled"],aC=Hk((()=>(0,i._)("label",{class:"form-check-label",for:"is_design_team"}," Is Design Team",-1))),sC={class:"col"},iC={class:"form-check"},lC=["disabled"],nC=Hk((()=>(0,i._)("label",{class:"form-check-label",for:"is_machine_maintenance_supervisor_team"}," Is Machine Maintenance Supervisor Team",-1))),oC={class:"col"},cC={class:"form-check"},dC=["disabled"],rC=Hk((()=>(0,i._)("label",{class:"form-check-label",for:"is_machine_maintenance_staff_team"}," Is Machine Maintenance Staff Team",-1)));function mC(e,t,a,l,n,o){const c=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",Qk,[(0,i._)("div",Yk,[(0,i._)("div",Kk,[(0,i._)("div",Jk,[Xk,ew,(0,i._)("nav",tw,[(0,i._)("ol",aw,[(0,i._)("li",sw,[(0,i.Wm)(c,{to:"/"},{default:(0,i.w5)((()=>[iw,(0,i.Uk)("Home")])),_:1})]),(0,i._)("li",lw,[(0,i.Wm)(c,{to:"/users"},{default:(0,i.w5)((()=>[nw,(0,i.Uk)("Users")])),_:1})]),ow])])])]),(0,i._)("div",cw,[(0,i._)("button",{type:"submit",class:"btn btn-primary btn-sm",onClick:t[0]||(t[0]=(...e)=>o.createUser&&o.createUser(...e))},[dw,(0,i.Uk)(" Create User ")])])]),(0,i._)("div",rw,[mw,(0,i._)("div",uw,[(0,i._)("div",hw,[pw,(0,i._)("div",bw,[gw,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>n.newUser.email=e),type:"email",class:"form-control",id:"email",required:""},null,512),[[s.nr,n.newUser.email]])]),!n.newUser.email&&n.formSubmitted?((0,i.wg)(),(0,i.iD)("small",fw," Email is required. ")):(0,i.kq)("",!0)]),(0,i._)("div",_w,[vw,(0,i._)("div",yw,[kw,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>n.newUser.password=e),type:n.showPassword?"text":"password",class:"form-control",id:"password",required:"",onFocus:t[3]||(t[3]=(...e)=>o.clearPasswordError&&o.clearPasswordError(...e))},null,40,ww),[[s.YZ,n.newUser.password]]),(0,i._)("span",{class:"input-group-text",onClick:t[4]||(t[4]=(...e)=>o.togglePasswordVisibility&&o.togglePasswordVisibility(...e))},[(0,i._)("i",{class:(0,_t.C_)(["fas",n.showPassword?"fa-eye-slash":"fa-eye"])},null,2)])]),!n.newUser.password&&n.formSubmitted?((0,i.wg)(),(0,i.iD)("small",Cw," Password is required. ")):(0,i.kq)("",!0),n.passwordAuthenticationError?((0,i.wg)(),(0,i.iD)("div",Dw,[(0,i._)("strong",null,[Sw,(0,i.Uk)(" "+(0,_t.zw)(n.passwordAuthenticationError),1)])])):(0,i.kq)("",!0)]),(0,i._)("div",Mw,[(0,i._)("div",Pw,[Iw,(0,i._)("div",xw,[Lw,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>n.newUser.first_name=e),type:"text",class:"form-control",id:"first_name",required:""},null,512),[[s.nr,n.newUser.first_name]])]),!n.newUser.first_name&&n.formSubmitted?((0,i.wg)(),(0,i.iD)("small",Rw," First Name is required. ")):(0,i.kq)("",!0)]),(0,i._)("div",Bw,[$w,(0,i._)("div",Ew,[Uw,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>n.newUser.last_name=e),type:"text",class:"form-control",id:"last_name",required:""},null,512),[[s.nr,n.newUser.last_name]])])])]),(0,i._)("div",Nw,[Tw,(0,i._)("div",Ow,[Aw,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>n.newUser.phone_number=e),type:"tel",class:"form-control",id:"phone_number"},null,512),[[s.nr,n.newUser.phone_number]])])]),(0,i._)("div",qw,[(0,i._)("div",Fw,[(0,i._)("div",jw,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>n.newUser.is_superuser=e),onChange:t[9]||(t[9]=(...e)=>o.updateOthers&&o.updateOthers(...e)),type:"checkbox",class:"form-check-input",id:"is_superuser"},null,544),[[s.e8,n.newUser.is_superuser]]),Ww])]),(0,i._)("div",Vw,[(0,i._)("div",zw,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>n.newUser.is_staff=e),disabled:n.newUser.is_superuser,type:"checkbox",class:"form-check-input",id:"is_staff"},null,8,Zw),[[s.e8,n.newUser.is_staff]]),Gw])])])]),(0,i._)("div",Hw,[(0,i._)("div",Qw,[(0,i._)("div",Yw,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>n.newUser.is_store_team=e),disabled:n.newUser.is_superuser,type:"checkbox",class:"form-check-input",id:"is_store_team"},null,8,Kw),[[s.e8,n.newUser.is_store_team]]),Jw])]),(0,i._)("div",Xw,[(0,i._)("div",eC,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[12]||(t[12]=e=>n.newUser.is_design_team=e),disabled:n.newUser.is_superuser,type:"checkbox",class:"form-check-input",id:"is_design_team"},null,8,tC),[[s.e8,n.newUser.is_design_team]]),aC])]),(0,i._)("div",sC,[(0,i._)("div",iC,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[13]||(t[13]=e=>n.newUser.is_machine_maintenance_supervisor_team=e),disabled:n.newUser.is_superuser,type:"checkbox",class:"form-check-input",id:"is_design_team"},null,8,lC),[[s.e8,n.newUser.is_machine_maintenance_supervisor_team]]),nC])]),(0,i._)("div",oC,[(0,i._)("div",cC,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[14]||(t[14]=e=>n.newUser.is_machine_maintenance_staff_team=e),disabled:n.newUser.is_superuser,type:"checkbox",class:"form-check-input",id:"is_design_team"},null,8,dC),[[s.e8,n.newUser.is_machine_maintenance_staff_team]]),rC])])])])])}var uC={name:"CreateUser",data(){return{newUser:{email:"",password:"",first_name:"",last_name:"",phone_number:"",is_superuser:!1,is_staff:!1,is_store_team:!1,is_design_team:!1,is_machine_maintenance_supervisor_team:!1,is_machine_maintenance_staff_team:!1},formSubmitted:!1,passwordAuthenticationError:null,showPassword:!1}},methods:{updateOthers(){this.newUser.is_superuser&&(this.newUser.is_staff=!0,this.newUser.is_store_team=!0,this.newUser.is_design_team=!0,this.newUser.is_machine_maintenance_supervisor_team=!0,this.newUser.is_machine_maintenance_staff_team=!0)},createUser(){console.log("form data",this.newUser),this.formSubmitted=!0,this.passwordAuthenticationError=null,this.newUser.email&&this.newUser.password&&this.newUser.first_name&&tt.Z.post("accounts/users/create/",this.newUser).then((e=>{console.log("User created successfully:",e.data),alert("User created successfully!"),this.$router.push("/users")})).catch((e=>{e.response&&e.response.data.password?this.passwordAuthenticationError=e.response.data.password[0]:console.error("Error creating user:",e)}))},clearPasswordError(){this.passwordAuthenticationError=null},togglePasswordVisibility(){this.showPassword=!this.showPassword}}};const hC=(0,ut.Z)(uC,[["render",mC],["__scopeId","data-v-6f16715e"]]);var pC=hC;const bC={key:0,class:"container text-center"},gC=(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1),fC=(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1),_C=[gC,fC],vC={key:1,class:"container"},yC={class:"row align-items-center"},kC=(0,i.uE)('<div class="col-md-6 mt-4"><div class="d-flex align-items-center"><h2 class="mb-0">Orders</h2><span class="ms-3 fs-4 text-muted">|</span><nav aria-label="breadcrumb" class="d-inline-block ms-3"><ol class="breadcrumb bg-transparent m-0 p-0"><li class="breadcrumb-item"><a href="/"><i class="fas fa-home me-1"></i>Home</a></li><li class="breadcrumb-item active" aria-current="page"><i class="fas fa-shopping-cart me-1"></i> Orders </li></ol></nav></div></div>',1),wC={class:"col-md-6 d-flex justify-content-end mt-4"};function CC(e,t,a,s,l,n){const o=(0,i.up)("router-link"),c=(0,i.up)("OrderDetailsTableWithDelete");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",bC,_C)):((0,i.wg)(),(0,i.iD)("div",vC,[(0,i._)("div",yC,[kC,(0,i._)("div",wC,[(0,i.Wm)(o,{to:"/orders/create",class:"btn btn-primary btn-sm ms-2"},{default:(0,i.w5)((()=>[(0,i.Uk)(" Create Order ")])),_:1})])]),(0,i.Wm)(c,{style:{"margin-top":"20px"},orders:l.orders,onRowClicked:n.handleRowClicked,onRowSelected:n.handleRowSelected},null,8,["orders","onRowClicked","onRowSelected"])]))}function DC(e,t,a,s,l,n){const o=(0,i.up)("ag-grid-vue");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(o,{style:{height:"500px"},class:"ag-theme-quartz",rowData:a.orders,defaultColDef:l.defaultColDef,columnDefs:l.colDefs,pagination:!0,rowSelection:"multiple",onRowClicked:n.onRowClicked,onSelectionChanged:n.onSelectionChanged},null,8,["rowData","defaultColDef","columnDefs","onRowClicked","onSelectionChanged"])])}var SC={name:"App",components:{AgGridVue:ns.n},props:{orders:{type:Array,required:!0}},data(){return{colDefs:[{field:"id",headerName:"Order ID",hide:!0},{field:"bom.id",headerName:"BOM ID ",hide:!0},{field:"bom.product.project.name",checkboxSelection:!0,headerName:"Project Name"},{field:"bom.product.name",headerName:"Product"},{field:"batch_quantity",headerName:"Batch Quantity"},{field:"bom.bom_file_name",headerName:"File Name"},{headerName:"Download",cellRenderer:this.editButtonRenderer},{headerName:"Actions",field:"actions",cellRenderer:this.actionsCellRenderer,sortable:!1,filter:!1}],defaultColDef:{filter:!0,sortable:!0,resizable:!0,autoSize:!0},selectedRows:[]}},methods:{onRowClicked(e){this.$emit("rowClicked",e.data)},onSelectionChanged(e){const t=e.api.getSelectedRows(),a=t.length>0?t[0]:null;a?this.$emit("rowSelected",a):this.$emit("rowDeselected")},editButtonRenderer(e){console.log(e);const t=document.createElement("button");return t.innerHTML='<i class="fas fa-download"></i>',t.classList.add("btn-sm","btn-primary"),t.addEventListener("click",(()=>this.downloadFile(e.data.bom.bom_file_url))),t},actionsCellRenderer(e){const t=document.createElement("button");t.innerHTML='<i class="fas fa-trash-alt"></i>',t.classList.add("btn-sm","btn-danger","ms-2"),t.addEventListener("click",(()=>this.deleteProduct(e.data.id)));const a=document.createElement("div");return a.appendChild(t),a},onEditClick(e){this.$router.push(`/product/edit/${e}`)},async deleteProduct(e){if(console.log("order id",e),confirm("Are you sure you want to delete this Order?")){this.$store.commit("setIsLoading",!0);try{const t=await tt.Z.delete(`/store/delete-order/${e}/`);console.log("Response:",t),204===t.status?(console.log("Order deleted successfully."),this.$store.commit("setIsLoading",!1),this.$notify({title:"Order Deleted Successfully",type:"bg-success-subtle text-success",duration:"5000"}),window.location.reload()):(console.error("Error deleting Order. Unexpected status:",t.status),this.$notify({title:"Order Deletion Unsuccessful",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1))}catch(t){console.error("Error deleting Order:",t),this.$notify({title:"Order Deletion Unsuccessful",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1)}}},downloadFile(e){const t=document.createElement("a");t.href=e,t.target="_blank",t.download="BOM_File",document.body.appendChild(t),t.click(),document.body.removeChild(t)}}};const MC=(0,ut.Z)(SC,[["render",DC]]);var PC=MC,IC={components:{OrderDetailsTableWithDelete:PC},data(){return{orders:[]}},methods:{async fetchData(){try{this.$store.commit("setIsLoading",!0);const e=await tt.Z.get("store/get-orders/");console.log("response.data",e.data),this.orders=e.data.orders,console.log("orders",this.orders),this.$store.commit("setIsLoading",!1)}catch(e){console.error("Error fetching BOM data:",e),this.$store.commit("setIsLoading",!1)}},handleRowClicked(e){console.log("Clicked Row:",e)},handleRowSelected(e){console.log("Row Selected:",e),this.selectedRow=e}},mounted(){this.fetchData()}};const xC=(0,ut.Z)(IC,[["render",CC]]);var LC=xC;const RC=e=>((0,i.dD)("data-v-9b431a9a"),e=e(),(0,i.Cn)(),e),BC={key:0,class:"container text-center"},$C=RC((()=>(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1))),EC=RC((()=>(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1))),UC=[$C,EC],NC={key:1,class:"container"},TC={class:"row align-items-center"},OC={class:"col-md-6 mt-4"},AC={class:"d-flex align-items-center"},qC=RC((()=>(0,i._)("h2",{class:"mb-0"},"Orders",-1))),FC=RC((()=>(0,i._)("span",{class:"ms-3 fs-4 text-muted"},"|",-1))),jC={"aria-label":"breadcrumb",class:"d-inline-block ms-3"},WC={class:"breadcrumb bg-transparent m-0 p-0"},VC=RC((()=>(0,i._)("li",{class:"breadcrumb-item"},[(0,i._)("a",{href:"/"},[(0,i._)("i",{class:"fas fa-home me-1"}),(0,i.Uk)("Home")])],-1))),zC={class:"breadcrumb-item active"},ZC=RC((()=>(0,i._)("i",{class:"fas fa-shopping-cart me-1"},null,-1))),GC=RC((()=>(0,i._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,i._)("i",{class:"fa-solid fa-receipt me-1"}),(0,i.Uk)(" Create Order ")],-1))),HC={class:"col-md-6 d-flex justify-content-end mt-4"},QC={class:"card p-3 mb-4 mt-4"},YC={class:"row mb-3"},KC={class:"col-md-6"},JC=RC((()=>(0,i._)("label",{for:"projectDropdown",class:"form-label"},[(0,i.Uk)("Select Project "),(0,i._)("span",{class:"text-danger"},"*")],-1))),XC=["value"],eD={class:"col-md-6"},tD=RC((()=>(0,i._)("label",{for:"productCode",class:"form-label"},[(0,i.Uk)("Product "),(0,i._)("span",{class:"text-danger"},"*")],-1))),aD=["value"],sD={key:0,class:"row mb-3"},iD={class:"col-md-6"},lD=RC((()=>(0,i._)("label",{for:"bomType",class:"form-label"},"BOM Type",-1))),nD={class:"col-md-6"},oD=RC((()=>(0,i._)("label",{for:"bomRevNo",class:"form-label"},[(0,i.Uk)("BOM REV No "),(0,i._)("span",{class:"text-danger"},"*")],-1))),cD={key:0,class:"text-danger"},dD={class:"row mb-3 justify-content-center"},rD={class:"col-md-6"},mD=RC((()=>(0,i._)("label",{for:"batchQuantity",class:"form-label"},[(0,i._)("i",{class:"fas fa-flask me-2"}),(0,i.Uk)("Batch Quantity "),(0,i._)("span",{class:"text-danger"},"*")],-1))),uD={key:0,class:"col-md-6"},hD=RC((()=>(0,i._)("label",{for:"issueDate",class:"form-label"},[(0,i.Uk)("Issue Date "),(0,i._)("span",{class:"text-danger"},"*")],-1))),pD={key:1,class:"card p-3 mb-4"},bD=RC((()=>(0,i._)("label",{for:"fileInput",class:"form-label"},[(0,i._)("i",{class:"fas fa-cloud-upload-alt mr-2"}),(0,i.Uk)(" Choose BOM Excel file "),(0,i._)("span",{class:"text-danger"},"*")],-1))),gD={class:"custom-file"},fD={class:"custom-file-label",for:"fileInput"},_D=RC((()=>(0,i._)("div",{style:{"margin-bottom":"10px"}},null,-1))),vD=RC((()=>(0,i._)("label",{for:"pcbFileInput",class:"form-label"},[(0,i._)("i",{class:"fas fa-cloud-upload-alt mr-2"}),(0,i.Uk)(" Choose PCB BBT Test Report ")],-1))),yD={class:"custom-file"},kD={class:"custom-file-label",for:"pcbFileInput"},wD={class:"radio-button"},CD={class:"form-check form-check-inline"},DD=RC((()=>(0,i._)("label",{class:"form-check-label",for:"flexRadioDefault1"}," Upload a new BOM ",-1))),SD={class:"form-check form-check-inline"},MD=RC((()=>(0,i._)("label",{class:"form-check-label",for:"flexRadioDefault2"}," Select BOM ",-1))),PD={key:2},ID={type:"button",class:"btn btn-primary mt-4","data-bs-toggle":"modal","data-bs-target":"#exampleModal"},xD={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},LD={class:"modal-dialog modal-xl"},RD={class:"modal-content"},BD=RC((()=>(0,i._)("div",{class:"modal-header"},[(0,i._)("h5",{class:"modal-title",id:"exampleModalLabel"},"Details"),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),$D={class:"modal-body"},ED={class:"modal-footer"},UD=RC((()=>(0,i._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1)));function ND(e,t,a,l,n,o){const c=(0,i.up)("router-link"),d=(0,i.up)("OrderBomDetailsVue"),r=(0,i.up)("CustomModal");return n.isLoading?((0,i.wg)(),(0,i.iD)("div",BC,UC)):((0,i.wg)(),(0,i.iD)("div",NC,[(0,i._)("div",TC,[(0,i._)("div",OC,[(0,i._)("div",AC,[qC,FC,(0,i._)("nav",jC,[(0,i._)("ol",WC,[VC,(0,i._)("li",zC,[(0,i.Wm)(c,{to:"/orders"},{default:(0,i.w5)((()=>[ZC,(0,i.Uk)(" Orders ")])),_:1})]),GC])])])]),(0,i._)("div",HC,[(0,i._)("button",{type:"button",class:"btn-sm btn-primary",onClick:t[0]||(t[0]=(...e)=>o.createOrder&&o.createOrder(...e))}," Create Order ")])]),(0,i._)("section",QC,[(0,i._)("div",YC,[(0,i._)("div",KC,[JC,(0,i.wy)((0,i._)("select",{class:"form-select",id:"projectDropdown","onUpdate:modelValue":t[1]||(t[1]=e=>n.selectedProject=e),required:""},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.projects,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e.id,value:e.id},(0,_t.zw)(e.name),9,XC)))),128))],512),[[s.bM,n.selectedProject]])]),(0,i._)("div",eD,[tD,(0,i.wy)((0,i._)("select",{class:"form-select",id:"productCode","onUpdate:modelValue":t[2]||(t[2]=e=>n.selectedProduct=e),onChange:t[3]||(t[3]=(...e)=>o.filteredBoms&&o.filteredBoms(...e)),required:""},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.filteredProducts,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e.id,value:e.id},(0,_t.zw)(e.name),9,aD)))),128))],544),[[s.bM,n.selectedProduct]])])]),"uploadNewBom"===n.selectedRadio?((0,i.wg)(),(0,i.iD)("div",sD,[(0,i._)("div",iD,[lD,(0,i.wy)((0,i._)("input",{type:"text",class:"form-control",id:"bomType","onUpdate:modelValue":t[4]||(t[4]=e=>n.bomType=e)},null,512),[[s.nr,n.bomType]])]),(0,i._)("div",nD,[oD,(0,i.wy)((0,i._)("input",{type:"text",class:"form-control",id:"bomRevNo","onUpdate:modelValue":t[5]||(t[5]=e=>n.bomRevNo=e),onInput:t[6]||(t[6]=(...e)=>o.validateBomRevNo&&o.validateBomRevNo(...e)),required:""},null,544),[[s.nr,n.bomRevNo]]),""===n.bomRevNo||n.isValidBomRevNo?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("p",cD," BOM REV No should be a decimal type with a minimum of 1.0. "))])])):(0,i.kq)("",!0),(0,i._)("div",dD,[(0,i._)("div",rD,[mD,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>n.order.batchQuantity=e),type:"number",class:"form-control",placeholder:"Enter Batch Quantity",min:"1",required:""},null,512),[[s.nr,n.order.batchQuantity]])]),"uploadNewBom"===n.selectedRadio?((0,i.wg)(),(0,i.iD)("div",uD,[hD,(0,i.wy)((0,i._)("input",{type:"date",class:"form-control",id:"issueDate","onUpdate:modelValue":t[8]||(t[8]=e=>n.issueDate=e),required:""},null,512),[[s.nr,n.issueDate]])])):(0,i.kq)("",!0)]),"uploadNewBom"===n.selectedRadio?((0,i.wg)(),(0,i.iD)("div",pD,[bD,(0,i._)("div",gD,[(0,i._)("input",{type:"file",class:"custom-file-input",id:"fileInput",onChange:t[9]||(t[9]=e=>o.handleFileUpload(e,"bom")),accept:".xls, .xlsx",required:""},null,32),(0,i._)("label",fD,(0,_t.zw)(n.uploadedFileNameBOM||"Select file"),1)]),_D,vD,(0,i._)("div",yD,[(0,i._)("input",{type:"file",class:"custom-file-input",id:"pcbFileInput",onChange:t[10]||(t[10]=e=>o.handleFileUpload(e,"pcb")),accept:".xls, .xlsx,.pdf",required:""},null,32),(0,i._)("label",kD,(0,_t.zw)(n.uploadedFileNamePCB||"Select file"),1)])])):(0,i.kq)("",!0),(0,i._)("div",wD,[(0,i._)("div",CD,[(0,i.wy)((0,i._)("input",{class:"form-check-input",type:"radio",name:"flexRadioDefault",id:"flexRadioDefault1","onUpdate:modelValue":t[11]||(t[11]=e=>n.selectedRadio=e),value:"uploadNewBom"},null,512),[[s.G2,n.selectedRadio]]),DD]),(0,i._)("div",SD,[(0,i.wy)((0,i._)("input",{class:"form-check-input",type:"radio",name:"flexRadioDefault",id:"flexRadioDefault2","onUpdate:modelValue":t[12]||(t[12]=e=>n.selectedRadio=e),value:"selectBom"},null,512),[[s.G2,n.selectedRadio]]),MD])]),"selectBom"===n.selectedRadio?((0,i.wg)(),(0,i.iD)("div",PD,[(0,i._)("button",ID,(0,_t.zw)(n.selectBomButtonText),1)])):(0,i.kq)("",!0)]),(0,i._)("div",xD,[(0,i._)("div",LD,[(0,i._)("div",RD,[BD,(0,i._)("div",$D,[(0,i.Wm)(d,{bomByProducts:n.bomByProducts,onRowClicked:o.handleRowClicked,onRowSelected:o.handleRowSelected,onRowDeselected:o.handleRowDeselected},null,8,["bomByProducts","onRowClicked","onRowSelected","onRowDeselected"])]),(0,i._)("div",ED,[UD,(0,i._)("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal",onClick:t[13]||(t[13]=(...e)=>o.saveChanges&&o.saveChanges(...e))}," Save changes ")])])])]),(0,i.Wm)(r,{show:n.isCustomModalVisible,onCloseModal:o.handleCloseModal,onHandleModalSubmitted:o.handleModalSubmission,onDismissModal:o.handleCloseModal},null,8,["show","onCloseModal","onHandleModalSubmitted","onDismissModal"])]))}const TD={class:"modal fade",id:"bomRevisionNoteModal",tabindex:"-1","aria-labelledby":"bomRevisionNoteModalLabel","aria-hidden":"true"},OD={class:"modal-dialog"},AD={class:"modal-content"},qD=(0,i._)("div",{class:"modal-header"},[(0,i._)("h5",{class:"modal-title",id:"bomRevisionNoteModalLabel"}," BOM Revision Note "),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),FD={class:"modal-body"};function jD(e,t,a,s,l,n){const o=(0,i.up)("ag-grid-vue");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(o,{style:{height:"500px"},class:"ag-theme-quartz",rowData:a.bomByProducts,defaultColDef:l.defaultColDef,columnDefs:l.colDefs,pagination:!0,onRowClicked:n.onRowClicked,onSelectionChanged:n.onSelectionChanged,rowSelection:"single"},null,8,["rowData","defaultColDef","columnDefs","onRowClicked","onSelectionChanged"]),(0,i._)("div",TD,[(0,i._)("div",OD,[(0,i._)("div",AD,[qD,(0,i._)("div",FD,[(0,i._)("p",null,(0,_t.zw)(l.selectedBomRevisionNote),1)])])])])])}var WD={name:"OrderBomDetails",components:{AgGridVue:ns.n},props:{bomByProducts:{type:Array,required:!0}},data(){return{colDefs:[{field:"id",checkboxSelection:!0,headerName:"BOM ID"},{field:"bom_rev_number",headerName:"Bom Rev No."},{field:"change_note",headerName:"BOM Revision Note",valueFormatter:e=>e.value?e.value:"Change Note Absent"},{field:"product.project.name",headerName:"Project Name"},{field:"product.name",headerName:"Product Name"},{field:"product.product_code",headerName:"Product Code"},{field:"bom_type.name",headerName:"BOM Type"},{field:"issue_date",headerName:"Issue Date"},{field:"product.product_rev_number",headerName:"Product Rev No"},{headerName:"Download",cellRenderer:this.editButtonRenderer}],defaultColDef:{filter:!0,sortable:!0,resizable:!0,autoSize:!0},selectedRows:[],selectedBomRevisionNote:""}},methods:{onRowClicked(e){this.$emit("rowClicked",e.data)},onSelectionChanged(e){const t=e.api.getSelectedRows(),a=t.length>0?t[0]:null;a?this.$emit("rowSelected",a):this.$emit("rowDeselected")},editButtonRenderer(e){console.log(e);const t=document.createElement("button");return t.innerHTML=`<i class="fas fa-download"></i> ${e.data.bom_file_name} `,t.classList.add("btn-sm","btn-primary"),t.addEventListener("click",(()=>this.downloadFile(e.data.bom_file_url))),t},downloadFile(e){const t=document.createElement("a");t.href=e,t.target="_blank",t.download="BOM_File",document.body.appendChild(t),t.click(),document.body.removeChild(t)},onEditClick(e){this.$router.push(`/bom/edit/${e}`)},bomRevisionNoteRenderer(e){const t=document.createElement("div");if(e.data.change_note){const a=document.createElement("button");a.innerHTML='<i class="fas fa-eye"></i>',a.classList.add("btn","btn-secondary"),a.dataset.bsToggle="modal",a.dataset.bsTarget="#bomRevisionNoteModal",a.addEventListener("click",(t=>{t.stopPropagation(),this.loadBomRevisionChangeNoteInModal(e.data)})),t.appendChild(a)}else{const e=document.createElement("span");e.innerText="No Change",e.classList.add("text-muted"),t.appendChild(e)}return t},loadBomRevisionChangeNoteInModal(e){console.log("to set the data in the modal",e),console.log("revision note",e.change_note),this.selectedBomRevisionNote=e.change_note}}};const VD=(0,ut.Z)(WD,[["render",jD]]);var zD=VD,ZD={components:{OrderBomDetailsVue:zD,CustomModal:qa},data(){return{selectedRadio:null,issueDate:"",order:{selectedBomId:null,batchQuantity:1},boms:[],projects:[],products:[],orders:[],selectedProduct:null,selectedProject:null,bomByProducts:[],selectedBomFileName:"",selectedBomId:null,selectBomButtonText:"Select BOM",bomRevNo:null,isValidBomRevNo:!0,bomType:null,uploadedFileName:null,uploadedFile:null,uploadedFileNameBOM:"",uploadedFileNamePCB:"",uploadedFileBOM:null,uploadedFilePCB:null,isLoading:!1,bom_rev_change_note:"",isCustomModalVisible:!1}},computed:{filteredProducts(){if(this.products&&this.projects&&this.products.length&&this.projects.length){if(console.log("selectedProject",this.selectedProject),null!==this.selectedProject){const e=this.products.filter((e=>{const t=e.project;return t===this.selectedProject}));return console.log("Filtered Products:",e),e}return console.log("All Products:",this.products),[]}return console.log("No Products or Projects available."),[]},prepopulatedIssueDate(){return this.bomByProducts.length>0?this.bomByProducts[0].issue_date:null},formattedIssueDate(){if(this.prepopulatedIssueDate){const[e,t,a]=this.prepopulatedIssueDate.split("/");return`${a}-${e.padStart(2,"0")}-${t.padStart(2,"0")}`}return null}},mounted(){this.getData()},methods:{openCustomModal(){this.isCustomModalVisible=!0},handleCloseModal(){this.isCustomModalVisible=!1},validateBomRevNo(){const e=/^(1\.[0-9]|1[0-9]|2\.0)$/;e.test(this.bomRevNo)?this.isValidBomRevNo=!0:this.isValidBomRevNo=!1},setIsLoading(e){this.isLoading=e,this.$store.commit("setIsLoading",e)},notifySuccess(e){this.$notify({title:e,type:"bg-success-subtle text-success",duration:"5000"})},notifyError(e){this.$notify({title:e,type:"bg-danger-subtle text-danger",duration:"5000"})},handleError(e){this.notifyError(e),this.setIsLoading(!1)},handleFileUpload(e,t){const a=e.target.files[0];a&&(console.log("Uploaded file:",a),"bom"===t?(console.log("BOM file uploaded:",a.name),this.uploadedFileNameBOM=a.name,this.uploadedFileBOM=a):"pcb"===t&&(console.log("PCB file uploaded:",a.name),this.uploadedFileNamePCB=a.name,this.uploadedFilePCB=a),this.uploadedFileBOM&&console.log("Uploaded BOM file:",this.uploadedFileBOM),this.uploadedFilePCB&&console.log("Uploaded PCB file:",this.uploadedFilePCB))},async getData(){try{this.setIsLoading(!0);const e=await tt.Z.get("store/create-order/");console.log("boms + products + projects",e.data),this.setIsLoading(!1),this.boms=e.data.boms,this.projects=e.data.projects,this.products=e.data.products,this.orders=e.data.orders}catch(e){console.error("Error fetching projects:",e),this.setIsLoading(!1)}},filteredBoms(){console.log(this.selectedProduct),this.boms&&null!==this.selectedProduct?(this.bomByProducts=this.boms.filter((e=>e.product.id===this.selectedProduct)),console.log("Filtered Boms i.e bomByProducts=:",this.bomByProducts)):(console.log("No Boms or Selected Product available."),this.bomByProducts=[])},handleRowClicked(e){console.log("Row Clicked:",e),this.selectedBomFileName=e.bom_file_name,this.selectedBomId=e.id},handleRowSelected(e){console.log("Row Selected:",e),this.selectedBomFileName=e.bom_file_name,this.selectedBomId=e.id},handleRowDeselected(){console.log("Row Deselected")},saveChanges(){this.selectedBomFileName&&null!==this.selectedBomId?(this.selectBomButtonText=this.selectedBomFileName,this.order.selectedBomId=this.selectedBomId,console.log("Selected BOM File Name:",this.selectedBomFileName),console.log("Selected BOM ID:",this.selectedBomId)):(console.warn("No BOM selected."),this.selectBomButtonText="Select BOM"),this.selectedBomFileName="",this.selectedBomId=null},async createSelectedBOMOrder(){this.setIsLoading(!0),await tt.Z.post("store/create-order/",this.order).then((e=>{console.log("Order Created:",e.data),this.notifySuccess("Order Created Successfully"),this.setIsLoading(!1),this.$router.push("/orders")})).catch((e=>{console.error("Error creating order:",e),this.handleError("Order Creation Failed")}))},createOrder(){this.setIsLoading(!0),"selectBom"===this.selectedRadio?this.createSelectedBOMOrder():"uploadNewBom"===this.selectedRadio&&this.createBomTask()},async createBomTask(){this.setIsLoading(!0);const e=new FormData;e.append("project_id",this.selectedProject),e.append("product_id",this.selectedProduct),e.append("bom_type",this.bomType),e.append("bom_rev_no",this.bomRevNo),e.append("issue_date",this.issueDate),e.append("batch_quantity",this.order.batchQuantity),e.append("bom_file",this.uploadedFileBOM),e.append("pcb_file",this.uploadedFilePCB);try{const t=await tt.Z.post("store/handle-bom-cases/",e,{headers:{"Content-Type":"multipart/form-data"}});if(console.log("Response from handle-bom-cases API:",t.data),200===t.status)this.setIsLoading(!1),console.log("hi",t.data.message),this.$notify({title:`BOM Already Exists With Rev No: ${t.data.bom_rev_number}`,type:"bg-danger-subtle text-danger",duration:"5000"});else if(201===t.status)this.setIsLoading(!1),console.log("inside case two block"),console.log(t.data.message),console.log("Before setting isCustomModalVisible:",this.isCustomModalVisible),this.isCustomModalVisible=!0,console.log("After setting isCustomModalVisible:",this.isCustomModalVisible);else if(204===t.status){console.log(t.data.message),this.setIsLoading(!0);const a=await tt.Z.post("store/create-order-task/",e,{headers:{"Content-Type":"multipart/form-data"}});console.log(a.data);const s=a.data.task_id;"IN PROGRESS"===a.data.task_status||"PENDING"===a.data.task_status?setTimeout((()=>{this.checkTaskStatus(s)}),1e4):"SUCCESS"===a.data.task_status?(this.$notify({title:"BOM Uploaded Successfully adn Order Created",type:"bg-success-subtle text-success",duration:"5000"}),this.setIsLoading(!1),this.$router.push("/orders")):(this.$notify({title:"BOM Upload Failed",type:"bg-danger-subtle text-danger",duration:"5000"}),this.setIsLoading(!1))}}catch(t){console.log("error:",t),this.$notify({title:"An error occurred, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"}),this.setIsLoading(!1)}},async createOrderAndUploadBom(e){this.setIsLoading(!0);try{const t=await tt.Z.post("store/create-order-task/",e,{headers:{"Content-Type":"multipart/form-data"}});console.log(t.data);const a=t.data.task_id;"IN PROGRESS"===t.data.task_status||"PENDING"===t.data.task_status?setTimeout((()=>{this.checkTaskStatus(a)}),1e4):"SUCCESS"===t.data.task_status?(this.$notify({title:"BOM Uploaded Successfully",type:"bg-success-subtle text-success",duration:"5000"}),this.setIsLoading(!1),this.$router.push("/bom")):(this.$notify({title:"BOM Upload Failed",type:"bg-danger-subtle text-danger",duration:"5000"}),this.setIsLoading(!1))}catch(t){console.log("error:",t),this.$notify({title:"An error occurred, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"}),this.setIsLoading(!1)}},async handleModalSubmission(e){console.log("inside handleModal Submisison which will revece CHANGE NOTE IN ARFUMENT"),console.log("this is the change note ",e);const t=new FormData;t.append("project_id",this.selectedProject),t.append("product_id",this.selectedProduct),t.append("bom_type",this.bomType),t.append("bom_rev_no",this.bomRevNo),t.append("issue_date",this.issueDate),t.append("bom_file",this.uploadedFile),t.append("bom_rev_change_note",e),t.append("batch_quantity",this.order.batchQuantity),console.log("FormData:",t),await this.createOrderAndUploadBom(t)},async checkTaskStatus(e){try{const t=await tt.Z.get(`store/check-task-status/${e}/`);"IN PROGRESS"===t.data.task_status||"PENDING"===t.data.task_status?setTimeout((()=>{this.checkTaskStatus(e)}),5e3):"SUCCESS"===t.data.task_status?(this.notifySuccess("BOM Uploaded and Order Created Successfully"),this.setIsLoading(!1),this.$router.push("/orders")):(this.notifyError("BOM Upload Failed"),this.setIsLoading(!1))}catch(t){console.log("error:",t),this.handleError("An error occurred, please try again later")}}}};const GD=(0,ut.Z)(ZD,[["render",ND],["__scopeId","data-v-9b431a9a"]]);var HD=GD;const QD={key:0,class:"container text-center"},YD=(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1),KD=(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1),JD=[YD,KD],XD={key:1,class:"container"},eS={class:"row align-items-center"},tS={class:"col-md-6 mt-4"},aS={class:"d-flex align-items-center"},sS=(0,i._)("h2",{class:"mb-0"},"Project",-1),iS=(0,i._)("span",{class:"ms-3 fs-4 text-muted"},"|",-1),lS={"aria-label":"breadcrumb",class:"d-inline-block ms-3"},nS={class:"breadcrumb bg-transparent m-0 p-0"},oS={class:"breadcrumb-item"},cS=(0,i._)("i",{class:"fas fa-home me-1"},null,-1),dS=(0,i._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,i._)("i",{class:"fas fa-project-diagram me-1"}),(0,i.Uk)(" Project ")],-1),rS={class:"col-md-6 mt-4 text-end"};function mS(e,t,a,s,l,n){const o=(0,i.up)("router-link"),c=(0,i.up)("ProjectsLandingTable");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",QD,JD)):((0,i.wg)(),(0,i.iD)("div",XD,[(0,i._)("div",eS,[(0,i._)("div",tS,[(0,i._)("div",aS,[sS,iS,(0,i._)("nav",lS,[(0,i._)("ol",nS,[(0,i._)("li",oS,[(0,i.Wm)(o,{to:"/"},{default:(0,i.w5)((()=>[cS,(0,i.Uk)(" Home")])),_:1})]),dS])])])]),(0,i._)("div",rS,[(0,i.Wm)(o,{to:"/projects/create-project",class:"btn btn-primary btn-sm ms-2"},{default:(0,i.w5)((()=>[(0,i.Uk)(" Create New Project ")])),_:1})])]),(0,i.Wm)(c,{style:{"margin-top":"20px"},projectList:l.projectList},null,8,["projectList"])]))}function uS(e,t,a,s,l,n){const o=(0,i.up)("ag-grid-vue");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(o,{style:{height:"500px"},class:"ag-theme-quartz",rowData:a.projectList,defaultColDef:l.defaultColDef,columnDefs:l.colDefs,pagination:!0,onRowClicked:n.onRowClicked,onSelectionChanged:n.onSelectionChanged},null,8,["rowData","defaultColDef","columnDefs","onRowClicked","onSelectionChanged"])])}var hS={name:"App",components:{AgGridVue:ns.n},props:{projectList:{type:Array,required:!0}},data(){return{colDefs:[{field:"id",hide:!0},{field:"name",headerName:"Project Name",width:600},{headerName:"Actions",cellRenderer:this.editButtonRenderer,width:600}],defaultColDef:{filter:!0,sortable:!0,resizable:!0,autoSize:!0},selectedRows:[]}},methods:{onRowClicked(e){this.$emit("rowClicked",e.data),this.$router.push(`/project-edit/${e.data.id}`)},onRowSelected(e){e.node.isSelected()&&this.$emit("rowSelected",e.node.data)},onSelectionChanged(e){const t=e.api.getSelectedRows(),a=t.length>0?t[0]:null;a?this.$emit("rowSelected",a):this.$emit("rowDeselected")},editButtonRenderer(e){console.log(e);const t=document.createElement("button");return t.innerHTML='<i class="fas fa-edit"></i>',t.classList.add("btn","btn-primary"),t.addEventListener("click",(()=>this.onEditClick(e.data.id))),t},onEditClick(e){this.$router.push(`/project-edit/${e}`)}}};const pS=(0,ut.Z)(hS,[["render",uS]]);var bS=pS,gS={components:{ProjectsLandingTable:bS},data(){return{projectList:[]}},mounted(){this.getData()},methods:{getData(){this.$store.commit("setIsLoading",!0),tt.Z.get("/store/edit-project").then((e=>{console.log("response.data",e.data),this.projectList=e.data.projects,this.$store.commit("setIsLoading",!1)})).catch((e=>{console.error("Error fetching products:",e),this.$store.commit("setIsLoading",!1)}))}}};const fS=(0,ut.Z)(gS,[["render",mS]]);var _S=fS;const vS=e=>((0,i.dD)("data-v-29f30d24"),e=e(),(0,i.Cn)(),e),yS={key:0,class:"container text-center"},kS=vS((()=>(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1))),wS=vS((()=>(0,i._)("div",null,[(0,i._)("b",null," Loading...")],-1))),CS=[kS,wS],DS={key:1,class:"container"},SS={class:"row align-items-center"},MS={class:"col-md-8 mt-4"},PS={class:"d-flex align-items-center"},IS=vS((()=>(0,i._)("h2",{class:"mb-0"},"Edit Project |",-1))),xS={"aria-label":"breadcrumb",class:"ms-3"},LS={class:"breadcrumb bg-transparent m-0 p-0 justify-content-end"},RS=vS((()=>(0,i._)("li",{class:"breadcrumb-item"},[(0,i._)("a",{href:"/"},[(0,i._)("i",{class:"fas fa-home me-1"}),(0,i.Uk)("Home")])],-1))),BS={class:"breadcrumb-item active","aria-current":"page"},$S=vS((()=>(0,i._)("i",{class:"fas fa-project-diagram me-1"},null,-1))),ES=vS((()=>(0,i._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,i._)("i",{class:"fa fa-bars me-1","aria-hidden":"true"}),(0,i.Uk)("Project Details ")],-1))),US={class:"col-md-4 mt-4 d-flex justify-content-end"},NS={class:"mt-5"},TS={class:"row"},OS={class:"form-group"},AS=vS((()=>(0,i._)("label",{for:"veplPartNumber"},"Project Name",-1))),qS={class:"form-group"},FS=vS((()=>(0,i._)("label",{for:"products"},"Products:",-1))),jS=vS((()=>(0,i._)("br",null,null,-1))),WS=vS((()=>(0,i._)("button",{type:"button",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#exampleModal"}," Add Product ",-1))),VS={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},zS={class:"modal-dialog modal-xl"},ZS={class:"modal-content"},GS=vS((()=>(0,i._)("div",{class:"modal-header"},[(0,i._)("h1",{class:"modal-title fs-5",id:"exampleModalLabel"}," Create New Product "),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),HS={class:"modal-body"},QS={class:"card mt-4"},YS=vS((()=>(0,i._)("div",{class:"card-header bg-primary text-white"},[(0,i._)("h4",{class:"card-title"},[(0,i._)("i",{class:"fas fa-Product-diagram me-2"}),(0,i.Uk)(" Product Information ")])],-1))),KS={class:"card-body"},JS={class:"mb-3"},XS=vS((()=>(0,i._)("label",{for:"productName",class:"form-label"},"Product Name:",-1))),eM={key:0,class:"text-danger"},tM={class:"mb-3"},aM=vS((()=>(0,i._)("label",{for:"productCode",class:"form-label"},"Product Code:",-1))),sM={key:0,class:"text-danger"},iM={class:"mb-3"},lM=vS((()=>(0,i._)("label",{for:"ProductRevNo",class:"form-label"},"Product Rev No:",-1))),nM={key:0,class:"text-danger"},oM={class:"modal-footer"},cM=vS((()=>(0,i._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1))),dM=vS((()=>(0,i._)("i",{class:"fas fa-save me-1"},null,-1)));function rM(e,t,a,l,n,o){const c=(0,i.up)("router-link"),d=(0,i.up)("products-for-project-grid");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",yS,CS)):((0,i.wg)(),(0,i.iD)("div",DS,[(0,i._)("div",SS,[(0,i._)("div",MS,[(0,i._)("div",PS,[IS,(0,i._)("nav",xS,[(0,i._)("ol",LS,[RS,(0,i._)("li",BS,[(0,i.Wm)(c,{to:"/projects"},{default:(0,i.w5)((()=>[$S,(0,i.Uk)("Projects ")])),_:1})]),ES])])])]),(0,i._)("div",US,[(0,i._)("button",{type:"button",class:"btn btn-primary me-2",onClick:t[0]||(t[0]=(...e)=>o.updateProject&&o.updateProject(...e))}," Update Project "),(0,i._)("button",{type:"button",class:"btn btn-danger",onClick:t[1]||(t[1]=(...e)=>o.deleteProject&&o.deleteProject(...e))}," Delete Project ")])]),(0,i._)("section",NS,[(0,i._)("div",TS,[(0,i._)("div",OS,[AS,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>n.editedProject.name=e),type:"text",class:"form-control"},null,512),[[s.nr,n.editedProject.name]])])]),(0,i._)("div",qS,[FS,jS,WS,(0,i.Wm)(d,{style:{"margin-top":"20px"},products:n.project.products,onRowSelected:e.handleRowSelected},null,8,["products","onRowSelected"])])]),(0,i._)("div",VS,[(0,i._)("div",zS,[(0,i._)("div",ZS,[GS,(0,i._)("div",HS,[(0,i._)("div",QS,[YS,(0,i._)("div",KS,[(0,i._)("div",JS,[XS,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>n.newProduct.name=e),type:"text",class:"form-control",id:"productName",required:""},null,512),[[s.nr,n.newProduct.name]]),n.newProduct.name?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("small",eM,"Product Name is required."))]),(0,i._)("div",tM,[aM,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>n.newProduct.product_code=e),class:"form-control",id:"productCode",required:""},null,512),[[s.nr,n.newProduct.product_code]]),n.newProduct.product_code?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("small",sM,"Product Code is required."))]),(0,i._)("div",iM,[lM,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>n.newProduct.product_rev_number=e),type:"text",class:"form-control",id:"productRevNo",required:""},null,512),[[s.nr,n.newProduct.product_rev_number]]),n.newProduct.product_rev_number?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("small",nM,"Product Rev No is required."))])])])]),(0,i._)("div",oM,[cM,(0,i._)("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal",onClick:t[6]||(t[6]=(...e)=>o.createProduct&&o.createProduct(...e))},[dM,(0,i.Uk)(" Create New Product ")])])])])])]))}const mM={class:"ag-theme-quartz",style:{height:"600px"}};function uM(e,t,a,s,l,n){const o=(0,i.up)("ag-grid-vue");return(0,i.wg)(),(0,i.iD)("div",mM,[(0,i.Wm)(o,{ref:"agGrid",gridOptions:l.gridOptions,columnDefs:l.columnDefs,rowData:a.products,onRowClicked:n.onRowClicked,onRowSelected:n.onRowSelected},null,8,["gridOptions","columnDefs","rowData","onRowClicked","onRowSelected"])])}var hM={components:{"ag-grid-vue":ns.n},props:{products:{type:Array,default:()=>[]},selectedProducts:{type:Array,default:()=>[]}},data(){return{gridOptions:{domLayout:"autoHeight",rowSelection:"multiple",pagination:!0,paginationPageSize:20},columnDefs:[{headerCheckboxSelection:!0,checkboxSelection:!0,headerName:"Product name",field:"name",width:300},{headerName:"Product Code",field:"product_code",width:300},{headerName:"Product Rev No",field:"product_rev_number",width:300},{headerName:"Actions",field:"actions",cellRenderer:this.actionsCellRenderer,sortable:!1,filter:!1}]}},methods:{onRowClicked(e){this.$emit("rowClicked",e.data),this.$router.push(`/product/edit/${e.data.id}`)},onRowSelected(e){e.node.isSelected()&&this.$emit("rowSelected",e.data)},onSelectionChanged(){this.$refs.agGrid&&this.$refs.agGrid.api&&(this.selectedRows=this.$refs.agGrid.api.getSelectedRows())},actionsCellRenderer(e){const t=document.createElement("button");t.innerHTML='<i class="fas fa-edit"></i>',t.classList.add("btn","btn-primary","ms-2"),t.addEventListener("click",(()=>this.onEditClick(e.data.id)));const a=document.createElement("button");a.innerHTML='<i class="fas fa-trash-alt"></i>',a.classList.add("btn","btn-danger","ms-4"),a.addEventListener("click",(t=>this.deleteProduct(e.data.id,t)));const s=document.createElement("div");return s.appendChild(t),s.appendChild(a),s},onEditClick(e){this.$router.push(`/product/edit/${e}`)},async deleteProduct(e,t){t.stopPropagation(),confirm("Are you sure you want to delete this product?")&&(this.$store.commit("setIsLoading",!0),tt.Z.delete(`/store/delete-product/${e}/`).then((e=>{console.log(e.data),console.log("Product deleted successfully."),this.$store.commit("setIsLoading",!1),this.$notify({title:"Product Deleted Successfully",type:"bg-success-subtle text-success",duration:"5000"}),window.location.reload()})).catch((e=>{console.error("Error deleting user:",e),this.$notify({title:"Product Deletion Unsuccessful",type:"bg-danger-subtle text-danger",duration:"5000"})})))}}};const pM=(0,ut.Z)(hM,[["render",uM],["__scopeId","data-v-cbc677c0"]]);var bM=pM,gM={components:{"products-for-project-grid":bM},data(){return{editedProject:{name:"",project_code:"",project_rev_number:"",products:[]},newProduct:{name:"",product_code:"",product_rev_number:""},project:[],products:[]}},mounted(){this.fetchData()},methods:{async fetchData(){this.$store.commit("setIsLoading",!0),tt.Z.get(`/store/edit-project/${this.$route.params.id}`).then((e=>{console.log("response.data",e.data),this.project=e.data.project,this.project&&(this.editedProject.name=this.project.name,this.editedProject.project_code=this.project.project_code,this.editedProject.project_rev_number=this.project.project_rev_number),this.$store.commit("setIsLoading",!1)})).catch((e=>{console.error("Error fetching products:",e),this.$store.commit("setIsLoading",!1)}))},updateProject(){console.log("Edited Project:",this.editedProject),confirm("Are you sure you want to update this project?")&&(this.$store.commit("setIsLoading",!0),tt.Z.put(`/store/edit-project/${this.$route.params.id}/`,this.editedProject).then((e=>{console.log("Project updated successfully:",e.data),this.$store.commit("setIsLoading",!1),this.$notify({title:"Project Updated Successfully",type:"bg-success-subtle text-success",duration:"5000"}),this.$router.push("/projects")})).catch((e=>{console.error("Error updating Project:",e),this.$notify({title:"Project Creation Unsuccessful",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1)})))},createProduct(){this.$store.commit("setIsLoading",!0),console.log("form data",this.newProduct),this.newProduct.name&&this.newProduct.product_code&&this.newProduct.product_rev_number&&tt.Z.post(`/store/create-product/${this.$route.params.id}/`,this.newProduct).then((e=>{console.log("Product created successfully:",e.data),this.$store.commit("setIsLoading",!1);const t=e.data.product;this.project.products.push(t),this.$notify({title:"Product Created Successfully",type:"bg-success-subtle text-success",duration:"5000"}),this.newProduct={};const a=this.$route.params.id;this.$router.push(`/project-edit/${a}`)})).catch((e=>{console.error("Error creating Product:",e),this.$store.commit("setIsLoading",!1),this.$notify({title:"Product Creation Unsuccessful",type:"bg-danger-subtle text-danger",duration:"5000"})}))},deleteProject(){confirm("Are you sure you want to delete this project?")&&(this.$store.commit("setIsLoading",!0),tt.Z.delete(`/store/delete-project/${this.$route.params.id}/`).then((e=>{console.log(e.data),console.log("Project deleted successfully."),this.$store.commit("setIsLoading",!1),this.$notify({title:"Project Deleted Successfully",type:"bg-success-subtle text-success",duration:"5000"}),this.$router.push("/projects")})).catch((e=>{console.error("Error deleting user:",e),this.$notify({title:"Project Deletion Unsuccessful",type:"bg-danger-subtle text-danger",duration:"5000"})})))}}};const fM=(0,ut.Z)(gM,[["render",rM],["__scopeId","data-v-29f30d24"]]);var _M=fM;const vM=e=>((0,i.dD)("data-v-2b92c84a"),e=e(),(0,i.Cn)(),e),yM={class:"container"},kM={class:"row align-items-center"},wM={class:"col-md-6 mt-4"},CM={class:"d-flex align-items-center"},DM=vM((()=>(0,i._)("h2",{class:"mb-0"},"Projects",-1))),SM=vM((()=>(0,i._)("span",{class:"ms-3 fs-4 text-muted"},"|",-1))),MM={"aria-label":"breadcrumb",class:"d-inline-block ms-3"},PM={class:"breadcrumb bg-transparent m-0 p-0"},IM={class:"breadcrumb-item"},xM=vM((()=>(0,i._)("i",{class:"fas fa-home me-1"},null,-1))),LM={class:"breadcrumb-item"},RM=vM((()=>(0,i._)("i",{class:"fas fa-project-diagram me-1"},null,-1))),BM=vM((()=>(0,i._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,i._)("i",{class:"fa fa-plus"}),(0,i.Uk)(" Create Project ")],-1))),$M={class:"col-md-6 mt-4 text-end"},EM=vM((()=>(0,i._)("i",{class:"fas fa-save me-1"},null,-1))),UM={class:"card mt-4"},NM=vM((()=>(0,i._)("div",{class:"card-header bg-primary text-white"},[(0,i._)("h4",{class:"card-title"},[(0,i._)("i",{class:"fas fa-project-diagram me-2"}),(0,i.Uk)(" Project Information ")])],-1))),TM={class:"card-body"},OM={class:"mb-3"},AM=vM((()=>(0,i._)("label",{for:"projectName",class:"form-label"},"Project Name:",-1))),qM={key:0,class:"text-danger"};function FM(e,t,a,l,n,o){const c=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",yM,[(0,i._)("div",kM,[(0,i._)("div",wM,[(0,i._)("div",CM,[DM,SM,(0,i._)("nav",MM,[(0,i._)("ol",PM,[(0,i._)("li",IM,[(0,i.Wm)(c,{to:"/"},{default:(0,i.w5)((()=>[xM,(0,i.Uk)("Home")])),_:1})]),(0,i._)("li",LM,[(0,i.Wm)(c,{to:"/projects"},{default:(0,i.w5)((()=>[RM,(0,i.Uk)("Projects")])),_:1})]),BM])])])]),(0,i._)("div",$M,[(0,i._)("button",{type:"submit",class:"btn btn-success btn-sm",onClick:t[0]||(t[0]=(...e)=>o.createProject&&o.createProject(...e))},[EM,(0,i.Uk)(" Create Project ")])])]),(0,i._)("div",UM,[NM,(0,i._)("div",TM,[(0,i._)("div",OM,[AM,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>n.newProject.name=e),type:"text",class:"form-control",id:"projectName",required:""},null,512),[[s.nr,n.newProject.name]]),n.newProject.name?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("small",qM,"Project Name is required."))])])])])}var jM={name:"CreateProject",data(){return{newProject:{name:"",project_code:"",project_rev_number:""}}},methods:{createProject(){this.$store.commit("setIsLoading",!0),this.newProject.name&&tt.Z.post("/store/create-project/",this.newProject).then((e=>{console.log("Project created successfully:",e.data),this.$store.commit("setIsLoading",!1),this.$notify({title:"Project Created Successfully",type:"bg-success-subtle text-success",duration:"5000"}),this.$router.push("/projects")})).catch((e=>{console.error("Error creating project:",e),this.$store.commit("setIsLoading",!1),this.$notify({title:"Project Creation Unsuccessful",type:"bg-danger-subtle text-danger",duration:"5000"})}))}}};const WM=(0,ut.Z)(jM,[["render",FM],["__scopeId","data-v-2b92c84a"]]);var VM=WM;const zM=e=>((0,i.dD)("data-v-b198b0c4"),e=e(),(0,i.Cn)(),e),ZM={key:0,class:"container text-center"},GM=zM((()=>(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1))),HM=zM((()=>(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1))),QM=[GM,HM],YM={key:1,class:"container"},KM={class:"row align-items-center"},JM={class:"col-md-6 mt-4"},XM={class:"d-flex align-items-center"},eP=zM((()=>(0,i._)("h2",{class:"mb-0"},"Edit Product",-1))),tP=zM((()=>(0,i._)("span",{class:"ms-3 fs-4 text-muted"},"|",-1))),aP={"aria-label":"breadcrumb",class:"d-inline-block ms-3"},sP={class:"breadcrumb bg-transparent m-0 p-0"},iP={class:"breadcrumb-item"},lP=zM((()=>(0,i._)("i",{class:"fas fa-home me-1"},null,-1))),nP={class:"breadcrumb-item"},oP=zM((()=>(0,i._)("i",{class:"fas fa-project-diagram me-1"},null,-1))),cP={class:"breadcrumb-item"},dP=zM((()=>(0,i._)("i",{class:"fas fa-bars me-1"},null,-1))),rP=zM((()=>(0,i._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,i._)("i",{class:"fas fa-edit me-1"}),(0,i.Uk)(" Edit Product ")],-1))),mP={class:"col-md-6 mt-4 text-end"},uP=zM((()=>(0,i._)("i",{class:"fas fa-save me-1"},null,-1))),hP=zM((()=>(0,i._)("i",{class:"fas fa-trash me-1"},null,-1))),pP={class:"card animate__animated animate__fadeIn mt-5"},bP=zM((()=>(0,i._)("div",{class:"card-header bg-primary text-white"},[(0,i._)("h4",{class:"card-title"},[(0,i._)("i",{class:"fas fa-user me-1"}),(0,i.Uk)(" Product Information ")])],-1))),gP={class:"card-body"},fP={class:"mb-3"},_P=zM((()=>(0,i._)("label",{for:"email",class:"form-label"},"Product Name:",-1))),vP={class:"input-group"},yP=zM((()=>(0,i._)("span",{class:"input-group-text"},[(0,i._)("i",{class:"fas fa-envelope"})],-1))),kP={key:0,class:"text-danger"},wP={class:"mb-3 row"},CP={class:"col"},DP=zM((()=>(0,i._)("label",{for:"first_name",class:"form-label"},"Product Code:",-1))),SP={class:"input-group"},MP=zM((()=>(0,i._)("span",{class:"input-group-text"},[(0,i._)("i",{class:"fas fa-user"})],-1))),PP={key:0,class:"text-danger"},IP={class:"col"},xP=zM((()=>(0,i._)("label",{for:"first_name",class:"form-label"},"Product Rev No:",-1))),LP={class:"input-group"},RP=zM((()=>(0,i._)("span",{class:"input-group-text"},[(0,i._)("i",{class:"fas fa-user"})],-1))),BP={key:0,class:"text-danger"};function $P(e,t,a,l,n,o){const c=(0,i.up)("router-link");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",ZM,QM)):((0,i.wg)(),(0,i.iD)("div",YM,[(0,i._)("div",KM,[(0,i._)("div",JM,[(0,i._)("div",XM,[eP,tP,(0,i._)("nav",aP,[(0,i._)("ol",sP,[(0,i._)("li",iP,[(0,i.Wm)(c,{to:"/"},{default:(0,i.w5)((()=>[lP,(0,i.Uk)(" Home")])),_:1})]),(0,i._)("li",nP,[(0,i.Wm)(c,{to:"/projects"},{default:(0,i.w5)((()=>[oP,(0,i.Uk)(" Projects")])),_:1})]),(0,i._)("li",cP,[(0,i.Wm)(c,{to:`/project-edit/${this.product.project}`},{default:(0,i.w5)((()=>[dP,(0,i.Uk)(" Products Details")])),_:1},8,["to"])]),rP])])])]),(0,i._)("div",mP,[(0,i._)("button",{type:"submit",class:"btn btn-primary btn-sm",onClick:t[0]||(t[0]=(...e)=>o.updateProduct&&o.updateProduct(...e))},[uP,(0,i.Uk)(" Update Product ")]),(0,i._)("button",{type:"button",class:"btn btn-danger ms-2 btn-sm",onClick:t[1]||(t[1]=(...e)=>o.deleteProduct&&o.deleteProduct(...e))},[hP,(0,i.Uk)(" Delete Product ")])])]),(0,i._)("div",pP,[bP,(0,i._)("div",gP,[(0,i._)("div",fP,[_P,(0,i._)("div",vP,[yP,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>n.editedProduct.name=e),type:"text",class:"form-control",id:"project_name",required:""},null,512),[[s.nr,n.editedProduct.name]])]),n.editedProduct.name?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("small",kP,"Project Name is required."))]),(0,i._)("div",wP,[(0,i._)("div",CP,[DP,(0,i._)("div",SP,[MP,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>n.editedProduct.product_code=e),type:"text",class:"form-control",id:"product_code",required:""},null,512),[[s.nr,n.editedProduct.product_code]])]),n.editedProduct.product_code?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("small",PP,"First Name is required."))]),(0,i._)("div",IP,[xP,(0,i._)("div",LP,[RP,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>n.editedProduct.product_rev_number=e),type:"text",class:"form-control",id:"product_rev_number",required:""},null,512),[[s.nr,n.editedProduct.product_rev_number]])]),n.editedProduct.product_rev_number?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("small",BP,"Product Rev Number is required."))])])])])]))}var EP={name:"EditProduct",data(){return{editedProduct:{name:"",product_code:"",product_rev_number:""},product:[]}},mounted(){this.fetchData()},methods:{async fetchData(){this.$store.commit("setIsLoading",!0),console.log("id",this.$route.params.id),tt.Z.get(`/store/edit-product/${this.$route.params.id}`).then((e=>{console.log("response.data ",e.data),this.product=e.data.product,this.product&&(this.editedProduct.name=this.product.name,this.editedProduct.product_code=this.product.product_code,this.editedProduct.product_rev_number=this.product.product_rev_number),this.$store.commit("setIsLoading",!1)})).catch((e=>{console.error("Error fetching products:",e),this.$store.commit("setIsLoading",!1)}))},updateProduct(){confirm("Are you sure you want to update this product?")&&(this.$store.commit("setIsLoading",!0),tt.Z.put(`/store/edit-product/${this.$route.params.id}/`,this.editedProduct).then((e=>{console.log("Product updated successfully:",e.data),this.$store.commit("setIsLoading",!1),this.$notify({title:"Product Updated Successfully",type:"bg-success-subtle text-success",duration:"5000"});const t=this.product.project;this.$router.push(`/project-edit/${t}`)})).catch((e=>{console.error("Error updating Product:",e),this.$notify({title:"Product Creation Unsuccessful",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1)})))},deleteProduct(){confirm("Are you sure you want to delete this product?")&&(this.$store.commit("setIsLoading",!0),tt.Z.delete(`/store/delete-product/${this.$route.params.id}/`).then((()=>{console.log("Product  deleted successfully."),this.$store.commit("setIsLoading",!1),this.$notify({title:"Product Deleted Successfully",type:"bg-success-subtle text-success",duration:"5000"});const e=this.product.project;this.$router.push(`/project-edit/${e}`)})).catch((e=>{console.error("Error deleting user:",e),this.$notify({title:"Product Deletion Unsuccessful",type:"bg-danger-subtle text-danger",duration:"5000"})})))}}};const UP=(0,ut.Z)(EP,[["render",$P],["__scopeId","data-v-b198b0c4"]]);var NP=UP;const TP={key:0,class:"container text-center"},OP=(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1),AP=(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1),qP=[OP,AP],FP={key:1,class:"container"},jP={class:"row align-items-center"},WP=(0,i.uE)('<div class="col-md-6 mt-4"><div class="d-flex align-items-center"><h2 class="mb-0">Checklist</h2><span class="ms-3 fs-4 text-muted">|</span><nav aria-label="breadcrumb" class="d-inline-block ms-3"><ol class="breadcrumb bg-transparent m-0 p-0"><li class="breadcrumb-item"><a href="/"><i class="fas fa-home me-1"></i>Home</a></li><li class="breadcrumb-item active" aria-current="page"><i class="fas fa-list-alt me-1"></i> Checklist </li></ol></nav></div></div>',1),VP={class:"col-md-6 mt-4 text-end"},zP={class:"container has-text-centered"},ZP={class:"d-flex"},GP=["disabled"],HP=["disabled"],QP=["disabled"],YP={key:0,class:"card card-outline card-primary mt-5"},KP={class:"card-header"},JP=(0,i._)("h3",{class:"card-title",style:{"font-size":"20px"}},"Active Checklist:",-1),XP={class:"card-tools"},eI=(0,i._)("button",{class:"btn-sm btn-primary"},"View Checklist",-1),tI={class:"card-body"},aI={class:"row"},sI={class:"col-md-3"},iI=(0,i._)("strong",null,"Checklist ID:",-1),lI={class:"col-md-3"},nI=(0,i._)("strong",null,"Batch Quantity:",-1),oI={class:"col-md-3"},cI=(0,i._)("strong",null,"Project Name:",-1),dI={class:"col-md-3"},rI=(0,i._)("strong",null,"Product Name:",-1),mI={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},uI={class:"modal-dialog"},hI={class:"modal-content"},pI=(0,i._)("div",{class:"modal-header"},[(0,i._)("h1",{class:"modal-title fs-5",id:"exampleModalLabel"}," Fill the Required Batch Quantity "),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),bI={class:"modal-body"},gI={class:"modal-footer"},fI=(0,i._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1);function _I(e,t,a,l,n,o){const c=(0,i.up)("router-link"),d=(0,i.up)("OrderDetailsTable");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",TP,qP)):((0,i.wg)(),(0,i.iD)("div",FP,[(0,i._)("div",jP,[WP,(0,i._)("div",VP,[(0,i._)("div",zP,[(0,i._)("div",ZP,[(0,i._)("button",{type:"button",disabled:!n.isButtonEnabled,class:"btn btn-primary btn-sm",onClick:t[0]||(t[0]=(...e)=>o.checkAndGenerateChecklist&&o.checkAndGenerateChecklist(...e))}," Generate New Checklist ",8,GP),(0,i._)("button",{onClick:t[1]||(t[1]=(...e)=>o.checkExistingChecklist&&o.checkExistingChecklist(...e)),disabled:!n.isButtonEnabled,class:"btn btn-warning btn-sm ms-2"}," View Ongoing Checklist ",8,HP),(0,i._)("button",{onClick:t[2]||(t[2]=(...e)=>o.viewGeneratedChecklists&&o.viewGeneratedChecklists(...e)),disabled:!n.isButtonEnabled,class:"btn btn-success btn-sm ms-2"}," View Generated Checklists ",8,QP)])])])]),n.activeChecklist?((0,i.wg)(),(0,i.iD)("div",YP,[(0,i._)("div",KP,[JP,(0,i._)("div",XP,[(0,i.Wm)(c,{to:"/begin-checklist/"+(this.activeChecklist&&this.activeChecklist.bom?this.activeChecklist.bom.id:"")},{default:(0,i.w5)((()=>[eI])),_:1},8,["to"])])]),(0,i._)("div",tI,[(0,i._)("div",aI,[(0,i._)("div",sI,[iI,(0,i.Uk)(" "+(0,_t.zw)(this.activeChecklist?this.activeChecklist.id:"N/A"),1)]),(0,i._)("div",lI,[nI,(0,i.Uk)(" "+(0,_t.zw)(this.activeChecklist?this.activeChecklist.batch_quantity:"N/A"),1)]),(0,i._)("div",oI,[cI,(0,i.Uk)(" "+(0,_t.zw)(this.activeChecklist&&this.activeChecklist.bom&&this.activeChecklist.bom.product&&this.activeChecklist.bom.product.project?this.activeChecklist.bom.product.project.name:"N/A"),1)]),(0,i._)("div",dI,[rI,(0,i.Uk)(" "+(0,_t.zw)(this.activeChecklist&&this.activeChecklist.bom&&this.activeChecklist.bom.product?this.activeChecklist.bom.product.name:"N/A"),1)])])])])):(0,i.kq)("",!0),(0,i.Wm)(d,{style:{"margin-top":"20px"},orders:e.orders,checklists:n.checklists,onRowClicked:o.handleRowClicked,onRowSelected:o.handleRowSelected,onRowDeselected:o.handleRowDeselected},null,8,["orders","checklists","onRowClicked","onRowSelected","onRowDeselected"]),(0,i._)("div",mI,[(0,i._)("div",uI,[(0,i._)("div",hI,[pI,(0,i._)("div",bI,[(0,i.wy)((0,i._)("input",{type:"number",class:"form-control",id:"requiredBatchQuantity","onUpdate:modelValue":t[3]||(t[3]=e=>n.batch_quantity=e),placeholder:"Enter Batch Quantity",min:"1"},null,512),[[s.nr,n.batch_quantity]])]),(0,i._)("div",gI,[fI,(0,i._)("button",{onClick:t[4]||(t[4]=(...e)=>o.checkAndGenerateChecklist&&o.checkAndGenerateChecklist(...e)),type:"button",class:"btn btn-primary","data-bs-dismiss":"modal"}," Generate Checklist ")])])])])]))}function vI(e,t,a,s,l,n){const o=(0,i.up)("ag-grid-vue");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(o,{style:{height:"500px"},class:"ag-theme-quartz",rowData:a.orders,defaultColDef:l.defaultColDef,columnDefs:l.colDefs,pagination:!0,rowSelection:"single",onRowClicked:n.onRowClicked,onSelectionChanged:n.onSelectionChanged},null,8,["rowData","defaultColDef","columnDefs","onRowClicked","onSelectionChanged"])])}var yI={name:"App",components:{AgGridVue:ns.n},props:{orders:{type:Array,required:!0}},data(){return{colDefs:[{field:"id",headerName:"Order ID",checkboxSelection:!0},{field:"batch_quantity",headerName:"Batch Quantity"},{field:"bom.id",headerName:"BOM ID ",hide:!0},{field:"bom.product.project.name",headerName:"Project Name"},{field:"bom.product.name",headerName:"Product"},{field:"created_by.first_name",headerName:"Created By:"},{field:"created_at",headerName:"Created At:"},{field:"updated_by.first_name",headerName:"Updated By:"},{field:"updated_at",headerName:"Updated At:"},{field:"bom.bom_file_name",headerName:"BOM File Name"},{headerName:"Download",cellRenderer:this.editButtonRenderer,flex:1}],defaultColDef:{filter:!0,sortable:!0,resizable:!0,autoSize:!0,autoSizeColumns:!0},selectedRows:[]}},methods:{onRowClicked(e){this.$emit("rowClicked",e.data)},onSelectionChanged(e){const t=e.api.getSelectedRows(),a=t.length>0?t[0]:null;a?this.$emit("rowSelected",a):this.$emit("rowDeselected")},editButtonRenderer(e){console.log(e);const t=document.createElement("button");return t.innerHTML='<i class="fas fa-download"></i>',t.classList.add("btn-sm","btn-primary"),t.addEventListener("click",(()=>this.downloadFile(e.data.bom.bom_file_url))),t},downloadFile(e){const t=document.createElement("a");t.href=e,t.target="_blank",t.download="BOM_File",document.body.appendChild(t),t.click(),document.body.removeChild(t)},onEditClick(e){this.$router.push(`/bom/edit/${e}`)}}};const kI=(0,ut.Z)(yI,[["render",vI]]);var wI=kI,CI={components:{OrderDetailsTable:wI},data(){return{rowData:[],selectedRow:null,clickedRowId:null,orderId:null,isButtonEnabled:!1,isExisting:!1,isActive:!1,batch_quantity:1,generateChecklists:[],checklists:[],activeChecklist:null}},methods:{async fetchData(){try{this.$store.commit("setIsLoading",!0);const e=await tt.Z.get("store/get-orders/");console.log(e.data),this.orders=e.data.orders,this.activeChecklist=e.data.active_checklist,console.log("this is active checklsit",this.activeChecklist),this.$store.commit("setIsLoading",!1)}catch(e){console.error("Error fetching BOM data:",e),this.$store.commit("setIsLoading",!1)}},handleRowClicked(e){console.log("Clicked Row:",e)},handleRowSelected(e){console.log("Row Selected:",e),e&&e.id&&(this.selectedRow=e,this.clickedRowId=e.bom.id,this.orderId=e.id,console.log("clicked row id +BOM ID =",this.clickedRowId),console.log("Order ID =",this.orderId),this.isButtonEnabled=!0)},handleRowDeselected(){console.log("Row Deselected:"),this.isButtonEnabled=!1},async checkAndGenerateChecklist(){console.log("generate checklist clicked"),this.$store.commit("setIsLoading",!0);try{const e=await tt.Z.post(`store/check-existing-checklist/${this.clickedRowId}/`);console.log(e.data),this.isActive=e.data.is_active,this.isExisting=e.data.is_existing,this.isExisting?(this.$notify({title:"There is already an active ongoing checklist for this order, please end that checklist by viewing the ongoing checklist to generate a new one.",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1)):await this.generateChecklist()}catch(e){console.log("error:",e),this.$notify({title:e.response.data,type:"bg-danger-subtle text-danger",duration:"5000"})}finally{this.$store.commit("setIsLoading",!1)}},async generateChecklist(){try{const e=await tt.Z.post(`store/generate-new-checklist/${this.orderId}/`);console.log(e.data),this.$router.push(`/begin-checklist/${this.clickedRowId}`)}catch(e){console.log("error:",e),this.$notify({title:e.response.data.error,type:"bg-danger-subtle text-danger",duration:"5000"})}finally{this.$store.commit("setIsLoading",!1)}},async checkExistingChecklist(){this.$store.commit("setIsLoading",!0),await tt.Z.post(`store/check-existing-checklist/${this.clickedRowId}/`).then((e=>{console.log(e.data),this.isActive=e.data.is_active,this.isExisting=e.data.is_existing,this.isExisting?this.isActive?this.$router.push(`/begin-checklist/${this.clickedRowId}`):this.$notify({title:"No active checklist found for this bom, please generate a new checklist",type:"bg-danger-subtle text-danger",duration:"5000"}):this.$notify({title:"No ongoing checklist found for this order, please generate a new checklist",type:"bg-danger-subtle text-danger",duration:"5000"})})).catch((e=>{console.log("error:",e),this.$notify({title:"An error occurred, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"})})).finally((()=>{this.$store.commit("setIsLoading",!1)}))},viewOngoingChecklists(){this.clickedRowId&&this.$router.push(`/begin-checklist/${this.clickedRowId}`)},viewGeneratedChecklists(){console.log("inside view generated checklists",this.clickedRowId),this.$store.commit("setIsLoading",!0),tt.Z.get(`store/generated-checklists/${this.clickedRowId}/`).then((e=>{const t=e.data;console.log("generated checklists",t),t&&t.length>0?(this.$store.commit("setIsLoading",!1),this.$router.push(`/generated-checklists/${this.clickedRowId}`)):(this.$notify({title:"No checklists are generated for this order.",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1))})).catch((e=>{console.error("Error fetching generated checklists:",e),this.$notify({title:"An error occurred while fetching generated checklists.",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1)}))}},mounted(){this.fetchData()}};const DI=(0,ut.Z)(CI,[["render",_I]]);var SI=DI;const MI={key:0,class:"container text-center"},PI=(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1),II=(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1),xI=[PI,II],LI={key:1,class:"container"},RI={class:"row align-items-center"},BI=(0,i.uE)('<div class="col-md-6 mt-4"><div class="d-flex align-items-center"><h2 class="mb-0">IQC for Checklist</h2><span class="ms-3 fs-4 text-muted">|</span><nav aria-label="breadcrumb" class="d-inline-block ms-3"><ol class="breadcrumb bg-transparent m-0 p-0"><li class="breadcrumb-item"><a href="/"><i class="fas fa-home me-1"></i>Home</a></li><li class="breadcrumb-item active" aria-current="page"><i class="fas fa-list-alt me-1"></i> Checklist </li></ol></nav></div></div>',1),$I={class:"col-md-6 mt-4 text-end"},EI={class:"container has-text-centered"},UI={class:"d-flex justify-content-end"},NI=["disabled"];function TI(e,t,a,s,l,n){const o=(0,i.up)("PassedChecklistsTable");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",MI,xI)):((0,i.wg)(),(0,i.iD)("div",LI,[(0,i._)("div",RI,[BI,(0,i._)("div",$I,[(0,i._)("div",EI,[(0,i._)("div",UI,[(0,i._)("button",{onClick:t[0]||(t[0]=(...e)=>n.startIqc&&n.startIqc(...e)),disabled:!l.isButtonEnabled,class:"btn btn-success btn-sm ms-2"}," Start IQC ",8,NI)])])])]),(0,i.Wm)(o,{style:{"margin-top":"20px"},passed_checklists:l.passed_checklists,onRowClicked:n.handleRowClicked,onRowSelected:n.handleRowSelected,onRowDeselected:n.handleRowDeselected},null,8,["passed_checklists","onRowClicked","onRowSelected","onRowDeselected"])]))}function OI(e,t,a,s,l,n){const o=(0,i.up)("ag-grid-vue");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(o,{style:{height:"500px"},class:"ag-theme-quartz",rowData:a.passed_checklists,defaultColDef:l.defaultColDef,columnDefs:l.colDefs,pagination:!0,onRowClicked:n.onRowClicked,onSelectionChanged:n.onSelectionChanged},null,8,["rowData","defaultColDef","columnDefs","onRowClicked","onSelectionChanged"])])}var AI={components:{AgGridVue:ns.n},props:{passed_checklists:{type:Array,required:!0}},data(){return{colDefs:[{headerName:"Checklist ID",field:"id",checkboxSelection:!0},{headerName:"Unique Code",field:"unique_code",valueFormatter:function(e){return null===e.value?"null":e.value}},{headerName:"Project Name",field:"bom.product.project.name"},{headerName:"Product Name",field:"bom.product.name"},{headerName:"Product Code",field:"bom.product.product_code"},{headerName:"Updated At",field:"updated_at"},{headerName:"Updated By",valueGetter:function(e){if(console.log(e.data.updated_by),null!=e.data.updated_by){const t=e.data.updated_by.first_name||"",a=e.data.updated_by.last_name||"";return t||a?`${t} ${a}`:""}return""}},{headerName:"Created At",field:"created_at"},{headerName:"Created By",valueGetter:function(e){const t=e.data.created_by.first_name||"",a=e.data.created_by.last_name||"";return t||a?`${t} ${a}`:""}},{headerName:"Status",field:"status"},{headerName:"View",cellRenderer:this.viewButtonRenderer}],defaultColDef:{filter:!0,sortable:!0,resizable:!0,autoSize:!0},gridApi:null}},mounted(){},methods:{onRowClicked(e){this.$emit("rowClicked",e.data)},onSelectionChanged(e){const t=e.api.getSelectedRows(),a=t.length>0?t[0]:null;a?this.$emit("rowSelected",a):this.$emit("rowDeselected")},onGridReady(e){this.gridApi=e.api},viewButtonRenderer(e){const t=document.createElement("button");return t.innerHTML='<i class="fas fa-eye"></i>',t.classList.add("btn","btn-outline-secondary"),t.addEventListener("click",(()=>this.onViewClick(e.data))),t},onViewClick(e){"In Progress"===e.status?this.$router.push(`/begin-checklist/${e.bom.id}`):this.$router.push(`/checklist-details/${e.id}`)}}};const qI=(0,ut.Z)(AI,[["render",OI],["__scopeId","data-v-b7ef300c"]]);var FI=qI,jI={components:{PassedChecklistsTable:FI},data(){return{selectedRow:null,clickedRowId:null,isButtonEnabled:!1,isExisting:!1,isActive:!1,passed_checklists:[]}},methods:{async fetchData(){try{this.$store.commit("setIsLoading",!0);const e=await tt.Z.get("store/get-passed-checklists/");this.passed_checklists=e.data.passed_checklists,console.log(e.data),this.$store.commit("setIsLoading",!1)}catch(e){console.error("Error fetching passed checklists:",e),this.$store.commit("setIsLoading",!1)}},handleRowClicked(e){console.log("Clicked Row:",e)},handleRowSelected(e){console.log("Row Selected:",e),e&&e.id&&(this.selectedRow=e,this.clickedRowId=e.id,this.isButtonEnabled=!0)},handleRowDeselected(){console.log("Row Deselected:"),this.isButtonEnabled=!1},startIqc(){this.clickedRowId&&this.$router.push(`/iqc-for-checklist/${this.clickedRowId}`)}},mounted(){this.fetchData()}};const WI=(0,ut.Z)(jI,[["render",TI]]);var VI=WI;const zI=e=>((0,i.dD)("data-v-9b363590"),e=e(),(0,i.Cn)(),e),ZI={key:0,class:"container text-center"},GI=zI((()=>(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1))),HI=zI((()=>(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1))),QI=[GI,HI],YI={key:1,class:"container"},KI={class:"row align-items-center"},JI={class:"col-md-6 mt-4"},XI={class:"d-flex align-items-center"},ex=zI((()=>(0,i._)("h2",{class:"mb-0"},"Checklist",-1))),tx=zI((()=>(0,i._)("span",{class:"ms-3 fs-4 text-muted me-3"},"|",-1))),ax={"aria-label":"breadcrumb"},sx={class:"breadcrumb bg-transparent m-0 p-0 justify-content-end"},ix=zI((()=>(0,i._)("li",{class:"breadcrumb-item"},[(0,i._)("a",{href:"/"},[(0,i._)("i",{class:"fas fa-home me-1"}),(0,i.Uk)("Home")])],-1))),lx={class:"breadcrumb-item active","aria-current":"page"},nx=zI((()=>(0,i._)("i",{class:"fas fa-list-alt me-1"},null,-1))),ox=zI((()=>(0,i._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,i._)("i",{class:"fas fa-spinner me-1"}),(0,i.Uk)(" Ongoing Checklist ")],-1))),cx={class:"modal fade",id:"generateLabelModal",tabindex:"-1","aria-labelledby":"generateLabelModalLabel","aria-hidden":"true"},dx={class:"modal-dialog"},rx={class:"modal-content"},mx=zI((()=>(0,i._)("div",{class:"modal-header"},[(0,i._)("h1",{class:"modal-title fs-5",id:"generateLabelModalLabel"}," Generate Label "),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),ux={class:"modal-body"},hx={key:0},px={key:0,id:"printable-content"},bx=["src"],gx={key:1},fx={key:1},_x={class:"modal-footer"},vx=zI((()=>(0,i._)("button",{type:"button",class:"btn btn-dark","data-bs-dismiss":"modal"}," Cancel ",-1))),yx={key:0},kx={class:"modal fade",id:"endChecklistModal",tabindex:"-1","aria-labelledby":"endChecklistModalLabel","aria-hidden":"true"},wx={class:"modal-dialog"},Cx={class:"modal-content"},Dx=zI((()=>(0,i._)("div",{class:"modal-header"},[(0,i._)("h1",{class:"modal-title fs-5",id:"endChecklistModalLabel"}," End Checklist "),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),Sx=zI((()=>(0,i._)("div",{class:"modal-body"}," Are you sure you want to end this checklist? ",-1))),Mx={class:"modal-footer"},Px=zI((()=>(0,i._)("button",{type:"button",class:"btn btn-dark","data-bs-dismiss":"modal"}," Cancel ",-1))),Ix={class:"card border-primary mb-4 mt-4"},xx=zI((()=>(0,i._)("div",{class:"card-header bg-primary text-white"},[(0,i._)("h4",{class:"mb-0"},"Bom Details")],-1))),Lx={class:"card-body"},Rx={class:"row"},Bx={key:0,class:"col"},$x=zI((()=>(0,i._)("strong",null,"Project Name:",-1))),Ex={key:1,class:"col"},Ux=zI((()=>(0,i._)("strong",null,"Product Name:",-1))),Nx={key:2,class:"col"},Tx=zI((()=>(0,i._)("strong",null,"BOM Rev No:",-1))),Ox={key:3,class:"col"},Ax=zI((()=>(0,i._)("strong",null,"Issue Date:",-1))),qx={class:"accordion",id:"accordionPanelsStayOpenExample"},Fx={class:"accordion-item"},jx={class:"accordion-header",id:"panelsStayOpen-headingOne"},Wx={class:"accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseOne","aria-expanded":"true","aria-controls":"panelsStayOpen-collapseOne"},Vx={key:0,class:"spinner-border ms-2",role:"status"},zx=zI((()=>(0,i._)("span",{class:"visually-hidden"},"Loading...",-1))),Zx=[zx],Gx={key:1},Hx=zI((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),Qx=[Hx],Yx={id:"panelsStayOpen-collapseOne",class:"accordion-collapse collapse show","aria-labelledby":"panelsStayOpen-headingOne"},Kx={class:"accordion-body"};function Jx(e,t,a,s,l,n){const o=(0,i.up)("router-link"),c=(0,i.up)("IqcChecklistTable");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",ZI,QI)):((0,i.wg)(),(0,i.iD)("div",YI,[(0,i._)("div",KI,[(0,i._)("div",JI,[(0,i._)("div",XI,[ex,tx,(0,i._)("nav",ax,[(0,i._)("ol",sx,[ix,(0,i._)("li",lx,[(0,i.Wm)(o,{to:"/checklist"},{default:(0,i.w5)((()=>[nx,(0,i.Uk)(" IQC Checklist")])),_:1})]),ox])])])])]),(0,i._)("div",cx,[(0,i._)("div",dx,[(0,i._)("div",rx,[mx,(0,i._)("div",ux,[e.isChecklistPassed?((0,i.wg)(),(0,i.iD)("div",hx,[e.generatedQRCode?((0,i.wg)(),(0,i.iD)("div",px,[(0,i._)("img",{src:e.generatedQRCode,alt:"QR Code"},null,8,bx)])):((0,i.wg)(),(0,i.iD)("p",gx," All Checks passed successfully, generate a label by pressing the generate button. "))])):((0,i.wg)(),(0,i.iD)("div",fx," You can only generate a label if all checks are passed "))]),(0,i._)("div",_x,[vx,e.isChecklistPassed?((0,i.wg)(),(0,i.iD)("div",yx,[e.generatedQRCode?((0,i.wg)(),(0,i.iD)("button",{key:0,type:"button",class:"btn btn-success",onClick:t[0]||(t[0]=(...t)=>e.printQRCode&&e.printQRCode(...t))}," Print ")):((0,i.wg)(),(0,i.iD)("button",{key:1,type:"button",class:"btn btn-success",onClick:t[1]||(t[1]=(...t)=>e.generateQRCode&&e.generateQRCode(...t))}," Generate "))])):(0,i.kq)("",!0)])])])]),(0,i._)("div",kx,[(0,i._)("div",wx,[(0,i._)("div",Cx,[Dx,Sx,(0,i._)("div",Mx,[Px,(0,i._)("button",{type:"button",class:"btn btn-danger",onClick:t[2]||(t[2]=(...t)=>e.endChecklist&&e.endChecklist(...t)),"data-bs-dismiss":"modal"}," End ")])])])]),(0,i._)("div",Ix,[xx,(0,i._)("div",Lx,[(0,i._)("div",Rx,[l.checklist.bom?((0,i.wg)(),(0,i.iD)("div",Bx,[$x,(0,i.Uk)(" "+(0,_t.zw)(l.checklist.bom.product.project.name),1)])):(0,i.kq)("",!0),l.checklist.bom?((0,i.wg)(),(0,i.iD)("div",Ex,[Ux,(0,i.Uk)(" "+(0,_t.zw)(l.checklist.bom.product.name),1)])):(0,i.kq)("",!0),l.checklist.bom?((0,i.wg)(),(0,i.iD)("div",Nx,[Tx,(0,i.Uk)(" "+(0,_t.zw)(l.checklist.bom.bom_rev_number),1)])):(0,i.kq)("",!0),l.checklist.bom?((0,i.wg)(),(0,i.iD)("div",Ox,[Ax,(0,i.Uk)(" "+(0,_t.zw)(l.checklist.bom.issue_date),1)])):(0,i.kq)("",!0)])])]),(0,i._)("div",qx,[(0,i._)("div",Fx,[(0,i._)("h2",jx,[(0,i._)("button",Wx,[(0,i.Uk)(" IQC Check "),!1===l.isIqcPassed?((0,i.wg)(),(0,i.iD)("div",Vx,Zx)):((0,i.wg)(),(0,i.iD)("div",Gx,Qx))])]),(0,i._)("div",Yx,[(0,i._)("div",Kx,[(0,i.Wm)(c,{checklist_uids:l.checklist_uids,onRowClicked:n.handleRowClicked,onRowSelected:n.handleRowSelected},null,8,["checklist_uids","onRowClicked","onRowSelected"])])])])])]))}const Xx=e=>((0,i.dD)("data-v-99fa986e"),e=e(),(0,i.Cn)(),e),eL={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},tL={class:"modal-dialog modal-lg"},aL={class:"modal-content"},sL=Xx((()=>(0,i._)("div",{class:"modal-header"},[(0,i._)("h1",{class:"modal-title fs-5",id:"exampleModalLabel"}," Upload IQC File "),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),iL={class:"modal-body"},lL={class:"mb-3"},nL={class:"modal-footer"},oL=Xx((()=>(0,i._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1)));function cL(e,t,a,s,l,n){const o=(0,i.up)("ag-grid-vue");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(o,{ref:"agGrid",style:{height:"550px"},class:"ag-theme-quartz",rowData:a.checklist_uids,defaultColDef:l.defaultColDef,columnDefs:l.colDefs,pagination:!0,onRowClicked:n.onRowClicked,onSelectionChanged:n.onSelectionChanged},null,8,["rowData","defaultColDef","columnDefs","onRowClicked","onSelectionChanged"]),(0,i._)("div",eL,[(0,i._)("div",tL,[(0,i._)("div",aL,[sL,(0,i._)("div",iL,[(0,i._)("div",lL,[(0,i._)("input",{type:"file",class:"form-control",id:"modalFileInput",onChange:t[0]||(t[0]=(...e)=>n.handleModalFileUpload&&n.handleModalFileUpload(...e))},null,32)])]),(0,i._)("div",nL,[oL,(0,i._)("button",{type:"button",class:"btn btn-primary",onClick:t[1]||(t[1]=(...e)=>n.uploadFileModal&&n.uploadFileModal(...e)),"data-bs-dismiss":"modal"}," Upload File ")])])])])])}var dL={props:{checklist_uids:{type:Array,required:!0}},components:{AgGridVue:ns.n},data(){return{gridApi:null,isGridReady:!1,colDefs:[{headerName:"UID",field:"uid",checkboxSelection:!0},{headerName:"VEPL Part No",field:"checklist_item.bom_line_item.part_number"},{headerName:"Updated At",field:"updated_at"},{headerName:"File",cellRenderer:this.fileCellRenderer}],defaultColDef:{filter:!0,sortable:!0,resizable:!0,autoSize:!0,domLayout:"autoHeight"},selectedRows:[],selectedFile:null,activeChecklistItemUidId:""}},methods:{fileCellRenderer(e){const t=e.data&&e.data.iqc_file_url;if(t){const a=t.split("/").pop(),s=document.createElement("a");return s.href=e.data.iqc_file_url,s.textContent=a,s.style.color="blue",s.download=!0,s}{const t=document.createElement("button");t.innerHTML='<i class="fas fa-upload me-1"></i> Upload IQC File',t.classList.add("btn-sm","btn-primary");const a=e.data.id;return t.addEventListener("click",(()=>this.triggerModal(a))),t.setAttribute("data-bs-toggle","modal"),t.setAttribute("data-bs-target","#exampleModal"),t}},triggerModal(e){this.activeChecklistItemUidId=e},uploadFileModal(){if(console.log("Upload file functionality"),console.log("this is the file=",this.selectedFile),this.$store.commit("setIsLoading",!0),this.activeChecklistItemUidId&&this.selectedFile){const e=new FormData;e.append("iqc_file",this.selectedFile),e.append("checklist_item_uid_id",this.activeChecklistItemUidId),tt.Z.post("store/upload-iqc-file/",e).then((e=>{this.$store.commit("setIsLoading",!1),console.log("File uploaded successfully",e.data),this.$notify({title:"File Uploaded Successfully",type:"bg-success-subtle text-success",duration:"5000"});const t=this.checklist_uids.every((e=>e.iqc_file_url));t&&this.$emit("iqcCheckPassed"),setTimeout((()=>{window.location.reload()}),1e3),this.$store.commit("setIsLoading",!1)})).catch((e=>{console.error("Error uploading file",e),this.$notify({title:"File Upload Unsuccessful",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1)})),this.activeChecklistItemUidId=""}else console.warn("No file selected or active checklist item UID."),this.$notify({title:"Please Select A File to Upload",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1)},onRowClicked(e){this.$emit("rowClicked",e.data)},onSelectionChanged(e){const t=e.api.getSelectedRows(),a=t.length>0?t[0]:null;a?this.$emit("rowSelected",a):this.$emit("rowDeselected")},handleModalFileUpload(e){this.selectedFile=e.target.files[0]}}};const rL=(0,ut.Z)(dL,[["render",cL],["__scopeId","data-v-99fa986e"]]);var mL=rL,uL={components:{IqcChecklistTable:mL},data(){return{activeBom:"",checklistItems:[],isIqcPassed:!1,checklist:[],checklist_uids:[],selectedRow:[]}},mounted(){this.getData()},methods:{getData(){this.$store.commit("setIsLoading",!0),tt.Z.get(`store/get-iqc-data/${this.$route.params.id}`).then((e=>{this.checklist=e.data.checklist,this.checklist_uids=e.data.checklist_uids,console.log(e.data),this.$store.commit("setIsLoading",!1)})).catch((e=>{console.error("Error fetching checklist details:",e),this.$store.commit("setIsLoading",!1)}))},downloadBOM(){try{const e=this.checklist.bom.bom_file_url;console.log("file url",e);const t=document.createElement("a");t.href=e,t.download=this.checklist.bom.bom_file_name,document.body.appendChild(t),t.click(),document.body.removeChild(t)}catch(e){console.error("Error downloading BOM:",e)}},handleRowClicked(e){console.log("Clicked Row:",e)},handleRowSelected(e){console.log("Row Selected:",e),this.selectedRow=e}},watch:{checklist_uids:{handler(e){this.isIqcPassed=e.every((e=>e.iqc_file_url))},deep:!0,immediate:!0}}};const hL=(0,ut.Z)(uL,[["render",Jx],["__scopeId","data-v-9b363590"]]);var pL=hL;const bL={key:0,class:"container text-center"},gL=(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1),fL=(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1),_L=[gL,fL],vL={key:1,class:"container"},yL={class:"row align-items-center"},kL={class:"col-md-6 mt-4"},wL={class:"d-flex align-items-center"},CL=(0,i._)("h2",{class:"mb-0"},"Project Pricing",-1),DL=(0,i._)("span",{class:"ms-3 fs-4 text-muted"},"|",-1),SL={"aria-label":"breadcrumb",class:"d-inline-block ms-3"},ML={class:"breadcrumb bg-transparent m-0 p-0"},PL={class:"breadcrumb-item"},IL=(0,i._)("i",{class:"fas fa-home me-1"},null,-1),xL=(0,i._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,i._)("i",{class:"fas fa-project-diagram me-1"}),(0,i.Uk)(" Project Pricing ")],-1),LL={class:"card p-3 mb-4 mt-4"},RL={class:"row mb-3"},BL={class:"col-md-6"},$L=(0,i._)("label",{for:"projectDropdown",class:"form-label"},"Project",-1),EL=["value"],UL={class:"col-md-6"},NL=(0,i._)("label",{for:"productCode",class:"form-label"},"Product",-1),TL=["value"],OL={class:"col"},AL=["disabled"],qL={key:0,class:"spinner-border spinner-border-sm me-1",role:"status","aria-hidden":"true"},FL={class:"text-muted"},jL={class:"modal fade",id:"pricingTableModal",tabindex:"-1","aria-labelledby":"pricingTableModalLabel","aria-hidden":"true"},WL={class:"modal-dialog modal-xl"},VL={class:"modal-content"},zL={class:"modal-header"},ZL={class:"modal-title fs-5",id:"pricingTableModalLabel"},GL=(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),HL={class:"modal-body"},QL=(0,i._)("div",{class:"modal-footer"},[(0,i._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ")],-1);function YL(e,t,a,l,n,o){const c=(0,i.up)("router-link"),d=(0,i.up)("PartNumberPricingTable");return(0,i.wg)(),(0,i.iD)(i.HY,null,[e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",bL,_L)):((0,i.wg)(),(0,i.iD)("div",vL,[(0,i._)("div",yL,[(0,i._)("div",kL,[(0,i._)("div",wL,[CL,DL,(0,i._)("nav",SL,[(0,i._)("ol",ML,[(0,i._)("li",PL,[(0,i.Wm)(c,{to:"/"},{default:(0,i.w5)((()=>[IL,(0,i.Uk)(" Home")])),_:1})]),xL])])])])]),(0,i._)("section",LL,[(0,i._)("div",RL,[(0,i._)("div",BL,[$L,(0,i.wy)((0,i._)("select",{class:"form-select",id:"projectDropdown","onUpdate:modelValue":t[0]||(t[0]=e=>n.form.selectedProject=e),required:""},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.projects,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e.id,value:e},(0,_t.zw)(e.name),9,EL)))),128))],512),[[s.bM,n.form.selectedProject]])]),(0,i._)("div",UL,[NL,(0,i.wy)((0,i._)("select",{class:"form-select",id:"productCode","onUpdate:modelValue":t[1]||(t[1]=e=>n.form.selectedProduct=e),required:""},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.filteredProducts,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e.id,value:e},(0,_t.zw)(e.name),9,TL)))),128))],512),[[s.bM,n.form.selectedProduct]])])]),(0,i._)("div",OL,[(0,i._)("button",{class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#pricingTableModal",onClick:t[2]||(t[2]=(...e)=>o.fetchProductPrices&&o.fetchProductPrices(...e))}," Fetch Prices "),(0,i._)("button",{class:"btn btn-secondary ms-2",onClick:t[3]||(t[3]=(...e)=>o.refreshProductPrices&&o.refreshProductPrices(...e)),disabled:n.isRefreshing},[n.isRefreshing?((0,i.wg)(),(0,i.iD)("span",qL)):(0,i.kq)("",!0),(0,i.Uk)(" "+(0,_t.zw)(n.isRefreshing?"Refreshing Prices...":"Refresh Prices"),1)],8,AL)]),(0,i._)("span",FL," Last Refreshed At: "+(0,_t.zw)(n.lastUpdatedAt),1)])])),(0,i._)("div",jL,[(0,i._)("div",WL,[(0,i._)("div",VL,[(0,i._)("div",zL,[(0,i._)("h1",ZL," Pricing Details - "+(0,_t.zw)(n.form.selectedProject.name)+" ("+(0,_t.zw)(n.form.selectedProduct.name)+") ",1),GL]),(0,i._)("div",HL,[(0,i.Wm)(d,{prices:n.partPrices},null,8,["prices"])]),QL])])])],64)}const KL={key:0,class:"container text-center"},JL=(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1),XL=(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1),eR=[JL,XL],tR={key:1};function aR(e,t,a,s,l,n){const o=(0,i.up)("ag-grid-vue");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",KL,eR)):((0,i.wg)(),(0,i.iD)("div",tR,[(0,i.Wm)(o,{style:{height:"500px"},class:"ag-theme-quartz",rowData:a.prices,defaultColDef:l.defaultColDef,columnDefs:l.colDefs,pagination:!0},null,8,["rowData","defaultColDef","columnDefs"])]))}var sR={components:{AgGridVue:ns.n},props:{prices:{type:Array,required:!0}},data(){return{colDefs:[{field:"part_number",headerName:"VEPL Part Number"},{field:"part_name",headerName:"Name"},{field:"description",headerName:"Description"},{field:"rate",headerName:"Rate",cellRenderer:e=>{if(e.data.po_json){const t=e.data.po_json.currency_symbol,a=e.data.rate,s=this.$parsePriceToString(a);return`${t} ${s}`}return e.data.rate}},{field:"quantity",headerName:"Quantity"},{field:"total",headerName:"Total",cellRenderer:e=>{if(e.data.po_json){const t=e.data.po_json.currency_symbol,a=e.data.total,s=this.$parsePriceToString(a);return`${t} ${s}`}return e.data.total}}],defaultColDef:{filter:!0,sortable:!0,resizable:!0,autoSize:!0,autoSizeColumns:!0}}},methods:{}};const iR=(0,ut.Z)(sR,[["render",aR]]);var lR=iR,nR={components:{PartNumberPricingTable:lR},data(){return{projects:[],products:[],form:{selectedProject:"",selectedProduct:""},partPrices:[],lastUpdatedAt:"",isRefreshing:"1"===this.$route.query.is_refreshing}},mounted(){this.getProjectPricingPage();const e="1"===this.$route.query.is_refreshing;this.isRefreshing=e;const t=sessionStorage.getItem("refresh_prices_task_id");e&&t&&this.checkTaskStatus(t)},watch:{"$route.query.is_refreshing":function(e){this.isRefreshing="1"===e}},computed:{filteredProducts(){if(this.products&&this.projects){if(null!==this.form.selectedProject){const e=this.products.filter((e=>{const t=e.project;return t===this.form.selectedProject.id}));return e}return[]}return[]}},methods:{async getProjectPricingPage(){this.$store.commit("setIsLoading",!0),await tt.Z.get("/pricing/get-project-pricing-page").then((e=>{console.log(e.data),this.projects=e.data.projects,this.products=e.data.products,this.lastUpdatedAt=e.data.last_updated_at,this.$store.commit("setIsLoading",!1)})).catch((e=>{console.error("Error:",e),this.$store.commit("setIsLoading",!1)}))},async fetchProductPrices(){this.form.selectedProduct?(this.$store.commit("setIsLoading",!0),await tt.Z.get(`/pricing/get-product-pricing/${this.form.selectedProduct.id}/`).then((e=>{console.log(e.data),this.partPrices=e.data.part_prices,this.$store.commit("setIsLoading",!1)})).catch((e=>{console.error("Error:",e),this.$store.commit("setIsLoading",!1)}))):this.form.selectedProject?(this.$store.commit("setIsLoading",!0),await tt.Z.get(`/pricing/get-project-pricing/${this.form.selectedProject.id}/`).then((e=>{console.log(e.data),this.partPrices=e.data.part_prices,this.$store.commit("setIsLoading",!1)})).catch((e=>{console.error("Error:",e),this.$store.commit("setIsLoading",!1),this.$notify({title:"An error occured,please try again",type:"bg-danger-subtle text-danger",duration:"5000"})}))):this.$notify({title:"Please select the project or product to fetch prices",type:"bg-danger-subtle text-danger",duration:"5000"})},async refreshProductPrices(){await tt.Z.get("/pricing/refresh-product-pricing").then((e=>{if(console.log(e.data),this.$notify({title:"Pricing Refresh Started",type:"bg-success-subtle text-success",text:e.data.message,duration:"5000"}),"IN PROGRESS"===e.data.task_status||"PENDING"===e.data.task_status){const t=this.$route,a={is_refreshing:1};this.$router.replace({...t,query:{...t.query,...a}}),sessionStorage.setItem("refresh_prices_task_id",e.data.task_id),this.checkTaskStatus(e.data.task_id)}else"SUCCESS"===e.data.task_status?(this.$notify({title:"Prices Refreshed Successfully",type:"bg-success-subtle text-success",duration:"5000"}),this.$router.push("/project-pricing")):this.$notify({title:"Failed to Refresh Prices",type:"bg-danger-subtle text-danger",duration:"5000"})})).catch((e=>{console.error("Error:",e)}))},async checkTaskStatus(e){try{const t=await tt.Z.get(`store/check-task-status/${e}/`);if("IN PROGRESS"===t.data.task_status||"PENDING"===t.data.task_status){const t=this.$route,a={is_refreshing:1};this.$router.replace({...t,query:{...t.query,...a}}),setTimeout((()=>{this.checkTaskStatus(e)}),1e4)}else"SUCCESS"===t.data.task_status?(this.$notify({title:"Prices Refreshed Successfully",type:"bg-success-subtle text-success",duration:"5000"}),sessionStorage.removeItem("refresh_prices_task_id"),this.getProjectPricingPage(),this.$router.push("/project-pricing")):(this.$notify({title:"Failed to Refresh Prices",type:"bg-danger-subtle text-danger",duration:"5000"}),sessionStorage.removeItem("refresh_prices_task_id"),this.getProjectPricingPage(),this.$router.push("/project-pricing"))}catch(t){console.log("error:",t),this.$notify({title:"Failed to Refresh Prices",type:"bg-danger-subtle text-danger",duration:"5000"}),this.getProjectPricingPage(),sessionStorage.removeItem("refresh_prices_task_id"),this.$router.push("/project-pricing")}}}};const oR=(0,ut.Z)(nR,[["render",YL]]);var cR=oR;const dR=e=>((0,i.dD)("data-v-32b2e2f0"),e=e(),(0,i.Cn)(),e),rR={key:0,class:"container text-center"},mR=dR((()=>(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1))),uR=dR((()=>(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1))),hR=[mR,uR],pR={key:1,class:"container"},bR={class:"row align-items-center"},gR=(0,i.uE)('<div class="col-md-6 mt-4" data-v-32b2e2f0><div class="d-flex align-items-center" data-v-32b2e2f0><h2 class="mb-0" data-v-32b2e2f0>Maintenance Calendar</h2><span class="ms-3 fs-4 text-muted" data-v-32b2e2f0>|</span><nav aria-label="breadcrumb" class="d-inline-block ms-3" data-v-32b2e2f0><ol class="breadcrumb bg-transparent m-0 p-0" data-v-32b2e2f0><li class="breadcrumb-item" data-v-32b2e2f0><a href="/machine/calendar-yearly-view" data-v-32b2e2f0><i class="far fa-calendar me-2" data-v-32b2e2f0></i>Yearly View</a></li><li class="breadcrumb-item active" aria-current="page" data-v-32b2e2f0><i class="fas fa-calendar me-2" data-v-32b2e2f0></i> Monthly View </li></ol></nav></div></div>',1),fR={class:"col-md-6 d-flex justify-content-end mt-4"},_R=dR((()=>(0,i._)("option",{disabled:"",value:""},"Select Line",-1))),vR=["value","selected"],yR=dR((()=>(0,i._)("option",{disabled:"",value:""},"Select Machine",-1))),kR=["value","selected"],wR={class:"card card-outline card-primary mt-5"},CR=dR((()=>(0,i._)("div",{class:"card-header"},[(0,i._)("h3",{class:"card-title",style:{"font-weight":"bold","font-size":"1.2em"}}," Legend: "),(0,i._)("div",{class:"card-tools"})],-1))),DR={class:"card-body"},SR=(0,i.uE)('<div class="legends-container" data-v-32b2e2f0><div class="legend-item" data-v-32b2e2f0><div class="legend-color red" data-v-32b2e2f0></div><div class="legend-label" data-v-32b2e2f0>Maintenance Activity Due</div></div><div class="legend-item" data-v-32b2e2f0><div class="legend-color yellow" data-v-32b2e2f0></div><div class="legend-label" data-v-32b2e2f0>Maintenance Activity Scheduled</div></div><div class="legend-item" data-v-32b2e2f0><div class="legend-color green" data-v-32b2e2f0></div><div class="legend-label" data-v-32b2e2f0>Maintenance Activity Performed</div></div></div>',1),MR={style:{"margin-top":"50px"}};function PR(e,t,a,l,n,o){const c=(0,i.up)("router-link"),d=(0,i.up)("FullCalendar"),r=(0,i.up)("MaintenancePlanDetailsModal"),m=(0,i.up)("CreateMaintenancePlanModal"),u=(0,i.up)("EditableNoteModal");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",rR,hR)):((0,i.wg)(),(0,i.iD)("div",pR,[(0,i._)("div",bR,[gR,(0,i._)("div",fR,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>n.selectedLine=e),onChange:t[1]||(t[1]=(...e)=>o.selectLine&&o.selectLine(...e))},[_R,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.lines,(t=>((0,i.wg)(),(0,i.iD)("option",{key:t.id,value:t,selected:t.id===e.preselectedLineId},(0,_t.zw)(t.name),9,vR)))),128))],544),[[s.bM,n.selectedLine]]),(0,i.wy)((0,i._)("select",{class:"ms-2","onUpdate:modelValue":t[2]||(t[2]=e=>n.selectedMachine=e),onChange:t[3]||(t[3]=(...e)=>o.selectMachine&&o.selectMachine(...e))},[yR,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.filteredMachines,(t=>((0,i.wg)(),(0,i.iD)("option",{key:t.id,value:t,selected:t.id===e.preselectedMachineId},(0,_t.zw)(t.name),9,kR)))),128))],544),[[s.bM,n.selectedMachine]]),(0,i.Wm)(c,{to:"/machine/plan-creation",class:"btn btn-primary btn-sm ms-2"},{default:(0,i.w5)((()=>[(0,i.Uk)(" Create Maintenance Plan ")])),_:1})])]),(0,i._)("div",wR,[CR,(0,i._)("div",DR,[SR,(0,i._)("div",MR,[(0,i.Wm)(d,{options:n.calendarOptions},null,8,["options"])])])]),(0,i.Wm)(r,{show:n.showPlanDetailsModal,selectedEvent:n.selectedEvent,clickedEvent:e.clickedEvent,onCloseModal:o.closePlanDetailsModal,onMaintenancePlanDeleted:o.populateCalendarNew,onMaintenanceActivityDeleted:o.populateCalendarNew},null,8,["show","selectedEvent","clickedEvent","onCloseModal","onMaintenancePlanDeleted","onMaintenanceActivityDeleted"]),(0,i.Wm)(m,{show:n.showCreateMaintenancePlanModal,maintenanceActivityTypes:n.maintenance_activity_types,onCloseModal:o.closeCreateMaintenancePlanModal,"maintenance-plan-info":n.maintenancePlanInfo,onMaintenancePlanCreatedByClicking:o.populateCalendarNew},null,8,["show","maintenanceActivityTypes","onCloseModal","maintenance-plan-info","onMaintenancePlanCreatedByClicking"]),(0,i.Wm)(u,{show:n.showEditableModal,selectedEvent:n.selectedEvent,clickedEvent:e.clickedEvent,onCloseModal:o.closeEditableNoteModal,modalTitle:e.modalTitle,selectedLineId:n.selectedLine,selectedTypeId:e.selectedType,onEventColorUpdated:e.handleEventColorUpdated,onMaintenancePlanDeleted:o.populateCalendarNew,onDateMarkedMaintenanceActivityCreated:o.populateCalendarNew,onMaintenanceActivityUpdated:o.populateCalendarNew,onMaintenanceActivityDeleted:o.populateCalendarNew},null,8,["show","selectedEvent","clickedEvent","onCloseModal","modalTitle","selectedLineId","selectedTypeId","onEventColorUpdated","onMaintenancePlanDeleted","onDateMarkedMaintenanceActivityCreated","onMaintenanceActivityUpdated","onMaintenanceActivityDeleted"])]))}var IR=a(2415),xR=a(7127),LR=a(7079);const RR=e=>((0,i.dD)("data-v-85f3768a"),e=e(),(0,i.Cn)(),e),BR={key:0,class:"modal fade show",id:"myModal",tabindex:"-1","aria-labelledby":"myModalLabel","aria-modal":"true",role:"dialog",style:{display:"block"}},$R={class:"modal-dialog modal-lg",role:"document"},ER={class:"modal-content"},UR={class:"modal-header bg-primary text-light"},NR=RR((()=>(0,i._)("h4",{class:"modal-title",id:"myModalLabel"},"Maintenance Details",-1))),TR=RR((()=>(0,i._)("span",{"aria-hidden":"true"},"",-1))),OR=[TR],AR={class:"modal-body"},qR={class:"row"},FR={class:"col-md-6"},jR=RR((()=>(0,i._)("p",{class:"mb-2"},[(0,i._)("strong",null,"Maintenance Date:")],-1))),WR=RR((()=>(0,i._)("p",{class:"mb-2"},[(0,i._)("strong",null,"Performed By:")],-1))),VR={class:"col-md-6"},zR=RR((()=>(0,i._)("p",{class:"mb-2"},[(0,i._)("strong",null,"Maintenance Time:")],-1))),ZR=RR((()=>(0,i._)("p",{class:"mb-2"},[(0,i._)("strong",null,"Note:")],-1))),GR={class:"row justify-content-center"},HR={class:"col-md-6 text-center"},QR=RR((()=>(0,i._)("p",{class:"mb-2"},[(0,i._)("strong",null,"Maintenance Activity Status:")],-1))),YR={key:0,class:"status-icon text-success"},KR=RR((()=>(0,i._)("i",{class:"fas fa-check fa-2x"},null,-1))),JR=[KR],XR={key:1,class:"status-icon text-danger"},eB=RR((()=>(0,i._)("i",{class:"fas fa-times fa-2x"},null,-1))),tB=[eB],aB={class:"modal-footer"},sB={key:1,class:"modal-backdrop fade show",id:"backdrop",style:{display:"block"}};function iB(e,t,a,s,l,n){return(0,i.wg)(),(0,i.iD)(i.HY,null,[a.show?((0,i.wg)(),(0,i.iD)("div",BR,[(0,i._)("div",$R,[(0,i._)("div",ER,[(0,i._)("div",UR,[NR,(0,i._)("button",{type:"button",class:"close text-light","aria-label":"Close",onClick:t[0]||(t[0]=(...e)=>n.closeModal&&n.closeModal(...e))},OR)]),(0,i._)("div",AR,[(0,i._)("div",qR,[(0,i._)("div",FR,[jR,(0,i._)("p",null,(0,_t.zw)(n.formattedDate),1),WR,(0,i._)("p",null,(0,_t.zw)(a.selectedEvent.extendedProps.created_by_name),1)]),(0,i._)("div",VR,[zR,(0,i._)("p",null,(0,_t.zw)(n.formattedTime),1),ZR,(0,i._)("p",null,(0,_t.zw)(a.selectedEvent.extendedProps.note),1)])]),(0,i._)("div",GR,[(0,i._)("div",HR,[QR,a.selectedEvent.extendedProps.maintenance_activity_completed?((0,i.wg)(),(0,i.iD)("span",YR,JR)):((0,i.wg)(),(0,i.iD)("span",XR,tB))])])]),(0,i._)("div",aB,[(0,i._)("button",{class:"btn btn-danger",onClick:t[1]||(t[1]=(...e)=>n.confirmDeleteMaintenancePlan&&n.confirmDeleteMaintenancePlan(...e))}," Delete Maintenance Plan "),(0,i._)("button",{class:"btn btn-warning",onClick:t[2]||(t[2]=(...e)=>n.confirmDeleteMaintenanceActivity&&n.confirmDeleteMaintenanceActivity(...e))}," Delete Maintenance Activity "),(0,i._)("button",{class:"btn btn-secondary",onClick:t[3]||(t[3]=(...e)=>n.closeModal&&n.closeModal(...e))},"Close")])])])])):(0,i.kq)("",!0),a.show?((0,i.wg)(),(0,i.iD)("div",sB)):(0,i.kq)("",!0)],64)}var lB={props:{show:{type:Boolean,required:!0,default:!1},selectedEvent:{type:Object,required:!0}},computed:{formattedDate(){return this.extractDate(this.selectedEvent.extendedProps.created_at)},formattedTime(){return this.extractTime(this.selectedEvent.extendedProps.created_at)}},methods:{extractDate(e){const[t,a]=e.split(" "),[s,i,l]=t.split("/"),n=new Date(`${l}-${i}-${s}T${a}`);return n.toLocaleDateString("en-IN",{timeZone:"Asia/Kolkata"})},extractTime(e){const[t,a]=e.split(" "),[s,i,l]=t.split("/"),n=new Date(`${l}-${i}-${s}T${a}`);return n.toLocaleTimeString("en-IN",{timeZone:"Asia/Kolkata",hour:"2-digit",minute:"2-digit"})},confirmDeleteMaintenancePlan(){window.confirm("Are you sure you want to delete this maintenance plan?")&&this.deleteMaintenancePlan()},async deleteMaintenancePlan(){tt.Z.delete(`/machine-maintenance/delete-maintenance-plan/${this.selectedEvent.extendedProps.id}`).then((e=>{200!==e.status&&204!==e.status||(this.$emit("maintenance-plan-deleted",e.data.maintenance_plans),this.closeModal(),this.$notify({title:" Maintenance Plan Deleted Successfully",type:"bg-success-subtle text-success",duration:"5000"}))})).catch((e=>{console.error("Error deleting note:",e),this.$notify({title:"Error deleing Maintenance Plan",type:"bg-danger-subtle text-danger",duration:"5000"})}))},confirmDeleteMaintenanceActivity(){window.confirm("Are you sure you want to delete this maintenance activity?")&&this.deleteMaintenanceActivity()},async deleteMaintenanceActivity(){tt.Z.delete(`/machine-maintenance/update-or-delete-maintenance-activity-new/${this.selectedEvent.extendedProps.id}`).then((e=>{200!==e.status&&204!==e.status||(this.$emit("maintenance-activity-deleted",e.data.maintenance_plans),this.closeModal(),this.$notify({title:"Date Unmarked and Maintenance Activity Deleted",type:"bg-success-subtle text-success",duration:"5000"}))})).catch((e=>{console.error("Error deleting note:",e),this.$notify({title:"Error deleing Maintenance Activity",type:"bg-danger-subtle text-danger",duration:"5000"})}))},closeModal(){this.$emit("close-modal")}}};const nB=(0,ut.Z)(lB,[["render",iB],["__scopeId","data-v-85f3768a"]]);var oB=nB;const cB=e=>((0,i.dD)("data-v-09616f11"),e=e(),(0,i.Cn)(),e),dB={key:0,class:"modal fade show",id:"myModal",tabindex:"-1","aria-labelledby":"myModalLabel","aria-modal":"true",role:"dialog",style:{display:"block"}},rB={class:"modal-dialog",role:"document"},mB={class:"modal-content"},uB=cB((()=>(0,i._)("div",{class:"modal-header"},[(0,i._)("h4",{class:"modal-title",id:"myModalLabel"},[(0,i._)("strong",{style:{color:"#333"}},"Create Maintenance Plan")])],-1))),hB={class:"modal-body"},pB={class:"mb-3"},bB=cB((()=>(0,i._)("label",{for:"description",class:"form-label"},"Description (Optional)",-1))),gB={class:"mb-3"},fB=cB((()=>(0,i._)("label",{for:"activityType",class:"form-label"},"Activity Type",-1))),_B=cB((()=>(0,i._)("option",{disabled:"",value:""},"Select Activity Type",-1))),vB=["value"],yB={class:"modal-footer"},kB={key:1,class:"modal-backdrop fade show",id:"backdrop",style:{display:"block"}};function wB(e,t,a,l,n,o){return(0,i.wg)(),(0,i.iD)(i.HY,null,[a.show?((0,i.wg)(),(0,i.iD)("div",dB,[(0,i._)("div",rB,[(0,i._)("div",mB,[uB,(0,i._)("div",hB,[(0,i._)("div",pB,[bB,(0,i.wy)((0,i._)("textarea",{"onUpdate:modelValue":t[0]||(t[0]=e=>n.description=e),class:"form-control",rows:"4",id:"description"},null,512),[[s.nr,n.description]])]),(0,i._)("div",gB,[fB,(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>n.selectedActivityType=e),class:"form-select",id:"activityType"},[_B,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.maintenanceActivityTypes,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e.id,value:e.id},(0,_t.zw)(e.name),9,vB)))),128))],512),[[s.bM,n.selectedActivityType]])])]),(0,i._)("div",yB,[(0,i._)("button",{class:"btn btn-primary",onClick:t[2]||(t[2]=(...e)=>o.createMaintenancePlan&&o.createMaintenancePlan(...e))}," Create "),(0,i._)("button",{class:"btn btn-secondary",onClick:t[3]||(t[3]=(...e)=>o.closeModal&&o.closeModal(...e))},"Close")])])])])):(0,i.kq)("",!0),a.show?((0,i.wg)(),(0,i.iD)("div",kB)):(0,i.kq)("",!0)],64)}var CB={props:{show:{type:Boolean,required:!0,default:!1},selectedEvent:{type:Object,required:!0},selectedLineId:{type:Number,required:!0},maintenanceActivityTypes:{type:Array,required:!0},maintenancePlanInfo:{type:Object,required:!0}},data(){return{description:"",selectedActivityType:""}},methods:{createMaintenancePlan(){const e=this.selectedLineId,t={description:this.description,selectedActivityType:this.selectedActivityType,machineId:this.maintenancePlanInfo.selectedMachine.id,line_id:e,selectedDate:this.maintenancePlanInfo.selectedDate};console.log("Form Data:",t),tt.Z.post("/machine-maintenance/create-maintenance-plan-by-clicking-new-for-all-machines-of-a-line/",t).then((e=>{console.log("Maintenance plan created:",e.data),this.$notify({title:"Maintenance Plan Created",type:"bg-success-subtle text-success",duration:"5000"}),this.$emit("maintenance-plan-created-by-clicking",e.data.maintenance_plans),this.closeModal()})).catch((e=>{console.error("Error creating maintenance plan:",e),this.$notify({title:"Error creating Maintenance Plan",type:"bg-danger-subtle text-danger",duration:"5000"})}))},closeModal(){this.$emit("close-modal")}}};const DB=(0,ut.Z)(CB,[["render",wB],["__scopeId","data-v-09616f11"]]);var SB=DB;const MB=e=>((0,i.dD)("data-v-22f66746"),e=e(),(0,i.Cn)(),e),PB={key:0,class:"modal fade show",id:"myModal",tabindex:"-1","aria-labelledby":"myModalLabel","aria-modal":"true",role:"dialog",style:{display:"block"}},IB={class:"modal-dialog modal-lg",role:"document"},xB={class:"modal-content"},LB={class:"modal-header"},RB={class:"modal-title",id:"myModalLabel"},BB={style:{color:"#333"}},$B={class:"modal-body-lg"},EB={class:"form-check"},UB=MB((()=>(0,i._)("label",{class:"form-check-label",for:"maintenanceCompleted"},[(0,i._)("b",{style:{"font-size":"1.1em"}},"Maintenance Activity Completed")],-1))),NB={class:"form-check"},TB=MB((()=>(0,i._)("label",{class:"form-check-label",for:"maintenanceNotCompleted"},[(0,i._)("b",{style:{"font-size":"1.1em"}},"Maintenance Activity Not Completed")],-1))),OB=MB((()=>(0,i._)("div",{style:{"margin-top":"20px"}},null,-1))),AB=MB((()=>(0,i._)("label",{for:"remarks"},"Remarks:",-1))),qB={class:"modal-footer"},FB=["disabled"],jB={key:1,class:"modal-backdrop fade show",id:"backdrop",style:{display:"block"}};function WB(e,t,a,l,n,o){return(0,i.wg)(),(0,i.iD)(i.HY,null,[a.show?((0,i.wg)(),(0,i.iD)("div",PB,[(0,i._)("div",IB,[(0,i._)("div",xB,[(0,i._)("div",LB,[(0,i._)("h4",RB,[(0,i._)("strong",BB,(0,_t.zw)(a.modalTitle),1)])]),(0,i._)("div",$B,[(0,i._)("div",EB,[(0,i.wy)((0,i._)("input",{class:"form-check-input",type:"radio",id:"maintenanceCompleted",value:!0,"onUpdate:modelValue":t[0]||(t[0]=e=>n.maintenanceActivityStatus=e),style:{appearance:"auto",width:"auto",height:"auto","margin-right":"5px"}},null,512),[[s.G2,n.maintenanceActivityStatus]]),UB]),(0,i._)("div",NB,[(0,i.wy)((0,i._)("input",{class:"form-check-input",type:"radio",id:"maintenanceNotCompleted",value:!1,"onUpdate:modelValue":t[1]||(t[1]=e=>n.maintenanceActivityStatus=e),style:{appearance:"auto",width:"auto",height:"auto","margin-right":"5px"}},null,512),[[s.G2,n.maintenanceActivityStatus]]),TB]),OB,AB,(0,i.wy)((0,i._)("textarea",{"onUpdate:modelValue":t[2]||(t[2]=e=>n.note=e),class:"form-control",id:"remarks",rows:"4"},null,512),[[s.nr,n.note]])]),(0,i._)("div",qB,[this.$store.state.user.is_superuser||this.$store.state.user.is_machine_maintenance_supervisor_team?((0,i.wg)(),(0,i.iD)("button",{key:0,class:"btn btn-warning",disabled:!0,onClick:t[3]||(t[3]=(...e)=>o.confirmDeleteMaintenancePlanLineWise&&o.confirmDeleteMaintenancePlanLineWise(...e))}," Delete Maintenance Plan ")):(0,i.kq)("",!0),(0,i._)("button",{class:"btn btn-danger",disabled:"Mark Activity"===a.modalTitle,onClick:t[4]||(t[4]=(...e)=>o.confirmDeleteMaintenanceActivity&&o.confirmDeleteMaintenanceActivity(...e))}," Delete Maintenance Activity ",8,FB),(0,i._)("button",{class:"btn btn-primary",onClick:t[5]||(t[5]=(...e)=>o.saveChanges&&o.saveChanges(...e))}," Save Changes "),(0,i._)("button",{class:"btn btn-secondary",onClick:t[6]||(t[6]=(...e)=>o.closeModal&&o.closeModal(...e))},"Close")])])])])):(0,i.kq)("",!0),a.show?((0,i.wg)(),(0,i.iD)("div",jB)):(0,i.kq)("",!0)],64)}var VB={props:{show:{type:Boolean,required:!0,default:!1},selectedEvent:{type:Object,required:!0},modalTitle:{type:String,required:!0},selectedLineId:{type:Number,required:!0},selectedTypeId:{type:Number,required:!0},maintenancePlanInfo:{type:Object,required:!0},clickedFormattedDate:{type:String,required:!0},selectedMachineId:{type:Number,required:!0}},data(){return{note:"",applyToAllMachines:!1,maintenanceActivityStatus:""}},watch:{selectedEvent:{handler(e){e&&e.extendedProps?(this.maintenanceActivityStatus=e.extendedProps.maintenance_activity_completed,this.note=e.extendedProps.note||""):(this.maintenanceActivityStatus="",this.note="")},deep:!0,immediate:!0}},methods:{confirmDeleteMaintenancePlanLineWise(){window.confirm("Are you sure you want to delete this  maintenance Plan for all the machines of this line?")&&this.deleteMaintenancePlanLineWise()},async deleteMaintenancePlanLineWise(){const e=this.selectedLineId,t={line_id:e,selectedDate:this.selectedEvent.extendedProps.maintenance_plan_date,selectedActivityTypeCode:this.selectedEvent.title};console.log("thsi is the form data",t),tt.Z.post("/machine-maintenance/delete-maintenance-plan-line-wise/",t).then((e=>{200!==e.status&&204!==e.status||(this.$emit("maintenance-plan-deleted",e.data.maintenance_plans),this.closeModal(),this.$notify({title:" Maintenance Plan Deleted Successfully",type:"bg-success-subtle text-success",duration:"5000"}))})).catch((e=>{console.error("Error deleting note:",e),this.$notify({title:"Error deleing Maintenance Plan",type:"bg-danger-subtle text-danger",duration:"5000"})}))},confirmDeleteMaintenanceActivity(){window.confirm("Are you sure you want to delete this maintenance activity?")&&this.deleteMaintenanceActivity()},async deleteMaintenanceActivity(){tt.Z.delete(`/machine-maintenance/update-or-delete-maintenance-activity-new/${this.selectedEvent.extendedProps.id}`).then((e=>{200!==e.status&&204!==e.status||(this.$emit("maintenance-activity-deleted",e.data.maintenance_plans),this.closeModal(),this.$notify({title:"Date Unmarked and Maintenance Activity Deleted",type:"bg-success-subtle text-success",duration:"5000"}))})).catch((e=>{console.error("Error deleting note:",e),this.$notify({title:"Error deleing Maintenance Activity",type:"bg-danger-subtle text-danger",duration:"5000"})}))},closeModal(){this.$emit("close-modal")},async saveChanges(){if(console.log("this is the note =",this.note),!1!==this.maintenanceActivityStatus||this.note.trim())if(console.log("first time maitnenace activity date markign creation api"),console.log("isnide save changes api starting..loggin selected events =",this.selectedEvent),"orange"===this.selectedEvent.extendedProps.color||"red"==this.selectedEvent.extendedProps.color){const e=this.selectedEvent.extendedProps.id,t=this.note,a=this.selectedLineId,s=this.selectedMachineId;console.log(" maintenance plan ID:",e),console.log("Note:",t),console.log("Selected Line ID:",a),console.log("Data to be sent in POST request:",{id:e,note:t,maintenance_activity_status:this.maintenanceActivityStatus,line_id:a,machine_id:s}),tt.Z.post("/machine-maintenance/create-maintenance-activity-new/",{id:e,note:t,maintenance_activity_status:this.maintenanceActivityStatus,line_id:a,machine_id:s}).then((e=>{console.log("Response:",e.data),this.$emit("date-marked-maintenance-activity-created",e.data.maintenance_plans),this.closeModal(),this.$notify({title:"Maintenance Activity Created Successfully !!",type:"bg-success-subtle text-success",duration:"5000"})})).catch((e=>{console.error("Error:",e),this.$notify({title:"Error creating maintenance activity !!",type:"bg-danger-subtle text-danger",duration:"5000"})}))}else"green"===this.selectedEvent.color&&(console.log("put api called to update the activity note"),tt.Z.put(`/machine-maintenance/update-or-delete-maintenance-activity-new/${this.selectedEvent.extendedProps.id}/`,{note:this.note,machine_id:this.selectedMachineId,maintenance_activity_status:this.maintenanceActivityStatus}).then((e=>{200!==e.status&&204!==e.status||(this.$emit("maintenance-activity-updated",e.data.maintenance_plans),this.closeModal(),this.$notify({title:"Activity Updated Successfully",type:"bg-success-subtle text-success",duration:"5000"}))})).catch((e=>{console.error("Error updating Activity:",e),this.$notify({title:"Activity updating note",type:"bg-danger-subtle text-danger",duration:"5000"})})));else alert("Remarks are required if Maintenance Activity is not completed.")}}};const zB=(0,ut.Z)(VB,[["render",WB],["__scopeId","data-v-22f66746"]]);var ZB=zB,GB={props:["lineId","machineId"],components:{FullCalendar:IR.Z,MaintenancePlanDetailsModal:oB,CreateMaintenancePlanModal:SB,EditableNoteModal:ZB},data(){return{calendarOptions:{plugins:[xR.Z,LR.ZP],initialView:"dayGridMonth",events:[],eventClick:this.handleEventClick},lines:[],selectedLine:"",selectedMachine:"",selectedEvent:{},showPlanDetailsModal:!1,showCreateMaintenancePlanModal:!1,maintenance_plans:{},maintenance_activity_types:[],maintenancePlanInfo:{},showEditableModal:!1,filteredMachines:[]}},methods:{async getData(){await tt.Z.get("machine-maintenance/get-machine-data/").then((e=>{console.log(e.data),this.lines=e.data.lines;const{lineId:t,machineId:a}=this.$route.query;console.log(t),console.log(a),t&&a&&(console.log("lines in if",this.lines),this.selectedLine=e.data.lines.find((e=>e.id==t)),this.selectLine(),console.log("Selected Line:",this.selectedLine),this.selectedLine&&(this.selectedMachine=this.selectedLine.machines.find((e=>e.id==a)),console.log("Selected Machine:",this.selectedMachine),this.selectedMachine&&this.selectMachine())),this.maintenance_activity_types=e.data.maintenance_activity_types})).catch((e=>{console.log("error fetching data",e)}))},fetchMaintenanceDates(e){console.log("id of the machine selected",e),tt.Z.post("machine-maintenance/get-maintenance-plan/",{machine_id:e}).then((e=>{this.maintenance_plans=e.data.maintenance_plans,console.log("this is maintenance_plans ",this.maintenance_plans),this.populateCalendar()})).catch((e=>{console.error("Error fetching maintenance dates:",e)}))},populateCalendar(){console.log("Inside populate calendar");const e=new Date;console.log(e);const t=this.maintenance_plans.map((t=>{let a="",s="",i="",l="",n="",o="",c="";const d=new Date(t.maintenance_date);return d.setHours(0,0,0,0),e.setHours(0,0,0,0),t.maintenance_activity_type&&(a=t.maintenance_activity_type.code),t.maintenance_activities&&t.maintenance_activities.length>0&&(c=t.maintenance_activities[0].is_completed,i=t.maintenance_activities.map((e=>e.note)).join("\n"),t.maintenance_activities[0].created_by&&t.maintenance_activities[0].created_at&&(l=t.maintenance_activities[0].created_by.email,n=t.maintenance_activities[0].created_by.first_name,o=t.maintenance_activities[0].created_at)),d<e?(s=c?"green":"red",t.maintenance_activities.length>0?(l=t.maintenance_activities[0].created_by.email,n=t.maintenance_activities[0].created_by.first_name,o=t.maintenance_activities[0].created_at):(l=t.created_by.email,n=t.created_by.first_name,o=t.created_at)):d.getTime()===e.getTime()&&t.maintenance_activities.length>0?(s=c?"green":"red",l=t.maintenance_activities[0].created_by.email,n=t.maintenance_activities[0].created_by.first_name,o=t.maintenance_activities[0].created_at):(s="orange",l=t.created_by.email,n=t.created_by.first_name,o=t.created_at),{title:a,start:t.maintenance_date,color:s,extendedProps:{id:t.id,note:i,color:s,maintenance_activity_completed:c,maintenance_plan_date:t.maintenance_date,created_by_userMail:l,created_by_name:n,created_at:o}}}));this.calendarOptions.events=t},handleEventClick(e){console.log("event clicked"),console.log("info:",e),console.log("info.event:",e.event),console.log(e.event.id);const t=e.event.start;console.log("clicked event start date",t);const a=t.toLocaleString("en-IN",{timeZone:"Asia/Kolkata"}),s=a.split(",")[0],[i,l,n]=s.split("/").map((e=>e.padStart(2,"0"))),o=`${n}-${l}-${i}`;console.log(o);const c=this.calendarOptions.events.filter((e=>{const t=e.start;return t===o}));console.log("events on same date",c);const d=c.find((t=>t.extendedProps.id===e.event.extendedProps.id));console.log("existingEvent",d);const r=new Date(o),m=new Date;if(console.log("clicked date",r),console.log("current date is ",m),r>m)window.alert("You cannot edit activities in the future.");else if(d)console.log("existing event for this date",d),"orange"===d.extendedProps.color||"red"===d.extendedProps.color?this.modifyEvent(d):"green"===d.color&&(this.selectedEvent=d,console.log("this is selected event passed as prop ",this.selectedEvent),this.togglePlanDetailsModal());else{const t={selectedMachine:this.selectedMachine,selectedDate:e.dateStr};this.maintenancePlanInfo=t,this.toggleCreateMaintenancePlanModal()}},handleDateClick(e){console.log("inside creating plan by manually marking dates");const t={selectedMachine:this.selectedMachine,selectedDate:e.dateStr};this.maintenancePlanInfo=t,this.toggleCreateMaintenancePlanModal()},modifyEvent(e){const{color:t,maintenance_activity_completed:a,note:s}=e.extendedProps;"orange"===t||"red"===t&&""===a?(this.selectedEvent=e,this.toggleEditableModal(e)):"red"===t&&!1===a?(this.selectedEvent=e,this.togglePlanDetailsModal()):"green"===t&&null!==s&&(this.selectedEvent=e,this.toggleEditableModal(e))},toggleEditableModal(e){const t="orange"!==e.extendedProps.color&&"red"!==e.extendedProps.color||e.extendedProps.note?"Edit Activity":"Mark Activity";this.showEditableModal=!this.showEditableModal,this.modalTitle=t},createMaintenancePlan(e){console.log("Creating maintenance plan:",e)},closeCreateMaintenancePlanModal(){this.showCreateMaintenancePlanModal=!1},closePlanDetailsModal(){console.log("inside close modal parent"),this.showPlanDetailsModal=!1},closeEditableNoteModal(){this.showEditableModal=!1},populateCalendarNew(e){this.maintenance_plans=e,this.populateCalendar()},toggleCreateMaintenancePlanModal(){this.showCreateMaintenancePlanModal=!this.showCreateMaintenancePlanModal},togglePlanDetailsModal(){this.showPlanDetailsModal=!this.showPlanDetailsModal},selectLine(){console.log("inside select line"),console.log("Selected Line ID:=",this.selectedLine),this.selectedLine?(this.filteredMachines=this.selectedLine.machines,console.log(this.filteredMachines)):this.filteredMachines=[],this.selectedMachine=null},selectMachine(){if(console.log("inside select machine"),console.log("Selected machine:",this.selectedMachine),this.selectedMachine){const e=this.selectedMachine.id;this.selectedMachineId=e,this.fetchMaintenanceDates(this.selectedMachine.id)}}},mounted(){this.getData()}};const HB=(0,ut.Z)(GB,[["render",PR],["__scopeId","data-v-32b2e2f0"]]);var QB=HB;const YB=e=>((0,i.dD)("data-v-0d191103"),e=e(),(0,i.Cn)(),e),KB={key:0,class:"container text-center"},JB=YB((()=>(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1))),XB=YB((()=>(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1))),e$=[JB,XB],t$={key:1,class:"container"},a$={class:"row align-items-center"},s$=(0,i.uE)('<div class="col-md-6 mt-4" data-v-0d191103><div class="d-flex align-items-center" data-v-0d191103><h2 class="mb-0" data-v-0d191103>Create Maintenance Calendar</h2><span class="ms-3 fs-4 text-muted" data-v-0d191103>|</span><nav aria-label="breadcrumb" class="d-inline-block ms-3" data-v-0d191103><ol class="breadcrumb bg-transparent m-0 p-0" data-v-0d191103><li class="breadcrumb-item" aria-current="page" data-v-0d191103><i class="fas fa-calendar-alt me-2" data-v-0d191103></i>Calendar </li></ol></nav></div></div>',1),i$={class:"col-md-6 mt-4 text-end"},l$={class:"container mt-5"},n$={class:"mb-3"},o$=YB((()=>(0,i._)("label",{for:"year",class:"form-label"},"Select Year:",-1))),c$=(0,i.uE)('<option value="" disabled data-v-0d191103>Select Year</option><option value="2024" data-v-0d191103>2024</option><option value="2025" data-v-0d191103>2025</option><option value="2026" data-v-0d191103>2026</option><option value="2027" data-v-0d191103>2027</option><option value="2028" data-v-0d191103>2028</option><option value="2029" data-v-0d191103>2029</option><option value="2030" data-v-0d191103>2030</option><option value="2031" data-v-0d191103>2031</option><option value="2032" data-v-0d191103>2032</option><option value="2033" data-v-0d191103>2033</option>',11),d$=[c$],r$={class:"mb-3"},m$=YB((()=>(0,i._)("label",{for:"dates",class:"form-label"},"Select Dates:",-1))),u$={class:"d-flex align-items-center"},h$=YB((()=>(0,i._)("option",{value:"customizable","data-bs-toggle":"modal","data-bs-target":"#exampleModal"}," Customizable Date ",-1))),p$=YB((()=>(0,i._)("option",{value:"wholeMonth"},"Whole Month",-1))),b$=[h$,p$],g$=YB((()=>(0,i._)("i",{class:"fas fa-plus"},null,-1))),f$=[g$],_$={class:"accordion",id:"accordion"},v$=["id"],y$=["data-bs-target","aria-controls"],k$=["id","aria-labelledby"],w$={class:"accordion-body"},C$=YB((()=>(0,i._)("strong",null,"Selected Months:",-1))),D$=YB((()=>(0,i._)("strong",null,"Selected Weeks:",-1))),S$=YB((()=>(0,i._)("strong",null,"Selected Days:",-1))),M$={class:"mt-3"},P$=["onClick"],I$=YB((()=>(0,i._)("i",{class:"fas fa-edit"},null,-1))),x$=["onClick"],L$=YB((()=>(0,i._)("i",{class:"fas fa-trash-alt"},null,-1))),R$={class:"mb-3"},B$=YB((()=>(0,i._)("label",{for:"machine",class:"form-label"},"Machine:",-1))),$$=YB((()=>(0,i._)("br",null,null,-1))),E$=YB((()=>(0,i._)("button",{type:"button",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#machineModal"}," Select Machines ",-1))),U$=YB((()=>(0,i._)("br",null,null,-1))),N$={class:"tag-container"},T$={class:"modal fade",id:"machineModal",tabindex:"-1","aria-labelledby":"machineModalLabel","aria-hidden":"true"},O$={class:"modal-dialog modal-xl"},A$={class:"modal-content"},q$=YB((()=>(0,i._)("div",{class:"modal-header"},[(0,i._)("h1",{class:"modal-title fs-5",id:"machineModalLabel"}," Select Machines "),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),F$={class:"modal-body"},j$=YB((()=>(0,i._)("div",{class:"modal-footer"},[(0,i._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close "),(0,i._)("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal"}," Save changes ")],-1))),W$={class:"mb-3"},V$=YB((()=>(0,i._)("label",{for:"type",class:"form-label"},"Type:",-1))),z$=YB((()=>(0,i._)("option",{disabled:"",value:""},"Please select",-1))),Z$=["value"],G$={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},H$={class:"modal-dialog modal-xl"},Q$={class:"modal-content"},Y$={class:"modal-header"},K$={class:"modal-title fs-5",id:"exampleModalLabel"},J$=YB((()=>(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))),X$={class:"modal-body"},eE={class:"row mb-3"},tE={class:"col"},aE=YB((()=>(0,i._)("label",{for:"monthDropdown",class:"form-label"},"For Months:",-1))),sE=(0,i.uE)('<option value="January" data-v-0d191103>January</option><option value="February" data-v-0d191103>February</option><option value="March" data-v-0d191103>March</option><option value="April" data-v-0d191103>April</option><option value="May" data-v-0d191103>May</option><option value="June" data-v-0d191103>June</option><option value="July" data-v-0d191103>July</option><option value="August" data-v-0d191103>August</option><option value="September" data-v-0d191103>September</option><option value="October" data-v-0d191103>October</option><option value="November" data-v-0d191103>November</option><option value="December" data-v-0d191103>December</option>',12),iE=[sE],lE={class:"col"},nE=YB((()=>(0,i._)("label",{class:"form-label"},"Selected Month:",-1))),oE={class:"row mb-3"},cE={class:"col"},dE=YB((()=>(0,i._)("label",{for:"weekDropdown",class:"form-label"},"For Weeks:",-1))),rE=(0,i.uE)('<option value="Week 1" data-v-0d191103>Week 1</option><option value="Week 2" data-v-0d191103>Week 2</option><option value="Week 3" data-v-0d191103>Week 3</option><option value="Week 4" data-v-0d191103>Week 4</option><option value="Week 5" data-v-0d191103>Week 5</option>',5),mE=[rE],uE={class:"col"},hE=YB((()=>(0,i._)("label",{class:"form-label"},"Selected Weeks:",-1))),pE={class:"row mb-3"},bE={class:"col"},gE=YB((()=>(0,i._)("label",{for:"dayDropdown",class:"form-label"},"On Days:",-1))),fE=(0,i.uE)('<option value="Monday" data-v-0d191103>Monday</option><option value="Tuesday" data-v-0d191103>Tuesday</option><option value="Wednesday" data-v-0d191103>Wednesday</option><option value="Thursday" data-v-0d191103>Thursday</option><option value="Friday" data-v-0d191103>Friday</option><option value="Saturday" data-v-0d191103>Saturday</option><option value="Sunday" data-v-0d191103>Sunday</option>',7),_E=[fE],vE={class:"col"},yE=YB((()=>(0,i._)("label",{class:"form-label"},"Selected Days:",-1))),kE={class:"modal-footer"},wE=YB((()=>(0,i._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1)));function CE(e,t,a,l,n,o){const c=(0,i.up)("MachineTableGrid");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",KB,e$)):((0,i.wg)(),(0,i.iD)("div",t$,[(0,i._)("div",a$,[s$,(0,i._)("div",i$,[(0,i._)("button",{type:"submit",class:"btn btn-primary btn-sm",onClick:t[0]||(t[0]=(...e)=>o.createPlan&&o.createPlan(...e))}," Create Plan ")])]),(0,i._)("div",l$,[(0,i._)("section",n$,[o$,(0,i.wy)((0,i._)("select",{id:"year",class:"form-select","onUpdate:modelValue":t[1]||(t[1]=e=>n.selectedYears=e),multiple:""},d$,512),[[s.bM,n.selectedYears]])]),(0,i._)("section",r$,[m$,(0,i._)("div",u$,[(0,i.wy)((0,i._)("select",{id:"dates",class:"form-select me-2","onUpdate:modelValue":t[2]||(t[2]=e=>n.selectedDates=e),onChange:t[3]||(t[3]=(...e)=>o.openModal&&o.openModal(...e))},b$,544),[[s.bM,n.selectedDates]]),(0,i._)("button",{type:"button",class:"btn-sm btn-primary","data-bs-toggle":"modal","data-bs-target":"#exampleModal",onClick:t[4]||(t[4]=(...t)=>e.addDate&&e.addDate(...t))},f$)])]),(0,i._)("section",null,[(0,i._)("div",_$,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.DateChoices.choices,((e,t)=>((0,i.wg)(),(0,i.iD)("div",{key:t,class:"accordion-item"},[(0,i._)("h2",{class:"accordion-header",id:"headingChoice"+t},[(0,i._)("button",{class:"accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseChoice"+t,"aria-expanded":"true","aria-controls":"collapseChoice"+t}," Choice "+(0,_t.zw)(t+1),9,y$)],8,v$),(0,i._)("div",{id:"collapseChoice"+t,class:"accordion-collapse collapse","aria-labelledby":"headingChoice"+t,"data-bs-parent":"#accordion"},[(0,i._)("div",w$,[(0,i._)("ul",null,[(0,i._)("li",null,[C$,(0,i.Uk)(" "+(0,_t.zw)(e.selectedMonths.join(", ")),1)]),(0,i._)("li",null,[D$,(0,i.Uk)(" "+(0,_t.zw)(e.selectedWeeks.join(", ")),1)]),(0,i._)("li",null,[S$,(0,i.Uk)(" "+(0,_t.zw)(e.selectedDays.join(", ")),1)])]),(0,i._)("div",M$,[(0,i._)("button",{onClick:e=>o.editFormChoice(t),class:"btn btn-primary me-2"},[I$,(0,i.Uk)(" Edit ")],8,P$),(0,i._)("button",{onClick:e=>o.removeFormChoice(t),class:"btn btn-danger"},[L$,(0,i.Uk)(" Delete ")],8,x$)])])],8,k$)])))),128))])]),(0,i._)("section",R$,[B$,$$,E$,U$,(0,i._)("div",N$,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.selectedMachinesArray,((e,t)=>((0,i.wg)(),(0,i.iD)("div",{key:t,class:"tag badge bg-secondary"},[(0,i._)("span",null,(0,_t.zw)(e.name)+" Of "+(0,_t.zw)(e.line.name),1)])))),128))]),(0,i._)("div",T$,[(0,i._)("div",O$,[(0,i._)("div",A$,[q$,(0,i._)("div",F$,[(0,i.Wm)(c,{style:{"margin-top":"20px"},machines:n.machines,selectedMachinesArray:n.selectedMachinesArray,onRowClicked:e.handleRowClicked,onRowsDeselected:e.handleRowDeselected,onRowsSelected:o.handleRowsSelected},null,8,["machines","selectedMachinesArray","onRowClicked","onRowsDeselected","onRowsSelected"])]),j$])])])]),(0,i._)("section",W$,[V$,(0,i.wy)((0,i._)("select",{id:"type",class:"form-select","onUpdate:modelValue":t[5]||(t[5]=e=>n.selectedType=e)},[z$,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.maintenance_activity_types,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e.id,value:e.id},(0,_t.zw)(e.name),9,Z$)))),128))],512),[[s.bM,n.selectedType]])])]),(0,i._)("div",G$,[(0,i._)("div",H$,[(0,i._)("div",Q$,[(0,i._)("div",Y$,[(0,i._)("h1",K$,(0,_t.zw)(null!==n.editingIndex?"Update Choice":"Custom Dates"),1),J$]),(0,i._)("div",X$,[(0,i._)("div",eE,[(0,i._)("div",tE,[aE,(0,i.wy)((0,i._)("select",{id:"monthDropdown",class:"form-select",multiple:"","onUpdate:modelValue":t[6]||(t[6]=e=>n.formChoice.selectedMonths=e)},iE,512),[[s.bM,n.formChoice.selectedMonths]])]),(0,i._)("div",lE,[nE,(0,i._)("p",null,(0,_t.zw)(n.formChoice.selectedMonths),1)])]),(0,i._)("div",oE,[(0,i._)("div",cE,[dE,(0,i.wy)((0,i._)("select",{id:"weekDropdown",class:"form-select",multiple:"","onUpdate:modelValue":t[7]||(t[7]=e=>n.formChoice.selectedWeeks=e)},mE,512),[[s.bM,n.formChoice.selectedWeeks]])]),(0,i._)("div",uE,[hE,(0,i._)("p",null,(0,_t.zw)(n.formChoice.selectedWeeks),1)])]),(0,i._)("div",pE,[(0,i._)("div",bE,[gE,(0,i.wy)((0,i._)("select",{id:"dayDropdown",class:"form-select",multiple:"","onUpdate:modelValue":t[8]||(t[8]=e=>n.formChoice.selectedDays=e)},_E,512),[[s.bM,n.formChoice.selectedDays]])]),(0,i._)("div",vE,[yE,(0,i._)("p",null,(0,_t.zw)(n.formChoice.selectedDays),1)])])]),(0,i._)("div",kE,[wE,(0,i._)("button",{type:"button",class:"btn btn-primary",onClick:t[9]||(t[9]=e=>null!==n.editingIndex?o.updateFormChoice():o.addFormChoice())},(0,_t.zw)(null!==n.editingIndex?"Update Choice":"Add Choice"),1)])])])])]))}function DE(e,t,a,s,l,n){const o=(0,i.up)("ag-grid-vue");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(o,{ref:"agGrid",style:{height:"500px"},class:"ag-theme-quartz",rowData:a.machines,defaultColDef:l.defaultColDef,columnDefs:l.colDefs,pagination:!0,rowSelection:"multiple",onRowClicked:n.onRowClicked,onSelectionChanged:n.onSelectionChanged,onGridReady:e.onGridReady,onFirstDataRendered:n.onFirstDataRendered,onAfterFilterChanged:e.onAfterFilterChanged,onHeaderCheckboxSelectionChanged:n.onHeaderCheckboxChanged},null,8,["rowData","defaultColDef","columnDefs","onRowClicked","onSelectionChanged","onGridReady","onFirstDataRendered","onAfterFilterChanged","onHeaderCheckboxSelectionChanged"])])}var SE={name:"App",components:{AgGridVue:ns.n},props:{machines:{type:Array,required:!0},selectedMachinesArray:{type:Array,required:!0}},data(){return{colDefs:[{field:"id",hide:!0},{field:"name",headerCheckboxSelection:!0,checkboxSelection:!0,headerCheckboxSelectionFilteredOnly:!0,headerName:"Machine Name",width:375},{field:"line.name",headerName:"Lines",width:375}],defaultColDef:{filter:!0,sortable:!0,resizable:!0},selectedRows:[]}},methods:{onRowClicked(e){this.$emit("rowClicked",e.data)},onSelectionChanged(e){const t=e.api.getSelectedRows();this.$emit("rowsSelected",t),0===t.length&&this.$emit("rowsDeselected")},onFirstDataRendered(e){console.log("hey");const t=e.api;this.selectedMachinesArray.forEach((e=>{const a=t.getRowNode(e.id);a&&a.setSelected(!0)}))},onHeaderCheckboxChanged(e){const t=this.gridApi.getModel().rowsToDisplay,a=this.gridApi.getFilterInstance("line.name").getFilterModel().filter;t.forEach((t=>{const s=t.data;t.group||a&&s.line.name!==a||t.setSelected(e.target.checked)}))}}};const ME=(0,ut.Z)(SE,[["render",DE]]);var PE=ME,IE={components:{MachineTableGrid:PE},data(){return{selectedDates:null,type:"",formChoice:{selectedMonths:[],selectedWeeks:[],selectedDays:[],selectedWeeksExcept:[],selectedDaysExcept:[]},editedChoice:{selectedMonths:[],selectedWeeks:[],selectedDays:[],selectedWeeksExcept:[],selectedDaysExcept:[]},DateChoices:{choices:[]},editingIndex:null,machines:[],lines:[],types:[],selectedMachine:null,selectedType:null,selectedYears:[],maintenance_activity_types:[],selectedMachinesArray:[]}},mounted(){this.getData()},computed:{filteredTypes(){return this.selectedMachine&&0!==this.types.length?this.types.filter((e=>e.id===this.selectedMachine)):[]}},methods:{handleRowsSelected(e){this.selectedMachinesArray=e,console.log("selected machines array",this.selectedMachinesArray)},removeTag(e){this.selectedMachinesArray.splice(e,1),console.log("selected machiens array",this.selectedMachinesArray)},openModal(){if("customizable"===this.selectedDates){const e=document.querySelector('[data-bs-target="#exampleModal"]');e&&e.click()}},editFormChoice(e){this.editingIndex=e,this.formChoice={...this.DateChoices.choices[e]},this.openModalGeneral()},addFormChoice(){console.log("Form Choice:",this.formChoice),this.DateChoices.choices.push({...this.formChoice}),this.formChoice={selectedMonths:[],selectedWeeks:[],selectedDays:[]},console.log(" whole list of form choice array",this.DateChoices)},openModalGeneral(){const e=document.querySelector('[data-bs-target="#exampleModal"]');e&&e.click()},closeModalGeneral(){const e=document.querySelector('[data-bs-dismiss="modal"]');e&&e.click()},updateFormChoice(){this.DateChoices.choices.splice(this.editingIndex,1,{...this.formChoice}),this.formChoice={selectedMonths:[],selectedWeeks:[],selectedDays:[]},this.editingIndex=null,this.closeModalGeneral()},removeFormChoice(e){this.DateChoices.choices.splice(e,1)},getData(){tt.Z.get("machine-maintenance/get-machine-data/").then((e=>{console.log("this is resposne.data",e.data),this.machines=e.data.machines,this.lines=e.data.lines,this.maintenance_activity_types=e.data.maintenance_activity_types})).catch((e=>{console.log("error fetching data",e)}))},createPlan(){this.$store.commit("setIsLoading",!0),console.log("this is the selected machine",this.selectedMachinesArray);const e=this.selectedMachinesArray.map((e=>e.id)),t={selectedYears:this.selectedYears,selectedType:this.selectedType,dateChoices:this.DateChoices,selectedMachines:e};console.log("data being passed from front-end",t),tt.Z.post("/machine-maintenance/create-maintenance-plan/",t).then((e=>{console.log(e.data.message),this.$notify({title:"Maintenance Plan Created",type:"bg-success-subtle text-success",duration:"5000"}),this.$router.push("/machine/calendar-yearly-view"),this.$store.commit("setIsLoading",!1)})).catch((e=>{console.error("Error:",e),this.$notify({title:"Error creating  Maintenance plan",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1)}))}}};const xE=(0,ut.Z)(IE,[["render",CE],["__scopeId","data-v-0d191103"]]);var LE=xE;const RE=e=>((0,i.dD)("data-v-33a28114"),e=e(),(0,i.Cn)(),e),BE={key:0,class:"container text-center"},$E=RE((()=>(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1))),EE=RE((()=>(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1))),UE=[$E,EE],NE={key:1,class:"container"},TE={class:"row align-items-center"},OE=(0,i.uE)('<div class="col-md-6 mt-4" data-v-33a28114><div class="d-flex align-items-center" data-v-33a28114><h2 class="mb-0" data-v-33a28114>Mark Maintenance Dates</h2><span class="ms-3 fs-4 text-muted" data-v-33a28114>|</span><nav aria-label="breadcrumb" class="d-inline-block ms-3" data-v-33a28114><ol class="breadcrumb bg-transparent m-0 p-0" data-v-33a28114><li class="breadcrumb-item" aria-current="page" data-v-33a28114><i class="fas fa-calendar-alt me-2" data-v-33a28114></i>Mark Dates </li></ol></nav></div></div>',1),AE={class:"col-md-6 d-flex justify-content-end mt-4"},qE=RE((()=>(0,i._)("option",{disabled:"",value:""},"Select Line",-1))),FE=["value"],jE=RE((()=>(0,i._)("option",{disabled:"",value:""},"Select Machine",-1))),WE=["value"],VE={class:"card card-outline card-primary mt-5"},zE=RE((()=>(0,i._)("div",{class:"card-header"},[(0,i._)("h3",{class:"card-title",style:{"font-weight":"bold","font-size":"1.2em"}}," Legend: "),(0,i._)("div",{class:"card-tools"})],-1))),ZE={class:"card-body"},GE=(0,i.uE)('<div class="legends-container" data-v-33a28114><div class="legend-item" data-v-33a28114><div class="legend-color red" data-v-33a28114></div><div class="legend-label" data-v-33a28114>Maintenance Activity Due</div></div><div class="legend-item" data-v-33a28114><div class="legend-color yellow" data-v-33a28114></div><div class="legend-label" data-v-33a28114>Maintenance Activity Scheduled</div></div><div class="legend-item" data-v-33a28114><div class="legend-color green" data-v-33a28114></div><div class="legend-label" data-v-33a28114>Maintenance Activity Performed</div></div></div>',1),HE={style:{"margin-top":"50px"}};function QE(e,t,a,l,n,o){const c=(0,i.up)("FullCalendar"),d=(0,i.up)("EditableNoteModal");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",BE,UE)):((0,i.wg)(),(0,i.iD)("div",NE,[(0,i._)("div",TE,[OE,(0,i._)("div",AE,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>n.selectedLine=e),onChange:t[1]||(t[1]=(...e)=>o.selectLine&&o.selectLine(...e))},[qE,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.lines,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e.id,value:e},(0,_t.zw)(e.name),9,FE)))),128))],544),[[s.bM,n.selectedLine]]),(0,i.wy)((0,i._)("select",{class:"ms-2","onUpdate:modelValue":t[2]||(t[2]=e=>n.selectedMachine=e),onChange:t[3]||(t[3]=(...e)=>o.selectMachine&&o.selectMachine(...e))},[jE,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.filteredMachines,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e.id,value:e},(0,_t.zw)(e.name),9,WE)))),128))],544),[[s.bM,n.selectedMachine]])])]),(0,i._)("div",VE,[zE,(0,i._)("div",ZE,[GE,(0,i._)("div",HE,[(0,i.Wm)(c,{options:n.calendarOptions},null,8,["options"])])])]),(0,i.Wm)(d,{show:n.showModal,selectedEvent:n.selectedEvent,clickedEvent:e.clickedEvent,selectedLineId:n.selectedLineId,selectedMachineId:n.selectedMachineId,onCloseModal:o.closeModal,modalTitle:e.modalTitle,clickedFormattedDate:e.formattedDate,onEventColorUpdated:o.handleEventColorUpdated,onDateMarkedMaintenanceActivityCreated:o.populateCalendarNew,onMaintenanceActivityUpdated:o.populateCalendarNew,onMaintenanceActivityDeleted:o.populateCalendarNew},null,8,["show","selectedEvent","clickedEvent","selectedLineId","selectedMachineId","onCloseModal","modalTitle","clickedFormattedDate","onEventColorUpdated","onDateMarkedMaintenanceActivityCreated","onMaintenanceActivityUpdated","onMaintenanceActivityDeleted"])]))}var YE={components:{FullCalendar:IR.Z,EditableNoteModal:ZB},data(){return{calendarOptions:{plugins:[xR.Z,LR.ZP],initialView:"dayGridMonth",events:[],eventClick:this.handleEventClick},maintenance_plans:{},lines:[],selectedLine:"",selectedLineId:null,selectedMachineId:null,selectedMachine:"",selectedDate:null,selectedEvent:{},showModal:!1}},methods:{getData(){console.log("info of logged in user",this.$store.state.user),tt.Z.get("machine-maintenance/get-machine-data/").then((e=>{console.log(e.data),this.lines=e.data.lines,this.maintenance_activity_types=e.data.maintenance_activity_types})).catch((e=>{console.log("error fetching data",e)}))},fetchMaintenanceDates(e){this.$store.commit("setIsLoading",!0),console.log("id of the machine selected",e),tt.Z.post("machine-maintenance/get-maintenance-plan/",{machine_id:e}).then((e=>{this.maintenance_plans=e.data.maintenance_plans,console.log("this is maintenance_plans ",this.maintenance_plans),this.populateCalendar(),this.$store.commit("setIsLoading",!1)})).catch((e=>{console.error("Error fetching maintenance dates:",e),this.$store.commit("setIsLoading",!1)}))},populateCalendar(){console.log("Inside populate calendar");const e=new Date;console.log(e);const t=this.maintenance_plans.map((t=>{let a="",s="",i="",l="",n="",o="",c="";const d=new Date(t.maintenance_date);return d.setHours(0,0,0,0),e.setHours(0,0,0,0),t.maintenance_activity_type&&(a=t.maintenance_activity_type.code),t.maintenance_activities&&t.maintenance_activities.length>0&&(c=t.maintenance_activities[0].is_completed,i=t.maintenance_activities.map((e=>e.note)).join("\n"),t.maintenance_activities[0].created_by&&t.maintenance_activities[0].created_at&&(l=t.maintenance_activities[0].created_by.email,n=t.maintenance_activities[0].created_by.first_name,o=t.maintenance_activities[0].created_at)),d<e?(s=c?"green":"red",t.maintenance_activities.length>0?(l=t.maintenance_activities[0].created_by.email,n=t.maintenance_activities[0].created_by.first_name,o=t.maintenance_activities[0].created_at):(l=t.created_by.email,n=t.created_by.first_name,o=t.created_at)):d.getTime()===e.getTime()&&t.maintenance_activities.length>0?(s=c?"green":"red",l=t.maintenance_activities[0].created_by.email,n=t.maintenance_activities[0].created_by.first_name,o=t.maintenance_activities[0].created_at):(s="orange",l=t.created_by.email,n=t.created_by.first_name,o=t.created_at),{title:a,start:t.maintenance_date,color:s,extendedProps:{id:t.id,note:i,color:s,maintenance_activity_completed:c,maintenance_plan_date:t.maintenance_date,created_by_userMail:l,created_by_name:n,created_at:o}}}));this.calendarOptions.events=t},handleEventClick(e){console.log("inside event click"),console.log("info:",e),console.log("info.dateStr:",e.dateStr),console.log(e.event.id);const t=e.event.start;console.log("clicked event start date",t);const a=t.toLocaleString("en-IN",{timeZone:"Asia/Kolkata"}),s=a.split(",")[0],[i,l,n]=s.split("/").map((e=>e.padStart(2,"0"))),o=`${n}-${l}-${i}`;if(console.log("formatted-date",o),this.$store.state.user.is_superuser||this.$store.state.user.is_machine_maintenance_supervisor_team)return void this.modifyEvent(e.event);const c=new Date(o),d=new Date;if(c.getDate()!==d.getDate()||c.getMonth()!==d.getMonth()||c.getFullYear()!==d.getFullYear())return void window.alert("You can only modify events for today.");const r=this.calendarOptions.events.filter((e=>{const t=e.start;return t===o}));console.log("events on same date",r);const m=r.find((t=>t.extendedProps.id===e.event.extendedProps.id));console.log("clickedEvent",m),m&&(console.log("this is clicked event=",m),"orange"===m.extendedProps.color||"red"===m.extendedProps.color?this.modifyEvent(m):"green"===m.extendedProps.color&&(this.$store.state.user.email===m.extendedProps.created_by_userMail||this.$store.state.user.is_superuser||this.$store.state.user.is_machine_maintenance_supervisor_team?this.modifyEvent(m):window.alert("Only the creator of the maintenance activity can modify it.")))},modifyEvent(e){("orange"===e.extendedProps.color||"red"===e.extendedProps.color||"green"===e.extendedProps.color&&null!==e.extendedProps.note)&&(this.selectedEvent=e,this.toggleModal(e))},toggleModal(e){const t="orange"!==e.extendedProps.color||e.extendedProps.note?"Edit Activity":"Mark Activity";this.showModal=!this.showModal,this.modalTitle=t},closeModal(){console.log("inside close modal parent"),this.showModal=!1},populateCalendarNew(e){this.maintenance_plans=e,this.populateCalendar()},handleEventColorUpdated(e){console.log("inside event color update",e);const t=this.calendarOptions.events,a=t.find((t=>t.id===e.eventId));a?(console.log("print eventToUpdate",a),a.color=e.newColor,void 0!==e.createdNote&&(a.extendedProps.note=e.createdNote)):console.error("Event not found in events array")},MarkDate(){console.log("create maintenance activity called"),tt.Z.post("/machine-maintenance/create-or-delete-maintenance-activity",this.selectedEvent).then((e=>{console.log("Response:",e.data)})).catch((e=>{console.error("Error:",e)}))},unmarkDate(e){console.log("delete maintenance activity called"),tt.Z.delete("/machine-maintenance/create-or-delete-maintenance-activity",{data:this.selectedEvent}).then((t=>{console.log("Maintenance activity deleted:",t.data),e.color="orange",this.selectedEvent=null})).catch((e=>{console.error("Error deleting maintenance activity:",e)}))},selectLine(){if(this.selectedLine){console.log("this is the sleected line",this.selectedLine);const e=this.selectedLine.id;this.selectedLineId=e,console.log("selected lien id",this.selectedLineId),this.filteredMachines=this.selectedLine.machines}else this.filteredMachines=[];this.selectedMachine=null},selectMachine(){if(console.log("inside select machine"),console.log("Selected machine:",this.selectedMachine),this.selectedMachine){const e=this.selectedMachine.id;this.selectedMachineId=e,this.fetchMaintenanceDates(this.selectedMachine.id)}}},mounted(){this.getData()}};const KE=(0,ut.Z)(YE,[["render",QE],["__scopeId","data-v-33a28114"]]);var JE=KE;const XE=e=>((0,i.dD)("data-v-027494de"),e=e(),(0,i.Cn)(),e),eU={key:0,class:"container text-center"},tU=XE((()=>(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1))),aU=XE((()=>(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1))),sU=[tU,aU],iU={key:1,class:"container"},lU={class:"row align-items-center"},nU=(0,i.uE)('<div class="col-md-6 mt-4" data-v-027494de><div class="d-flex align-items-center" data-v-027494de><h2 class="mb-0" data-v-027494de>Maintenance Calendar</h2><span class="ms-3 fs-4 text-muted" data-v-027494de>|</span><nav aria-label="breadcrumb" class="d-inline-block ms-3" data-v-027494de><ol class="breadcrumb bg-transparent m-0 p-0" data-v-027494de><li class="breadcrumb-item active" aria-current="page" data-v-027494de><i class="far fa-calendar me-2" data-v-027494de></i>Yearly View </li></ol></nav></div></div>',1),oU={class:"col-md-6 d-flex justify-content-end mt-4"},cU=XE((()=>(0,i._)("option",{disabled:"",value:""},"Select Line",-1))),dU=["value"],rU=XE((()=>(0,i._)("option",{disabled:"",value:""},"Select Machine",-1))),mU=["value"],uU={class:"card card-outline card-primary mt-5"},hU=XE((()=>(0,i._)("div",{class:"card-header"},[(0,i._)("h3",{class:"card-title",style:{"font-weight":"bold","font-size":"1.2em"}}," Legend: "),(0,i._)("div",{class:"card-tools"})],-1))),pU={class:"card-body"},bU=(0,i.uE)('<div class="legends-container" data-v-027494de><div class="legend-item" data-v-027494de><div class="legend-color red" data-v-027494de></div><div class="legend-label" data-v-027494de>Maintenance Activity Due</div></div><div class="legend-item" data-v-027494de><div class="legend-color yellow" data-v-027494de></div><div class="legend-label" data-v-027494de>Maintenance Activity Scheduled</div></div><div class="legend-item" data-v-027494de><div class="legend-color green" data-v-027494de></div><div class="legend-label" data-v-027494de>Maintenance Activity Performed</div></div></div>',1),gU={style:{"margin-top":"50px"}};function fU(e,t,a,l,n,o){const c=(0,i.up)("router-link"),d=(0,i.up)("FullCalendar"),r=(0,i.up)("MaintenancePlanDetailsModal"),m=(0,i.up)("CreateMaintenancePlanModal"),u=(0,i.up)("EditableNoteModal");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",eU,sU)):((0,i.wg)(),(0,i.iD)("div",iU,[(0,i._)("div",lU,[nU,(0,i._)("div",oU,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>n.selectedLine=e),onChange:t[1]||(t[1]=(...e)=>o.selectLine&&o.selectLine(...e))},[cU,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.lines,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e.id,value:e},(0,_t.zw)(e.name),9,dU)))),128))],544),[[s.bM,n.selectedLine]]),(0,i.wy)((0,i._)("select",{class:"ms-2","onUpdate:modelValue":t[2]||(t[2]=e=>n.selectedMachine=e),onChange:t[3]||(t[3]=(...e)=>o.selectMachine&&o.selectMachine(...e))},[rU,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.filteredMachines,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e.id,value:e},(0,_t.zw)(e.name),9,mU)))),128))],544),[[s.bM,n.selectedMachine]]),n.selectedLine&&n.selectedMachine?((0,i.wg)(),(0,i.j4)(c,{key:0,to:{name:"CalendarMonthlyView",query:{lineId:n.selectedLine.id,machineId:n.selectedMachine.id}},class:"btn btn-primary btn-sm ms-2"},{default:(0,i.w5)((()=>[(0,i.Uk)(" See Monthly View ")])),_:1},8,["to"])):(0,i.kq)("",!0)])]),(0,i._)("div",uU,[hU,(0,i._)("div",pU,[bU,(0,i._)("div",gU,[(0,i.Wm)(d,{options:n.calendarOptions},null,8,["options"])])])]),(0,i.Wm)(r,{show:n.showPlanDetailsModal,selectedEvent:n.selectedEvent,clickedEvent:e.clickedEvent,onCloseModal:o.closePlanDetailsModal,onMaintenancePlanDeleted:o.populateCalendarNew,onMaintenanceActivityDeleted:o.populateCalendarNew},null,8,["show","selectedEvent","clickedEvent","onCloseModal","onMaintenancePlanDeleted","onMaintenanceActivityDeleted"]),(0,i.Wm)(m,{show:n.showCreateMaintenancePlanModal,maintenanceActivityTypes:n.maintenance_activity_types,onCloseModal:o.closeCreateMaintenancePlanModal,"maintenance-plan-info":n.maintenancePlanInfo,onMaintenancePlanCreatedByClicking:o.populateCalendarNew},null,8,["show","maintenanceActivityTypes","onCloseModal","maintenance-plan-info","onMaintenancePlanCreatedByClicking"]),(0,i.Wm)(u,{show:n.showEditableModal,selectedEvent:n.selectedEvent,clickedEvent:e.clickedEvent,onCloseModal:o.closeEditableNoteModal,modalTitle:e.modalTitle,onEventColorUpdated:e.handleEventColorUpdated,onDateMarkedMaintenanceActivityCreated:o.populateCalendarNew,onMaintenanceActivityNoteUpdated:o.populateCalendarNew,onMaintenanceActivityDeleted:o.populateCalendarNew},null,8,["show","selectedEvent","clickedEvent","onCloseModal","modalTitle","onEventColorUpdated","onDateMarkedMaintenanceActivityCreated","onMaintenanceActivityNoteUpdated","onMaintenanceActivityDeleted"])]))}var _U=a(7871),vU={components:{FullCalendar:IR.Z,MaintenancePlanDetailsModal:oB,CreateMaintenancePlanModal:SB,EditableNoteModal:ZB},data(){return{calendarOptions:{plugins:[_U.Z],initialView:"multiMonthYear",events:[]},lines:[],selectedLine:"",selectedMachine:"",selectedEvent:{},showPlanDetailsModal:!1,showCreateMaintenancePlanModal:!1,maintenance_plans:{},maintenance_activity_types:[],maintenancePlanInfo:{},showEditableModal:!1,filteredMachines:[]}},methods:{getData(){tt.Z.get("machine-maintenance/get-machine-data/").then((e=>{console.log(e.data),this.lines=e.data.lines,this.maintenance_activity_types=e.data.maintenance_activity_types})).catch((e=>{console.log("error fetching data",e)}))},fetchMaintenanceDates(e){this.$store.commit("setIsLoading",!0),console.log("id of the machine selected",e),tt.Z.post("machine-maintenance/get-maintenance-plan/",{machine_id:e}).then((e=>{this.maintenance_plans=e.data.maintenance_plans,console.log("this is maintenance_plans ",this.maintenance_plans),this.populateCalendar(),this.$store.commit("setIsLoading",!1)})).catch((e=>{console.error("Error fetching maintenance dates:",e),this.$store.commit("setIsLoading",!1)}))},populateCalendar(){console.log("Inside populate calendar");const e=new Date;console.log(e);const t=this.maintenance_plans.map((t=>{let a="",s="",i="",l="",n="",o="",c="";const d=new Date(t.maintenance_date);return d.setHours(0,0,0,0),e.setHours(0,0,0,0),t.maintenance_activity_type&&(a=t.maintenance_activity_type.code),t.maintenance_activities&&t.maintenance_activities.length>0&&(c=t.maintenance_activities[0].is_completed,i=t.maintenance_activities.map((e=>e.note)).join("\n"),t.maintenance_activities[0].created_by&&t.maintenance_activities[0].created_at&&(l=t.maintenance_activities[0].created_by.email,n=t.maintenance_activities[0].created_by.first_name,o=t.maintenance_activities[0].created_at)),d<e?(s=c?"green":"red",t.maintenance_activities.length>0?(l=t.maintenance_activities[0].created_by.email,n=t.maintenance_activities[0].created_by.first_name,o=t.maintenance_activities[0].created_at):(l=t.created_by.email,n=t.created_by.first_name,o=t.created_at)):d.getTime()===e.getTime()&&t.maintenance_activities.length>0?(s=c?"green":"red",l=t.maintenance_activities[0].created_by.email,n=t.maintenance_activities[0].created_by.first_name,o=t.maintenance_activities[0].created_at):(s="orange",l=t.created_by.email,n=t.created_by.first_name,o=t.created_at),{title:a,start:t.maintenance_date,color:s,extendedProps:{id:t.id,note:i,color:s,maintenance_activity_completed:c,maintenance_plan_date:t.maintenance_date,created_by_userMail:l,created_by_name:n,created_at:o}}}));this.calendarOptions.events=t},handleEventClick(e){console.log("event clicked"),console.log("info:",e),console.log("info.event:",e.event),console.log(e.event.id);const t=e.event.start;console.log("clicked event start date",t);const a=t.toLocaleString("en-IN",{timeZone:"Asia/Kolkata"}),s=a.split(",")[0],[i,l,n]=s.split("/").map((e=>e.padStart(2,"0"))),o=`${n}-${l}-${i}`;console.log(o);const c=this.calendarOptions.events.filter((e=>{const t=e.start;return t===o}));console.log("events on same date",c);const d=c.find((t=>t.extendedProps.id===e.event.extendedProps.id));if(console.log("existingEvent",d),d)console.log("existing event for this date",d),"orange"===d.extendedProps.color||"red"===d.extendedProps.color?this.modifyEvent(d):"green"===d.color&&(this.selectedEvent=d,console.log("this is selected event passed as prop ",this.selectedEvent),this.togglePlanDetailsModal());else{const t={selectedMachine:this.selectedMachine,selectedDate:e.dateStr};this.maintenancePlanInfo=t,this.toggleCreateMaintenancePlanModal()}},handleDateClick(e){console.log("inside creating plan by manually marking dates");const t={selectedMachine:this.selectedMachine,selectedDate:e.dateStr};this.maintenancePlanInfo=t,this.toggleCreateMaintenancePlanModal()},modifyEvent(e){"orange"!==e.extendedProps.color&&"red"!==e.extendedProps.color||""!==e.extendedProps.note?"green"===e.extendedProps.color&&null!==e.extendedProps.note&&(this.selectedEvent=e,this.toggleEditableModal(e)):(this.selectedEvent=e,this.toggleEditableModal(e))},toggleEditableModal(e){const t="orange"!==e.extendedProps.color&&"red"!==e.extendedProps.color||e.extendedProps.note?"Edit Note":"Add Note";this.showEditableModal=!this.showEditableModal,this.modalTitle=t},createMaintenancePlan(e){console.log("Creating maintenance plan:",e)},closeCreateMaintenancePlanModal(){this.showCreateMaintenancePlanModal=!1},closePlanDetailsModal(){console.log("inside close modal parent"),this.showPlanDetailsModal=!1},closeEditableNoteModal(){this.showEditableModal=!1},populateCalendarNew(e){this.maintenance_plans=e,this.populateCalendar()},toggleCreateMaintenancePlanModal(){this.showCreateMaintenancePlanModal=!this.showCreateMaintenancePlanModal},togglePlanDetailsModal(){this.showPlanDetailsModal=!this.showPlanDetailsModal},selectLine(){console.log("inside select line"),console.log("Selected Line ID:=",this.selectedLine),this.selectedLine?(this.filteredMachines=this.selectedLine.machines,console.log(this.filteredMachines)):this.filteredMachines=[],this.selectedMachine=null},selectMachine(){console.log("inside select machine"),console.log("Selected machine:",this.selectedMachine),this.selectedMachine&&this.fetchMaintenanceDates(this.selectedMachine.id)}},mounted(){this.getData()}};const yU=(0,ut.Z)(vU,[["render",fU],["__scopeId","data-v-027494de"]]);var kU=yU;const wU=e=>((0,i.dD)("data-v-1dc35089"),e=e(),(0,i.Cn)(),e),CU={class:"container"},DU={class:"row align-items-center"},SU=(0,i.uE)('<div class="col-md-6 mt-4" data-v-1dc35089><div class="d-flex align-items-center" data-v-1dc35089><h2 class="mb-0" data-v-1dc35089>Report Generation</h2><span class="ms-3 fs-4 text-muted" data-v-1dc35089>|</span><nav aria-label="breadcrumb" class="d-inline-block ms-3" data-v-1dc35089><ol class="breadcrumb bg-transparent m-0 p-0" data-v-1dc35089><li class="breadcrumb-item active" aria-current="page" data-v-1dc35089><i class="fas fa-chart-bar me-2" data-v-1dc35089></i>Report </li></ol></nav></div></div>',1),MU={class:"col-md-6 mt-4 text-end"},PU={class:"container mt-5"},IU={class:"mb-3"},xU=wU((()=>(0,i._)("label",{for:"month",class:"form-label"},"Select Month:",-1))),LU=(0,i.uE)('<option value="" disabled data-v-1dc35089>Select Month</option><option value="January" data-v-1dc35089>January</option><option value="February" data-v-1dc35089>February</option><option value="March" data-v-1dc35089>March</option><option value="April" data-v-1dc35089>April</option><option value="May" data-v-1dc35089>May</option><option value="June" data-v-1dc35089>June</option><option value="July" data-v-1dc35089>July</option><option value="August" data-v-1dc35089>August</option><option value="September" data-v-1dc35089>September</option><option value="October" data-v-1dc35089>October</option><option value="November" data-v-1dc35089>November</option><option value="December" data-v-1dc35089>December</option>',13),RU=[LU],BU={class:"mb-3"},$U=wU((()=>(0,i._)("label",{for:"machine",class:"form-label"},"Machine:",-1))),EU=wU((()=>(0,i._)("br",null,null,-1))),UU=wU((()=>(0,i._)("button",{type:"button",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#machineModal"}," Select Machines ",-1))),NU=wU((()=>(0,i._)("br",null,null,-1))),TU={class:"tag-container"},OU={class:"modal fade",id:"machineModal",tabindex:"-1","aria-labelledby":"machineModalLabel","aria-hidden":"true"},AU={class:"modal-dialog modal-xl"},qU={class:"modal-content"},FU=wU((()=>(0,i._)("div",{class:"modal-header"},[(0,i._)("h1",{class:"modal-title fs-5",id:"machineModalLabel"}," Select Machines "),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),jU={class:"modal-body"},WU=wU((()=>(0,i._)("div",{class:"modal-footer"},[(0,i._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close "),(0,i._)("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal"}," Save changes ")],-1))),VU={class:"container text-center"},zU={key:0},ZU=wU((()=>(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1))),GU=wU((()=>(0,i._)("div",null,[(0,i._)("b",null,"Loading...")],-1))),HU=[ZU,GU],QU={key:1};function YU(e,t,a,l,n,o){const c=(0,i.up)("MachineTableGrid"),d=(0,i.up)("ReportGenerationGrid");return(0,i.wg)(),(0,i.iD)("div",CU,[(0,i._)("div",DU,[SU,(0,i._)("div",MU,[(0,i._)("button",{type:"submit",class:"btn btn-primary btn-sm",onClick:t[0]||(t[0]=(...e)=>o.generateReport&&o.generateReport(...e))}," Generate Report ")])]),(0,i._)("div",PU,[(0,i._)("section",IU,[xU,(0,i.wy)((0,i._)("select",{id:"Month",class:"form-select","onUpdate:modelValue":t[1]||(t[1]=e=>n.selectedMonth=e)},RU,512),[[s.bM,n.selectedMonth]])]),(0,i._)("section",BU,[$U,EU,UU,NU,(0,i._)("div",TU,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.selectedMachinesArray,((e,t)=>((0,i.wg)(),(0,i.iD)("div",{key:t,class:"tag badge bg-secondary"},[(0,i._)("span",null,(0,_t.zw)(e.name)+" Of "+(0,_t.zw)(e.line.name),1)])))),128))]),(0,i._)("div",OU,[(0,i._)("div",AU,[(0,i._)("div",qU,[FU,(0,i._)("div",jU,[(0,i.Wm)(c,{style:{"margin-top":"20px"},machines:n.machines,selectedMachinesArray:n.selectedMachinesArray,onRowClicked:e.handleRowClicked,onRowsDeselected:e.handleRowDeselected,onRowsSelected:o.handleRowsSelected},null,8,["machines","selectedMachinesArray","onRowClicked","onRowsDeselected","onRowsSelected"])]),WU])])])]),(0,i._)("div",VU,[e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",zU,HU)):((0,i.wg)(),(0,i.iD)("div",QU,[n.maintenanceActivitiesApiCallSuccess?((0,i.wg)(),(0,i.j4)(d,{key:0,maintenance_plans:n.maintenance_plans},null,8,["maintenance_plans"])):(0,i.kq)("",!0)]))])])])}const KU={class:"d-flex flex-column",style:{height:"600px"}},JU={class:"dropdown align-self-end",style:{"margin-bottom":"10px"}};function XU(e,t,a,s,l,n){const o=(0,i.up)("ag-grid-vue");return(0,i.wg)(),(0,i.iD)("div",KU,[(0,i._)("div",JU,[(0,i._)("button",{class:"btn-sm btn-primary dropdown-toggle",type:"button",id:"exportDropdown",onClick:t[0]||(t[0]=(...e)=>n.toggleDropdown&&n.toggleDropdown(...e)),"aria-haspopup":"true","aria-expanded":"false"}," Export "),(0,i._)("div",{class:(0,_t.C_)(["dropdown-menu",{show:l.isDropdownOpen}]),"aria-labelledby":"exportDropdown",style:{"z-index":"1000"}},[(0,i._)("button",{onClick:t[1]||(t[1]=(...e)=>n.exportToCsv&&n.exportToCsv(...e)),class:"dropdown-item",type:"button"}," Export to CSV "),(0,i._)("button",{onClick:t[2]||(t[2]=(...e)=>n.exportToExcel&&n.exportToExcel(...e)),class:"dropdown-item",type:"button"}," Export to Excel ")],2)]),(0,i.Wm)(o,{ref:"agGrid",style:{"flex-grow":"1"},class:"ag-theme-quartz",rowData:a.maintenance_plans,defaultColDef:e.defaultColDef,columnDefs:l.colDefs,pagination:!0,rowSelection:"multiple"},null,8,["rowData","defaultColDef","columnDefs"])])}a(8858),a(1318),a(3228);var eN=a(7092),tN={name:"App",components:{AgGridVue:ns.n},props:{maintenance_plans:{type:Array,required:!0}},data(){return{isDropdownOpen:!1,colDefs:[{headerName:"Id",field:"id",headerCheckboxSelection:!0,checkboxSelection:!0},{headerName:"Maintenance Planned Date:",field:"maintenance_date"},{headerName:"Machine & Line Name:",field:"id",cellRenderer:this.customMachineLineNameRenderer},{headerName:"Planned Maintenance Type:",field:"maintenance_activity_type.name"},{headerName:"Maintenance Activity Compelted:",field:"maintenance_date",cellRenderer:this.customActivityRenderer},{headerName:"Maintenance Activity Performed By:",field:"maintenance_activities",cellRenderer:this.customActivityPerformedByRenderer},{headerName:"Date & Time Of Activity Performed:",field:"maintenance_activities",cellRenderer:this.customDateTimePerformedRenderer},{headerName:"Maintenance Activity Note:",field:"maintenance_activities",cellRenderer:this.customActivityNoteRenderer}]}},methods:{toggleDropdown(){this.isDropdownOpen=!this.isDropdownOpen},customMachineLineNameRenderer(e){const t=e.data.machine.name,a=e.data.machine.line.name;return`${t} - ${a}`},customActivityRenderer(e){const t=e.data;return t.maintenance_activities.length>0&&!0===t.maintenance_activities[0].is_completed?'<span style="color: green">&#10004;</span>':'<span style="color: red">&#10008;</span>'},customActivityPerformedByRenderer(e){const t=e.value;if(t&&t.length>0){const e=t[t.length-1];return e.created_by.first_name}return"NA"},customDateTimePerformedRenderer(e){const t=e.value;if(t&&t.length>0){const e=t[t.length-1];return e.created_at}return"NA"},customActivityNoteRenderer(e){const t=e.value;if(t&&t.length>0){const e=t[t.length-1];return e.note?e.note:"NA"}return"NA"},exportToCsv(){const e=this.$refs.agGrid.api.getColumnDefs(),t=e.map((e=>e.headerName)),a=this.$refs.agGrid.api.getModel().rowsToDisplay.map((e=>e.data)),s=a.map((e=>({id:e.id,maintenance_date:e.maintenance_date,machine_line_name:this.customMachineLineNameRenderer({data:e}),maintenance_activity_type:e.maintenance_activity_type.name,maintenance_activity_performed:this.customActivityRenderer({data:e}),maintenance_activity_performed_by:this.customActivityPerformedByRenderer({value:e.maintenance_activities}),date_time_performed:this.customDateTimePerformedRenderer({value:e.maintenance_activities}),activity_note:this.customActivityNoteRenderer({value:e.maintenance_activities})})));s.forEach((e=>{'<span style="color: green">&#10004;</span>'===e.maintenance_activity_performed?e.maintenance_activity_performed="Done":'<span style="color: red">&#10008;</span>'===+e.maintenance_activity_performed&&(e.maintenance_activity_performed="Not Done")}));const i=[t.join(","),...s.map((e=>Object.values(e).join(",")))].join("\n"),l=new Blob([i],{type:"text/csv;charset=utf-8;"}),n=document.createElement("a"),o=URL.createObjectURL(l);n.setAttribute("href",o),n.setAttribute("download","maintenance_plans.csv"),n.style.visibility="hidden",document.body.appendChild(n),n.click(),document.body.removeChild(n),this.toggleDropdown()},exportToExcel(){const e=this.$refs.agGrid.api.getColumnDefs(),t=e.map((e=>e.headerName)),a=this.$refs.agGrid.api.getModel().rowsToDisplay.map((e=>e.data)),s=a.map((e=>({id:e.id,maintenance_date:e.maintenance_date,machine_line_name:this.customMachineLineNameRenderer({data:e}),maintenance_activity_type:e.maintenance_activity_type.name,maintenance_activity_performed:this.customActivityRenderer({data:e}),maintenance_activity_performed_by:this.customActivityPerformedByRenderer({value:e.maintenance_activities}),date_time_performed:this.customDateTimePerformedRenderer({value:e.maintenance_activities}),activity_note:this.customActivityNoteRenderer({value:e.maintenance_activities})})));s.forEach((e=>{'<span style="color: green">&#10004;</span>'===e.maintenance_activity_performed?e.maintenance_activity_performed="Done":'<span style="color: red">&#10008;</span>'===e.maintenance_activity_performed&&(e.maintenance_activity_performed="Not Done")}));const i=[t,...s.map((e=>Object.values(e)))],l=eN.P6.book_new(),n=eN.P6.aoa_to_sheet(i);eN.P6.book_append_sheet(l,n,"Maintenance Plans"),eN.NC(l,"maintenance_plans.xlsx"),this.toggleDropdown()}}};const aN=(0,ut.Z)(tN,[["render",XU],["__scopeId","data-v-4232d08a"]]);var sN=aN,iN={components:{MachineTableGrid:PE,ReportGenerationGrid:sN},data(){return{selectedDates:null,selectedMonth:null,machines:[],lines:[],types:[],selectedMachine:null,maintenance_activity_types:[],selectedMachinesArray:[],date:[],maintenance_plans:[],maintenanceActivitiesApiCallSuccess:!1}},mounted(){this.getData()},computed:{filteredTypes(){return this.selectedMachine&&0!==this.types.length?this.types.filter((e=>e.id===this.selectedMachine)):[]}},methods:{handleRowsSelected(e){this.selectedMachinesArray=e,console.log("selected machines array",this.selectedMachinesArray)},removeTag(e){this.selectedMachinesArray.splice(e,1),console.log("selected machiens array",this.selectedMachinesArray)},openModal(){if("customizable"===this.selectedDates){const e=document.querySelector('[data-bs-target="#exampleModal"]');e&&e.click()}},openModalGeneral(){const e=document.querySelector('[data-bs-target="#exampleModal"]');e&&e.click()},closeModalGeneral(){const e=document.querySelector('[data-bs-dismiss="modal"]');e&&e.click()},getData(){tt.Z.get("machine-maintenance/get-machine-data/").then((e=>{console.log("this is resposne.data",e.data),this.machines=e.data.machines,this.lines=e.data.lines,this.maintenance_activity_types=e.data.maintenance_activity_types})).catch((e=>{console.log("error fetching data",e)}))},generateReport(){console.log("this is the selected month",this.selectedMonth);const e=this.selectedMachinesArray.map((e=>e.id));console.log("this is the selected machine ids",e),this.$store.commit("setIsLoading",!0),tt.Z.get("machine-maintenance/get-maintenance-plans-for-report-generation/",{params:{month:this.selectedMonth,machine_ids:e}}).then((e=>{console.log("Response from API:",e.data),this.maintenance_plans=e.data.maintenance_plans,this.maintenanceActivitiesApiCallSuccess=!0,this.$store.commit("setIsLoading",!1)})).catch((e=>{console.error("Error:",e),this.$store.commit("setIsLoading",!1)}))}}};const lN=(0,ut.Z)(iN,[["render",YU],["__scopeId","data-v-1dc35089"]]);var nN=lN;const oN=e=>((0,i.dD)("data-v-4cacda7a"),e=e(),(0,i.Cn)(),e),cN={key:0,class:"container text-center"},dN=oN((()=>(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1))),rN=oN((()=>(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1))),mN=[dN,rN],uN={key:1,class:"container"},hN={class:"row align-items-center"},pN=(0,i.uE)('<div class="col-md-6 mt-4" data-v-4cacda7a><div class="d-flex align-items-center" data-v-4cacda7a><h2 class="mb-0" data-v-4cacda7a>Maintenance Calendar</h2><span class="ms-3 fs-4 text-muted" data-v-4cacda7a>|</span><nav aria-label="breadcrumb" class="d-inline-block ms-3" data-v-4cacda7a><ol class="breadcrumb bg-transparent m-0 p-0" data-v-4cacda7a><li class="breadcrumb-item" data-v-4cacda7a><a href="/machine/calendar-yearly-view" data-v-4cacda7a><i class="far fa-calendar me-2" data-v-4cacda7a></i>Yearly View</a></li><li class="breadcrumb-item active" aria-current="page" data-v-4cacda7a><i class="fas fa-calendar me-2" data-v-4cacda7a></i> Monthly View </li></ol></nav></div></div>',1),bN={class:"col-md-6 d-flex justify-content-end mt-4"},gN={class:"card card-outline card-primary mt-5"},fN=oN((()=>(0,i._)("div",{class:"card-header"},[(0,i._)("h3",{class:"card-title",style:{"font-weight":"bold","font-size":"1.2em"}}," Plan Creation: "),(0,i._)("div",{class:"card-tools"})],-1))),_N={class:"card-body"},vN={class:"mt-4"},yN={class:"container"},kN={class:"row"},wN={class:"col-md-6"},CN={class:"row mb-3"},DN={class:"col-md-6"},SN=oN((()=>(0,i._)("label",{for:"yearSelect",class:"form-label"},[(0,i._)("i",{class:"fas fa-calendar-alt"}),(0,i.Uk)(" Select Year ")],-1))),MN=(0,i.uE)('<option value="" disabled data-v-4cacda7a>Select Year</option><option value="2024" data-v-4cacda7a>2024</option><option value="2025" data-v-4cacda7a>2025</option><option value="2026" data-v-4cacda7a>2026</option><option value="2027" data-v-4cacda7a>2027</option><option value="2028" data-v-4cacda7a>2028</option><option value="2029" data-v-4cacda7a>2029</option><option value="2030" data-v-4cacda7a>2030</option><option value="2031" data-v-4cacda7a>2031</option><option value="2032" data-v-4cacda7a>2032</option><option value="2033" data-v-4cacda7a>2033</option>',11),PN=[MN],IN={class:"col-md-6"},xN=oN((()=>(0,i._)("label",{for:"monthSelect",class:"form-label"},[(0,i._)("i",{class:"fas fa-calendar-alt"}),(0,i.Uk)(" Select Month ")],-1))),LN=(0,i.uE)('<option value="" disabled data-v-4cacda7a>Select Month</option><option value="January" data-v-4cacda7a>January</option><option value="February" data-v-4cacda7a>February</option><option value="March" data-v-4cacda7a>March</option><option value="April" data-v-4cacda7a>April</option><option value="May" data-v-4cacda7a>May</option><option value="June" data-v-4cacda7a>June</option><option value="July" data-v-4cacda7a>July</option><option value="August" data-v-4cacda7a>August</option><option value="September" data-v-4cacda7a>September</option><option value="October" data-v-4cacda7a>October</option><option value="November" data-v-4cacda7a>November</option><option value="December" data-v-4cacda7a>December</option>',13),RN=[LN],BN={class:"col-md-6"},$N={class:"row mb-3"},EN={class:"col-md-6"},UN=oN((()=>(0,i._)("label",{for:"lineSelect",class:"form-label"},[(0,i._)("i",{class:"fas fa-chart-line"}),(0,i.Uk)(" Select Line ")],-1))),NN=oN((()=>(0,i._)("option",{value:"",disabled:""},"Select Line",-1))),TN=["value"],ON={class:"col-md-6"},AN=oN((()=>(0,i._)("label",{for:"customFilterSelect",class:"form-label"},[(0,i._)("i",{class:"fas fa-filter"}),(0,i.Uk)(" Custom Date ")],-1))),qN=oN((()=>(0,i._)("option",{value:"",disabled:""},"Select Custom Filter",-1))),FN=oN((()=>(0,i._)("option",{value:"wholeMonth"},"Whole Month",-1))),jN=[qN,FN],WN={class:"row mt-3"},VN={class:"col-md-12"},zN=oN((()=>(0,i._)("label",{for:"activityTypeSelect",class:"form-label"},[(0,i._)("i",{class:"fas fa-tasks"}),(0,i.Uk)(" Select Activity Type ")],-1))),ZN=oN((()=>(0,i._)("option",{value:"",disabled:""},"Select Type",-1))),GN=["value"],HN={class:"card card-outline card-primary mt-5"},QN=oN((()=>(0,i._)("div",{class:"card-header"},[(0,i._)("h3",{class:"card-title",style:{"font-weight":"bold","font-size":"1.2em"}}," Legend: "),(0,i._)("div",{class:"card-tools"})],-1))),YN={class:"card-body"},KN=(0,i.uE)('<div class="legends-container" data-v-4cacda7a><div class="legend-item" data-v-4cacda7a><div class="legend-color red" data-v-4cacda7a></div><div class="legend-label" data-v-4cacda7a>Maintenance Activity Due</div></div><div class="legend-item" data-v-4cacda7a><div class="legend-color yellow" data-v-4cacda7a></div><div class="legend-label" data-v-4cacda7a>Maintenance Activity Scheduled</div></div><div class="legend-item" data-v-4cacda7a><div class="legend-color green" data-v-4cacda7a></div><div class="legend-label" data-v-4cacda7a>Maintenance Activity Performed</div></div></div>',1),JN={style:{"margin-top":"50px"}};function XN(e,t,a,l,n,o){const c=(0,i.up)("FullCalendar"),d=(0,i.up)("MaintenancePlanDetailsModal"),r=(0,i.up)("CreateMaintenancePlanModal"),m=(0,i.up)("EditableNoteModal"),u=(0,i.up)("DeleteMaintenancePlanModalLineWise"),h=(0,i.up)("MarkStatusModal");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",cN,mN)):((0,i.wg)(),(0,i.iD)("div",uN,[(0,i._)("div",hN,[pN,(0,i._)("div",bN,[(0,i._)("button",{type:"submit",class:"btn btn-primary btn-sm ms-2",onClick:t[0]||(t[0]=(...e)=>o.createPlan&&o.createPlan(...e))}," Create Plan ")])]),(0,i._)("div",gN,[fN,(0,i._)("div",_N,[(0,i._)("div",vN,[(0,i._)("div",yN,[(0,i._)("div",kN,[(0,i._)("div",wN,[(0,i._)("div",CN,[(0,i._)("div",DN,[SN,(0,i.wy)((0,i._)("select",{class:"form-select","onUpdate:modelValue":t[1]||(t[1]=e=>n.selectedYear=e),id:"yearSelect"},PN,512),[[s.bM,n.selectedYear]])]),(0,i._)("div",IN,[xN,(0,i.wy)((0,i._)("select",{class:"form-select","onUpdate:modelValue":t[2]||(t[2]=e=>n.selectedMonth=e),id:"monthSelect"},RN,512),[[s.bM,n.selectedMonth]])])])]),(0,i._)("div",BN,[(0,i._)("div",$N,[(0,i._)("div",EN,[UN,(0,i.wy)((0,i._)("select",{class:"form-select","onUpdate:modelValue":t[3]||(t[3]=e=>n.selectedLine=e),onChange:t[4]||(t[4]=(...e)=>o.selectLineNew&&o.selectLineNew(...e))},[NN,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.lines,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e.id,value:e.id},(0,_t.zw)(e.name),9,TN)))),128))],544),[[s.bM,n.selectedLine]])]),(0,i._)("div",ON,[AN,(0,i.wy)((0,i._)("select",{class:"form-select","onUpdate:modelValue":t[5]||(t[5]=e=>n.selectedCustomFilter=e),id:"customFilterSelect"},jN,512),[[s.bM,n.selectedCustomFilter]])])])])]),(0,i._)("div",WN,[(0,i._)("div",VN,[zN,(0,i.wy)((0,i._)("select",{id:"activityTypeSelect",class:"form-select","onUpdate:modelValue":t[6]||(t[6]=t=>e.selectedType=t)},[ZN,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.maintenance_activity_types,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e.id,value:e.id},(0,_t.zw)(e.name),9,GN)))),128))],512),[[s.bM,e.selectedType]])])])])])]),(0,i._)("div",HN,[QN,(0,i._)("div",YN,[KN,(0,i._)("div",JN,[(0,i.Wm)(c,{options:n.calendarOptions},null,8,["options"])])])])]),(0,i.Wm)(d,{show:n.showPlanDetailsModal,selectedEvent:n.selectedEvent,clickedEvent:e.clickedEvent,onCloseModal:o.closePlanDetailsModal,onMaintenancePlanDeleted:o.populateCalendarNew,onMaintenanceActivityDeleted:o.populateCalendarNew},null,8,["show","selectedEvent","clickedEvent","onCloseModal","onMaintenancePlanDeleted","onMaintenanceActivityDeleted"]),(0,i.Wm)(r,{show:n.showCreateMaintenancePlanModal,maintenanceActivityTypes:n.maintenance_activity_types,selectedLineId:n.selectedLine,onCloseModal:o.closeCreateMaintenancePlanModal,"maintenance-plan-info":n.maintenancePlanInfo,onMaintenancePlanCreatedByClicking:o.populateCalendarNew},null,8,["show","maintenanceActivityTypes","selectedLineId","onCloseModal","maintenance-plan-info","onMaintenancePlanCreatedByClicking"]),(0,i.Wm)(m,{show:n.showEditableModal,selectedEvent:n.selectedEvent,clickedEvent:e.clickedEvent,onCloseModal:o.closeEditableNoteModal,modalTitle:e.modalTitle,selectedLineId:n.selectedLine,selectedTypeId:e.selectedType,onEventColorUpdated:e.handleEventColorUpdated,onMaintenancePlanDeleted:o.populateCalendarNew,onDateMarkedMaintenanceActivityCreated:o.populateCalendarNew,onMaintenanceActivityNoteUpdated:o.populateCalendarNew,onMaintenanceActivityDeleted:o.populateCalendarNew},null,8,["show","selectedEvent","clickedEvent","onCloseModal","modalTitle","selectedLineId","selectedTypeId","onEventColorUpdated","onMaintenancePlanDeleted","onDateMarkedMaintenanceActivityCreated","onMaintenanceActivityNoteUpdated","onMaintenanceActivityDeleted"]),(0,i.Wm)(u,{show:n.showDeletePlanModal,selectedEvent:n.selectedEvent,clickedEvent:e.clickedEvent,onCloseModal:o.closeDeletePlanModal,selectedLineId:n.selectedLine,selectedTypeId:e.selectedType,onEventColorUpdated:e.handleEventColorUpdated,onMaintenancePlansDeletedLineWise:o.populateCalendarNew},null,8,["show","selectedEvent","clickedEvent","onCloseModal","selectedLineId","selectedTypeId","onEventColorUpdated","onMaintenancePlansDeletedLineWise"]),(0,i.Wm)(h,{show:n.showMarkStatusModal,selectedEvent:n.selectedEvent,clickedEvent:e.clickedEvent,onCloseModal:o.closeMarkStatusModal,modalTitle:e.modalTitle,selectedLineId:n.selectedLine,selectedTypeId:e.selectedType,onEventColorUpdated:e.handleEventColorUpdated,onMaintenancePlanDeleted:o.populateCalendarNew,onDateMarkedMaintenanceActivityCreated:o.populateCalendarNew,onMaintenanceActivityNoteUpdated:o.populateCalendarNew,onMaintenanceActivityDeleted:o.populateCalendarNew},null,8,["show","selectedEvent","clickedEvent","onCloseModal","modalTitle","selectedLineId","selectedTypeId","onEventColorUpdated","onMaintenancePlanDeleted","onDateMarkedMaintenanceActivityCreated","onMaintenanceActivityNoteUpdated","onMaintenanceActivityDeleted"])]))}const eT=e=>((0,i.dD)("data-v-5550a42b"),e=e(),(0,i.Cn)(),e),tT={key:0,class:"modal fade show",id:"myModal",tabindex:"-1","aria-labelledby":"myModalLabel","aria-modal":"true",role:"dialog",style:{display:"block"}},aT={class:"modal-dialog modal-lg",role:"document"},sT={class:"modal-content"},iT=eT((()=>(0,i._)("div",{class:"modal-header"},[(0,i._)("h4",{class:"modal-title",id:"myModalLabel"},[(0,i._)("strong",{style:{color:"#333"}},"Mark Status")])],-1))),lT={class:"modal-body"},nT={class:"form-check"},oT=eT((()=>(0,i._)("label",{class:"form-check-label",for:"maintenanceCompleted"},[(0,i._)("b",{style:{"font-size":"1.1em"}},"Maintenance Activity Completed")],-1))),cT={class:"form-check"},dT=eT((()=>(0,i._)("label",{class:"form-check-label",for:"maintenanceNotCompleted"},[(0,i._)("b",{style:{"font-size":"1.1em"}},"Maintenance Activity Not Completed")],-1))),rT=eT((()=>(0,i._)("div",{style:{"margin-top":"20px"}},null,-1))),mT=eT((()=>(0,i._)("label",{for:"remarks"},"Remarks:",-1))),uT={class:"modal-footer"},hT=["disabled"],pT={key:1,class:"modal-backdrop fade show",id:"backdrop",style:{display:"block"}};function bT(e,t,a,l,n,o){return(0,i.wg)(),(0,i.iD)(i.HY,null,[a.show?((0,i.wg)(),(0,i.iD)("div",tT,[(0,i._)("div",aT,[(0,i._)("div",sT,[iT,(0,i._)("div",lT,[(0,i._)("div",nT,[(0,i.wy)((0,i._)("input",{class:"form-check-input",type:"radio",id:"maintenanceCompleted",value:"completed","onUpdate:modelValue":t[0]||(t[0]=e=>n.maintenanceActivityStatus=e)},null,512),[[s.G2,n.maintenanceActivityStatus]]),oT]),(0,i._)("div",cT,[(0,i.wy)((0,i._)("input",{class:"form-check-input",type:"radio",id:"maintenanceNotCompleted",value:"not_completed","onUpdate:modelValue":t[1]||(t[1]=e=>n.maintenanceActivityStatus=e)},null,512),[[s.G2,n.maintenanceActivityStatus]]),dT]),rT,mT,(0,i.wy)((0,i._)("textarea",{"onUpdate:modelValue":t[2]||(t[2]=e=>n.note=e),class:"form-control",id:"remarks",rows:"4"},null,512),[[s.nr,n.note]])]),(0,i._)("div",uT,[(0,i._)("button",{class:"btn btn-warning",onClick:t[3]||(t[3]=(...e)=>o.confirmDeleteMaintenancePlanLineWise&&o.confirmDeleteMaintenancePlanLineWise(...e))}," Delete Maintenance Plan "),(0,i._)("button",{class:"btn btn-danger",disabled:"Add Note"===a.modalTitle,onClick:t[4]||(t[4]=(...e)=>o.confirmDeleteMaintenanceActivity&&o.confirmDeleteMaintenanceActivity(...e))}," Delete Maintenance Activity ",8,hT),(0,i._)("button",{class:"btn btn-primary",onClick:t[5]||(t[5]=(...e)=>o.saveChanges&&o.saveChanges(...e))}," Save Changes "),(0,i._)("button",{class:"btn btn-secondary",onClick:t[6]||(t[6]=(...e)=>o.closeModal&&o.closeModal(...e))},"Close")])])])])):(0,i.kq)("",!0),a.show?((0,i.wg)(),(0,i.iD)("div",pT)):(0,i.kq)("",!0)],64)}var gT={props:{show:{type:Boolean,required:!0,default:!1},selectedEvent:{type:Object,required:!0},modalTitle:{type:String,required:!0},selectedLineId:{type:Number,required:!0},selectedTypeId:{type:Number,required:!0},maintenancePlanInfo:{type:Object,required:!0},clickedFormattedDate:{type:String,required:!0}},data(){return{note:"",applyToAllMachines:!1,maintenanceActivityStatus:""}},watch:{selectedEvent:{handler(e){e&&e.extendedProps&&e.extendedProps.note?this.note=e.extendedProps.note:this.note=""},deep:!0,immediate:!0}},methods:{confirmDeleteMaintenancePlanLineWise(){window.confirm("Are you sure you want to delete this  maintenance Plan for all the machines of this line?")&&this.deleteMaintenancePlanLineWise()},async deleteMaintenancePlanLineWise(){const e=this.selectedLineId,t={line_id:e,selectedDate:this.selectedEvent.extendedProps.maintenance_plan_date,selectedActivityTypeCode:this.selectedEvent.title};console.log("thsi is the form data",t),tt.Z.post("/machine-maintenance/delete-maintenance-plan-line-wise/",t).then((e=>{200!==e.status&&204!==e.status||(this.$emit("maintenance-plan-deleted",e.data.maintenance_plans),this.closeModal(),this.$notify({title:" Maintenance Plan Deleted Successfully",type:"bg-success-subtle text-success",duration:"5000"}))})).catch((e=>{console.error("Error deleting note:",e),this.$notify({title:"Error deleing Maintenance Plan",type:"bg-danger-subtle text-danger",duration:"5000"})}))},confirmDeleteMaintenanceActivity(){window.confirm("Are you sure you want to delete this maintenance activity?")&&this.deleteMaintenanceActivity()},async deleteMaintenanceActivity(){tt.Z.delete(`/machine-maintenance/update-or-delete-maintenance-activity/${this.selectedEvent.extendedProps.id}`).then((e=>{200!==e.status&&204!==e.status||(this.$emit("maintenance-activity-deleted",e.data.maintenance_plans),this.closeModal(),this.$notify({title:"Date Unmarked and Maintenance Activity Deleted",type:"bg-success-subtle text-success",duration:"5000"}))})).catch((e=>{console.error("Error deleting note:",e),this.$notify({title:"Error deleing Maintenance Activity",type:"bg-danger-subtle text-danger",duration:"5000"})}))},closeModal(){this.$emit("close-modal")},async saveChanges(){if(console.log("this is the note =",this.note),console.log("first time maitnenace activity date markign creation api"),console.log("isnide save changes api starting..loggin selected events =",this.selectedEvent),"orange"===this.selectedEvent.extendedProps.color||"red"==this.selectedEvent.extendedProps.color){const e=this.selectedEvent.extendedProps.id;this.selectedEvent.extendedProps.maintenance_plan_date;const t=this.note,a=this.selectedLineId;console.log(" maintenance plan ID:",e),console.log("Note:",t),console.log("Selected Line ID:",a)}}}};const fT=(0,ut.Z)(gT,[["render",bT],["__scopeId","data-v-5550a42b"]]);var _T=fT;const vT={key:0,class:"modal fade show",id:"myModal",tabindex:"-1","aria-labelledby":"myModalLabel","aria-modal":"true",role:"dialog",style:{display:"block"}},yT={class:"modal-dialog modal-lg",role:"document"},kT={class:"modal-content"},wT=(0,i.uE)('<div class="modal-header" data-v-0500ff0a><h4 class="modal-title" id="myModalLabel" data-v-0500ff0a><strong style="color:#333;" data-v-0500ff0a>Delete Maintenance Plan</strong></h4></div><div class="modal-body-lg" data-v-0500ff0a><p class="text-center" data-v-0500ff0a><strong data-v-0500ff0a>Do you want to delete this maintenance plan for all machines of this line on this date?</strong></p></div>',2),CT={class:"modal-footer"},DT={key:1,class:"modal-backdrop fade show",id:"backdrop",style:{display:"block"}};function ST(e,t,a,s,l,n){return(0,i.wg)(),(0,i.iD)(i.HY,null,[a.show?((0,i.wg)(),(0,i.iD)("div",vT,[(0,i._)("div",yT,[(0,i._)("div",kT,[wT,(0,i._)("div",CT,[(0,i._)("button",{class:"btn btn-danger",onClick:t[0]||(t[0]=(...e)=>n.deleteMaintenancePlanLineWise&&n.deleteMaintenancePlanLineWise(...e))}," Yes "),(0,i._)("button",{class:"btn btn-secondary",onClick:t[1]||(t[1]=(...e)=>n.closeModal&&n.closeModal(...e))},"Close")])])])])):(0,i.kq)("",!0),a.show?((0,i.wg)(),(0,i.iD)("div",DT)):(0,i.kq)("",!0)],64)}var MT={props:{show:{type:Boolean,required:!0,default:!1},selectedEvent:{type:Object,required:!0},selectedLineId:{type:Number,required:!0}},methods:{deleteMaintenancePlanLineWise(){const e={line_id:this.selectedLineId,selectedDate:this.selectedEvent.extendedProps.maintenance_plan_date,selectedActivityTypeCode:this.selectedEvent.title};tt.Z.post("/machine-maintenance/delete-maintenance-plan-line-wise/",e).then((e=>{200!==e.status&&204!==e.status||(this.$notify({title:"Maintenance Plans Deleted Successfully",type:"bg-success-subtle text-success",duration:"5000"}),this.$emit("maintenance-plans-deleted-line-wise",e.data.maintenance_plans),this.closeModal())})).catch((e=>{console.error("Error deleting maintenance plan:",e),this.$notify({title:"Error deleting Maintenance Plans",type:"bg-danger-subtle text-danger",duration:"5000"})}))},closeModal(){this.$emit("close-modal")}}};const PT=(0,ut.Z)(MT,[["render",ST],["__scopeId","data-v-0500ff0a"]]);var IT=PT,xT={props:["lineId","machineId"],components:{FullCalendar:IR.Z,MaintenancePlanDetailsModal:oB,CreateMaintenancePlanModal:SB,EditableNoteModal:ZB,MarkStatusModal:_T,DeleteMaintenancePlanModalLineWise:IT},data(){return{calendarOptions:{plugins:[xR.Z,LR.ZP],initialView:"dayGridMonth",events:[],eventClick:this.handleEventClick,dateClick:this.handleDateClick},selectedMonth:"",selectedYear:"",selectedCustomFilter:"",lines:[],selectedLine:"",selectedMachine:"",selectedEvent:{},showPlanDetailsModal:!1,showCreateMaintenancePlanModal:!1,maintenance_plans:{},all_maintenance_plans:{},maintenance_activity_types:[],maintenancePlanInfo:{},showEditableModal:!1,showMarkStatusModal:!1,showDeletePlanModal:!1,filteredMachines:[]}},methods:{async getData(){await tt.Z.get("machine-maintenance/get-machine-data/").then((e=>{console.log(e.data),this.lines=e.data.lines;const{lineId:t,machineId:a}=this.$route.query;console.log(t),console.log(a),t&&a&&(console.log("lines in if",this.lines),this.selectedLine=e.data.lines.find((e=>e.id==t)),this.selectLine(),console.log("Selected Line:",this.selectedLine),this.selectedLine&&(this.selectedMachine=this.selectedLine.machines.find((e=>e.id==a)),console.log("Selected Machine:",this.selectedMachine),this.selectedMachine&&this.selectMachine())),this.maintenance_activity_types=e.data.maintenance_activity_types})).catch((e=>{console.log("error fetching data",e)}))},createPlan(){this.$store.commit("setIsLoading",!0),console.log("this is the selected mahcine",this.selectedMachinesArray);const e={selectedYear:this.selectedYear,selectedType:this.selectedType,selectedMonth:this.selectedMonth,selectedCustomFilter:this.selectedCustomFilter,selectedLine:this.selectedLine};console.log("data being passed from front-end",e),tt.Z.post("/machine-maintenance/create-maintenance-plan-for-all-machines-of-a-line/",e).then((e=>{console.log(e.data.message),this.$notify({title:"Maintenance Plan Created",type:"bg-success-subtle text-success",duration:"5000"}),this.$router.push("/machine/calendar-yearly-view"),this.$store.commit("setIsLoading",!1)})).catch((e=>{console.error("Error:",e),this.$notify({title:"Error creating  Maintenance plan",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1)}))},fetchMaintenanceDatesNew(e){console.log("id of the line selected",e),tt.Z.post("machine-maintenance/get-maintenance-plan-new-line-wise/",{line_id:e}).then((e=>{this.maintenance_plans=e.data.maintenance_plans,this.all_maintenance_plans=e.data.all_maintenance_plans,console.log("this is maintenance_plans ",this.maintenance_plans),this.populateCalendar()})).catch((e=>{console.error("Error fetching maintenance dates:",e)}))},populateCalendar(){console.log("Inside populate calendar");const e=new Date;function t(e,t){const a=e.filter((e=>{const a=new Date(e.maintenance_date);return a.setHours(0,0,0,0)===t.setHours(0,0,0,0)}));return a.every((e=>e.maintenance_activities&&e.maintenance_activities.length>0))}function a(e,t){const a=e.filter((e=>{const a=new Date(e.maintenance_date);return a.setHours(0,0,0,0)===t.setHours(0,0,0,0)}));return a.length>0&&a.every((e=>e.maintenance_activities&&e.maintenance_activities.length>0&&e.maintenance_activities.every((e=>e.is_completed))))}console.log(e);const s=this.maintenance_plans.map((s=>{let i="",l="",n="",o="",c="",d="",r="";const m=new Date(s.maintenance_date);return m.setHours(0,0,0,0),e.setHours(0,0,0,0),s.maintenance_activity_type&&(i=s.maintenance_activity_type.code),t(this.all_maintenance_plans,m)?(r=a(this.all_maintenance_plans,m),l=m<e||m.getTime()===e.getTime()?r?"green":"red":"orange"):l=m<e?"red":"orange",{title:i,start:s.maintenance_date,color:l,extendedProps:{id:s.id,note:n,color:l,maintenance_activity_completed:r,maintenance_plan_date:s.maintenance_date,created_by_userMail:o,created_by_name:c,created_at:d}}}));this.calendarOptions.events=s},handleEventClick(e){console.log("event clicked"),console.log("info:",e),console.log("info.event:",e.event),console.log(e.event.id);const t=e.event.start;console.log("clicked event start date",t);const a=t.toLocaleString("en-IN",{timeZone:"Asia/Kolkata"}),s=a.split(",")[0],[i,l,n]=s.split("/").map((e=>e.padStart(2,"0"))),o=`${n}-${l}-${i}`;console.log(o);const c=this.calendarOptions.events.filter((e=>{const t=e.start;return t===o}));console.log("events on same date",c);const d=c.find((t=>t.extendedProps.id===e.event.extendedProps.id));if(console.log("existingEvent",d),d)this.selectedEvent=d,this.toggleDeletePlanModal();else{const t={selectedMachine:this.selectedMachine,selectedDate:e.dateStr};this.maintenancePlanInfo=t,this.toggleCreateMaintenancePlanModal()}},handleDateClick(e){console.log("inside creating plan by manually marking dates");const t={selectedMachine:this.selectedMachine,selectedDate:e.dateStr};this.maintenancePlanInfo=t,this.toggleCreateMaintenancePlanModal()},modifyEvent(e){("orange"===e.extendedProps.color||"red"===e.extendedProps.color||"green"===e.extendedProps.color&&null!==e.extendedProps.note)&&(this.selectedEvent=e,this.toggleEditableModal(e))},toggleEditableModal(e){const t="orange"!==e.extendedProps.color&&"red"!==e.extendedProps.color||e.extendedProps.note?"Edit Activity":"Mark Activity ";this.showEditableModal=!this.showEditableModal,this.modalTitle=t},createMaintenancePlan(e){console.log("Creating maintenance plan:",e)},closeCreateMaintenancePlanModal(){this.showCreateMaintenancePlanModal=!1},closePlanDetailsModal(){this.showPlanDetailsModal=!1},closeDeletePlanModal(){this.showDeletePlanModal=!1},closeEditableNoteModal(){this.showEditableModal=!1},closeMarkStatusModal(){this.showMarkStatusModal=!1},populateCalendarNew(e){this.maintenance_plans=e,this.populateCalendar()},toggleCreateMaintenancePlanModal(){this.showCreateMaintenancePlanModal=!this.showCreateMaintenancePlanModal},togglePlanDetailsModal(){this.showPlanDetailsModal=!this.showPlanDetailsModal},toggleDeletePlanModal(){this.showDeletePlanModal=!this.showDeletePlanModal},toggleMarkStatusModal(){this.showMarkStatusModal=!this.showMarkStatusModal},selectLine(){console.log("inside select line"),console.log("Selected Line ID:=",this.selectedLine),this.selectedLine?(this.filteredMachines=this.selectedLine.machines,console.log(this.filteredMachines)):this.filteredMachines=[],this.selectedMachine=null},selectLineNew(){console.log("inside select line"),console.log("Selected Line ID:=",this.selectedLine),this.selectedLine&&this.fetchMaintenanceDatesNew(this.selectedLine)},selectMachine(){console.log("inside select machine"),console.log("Selected machine:",this.selectedMachine),this.selectedMachine&&this.fetchMaintenanceDates(this.selectedMachine.id)}},mounted(){this.getData()}};const LT=(0,ut.Z)(xT,[["render",XN],["__scopeId","data-v-4cacda7a"]]);var RT=LT;const BT={class:"container"},$T={class:"row align-items-center"},ET=(0,i.uE)('<div class="col-md-6 mt-4"><div class="d-flex align-items-center"><h2 class="mb-0">Master Machine List</h2><span class="ms-3 fs-4 text-muted">|</span><nav aria-label="breadcrumb" class="d-inline-block ms-3"><ol class="breadcrumb bg-transparent m-0 p-0"><li class="breadcrumb-item active" aria-current="page"><i class="fa-solid fa-list me-2"></i>List </li></ol></nav></div></div>',1),UT={class:"col-md-6 mt-4 text-end"};function NT(e,t,a,s,l,n){return(0,i.wg)(),(0,i.iD)("div",BT,[(0,i._)("div",$T,[ET,(0,i._)("div",UT,[(0,i._)("button",{type:"submit",class:"btn btn-primary btn-sm",onClick:t[0]||(t[0]=(...t)=>e.generateReport&&e.generateReport(...t))}," Generate Report ")])])])}var TT={};const OT=(0,ut.Z)(TT,[["render",NT]]);var AT=OT;const qT=e=>((0,i.dD)("data-v-6c2b49a0"),e=e(),(0,i.Cn)(),e),FT={key:0,class:"container text-center"},jT=qT((()=>(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1))),WT=qT((()=>(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1))),VT=[jT,WT],zT={key:1,class:"container"},ZT=(0,i.uE)('<div class="row align-items-center" data-v-6c2b49a0><div class="col-md-6 mt-4" data-v-6c2b49a0><div class="d-flex align-items-center" data-v-6c2b49a0><h2 class="mb-0" data-v-6c2b49a0>Defect Recognition</h2><span class="ms-3 fs-4 text-muted" data-v-6c2b49a0>|</span><nav aria-label="breadcrumb" class="d-inline-block ms-3" data-v-6c2b49a0><ol class="breadcrumb bg-transparent m-0 p-0" data-v-6c2b49a0><li class="breadcrumb-item active" aria-current="page" data-v-6c2b49a0><i class="fa-solid fa-list me-2" data-v-6c2b49a0></i> Inspection </li></ol></nav></div></div><div class="col-md-6 mt-4 text-end" data-v-6c2b49a0><button type="submit" class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#addDefectModal" data-v-6c2b49a0> Add New Defect Type </button><button type="submit" class="btn btn-primary btn-sm ml-2" data-bs-toggle="modal" data-bs-target="#ListOfDefectsModal" data-v-6c2b49a0> View List Of Defect Types </button></div></div>',1),GT={class:"row align-items-start mt-5"},HT={key:0},QT={class:"mb-3"},YT={class:"row"},KT=qT((()=>(0,i._)("h2",{class:"mb-3"},"Defect Details",-1))),JT={key:0,class:"carousel slide col align-self-center",id:"carouselExampleCaptions"},XT={key:0,class:"carousel-indicators"},eO=["data-bs-target","data-bs-slide-to"],tO={class:"carousel-inner"},aO=["src","alt"],sO={class:"carousel-caption d-none d-md-block",style:{"text-shadow":"2px 2px 4px rgba(0, 0, 0, 0.5)","background-color":"rgba(0, 0, 0, 0.5)",color:"white",padding:"8px"}},iO={key:0,class:"fw-bold"},lO=qT((()=>(0,i._)("span",{class:"carousel-control-prev-icon","aria-hidden":"true"},null,-1))),nO=qT((()=>(0,i._)("span",{class:"visually-hidden"},"Previous",-1))),oO=[lO,nO],cO=qT((()=>(0,i._)("span",{class:"carousel-control-next-icon","aria-hidden":"true"},null,-1))),dO=qT((()=>(0,i._)("span",{class:"visually-hidden"},"Next",-1))),rO=[cO,dO],mO={class:"mt-4"},uO=qT((()=>(0,i._)("label",{for:"defectType"},"Select Defect Type:",-1))),hO=["value"],pO={class:"modal fade",id:"addDefectModal",tabindex:"-1","aria-labelledby":"addDefectLabel","aria-hidden":"true"},bO={class:"modal-dialog"},gO={class:"modal-content"},fO=qT((()=>(0,i._)("div",{class:"modal-header"},[(0,i._)("h1",{class:"modal-title fs-5",id:"addDefectLabel",style:{"font-weight":"bold"}}," Add Defect "),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),_O={class:"modal-body"},vO={class:"modal-footer"},yO=qT((()=>(0,i._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1))),kO={class:"modal fade",id:"ListOfDefectsModal",tabindex:"-1","aria-labelledby":"ListOfDefectsLabel","aria-hidden":"true"},wO={class:"modal-dialog"},CO={class:"modal-content"},DO=qT((()=>(0,i._)("div",{class:"modal-header"},[(0,i._)("h1",{class:"modal-title fs-5",id:"ListOfDefectsLabel",style:{"font-weight":"bold"}}," List Of Defects "),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),SO={class:"modal-body"},MO=qT((()=>(0,i._)("div",{class:"modal-footer"},[(0,i._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ")],-1)));function PO(e,t,a,l,n,o){const c=(0,i.up)("VueImageZoomer");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",FT,VT)):((0,i.wg)(),(0,i.iD)("div",zT,[ZT,(0,i._)("div",GT,[n.inspectionBoardData?((0,i.wg)(),(0,i.iD)("div",HT,[(0,i._)("h2",QT,[(0,i.Uk)(" Board: "),(0,i._)("strong",null,(0,_t.zw)(n.inspectionBoardData.name),1)]),(0,i.Wm)(c,{regular:n.inspectionBoardData.inspection_board_image_url,zoom:n.inspectionBoardData.inspection_board_image_url,"zoom-amount":3,"img-class":"img-fluid",alt:"Sky","close-pos":"top-right","message-pos":"top"},null,8,["regular","zoom"])])):(0,i.kq)("",!0)]),(0,i._)("div",YT,[KT,n.inspectionBoardData&&n.inspectionBoardData.defects?((0,i.wg)(),(0,i.iD)("div",JT,[n.inspectionBoardData&&n.inspectionBoardData.defects?((0,i.wg)(),(0,i.iD)("div",XT,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.inspectionBoardData.defects,((e,t)=>((0,i.wg)(),(0,i.iD)("button",{key:t,type:"button","data-bs-target":"#carouselExampleCaptions"+t,"data-bs-slide-to":t,class:(0,_t.C_)({active:0===t,"bg-dark":0===t}),"aria-current":"true","aria-label":"Slide {{ index + 1 }}"},null,10,eO)))),128))])):(0,i.kq)("",!0),(0,i._)("div",tO,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.inspectionBoardData.defects,((e,t)=>((0,i.wg)(),(0,i.iD)("div",{key:t,class:(0,_t.C_)(["carousel-item",{active:t===n.activeDefectIndex}])},[e.defect_image_url?((0,i.wg)(),(0,i.iD)("img",{key:0,src:e.defect_image_url,class:"img-fluid",alt:"Defect Image "+(t+1)},null,8,aO)):(0,i.kq)("",!0),(0,i._)("div",sO,[e.defect_type&&e.defect_type.name?((0,i.wg)(),(0,i.iD)("h5",iO,(0,_t.zw)(e.defect_type.name),1)):(0,i.kq)("",!0)])],2)))),128))]),(0,i._)("button",{class:"carousel-control-prev",type:"button","data-bs-target":"#carouselExampleCaptions","data-bs-slide":"prev",onClick:t[0]||(t[0]=(...e)=>o.prevDefect&&o.prevDefect(...e))},oO),(0,i._)("button",{class:"carousel-control-next",type:"button","data-bs-target":"#carouselExampleCaptions","data-bs-slide":"next",style:{color:"white","font-size":"1.5rem"},onClick:t[1]||(t[1]=(...e)=>o.nextDefect&&o.nextDefect(...e))},rO)])):(0,i.kq)("",!0),(0,i._)("div",mO,[uO,(0,i.wy)((0,i._)("select",{id:"defectType","onUpdate:modelValue":t[2]||(t[2]=e=>n.selectedDefectType=e),class:"form-select"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.defectTypes,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e.id,value:e.id},(0,_t.zw)(e.name),9,hO)))),128))],512),[[s.bM,n.selectedDefectType]]),(0,i._)("button",{type:"button",class:"btn btn-primary mt-3",onClick:t[3]||(t[3]=(...e)=>o.assignDefect&&o.assignDefect(...e))}," Assign ")])]),(0,i._)("div",pO,[(0,i._)("div",bO,[(0,i._)("div",gO,[fO,(0,i._)("div",_O,[(0,i.wy)((0,i._)("textarea",{"onUpdate:modelValue":t[4]||(t[4]=e=>n.defectName=e),placeholder:"Enter Defect"},null,512),[[s.nr,n.defectName]])]),(0,i._)("div",vO,[yO,(0,i._)("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal",onClick:t[5]||(t[5]=(...e)=>o.createDefect&&o.createDefect(...e))}," Create Defect ")])])])]),(0,i._)("div",kO,[(0,i._)("div",wO,[(0,i._)("div",CO,[DO,(0,i._)("div",SO,[(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.defectTypes,(e=>((0,i.wg)(),(0,i.iD)("li",{key:e.id},(0,_t.zw)(e.name),1)))),128))])]),MO])])])]))}var IO=a(847),xO={components:{VueImageZoomer:IO.G},data(){return{inspectionBoardData:null,selectedDefectType:null,selectedDefectTypeId:null,defectTypes:[],activeDefectIndex:0,defectName:""}},mounted(){this.getInspectionBoardData()},methods:{getInspectionBoardData(){this.$store.commit("setIsLoading",!0),tt.Z.get(`store/get-inspection-board-data/${this.$route.params.id}`).then((e=>{console.log("response data =",e.data),this.inspectionBoardData=e.data.inspectionBoardData,this.defectTypes=e.data.defectTypes,this.inspectionBoardData&&this.inspectionBoardData.defects&&this.inspectionBoardData.defects.length>0&&(this.selectedDefectType=this.inspectionBoardData.defects[this.activeDefectIndex].defect_type.id),this.$store.commit("setIsLoading",!1)})).catch((e=>{console.error("Error fetching inspection board data:",e),this.$store.commit("setIsLoading",!1)}))},async createDefect(){this.$store.commit("setIsLoading",!0),await tt.Z.post("store/create-defect-type/",{defectName:this.defectName}).then((e=>{this.$store.commit("setIsLoading",!1),this.defectTypes=e.data.defectTypes,this.$notify({title:"Defect Type Created Successfully",type:"bg-success-subtle text-success",duration:"5000"}),console.log("Defect created successfully:",e.data)})).catch((e=>{this.$store.commit("setIsLoading",!1),console.error("Error creating defect:",e),this.$notify({title:"Error Creating Defect Type",type:"bg-danger-subtle text-danger",duration:"5000"})}))},async assignDefect(){this.$store.commit("setIsLoading",!0);const e=this.inspectionBoardData.defects[this.activeDefectIndex];if(e){const t=e.id;console.log("Active defect ID:",t),console.log("Selected defect type ID:",this.selectedDefectTypeId),console.log("Inspection Board ID:",this.inspectionBoardData.id),await tt.Z.post("store/assign_defect_type/",{defect_id:t,defect_type_id:this.selectedDefectType,board_id:this.inspectionBoardData.id}).then((e=>{this.$store.commit("setIsLoading",!1),console.log("Data posted successfully:",e.data),this.inspectionBoardData=e.data.inspectionBoardData,this.defectTypes=e.data.defectTypes,this.$notify({title:"Defect Assigned Successfully",type:"bg-success-subtle text-success",duration:"5000"})})).catch((e=>{console.error("Error posting data:",e),this.$store.commit("setIsLoading",!1),this.$notify({title:"Error Assigning Defect ",type:"bg-danger-subtle text-danger",duration:"5000"})}))}else console.error("No active defect found.")},updateActiveDefectIndex(e){this.activeDefectIndex=e,this.inspectionBoardData&&this.inspectionBoardData.defects&&this.inspectionBoardData.defects[e]&&this.inspectionBoardData.defects[e].defect_type?this.selectedDefectType=this.inspectionBoardData.defects[e].defect_type.id:this.selectedDefectType=null},prevDefect(){console.log("Previous defect index before calculation:",this.activeDefectIndex);const e=(this.activeDefectIndex-1+this.inspectionBoardData.defects.length)%this.inspectionBoardData.defects.length;console.log("New index after calculation:",e),this.updateActiveDefectIndex(e)},nextDefect(){console.log("Next defect index before calculation:",this.activeDefectIndex);const e=(this.activeDefectIndex+1)%this.inspectionBoardData.defects.length;console.log("New index after calculation:",e),this.updateActiveDefectIndex(e)}}};const LO=(0,ut.Z)(xO,[["render",PO],["__scopeId","data-v-6c2b49a0"]]);var RO=LO;const BO=e=>((0,i.dD)("data-v-c95853aa"),e=e(),(0,i.Cn)(),e),$O=BO((()=>(0,i._)("div",null,"Roll over image to zoom in",-1))),EO=BO((()=>(0,i._)("div",{id:"img-zoomer-box"},[(0,i._)("img",{src:"https://bit.ly/2mgDw0y",class:"p",id:"img-1"}),(0,i._)("div",{id:"img-2"})],-1))),UO=[$O,EO];function NO(e,t,a,s,l,n){return(0,i.wg)(),(0,i.iD)("div",null,UO)}var TO={mounted(){this.zoomer()},methods:{zoomer(){console.log("called");const e=document.querySelector("#img-zoomer-box"),t=document.querySelector("#img-1"),a=document.querySelector("#img-2"),s=s=>{const i=a.style,l=s.pageX-e.offsetLeft,n=s.pageY-e.offsetTop,o=t.offsetWidth,c=t.offsetHeight;let d=l/o*100,r=n/c*100;l>=.01*o&&(d*=1.15),n>=.01*c&&(r*=1.15),i.backgroundPositionX=d-9+"%",i.backgroundPositionY=r-9+"%",i.left=l-180+"px",i.top=n-180+"px"};e.addEventListener("mousemove",s)}}};const OO=(0,ut.Z)(TO,[["render",NO],["__scopeId","data-v-c95853aa"]]);var AO=OO;const qO={key:0,class:"container text-center"},FO=(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1),jO=(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1),WO=[FO,jO],VO={key:1,class:"container"},zO=(0,i.uE)('<div class="row align-items-center"><div class="d-flex align-items-center mt-4"><h2 class="mb-0">Inspection Boards</h2><span class="ms-3 fs-4 text-muted">|</span><nav aria-label="breadcrumb" class="d-inline-block ms-3"><ol class="breadcrumb bg-transparent m-0 p-0"><li class="breadcrumb-item active" aria-current="page"><i class="fas fa-microchip me-2"></i> Inspection Boards </li></ol></nav></div></div>',1),ZO={class:"card card-outline card-primary mt-5"},GO={class:"card-header"},HO=(0,i._)("h3",{class:"card-title",style:{"font-size":"20px"}},"Active Board:",-1),QO={class:"card-tools"},YO=(0,i._)("button",{class:"btn-sm btn-primary"},"View Board Details",-1),KO={class:"card-body"},JO={class:"row"},XO={class:"col-md-6"},eA=(0,i._)("strong",null,"Board Name:",-1),tA={class:"col-md-6"},aA=(0,i._)("strong",null,"Detected Board Id:",-1);function sA(e,t,a,s,l,n){const o=(0,i.up)("router-link"),c=(0,i.up)("InspectionBoardGrid");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",qO,WO)):((0,i.wg)(),(0,i.iD)("div",VO,[zO,(0,i._)("div",ZO,[(0,i._)("div",GO,[HO,(0,i._)("div",QO,[(0,i.Wm)(o,{to:"/defect-recognition/"+(this.activeInspectionBoard?this.activeInspectionBoard.id:"")},{default:(0,i.w5)((()=>[YO])),_:1},8,["to"])])]),(0,i._)("div",KO,[(0,i._)("div",JO,[(0,i._)("div",XO,[eA,(0,i.Uk)(" "+(0,_t.zw)(this.activeInspectionBoard?this.activeInspectionBoard.name:"N/A"),1)]),(0,i._)("div",tA,[aA,(0,i.Uk)(" "+(0,_t.zw)(this.activeInspectionBoard?this.activeInspectionBoard.detected_board_id:"N/A"),1)])])])]),(0,i.Wm)(c,{class:"mt-5",inspectionBoards:l.inspectionBoards},null,8,["inspectionBoards"])]))}const iA=e=>((0,i.dD)("data-v-1f328e94"),e=e(),(0,i.Cn)(),e),lA={class:"modal fade",id:"BoardPhotoModal",tabindex:"-1","aria-labelledby":"boardPhotoLabel","aria-hidden":"true"},nA={class:"modal-dialog modal-lg"},oA={class:"modal-content"},cA=iA((()=>(0,i._)("div",{class:"modal-header"},[(0,i._)("h1",{class:"modal-title fs-5",id:"boardPhotoModalLabel"}," Inspection Board Photo "),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),dA={class:"modal-body"},rA=["src"],mA=iA((()=>(0,i._)("div",{class:"modal-footer"},[(0,i._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ")],-1)));function uA(e,t,a,s,l,n){const o=(0,i.up)("ag-grid-vue");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(o,{style:{height:"500px"},class:"ag-theme-quartz",rowData:a.inspectionBoards,defaultColDef:l.defaultColDef,columnDefs:l.colDefs,pagination:!0,onRowClicked:n.onRowClicked,onSelectionChanged:n.onSelectionChanged},null,8,["rowData","defaultColDef","columnDefs","onRowClicked","onSelectionChanged"]),(0,i._)("div",lA,[(0,i._)("div",nA,[(0,i._)("div",oA,[cA,(0,i._)("div",dA,[(0,i._)("img",{src:this.selectedBoardPhotoUrl,alt:"Inspection Board Photo",class:"img-fluid"},null,8,rA),(0,i.Uk)(". ")]),mA])])])])}var hA={components:{AgGridVue:ns.n},props:{inspectionBoards:{type:Array,required:!0}},data(){return{colDefs:[{headerName:"Board Name",field:"name",width:300},{headerName:"Created At",field:"created_at",width:300},{headerName:"View Board Photo",cellRenderer:this.viewBoardPhotoButtonRenderer,width:300},{headerName:"View Defect Details",cellRenderer:this.viewButtonRenderer,width:300}],defaultColDef:{filter:!0,sortable:!0,resizable:!0,autoSize:!0},gridApi:null,selectedBoardPhotoUrl:""}},mounted(){},methods:{onRowClicked(e){this.$emit("rowClicked",e.data)},onSelectionChanged(e){const t=e.api.getSelectedRows(),a=t.length>0?t[0]:null;a?this.$emit("rowSelected",a):this.$emit("rowDeselected")},onGridReady(e){this.gridApi=e.api},viewButtonRenderer(e){const t=document.createElement("button");return t.innerHTML='<i class="fas fa-eye"></i>',t.classList.add("btn","btn-outline-secondary"),t.addEventListener("click",(()=>this.onViewClick(e.data))),t},onViewClick(e){console.log(e),this.$router.push(`/defect-recognition/${e.id}`)},viewBoardPhotoButtonRenderer(e){const t=document.createElement("button");return t.innerHTML='<i class="fas fa-microchip"></i>',t.classList.add("btn","btn-outline-secondary"),t.setAttribute("data-bs-toggle","modal"),t.setAttribute("data-bs-target","#BoardPhotoModal"),t.addEventListener("click",(()=>{this.selectedBoardPhotoUrl=e.data.inspection_board_image_url})),t}}};const pA=(0,ut.Z)(hA,[["render",uA],["__scopeId","data-v-1f328e94"]]);var bA=pA,gA={components:{InspectionBoardGrid:bA},mounted(){this.getInspectionBoards(),this.ws=new WebSocket("wss://sfcsdev.xtractautomation.com/ws/inspection-board/"),this.ws.addEventListener("open",(()=>{console.log("WebSocket connection openedddddd")})),this.ws.addEventListener("message",(e=>{try{console.log("WebSocket message received:",e.data);const t=JSON.parse(e.data);console.log("event data",t),this.activeInspectionBoard=t.active_inspection_board,this.inspectionBoards=t.all_inspection_boards}catch(t){console.error("Error processing WebSocket message:",t)}}))},data(){return{inspectionBoards:null,activeInspectionBoard:null}},beforeUnmount(){this.ws.close()},methods:{getInspectionBoards(){this.$store.commit("setIsLoading",!0),tt.Z.get("/store/get-inspection-boards").then((e=>{console.log("this is response data",e.data),this.inspectionBoards=e.data.inspectionBoards,this.activeInspectionBoard=e.data.activeInspectionBoard,this.$store.commit("setIsLoading",!1)})).catch((e=>{console.error("Error fetching inspection boards:",e),this.$store.commit("setIsLoading",!1)}))}}};const fA=(0,ut.Z)(gA,[["render",sA]]);var _A=fA;const vA={key:0,class:"container text-center"},yA=(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1),kA=(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1),wA=[yA,kA],CA={key:1,class:"container"},DA={class:"row align-items-center"},SA={class:"d-flex align-items-center mt-4"},MA=(0,i.uE)('<h2 class="mb-0">Board Report</h2><span class="ms-3 fs-4 text-muted">|</span><nav aria-label="breadcrumb" class="d-inline-block ms-3"><ol class="breadcrumb bg-transparent m-0 p-0"><li class="breadcrumb-item"><a href="/machine-logs/dashboard"><i class="fas fa-home me-1"></i>Home</a></li><li class="breadcrumb-item active" aria-current="page"><i class="fas fa-microchip me-2"></i> Board Reports </li></ol></nav>',3),PA={class:"input-group ms-auto",style:{width:"250px"}},IA=(0,i._)("i",{class:"fas fa-search"},null,-1),xA=[IA];function LA(e,t,a,l,n,o){const c=(0,i.up)("BoardReportGrid");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",vA,wA)):((0,i.wg)(),(0,i.iD)("div",CA,[(0,i._)("div",DA,[(0,i._)("div",SA,[MA,(0,i._)("div",PA,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=e=>n.boardNumber=e),placeholder:"Enter board number"},null,512),[[s.nr,n.boardNumber]]),(0,i._)("button",{class:"btn btn-outline-primary",type:"button",onClick:t[1]||(t[1]=(...e)=>o.searchBoard&&o.searchBoard(...e))},xA)])])]),(0,i.Wm)(c,{class:"mt-5",boardLogs:n.boardLogs},null,8,["boardLogs"])]))}function RA(e,t,a,s,l,n){const o=(0,i.up)("ag-grid-vue");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(o,{style:{height:"500px"},class:"ag-theme-quartz",rowData:a.boardLogs,defaultColDef:l.defaultColDef,columnDefs:l.colDefs,pagination:!0,rowSelection:"single",onRowClicked:n.onRowClicked,onSelectionChanged:n.onSelectionChanged},null,8,["rowData","defaultColDef","columnDefs","onRowClicked","onSelectionChanged"])])}var BA={name:"App",components:{AgGridVue:ns.n},props:{boardLogs:{type:Array,required:!0}},data(){return{colDefs:[{headerName:"Board Serial No",field:"board_serial_number"},{headerName:"Machine",valueGetter:function(e){const t=e.data.machines;return t&&t.length>0?t[0].name:null}},{field:"date",headerName:"Date",cellRenderer:function(e){const t=e.data.date;if(t){const[e,a,s]=t.split("-");return`${s}-${a}-${e}`}return""}},{field:"log_file_url",headerName:"Log File",filter:!0,cellRenderer:function(e){if(e.value){for(var t=-1,a=0,s=0;a<e.value.length;a++)if("/"===e.value[a]&&(s++,5===s)){t=a;break}var i=e.value.substring(t+1),l=document.createElement("a");return l.href=e.value,l.target="_blank",l.textContent=i,l}return""}},{field:"begin_date_time",headerName:"BeginTime",valueGetter:function(e){const t=e.data.begin_date_time;if(!t)return"-";const a=new Date(t).toLocaleTimeString("en-US",{hour:"numeric",minute:"numeric",hour12:!0,timeZone:"Asia/Kolkata"});return a},sortable:!0,comparator:function(e,t){const a=new Date(e),s=new Date(t);return a<s?-1:a>s?1:0}},{field:"end_date_time",headerName:"EndTime",valueGetter:function(e){const t=e.data.end_date_time;if(!t)return"-";const a=new Date(t).toLocaleTimeString("en-US",{hour:"numeric",minute:"numeric",hour12:!0,timeZone:"Asia/Kolkata"});return a},sortable:!0,comparator:function(e,t){const a=new Date(e),s=new Date(t);return a<s?-1:a>s?1:0}},{field:"result",headerName:"Result"}],defaultColDef:{filter:!0,sortable:!0,resizable:!0,autoSize:!0,autoSizeColumns:!0},selectedRows:[]}},methods:{onRowClicked(e){this.$emit("rowClicked",e.data)},onSelectionChanged(e){const t=e.api.getSelectedRows(),a=t.length>0?t[0]:null;a?this.$emit("rowSelected",a):this.$emit("rowDeselected")},editButtonRenderer(e){console.log(e);const t=document.createElement("button");return t.innerHTML='<i class="fas fa-download"></i>',t.classList.add("btn-sm","btn-primary"),t.addEventListener("click",(()=>this.downloadFile(e.data.bom.bom_file_url))),t},downloadFile(e){const t=document.createElement("a");t.href=e,t.target="_blank",t.download="BOM_File",document.body.appendChild(t),t.click(),document.body.removeChild(t)},onEditClick(e){this.$router.push(`/bom/edit/${e}`)}}};const $A=(0,ut.Z)(BA,[["render",RA]]);var EA=$A,UA={components:{BoardReportGrid:EA},mounted(){},data(){return{boardNumber:"",boardLogs:[]}},methods:{searchBoard(){""!==this.boardNumber.trim()&&(this.$store.commit("setIsLoading",!0),tt.Z.get("machine-logs/get-board-logs",{params:{board_number:this.boardNumber.trim()}}).then((e=>{console.log(e.data),this.boardLogs=e.data.boardLogs,this.$store.commit("setIsLoading",!1),0===this.boardLogs.length&&this.$notify({title:"No Board Logs found for this serial number !",type:"bg-danger-subtle text-danger",duration:"5000"})})).catch((e=>{console.error(e),this.$store.commit("setIsLoading",!1)})))}}};const NA=(0,ut.Z)(UA,[["render",LA]]);var TA=NA;const OA={key:0,class:"container text-center"},AA={key:1,class:"container"},qA={class:"row align-items-center"},FA={class:"d-flex align-items-center mt-4"},jA=(0,i.uE)('<h2 class="mb-0">Machine Report</h2><span class="ms-3 fs-4 text-muted">|</span><nav aria-label="breadcrumb" class="d-inline-block ms-3"><ol class="breadcrumb bg-transparent m-0 p-0"><li class="breadcrumb-item"><a href="/machine-logs/dashboard"><i class="fas fa-home me-1"></i>Home</a></li><li class="breadcrumb-item active" aria-current="page"><i class="fas fa-microchip me-2"></i>Board Reports </li></ol></nav>',3),WA={class:"d-flex align-items-center ms-auto"},VA={class:"input-group me-3",style:{width:"250px"}},zA=(0,i._)("span",{class:"input-group-text"},"From Date",-1),ZA={class:"input-group me-3",style:{width:"220px"}},GA=(0,i._)("span",{class:"input-group-text"},"To Date",-1),HA=(0,i._)("i",{class:"fas fa-search"},null,-1),QA=[HA],YA=(0,i._)("i",{class:"fas fa-arrow-left"},null,-1),KA=[YA],JA={class:"card card-outline card-primary mt-5"},XA=(0,i._)("div",{class:"card-header"},[(0,i._)("h3",{class:"card-title",style:{"font-size":"20px"}},"Selected Machine:")],-1),eq={class:"card-body"},tq={class:"row"},aq={class:"col-md-6"},sq=(0,i._)("strong",null,"Selected Machine:",-1),iq={class:"col-md-6"},lq=(0,i._)("strong",null,"Machine Belongs To:",-1),nq={key:0},oq={key:1};function cq(e,t,a,l,n,o){const c=(0,i.up)("MachineReportGrid"),d=(0,i.up)("MachineListGrid");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",OA)):((0,i.wg)(),(0,i.iD)("div",AA,[(0,i._)("div",qA,[(0,i._)("div",FA,[jA,(0,i._)("div",WA,[(0,i._)("div",VA,[zA,(0,i.wy)((0,i._)("input",{type:"date",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=e=>n.fromDate=e)},null,512),[[s.nr,n.fromDate]])]),(0,i._)("div",ZA,[GA,(0,i.wy)((0,i._)("input",{type:"date",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=e=>n.toDate=e)},null,512),[[s.nr,n.toDate]])]),(0,i._)("button",{class:"btn btn-outline-primary me-2",type:"button",onClick:t[2]||(t[2]=(...e)=>o.searchByDateRange&&o.searchByDateRange(...e))},QA),n.showMachineReportGrid?((0,i.wg)(),(0,i.iD)("button",{key:0,class:"btn btn-outline-primary",onClick:t[3]||(t[3]=(...e)=>o.toggleGridView&&o.toggleGridView(...e))},KA)):(0,i.kq)("",!0)])])]),(0,i._)("div",JA,[XA,(0,i._)("div",eq,[(0,i._)("div",tq,[(0,i._)("div",aq,[sq,(0,i.Uk)(" "+(0,_t.zw)(this.selectedMachineObject?this.selectedMachineObject.name:"N/A"),1)]),(0,i._)("div",iq,[lq,(0,i.Uk)(" "+(0,_t.zw)(this.selectedMachineObject&&this.selectedMachineObject.line?this.selectedMachineObject.line.name:"N/A"),1)])])])]),n.showMachineReportGrid?((0,i.wg)(),(0,i.iD)("div",nq,[(0,i.Wm)(c,{style:{"margin-top":"40px"},machineReports:n.machineReports},null,8,["machineReports"])])):((0,i.wg)(),(0,i.iD)("div",oq,[(0,i.Wm)(d,{style:{"margin-top":"40px"},machinesList:n.machinesList,onMachineClicked:o.handleMachineClicked},null,8,["machinesList","onMachineClicked"])]))]))}function dq(e,t,a,s,l,n){const o=(0,i.up)("ag-grid-vue");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(o,{style:{height:"500px"},class:"ag-theme-quartz",rowData:a.machinesList,defaultColDef:l.defaultColDef,columnDefs:l.colDefs,pagination:!0,rowSelection:"single",onRowClicked:e.handleRowClicked,onSelectionChanged:n.handleSelectionChanged},null,8,["rowData","defaultColDef","columnDefs","onRowClicked","onSelectionChanged"])])}var rq={name:"App",components:{AgGridVue:ns.n},props:{machinesList:{type:Array,required:!0}},data(){return{colDefs:[{field:"name",headerCheckboxSelection:!0,checkboxSelection:!0,headerName:"Machine Name",width:375},{field:"line.name",headerName:"Line",width:375}],defaultColDef:{filter:!0,sortable:!0,resizable:!0,autoSize:!0,autoSizeColumns:!0},selectedRows:[]}},methods:{handleSelectionChanged(e){if("headerCheckbox"===e.source){const t=e.api.getSelectedNodes();0===t.length&&(e.api.deselectAll(),this.$emit("machineClicked",null))}else{const t=e.api.getSelectedRows();t.length>0?this.$emit("machineClicked",t[0]):this.$emit("machineClicked",null)}}}};const mq=(0,ut.Z)(rq,[["render",dq]]);var uq=mq;function hq(e,t,a,s,l,n){const o=(0,i.up)("ag-grid-vue");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(o,{style:{height:"500px"},class:"ag-theme-quartz",rowData:a.machineReports,defaultColDef:l.defaultColDef,columnDefs:l.colDefs,pagination:!0,rowSelection:"single",onRowClicked:n.onRowClicked,onSelectionChanged:n.onSelectionChanged},null,8,["rowData","defaultColDef","columnDefs","onRowClicked","onSelectionChanged"])])}var pq={name:"App",components:{AgGridVue:ns.n},props:{machineReports:{type:Array,required:!0}},data(){return{colDefs:[{field:"date",headerName:"Date",cellRenderer:function(e){const t=e.data.date;if(t){const[e,a,s]=t.split("-");return`${s}-${a}-${e}`}return""}},{field:"board_serial_number",headerName:"Board Serial No"},{field:"log_file_url",headerName:"Log File",filter:!0,cellRenderer:function(e){if(e.value){for(var t=-1,a=0,s=0;a<e.value.length;a++)if("/"===e.value[a]&&(s++,5===s)){t=a;break}var i=e.value.substring(t+1),l=document.createElement("a");return l.href=e.value,l.target="_blank",l.textContent=i,l}return""}},{field:"begin_date_time",headerName:"BeginTime",valueGetter:function(e){const t=e.data.begin_date_time;if(!t)return"-";const a=new Date(t).toLocaleTimeString("en-US",{hour:"numeric",minute:"numeric",hour12:!0,timeZone:"Asia/Kolkata"});return a},sortable:!0,comparator:function(e,t){const a=new Date(e),s=new Date(t);return a<s?-1:a>s?1:0}},{field:"end_date_time",headerName:"EndTime",valueGetter:function(e){const t=e.data.end_date_time;if(!t)return"-";const a=new Date(t).toLocaleTimeString("en-US",{hour:"numeric",minute:"numeric",hour12:!0,timeZone:"Asia/Kolkata"});return a},sortable:!0,comparator:function(e,t){const a=new Date(e),s=new Date(t);return a<s?-1:a>s?1:0}},{field:"result",headerName:"Result"}],defaultColDef:{filter:!0,sortable:!0,resizable:!0,autoSize:!0,autoSizeColumns:!0},selectedRows:[]}},methods:{onRowClicked(e){this.$emit("rowClicked",e.data)},onSelectionChanged(e){const t=e.api.getSelectedRows(),a=t.length>0?t[0]:null;a?this.$emit("rowSelected",a):this.$emit("rowDeselected")},editButtonRenderer(e){console.log(e);const t=document.createElement("button");return t.innerHTML='<i class="fas fa-download"></i>',t.classList.add("btn-sm","btn-primary"),t.addEventListener("click",(()=>this.downloadFile(e.data.bom.bom_file_url))),t},downloadFile(e){const t=document.createElement("a");t.href=e,t.target="_blank",t.download="BOM_File",document.body.appendChild(t),t.click(),document.body.removeChild(t)},onEditClick(e){this.$router.push(`/bom/edit/${e}`)}}};const bq=(0,ut.Z)(pq,[["render",hq]]);var gq=bq,fq={components:{MachineListGrid:uq,MachineReportGrid:gq},mounted(){this.getMachineData()},data(){return{fromDate:"",toDate:"",machinesList:"",selectedMachineId:null,selectedMachineObject:"",machineReports:"",showMachineReportGrid:!1}},methods:{getMachineData(){this.$store.commit("setIsLoading",!0),tt.Z.get("machine-logs/get-machine-list/").then((e=>{console.log(e.data),this.machinesList=e.data.machines,this.$store.commit("setIsLoading",!1)})).catch((e=>{console.error(e),this.$store.commit("setIsLoading",!1)}))},handleMachineClicked(e){e?(console.log("Machine ID being clicked:",e.id),console.log("Selected Row Object:",e),this.selectedMachineId=e.id,this.selectedMachineObject=e):(this.selectedMachineId=null,this.selectedMachineObject=null)},toggleGridView(){this.showMachineReportGrid=!this.showMachineReportGrid,this.selectedMachineObject=null},searchByDateRange(){if(!this.selectedMachineId)return void this.$notify({title:"Please Select a Machine!",type:"bg-danger-subtle text-danger",duration:"5000"});let e=`machine-logs/get-machine-reports-by-date-range?machineId=${this.selectedMachineId}`;this.fromDate&&(e+=`&fromDate=${this.fromDate}`),this.toDate&&(e+=`&toDate=${this.toDate}`),this.$store.commit("setIsLoading",!0),tt.Z.get(e).then((e=>{console.log(e.data),this.machineReports=e.data.machine_reports,this.showMachineReportGrid=!0,this.$store.commit("setIsLoading",!1),this.$notify({title:"Report Fetched Successfully!!",type:"bg-success-subtle text-success",duration:"5000"})})).catch((e=>{console.error(e),this.$store.commit("setIsLoading",!1),this.$notify({title:"Error Fetching Report",type:"bg-danger-subtle text-danger",duration:"5000"})}))}}};const _q=(0,ut.Z)(fq,[["render",cq]]);var vq=_q;const yq={key:0,class:"container text-center"},kq=(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1),wq=(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1),Cq=[kq,wq],Dq={key:1,class:"container"},Sq={class:"row align-items-center"},Mq=(0,i.uE)('<div class="col-md-6 mt-4"><div class="d-flex align-items-center"><h2 class="mb-0">Dashboard</h2><span class="ms-3 fs-4 text-muted">|</span><nav aria-label="breadcrumb" class="d-inline-block ms-3"><ol class="breadcrumb bg-transparent m-0 p-0"><li class="breadcrumb-item"><a href="/machine-logs/dashboard"><i class="fas fa-home me-1"></i>Home</a></li><li class="breadcrumb-item active" aria-current="page"><i class="fa fa-tachometer me-1" aria-hidden="true"></i> Dashboard </li></ol></nav></div></div>',1),Pq={class:"col-md-6 mt-4 text-end"},Iq={class:"container d-flex justify-content-end"},xq={class:"dropdown me-2"},Lq={class:"btn btn-secondary dropdown-toggle",type:"button",id:"lineDropdownButton","data-bs-toggle":"dropdown","aria-expanded":"false"},Rq={class:"dropdown-menu","aria-labelledby":"lineDropdownButton"},Bq=["onClick"],$q={class:"dropdown"},Eq={class:"btn btn-secondary dropdown-toggle",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"},Uq={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton1"},Nq=(0,i._)("a",{class:"dropdown-item",href:"#"},"Today",-1),Tq=[Nq],Oq=(0,i._)("a",{class:"dropdown-item",href:"#"},"Previous Week",-1),Aq=[Oq],qq=(0,i._)("a",{class:"dropdown-item",href:"#"},"Previous Month",-1),Fq=[qq],jq=(0,i._)("li",null,[(0,i._)("button",{type:"button",class:"btn","data-bs-toggle":"modal","data-bs-target":"#exampleModal"}," Custom Date ")],-1),Wq={class:"card card-outline card-primary mt-5"},Vq=(0,i._)("div",{class:"card-header"},[(0,i._)("h3",{class:"card-title",style:{"font-size":"24px"}},"SMT Line"),(0,i._)("div",{class:"card-tools"})],-1),zq={class:"card-body"},Zq={class:"row mt-4",style:{display:"flex",gap:"30px","justify-content":"space-between"}},Gq={class:"small-box bg-gradient-success",style:{flex:"1"}},Hq={class:"inner"},Qq=(0,i._)("p",null,"Number of AOI reports",-1),Yq={class:"small-box bg-gradient-primary",style:{flex:"1"}},Kq={class:"inner"},Jq=(0,i._)("p",null,"Number of P&P reports",-1),Xq={class:"small-box bg-gradient-danger",style:{flex:"1"}},eF={class:"inner"},tF=(0,i._)("p",null,"Number of SPI reports",-1),aF={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},sF={class:"modal-dialog"},iF={class:"modal-content"},lF=(0,i._)("div",{class:"modal-header"},[(0,i._)("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},[(0,i._)("strong",null,"Custom Date Range")]),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),nF={class:"modal-body"},oF={class:"mb-3"},cF=(0,i._)("label",{for:"startDate",class:"form-label"},"Start Date:",-1),dF={class:"mb-3"},rF=(0,i._)("label",{for:"endDate",class:"form-label"},"End Date:",-1),mF={key:0,class:"alert alert-danger mt-3 p-2"},uF=(0,i._)("i",{class:"fas fa-exclamation-triangle"},null,-1),hF={class:"modal-footer"},pF=(0,i._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1),bF=["disabled"];function gF(e,t,a,l,n,o){return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",yq,Cq)):((0,i.wg)(),(0,i.iD)("div",Dq,[(0,i._)("div",Sq,[Mq,(0,i._)("div",Pq,[(0,i._)("div",Iq,[(0,i._)("div",xq,[(0,i._)("button",Lq,(0,_t.zw)(n.selectedLine?n.selectedLine.name:"Select Line"),1),(0,i._)("ul",Rq,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.lines,(e=>((0,i.wg)(),(0,i.iD)("li",{key:e.id},[(0,i._)("a",{class:"dropdown-item",href:"#",onClick:t=>o.selectLine(e)},(0,_t.zw)(e.name),9,Bq)])))),128))])]),(0,i._)("div",$q,[(0,i._)("button",Eq,(0,_t.zw)("Previous_Week"===n.selectedOption?"Previous Week":"Previous_Month"===n.selectedOption?"Previous Month":n.selectedOption),1),(0,i._)("ul",Uq,[(0,i._)("li",{onClick:t[0]||(t[0]=e=>o.selectOption("Today")),class:(0,_t.C_)({active:"Today"===n.selectedOption})},Tq,2),(0,i._)("li",{onClick:t[1]||(t[1]=e=>o.selectOption("Previous_Week")),class:(0,_t.C_)({active:"Previous_Week"===n.selectedOption})},Aq,2),(0,i._)("li",{onClick:t[2]||(t[2]=e=>o.selectOption("Previous_Month")),class:(0,_t.C_)({active:"Previous_Month"===n.selectedOption})},Fq,2),jq])])])])]),(0,i._)("div",Wq,[Vq,(0,i._)("div",zq,[(0,i._)("div",Zq,[(0,i._)("div",Gq,[(0,i._)("div",Hq,[(0,i._)("h3",null,(0,_t.zw)(this.aoi_count),1),Qq])]),(0,i._)("div",Yq,[(0,i._)("div",Kq,[(0,i._)("h3",null,(0,_t.zw)(this.pp_count),1),Jq])]),(0,i._)("div",Xq,[(0,i._)("div",eF,[(0,i._)("h3",null,(0,_t.zw)(this.spi_count),1),tF])])])])]),(0,i._)("div",aF,[(0,i._)("div",sF,[(0,i._)("div",iF,[lF,(0,i._)("div",nF,[(0,i._)("div",oF,[cF,(0,i.wy)((0,i._)("input",{id:"startDate",type:"date","onUpdate:modelValue":t[3]||(t[3]=e=>n.selectedStartDate=e),class:"form-control",placeholder:"Select start date",onInput:t[4]||(t[4]=(...e)=>o.validateDates&&o.validateDates(...e))},null,544),[[s.nr,n.selectedStartDate]])]),(0,i._)("div",dF,[rF,(0,i.wy)((0,i._)("input",{id:"endDate",type:"date","onUpdate:modelValue":t[5]||(t[5]=e=>n.selectedEndDate=e),class:"form-control",placeholder:"Select end date",onInput:t[6]||(t[6]=(...e)=>o.validateDates&&o.validateDates(...e))},null,544),[[s.nr,n.selectedEndDate]])]),n.errorMessage?((0,i.wg)(),(0,i.iD)("div",mF,[uF,(0,i.Uk)(" "+(0,_t.zw)(n.errorMessage),1)])):(0,i.kq)("",!0)]),(0,i._)("div",hF,[pF,(0,i._)("button",{type:"button",class:"btn btn-success",onClick:t[7]||(t[7]=(...e)=>o.setSelectedOptionAndFetchData&&o.setSelectedOptionAndFetchData(...e)),disabled:o.isFetchButtonDisabled,"data-bs-dismiss":"modal"}," Fetch Machine Logs ",8,bF)])])])])]))}var fF={data(){return{selectedOption:"Today",result:{},selectedCustomDate:null,selectedStartDate:"",selectedEndDate:"",errorMessage:"",lines:"",selectedLine:"",selectedLineId:null,pp_count:"",spi_count:"",aoi_count:""}},computed:{isFetchButtonDisabled(){return!this.selectedStartDate||!this.selectedEndDate||new Date(this.selectedStartDate)>new Date(this.selectedEndDate)||new Date(this.selectedStartDate)>new Date||new Date(this.selectedEndDate)>new Date}},methods:{selectLine(e){this.selectedLine=e,this.selectedLineId=e.id,this.fetchData()},validateDates(){if(!this.selectedStartDate)return void(this.errorMessage="Please select a start date.");const e=new Date(this.selectedStartDate),t=new Date;if(e>t)return void(this.errorMessage="Start date cannot be in the future.");if(!this.selectedEndDate)return void(this.errorMessage="");const a=new Date(this.selectedEndDate);this.errorMessage=e>a?"Start date cannot be greater than end date.":a>t?"End date cannot be in the future.":""},selectOption(e){this.selectedOption=e,"Custom"!==this.selectOption&&this.fetchData()},async fetchData(){const e={selected_option:this.selectedOption,start_date:this.selectedStartDate,end_date:this.selectedEndDate,selected_line_id:this.selectedLineId};console.log(e.selected_option),console.log(e.start_date),console.log(e.end_date),console.log(e.selected_line_id),this.$store.commit("setIsLoading",!0),await tt.Z.post("machine-logs/get-machineLogs-count/",e).then((e=>{this.result=e.data,this.lines=e.data.lines,this.pp_count=e.data.pp_count,this.spi_count=e.data.spi_count,this.aoi_count=e.data.aoi_count,console.log("backend data",this.result),this.$store.commit("setIsLoading",!1)})).catch((e=>{console.error(e),this.$store.commit("setIsLoading",!1)}))},setSelectedOptionAndFetchData(){this.selectedOption="Custom",this.validateDates(),""===this.errorMessage&&this.fetchData()}},mounted(){this.fetchData()}};const _F=(0,ut.Z)(fF,[["render",gF]]);var vF=_F;const yF=[{path:"/",name:"Home",component:ff},{path:"/login",name:"LoginForm",component:Rt},{path:"/bom",name:"BomLanding",component:us},{path:"/bom/upload",name:"UploadBom",component:Wa},{path:"/CheckList",name:"CheckListOrderBased",component:SI,props:!0},{path:"/reports",name:"ReportsList",component:Tb},{path:"/dashboard",name:"CheckListsDashboard",component:ff},{path:"/checklist-report",name:"ChecklistReport",component:a_},{path:"/bom/edit/:id",name:"BomLineLevel",component:ii,props:!0},{path:"/begin-checklist/:id",name:"begin-checklist",component:dc,props:!0},{path:"/begin-checklist-new/:id",name:"begin-checklist-new",component:vm,props:!0},{path:"/generated-checklists/:id",name:"generated-checklist",component:Wm,props:!0},{path:"/checklist-details/:id",name:"checklist-details",component:xb,props:!0},{path:"/users",name:"users",component:R_},{path:"/users/edit-user/:id",name:"EditUser",component:Gk},{path:"/users/create-user",name:"CreateUser",component:pC},{path:"/bom-line-item/edit/:id",name:"BomLineItemEdit",component:oy,props:e=>({bom_id:e.params.id})},{path:"/orders",name:"OrdersLanding",component:LC},{path:"/orders/create",name:"OrderCreation",component:HD},{path:"/projects",name:"ProjectsLanding",component:_S},{path:"/projects/create-project",name:"CreateProject",component:VM},{path:"/project-edit/:id",name:"ProjectEdit",component:_M,props:!0},{path:"/product/edit/:id",name:"ProductEdit",component:NP,props:!0},{path:"/new",name:"CheckList",component:Bi,props:!0},{path:"/iqc",name:"IqcLanding",component:VI,props:!0},{path:"/iqc-for-checklist/:id",name:"IqcForChecklist",component:pL,props:!0},{path:"/project-pricing",name:"ProjectPricing",component:cR},{path:"/machine/create-maintenance-calendar",name:"CreateMaintenanceCalendar",component:LE},{path:"/machine/mark-maintenance-plan",name:"MarkMaintenancePlan",component:JE},{path:"/machine/calendar-yearly-view",name:"CalendarYearlyView",component:kU},{path:"/machine/report-generation",name:"ReportGeneration",component:nN},{path:"/calendar-monthly-view",name:"CalendarMonthlyView",component:QB,props:e=>({lineId:e.query.lineId,machineId:e.query.machineId})},{path:"/machine/plan-creation",name:"PlanCreation",component:RT},{path:"/machine/machine-list",name:"MachineList",component:AT},{path:"/defect-recognition/:id",name:"DefectRecognition",component:RO},{path:"/test",name:"TestPage",component:AO},{path:"/inspection-boards",name:"InspectionBoards",component:_A},{path:"/machine-logs/board-report",name:"BoardReportLanding",component:TA},{path:"/machine-logs/machine-report",name:"MachineReportLanding",component:vq},{path:"/machine-logs/dashboard",name:"MachineLogsDashboard",component:vF}],kF=(0,Ut.p7)({history:(0,Ut.PO)("/"),routes:yF});var wF=kF,CF=a(65);const DF=(0,CF.MT)({state:{user:{token:"",isAuthenticated:!1,username:"",password:"",first_name:"",last_name:"",email:"",is_staff:!1,is_superuser:!1,is_store_team:!1,is_design_team:!1,is_machine_maintenance_supervisor_team:!1,is_machine_maintenance_staff_team:!1},isLoading:!1},mutations:{initializeStore(e){if(localStorage.getItem("token")){e.user.token=localStorage.getItem("token"),tt.Z.defaults.headers.common["Authorization"]="Token "+e.user.token,e.user.isAuthenticated=!0;const t=localStorage.getItem("userDetails");if(t){const a=JSON.parse(t);e.user.first_name=a.first_name,e.user.last_name=a.last_name,e.user.email=a.email,e.user.is_staff=a.is_staff,e.user.is_superuser=a.is_superuser,e.user.is_store_team=a.is_store_team,e.user.is_design_team=a.is_design_team,e.user.is_machine_maintenance_supervisor_team=a.is_machine_maintenance_supervisor_team,e.user.is_machine_maintenance_staff_team=a.is_machine_maintenance_staff_team}}else e.user.token="",e.user.isAuthenticated=!1;e.isLoading=!1},setToken(e,t){e.user.token=t,tt.Z.defaults.headers.common["Authorization"]="Token "+e.user.token,e.user.isAuthenticated=!0},setUserDetails(e,t){e.user.first_name=t.first_name,e.user.last_name=t.last_name,e.user.email=t.email,e.user.is_staff=t.is_staff,e.user.is_superuser=t.is_superuser,e.user.is_store_team=t.is_store_team,e.user.is_design_team=t.is_design_team,e.user.is_machine_maintenance_supervisor_team=t.is_machine_maintenance_supervisor_team,e.user.is_machine_maintenance_staff_team=t.is_machine_maintenance_staff_team},setIsLoading(e,t){e.isLoading=t},removeToken(e){e.user.token="",e.user.first_name="",e.user.last_name="",e.user.email="",e.user.is_staff=!1,e.user.is_superuser=!1,e.user.is_store_team=!1,e.user.is_design_team=!1,e.user.is_machine_maintenance_supervisor_team=!1,e.user.is_machine_maintenance_staff_team=!1,e.user.isAuthenticated=!1,localStorage.removeItem("token"),localStorage.removeItem("userDetails"),tt.Z.defaults.headers.common["Authorization"]=""},setAuthentication(e,t){e.user.isAuthenticated=t}},actions:{},modules:{}});DF.commit("initializeStore");var SF=DF,MF=a(1037);a(8830),a(5572);let PF="";tt.Z.defaults.baseURL="https://sfcsdev.xtractautomation.com/api/v1/",PF="wss://sfcsdev.xtractautomation.com/ws/";const IF=(0,s.ri)(Et);IF.config.globalProperties.$websocketURL=PF,IF.use(SF).use(wF).use(MF.ZP),IF.mount("#app")}},t={};function a(s){var i=t[s];if(void 0!==i)return i.exports;var l=t[s]={exports:{}};return e[s].call(l.exports,l,l.exports,a),l.exports}a.m=e,function(){var e=[];a.O=function(t,s,i,l){if(!s){var n=1/0;for(r=0;r<e.length;r++){s=e[r][0],i=e[r][1],l=e[r][2];for(var o=!0,c=0;c<s.length;c++)(!1&l||n>=l)&&Object.keys(a.O).every((function(e){return a.O[e](s[c])}))?s.splice(c--,1):(o=!1,l<n&&(n=l));if(o){e.splice(r--,1);var d=i();void 0!==d&&(t=d)}}return t}l=l||0;for(var r=e.length;r>0&&e[r-1][2]>l;r--)e[r]=e[r-1];e[r]=[s,i,l]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,s){var i,l,n=s[0],o=s[1],c=s[2],d=0;if(n.some((function(t){return 0!==e[t]}))){for(i in o)a.o(o,i)&&(a.m[i]=o[i]);if(c)var r=c(a)}for(t&&t(s);d<n.length;d++)l=n[d],a.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return a.O(r)},s=self["webpackChunksfcs_checklist"]=self["webpackChunksfcs_checklist"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(1645)}));s=a.O(s)})();
//# sourceMappingURL=app.6418e231.js.map