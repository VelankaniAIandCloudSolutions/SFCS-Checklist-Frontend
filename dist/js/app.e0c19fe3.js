(function(){"use strict";var e={9453:function(e,t,s){var a=s(9242),i=s(3396);const l={key:0,id:"app"},o={key:1};function r(e,t,s,a,r,c){const d=(0,i.up)("LoginForm"),n=(0,i.up)("AdminLte"),u=(0,i.up)("notifications");return(0,i.wg)(),(0,i.iD)("div",null,[e.$store.state.user.isAuthenticated?((0,i.wg)(),(0,i.iD)("div",o,[(0,i.Wm)(n)])):((0,i.wg)(),(0,i.iD)("div",l,[(0,i.Wm)(d)])),(0,i.Wm)(u,{position:"bottom right",classes:"alert"})])}const c=e=>((0,i.dD)("data-v-2c2486b4"),e=e(),(0,i.Cn)(),e),d={class:"wrapper"},n={class:"main-header navbar navbar-expand navbar-white navbar-light"},u={class:"navbar-nav"},m=c((()=>(0,i._)("li",{class:"nav-item"},[(0,i._)("a",{class:"nav-link","data-widget":"pushmenu",href:"#",role:"button"},[(0,i._)("i",{class:"fas fa-bars"})])],-1))),h={class:"nav-item"},p=c((()=>(0,i._)("i",{class:"fas fa-home"},null,-1))),b={class:"navbar-nav ml-auto"},f={class:"nav-item"},_=c((()=>(0,i._)("i",{class:"fas fa-sign-out-alt"},null,-1))),g=[_],y={class:"main-sidebar sidebar-dark-primary elevation-4"},v=c((()=>(0,i._)("a",{href:"/",class:"brand-link"},[(0,i._)("img",{src:"https://content.jdmagicbox.com/comp/bangalore/73/080ppe03673/catalogue/velankani-software-pvt-ltd-electronic-city-bangalore-computer-software-developers-2rgz2h5-250.jpg",alt:"AdminLTE Logo",class:"brand-image img-circle elevation-3",style:{opacity:"0.8"}}),(0,i._)("span",{class:"brand-text font-weight-light"},"Velankani SFCS")],-1))),k={class:"sidebar"},w={class:"mt-2"},C={class:"nav nav-pills nav-sidebar flex-column","data-widget":"treeview",role:"menu","data-accordion":"false"},S={key:0,class:"nav-item text-left"},D=c((()=>(0,i._)("a",{href:"#",class:"nav-link"},[(0,i._)("i",{class:"nav-icon fas fa-users"}),(0,i._)("p",null,[(0,i.Uk)(" Accounts "),(0,i._)("i",{class:"right fas fa-angle-left"})])],-1))),P={class:"nav nav-treeview"},I={class:"nav-item"},x=c((()=>(0,i._)("i",{class:"fas fa-user-plus nav-icon"},null,-1))),R=c((()=>(0,i._)("p",null,"Users",-1))),$={key:1,class:"nav-item text-left"},L=c((()=>(0,i._)("a",{href:"#",class:"nav-link"},[(0,i._)("i",{class:"nav-icon fas fa-store"}),(0,i._)("p",null,[(0,i.Uk)(" Store "),(0,i._)("i",{class:"right fas fa-angle-left"})])],-1))),B={class:"nav nav-treeview"},U={class:"nav-item"},O=c((()=>(0,i._)("i",{class:"fas fa-chart-line nav-icon"},null,-1))),N=c((()=>(0,i._)("p",null,"Dashboard",-1))),j={class:"nav-item"},M=c((()=>(0,i._)("i",{class:"fas fa-list-ul nav-icon"},null,-1))),E=c((()=>(0,i._)("p",null,"Checklist",-1))),T={class:"nav-item"},q=c((()=>(0,i._)("i",{class:"fas fa-chart-bar nav-icon"},null,-1))),A=c((()=>(0,i._)("p",null,"Reports",-1))),F={key:2,class:"nav-item text-left"},W=c((()=>(0,i._)("a",{href:"#",class:"nav-link"},[(0,i._)("i",{class:"nav-icon fas fa-shopping-cart"}),(0,i._)("p",null,[(0,i.Uk)(" Orders "),(0,i._)("i",{class:"right fas fa-angle-left"})])],-1))),V={class:"nav nav-treeview"},Z={class:"nav-item"},G=c((()=>(0,i._)("i",{class:"fas fa-receipt nav-icon"},null,-1))),z=c((()=>(0,i._)("p",null,"Orders",-1))),Q={key:3,class:"nav-item text-left"},H=c((()=>(0,i._)("a",{href:"#",class:"nav-link"},[(0,i._)("i",{class:"nav-icon fas fa-industry"}),(0,i._)("p",null,[(0,i.Uk)(" Material Management "),(0,i._)("i",{class:"right fas fa-angle-left"})])],-1))),Y={class:"nav nav-treeview"},K={class:"nav-item"},J=c((()=>(0,i._)("i",{class:"fas fa-clipboard-list nav-icon"},null,-1))),X=c((()=>(0,i._)("p",null,"Bill Of Materials",-1))),ee={class:"nav-item"},te=c((()=>(0,i._)("i",{class:"fas fa-project-diagram nav-icon"},null,-1))),se=c((()=>(0,i._)("p",null,"Projects",-1))),ae={class:"content-wrapper"};function ie(e,t,s,a,l,o){const r=(0,i.up)("router-link"),c=(0,i.up)("router-view");return(0,i.wg)(),(0,i.iD)("div",d,[(0,i._)("nav",n,[(0,i._)("ul",u,[m,(0,i._)("li",h,[(0,i.Wm)(r,{to:"/",class:"nav-link"},{default:(0,i.w5)((()=>[p])),_:1})])]),(0,i._)("ul",b,[(0,i._)("li",f,[(0,i._)("a",{href:"#",class:"nav-link",onClick:t[0]||(t[0]=(...e)=>o.logout&&o.logout(...e))},g)])])]),(0,i._)("aside",y,[v,(0,i._)("div",k,[(0,i._)("nav",w,[(0,i._)("ul",C,[e.$store.state.user.is_superuser?((0,i.wg)(),(0,i.iD)("li",S,[D,(0,i._)("ul",P,[(0,i._)("li",I,[(0,i.Wm)(r,{to:"/users",class:"nav-link"},{default:(0,i.w5)((()=>[x,R])),_:1})])])])):(0,i.kq)("",!0),e.$store.state.user.is_superuser||e.$store.state.user.is_store_team?((0,i.wg)(),(0,i.iD)("li",$,[L,(0,i._)("ul",B,[(0,i._)("li",U,[(0,i.Wm)(r,{to:"/dashboard",class:"nav-link"},{default:(0,i.w5)((()=>[O,N])),_:1})]),(0,i._)("li",j,[(0,i.Wm)(r,{to:"/checklist",class:"nav-link"},{default:(0,i.w5)((()=>[M,E])),_:1})]),(0,i._)("li",T,[(0,i.Wm)(r,{to:"/reports",class:"nav-link"},{default:(0,i.w5)((()=>[q,A])),_:1})])])])):(0,i.kq)("",!0),e.$store.state.user.is_superuser||e.$store.state.user.is_design_team?((0,i.wg)(),(0,i.iD)("li",F,[W,(0,i._)("ul",V,[(0,i._)("li",Z,[(0,i.Wm)(r,{to:"/orders",class:"nav-link"},{default:(0,i.w5)((()=>[G,z])),_:1})])])])):(0,i.kq)("",!0),e.$store.state.user.is_superuser||e.$store.state.user.is_design_team?((0,i.wg)(),(0,i.iD)("li",Q,[H,(0,i._)("ul",Y,[(0,i._)("li",K,[(0,i.Wm)(r,{to:"/bom",class:"nav-link"},{default:(0,i.w5)((()=>[J,X])),_:1})]),(0,i._)("li",ee,[(0,i.Wm)(r,{to:"/projects",class:"nav-link"},{default:(0,i.w5)((()=>[te,se])),_:1})])])])):(0,i.kq)("",!0)])])])]),(0,i._)("div",ae,[(0,i.Wm)(c)])])}var le=s(1076),oe={methods:{async logout(){await le.Z.post("token/logout/").then((e=>{console.log("Logged out",e.data),this.$store.commit("removeToken"),window.location.href="/login"})).catch((e=>{console.log(e)}))}}},re=s(89);const ce=(0,re.Z)(oe,[["render",ie],["__scopeId","data-v-2c2486b4"]]);var de=ce,ne=s(7139);const ue=e=>((0,i.dD)("data-v-60d7e883"),e=e(),(0,i.Cn)(),e),me={class:"container"},he={class:"login"},pe=ue((()=>(0,i._)("h1",null,"Velankani SFCS",-1))),be={class:"input-box"},fe=ue((()=>(0,i._)("i",{class:"fa fa-envelope"},null,-1))),_e={class:"input-box"},ge=["type"],ye=ue((()=>(0,i._)("button",{type:"submit"},"Login",-1)));function ve(e,t,s,l,o,r){return(0,i.wg)(),(0,i.iD)("div",me,[(0,i._)("div",he,[pe,(0,i._)("form",{onSubmit:t[3]||(t[3]=(0,a.iM)(((...e)=>r.handleSubmit&&r.handleSubmit(...e)),["prevent"]))},[(0,i._)("div",be,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>o.email=e),type:"email",placeholder:"Email"},null,512),[[a.nr,o.email]]),fe]),(0,i._)("div",_e,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>o.password=e),type:o.showPassword?"text":"password",placeholder:"Password"},null,8,ge),[[a.YZ,o.password]]),(0,i._)("i",{onClick:t[2]||(t[2]=(...e)=>r.togglePasswordVisibility&&r.togglePasswordVisibility(...e)),class:(0,ne.C_)(o.showPassword?"fa fa-eye-slash":"fa fa-eye")},null,2)]),ye],32)])])}s(560);var ke={data(){return{email:"",password:"",errors:[],showPassword:!1}},methods:{togglePasswordVisibility(){this.showPassword=!this.showPassword},async handleSubmit(){if(this.$store.commit("setIsLoading",!0),this.errors=[],""===this.email&&this.errors.push("The email is missing!"),""===this.password&&this.errors.push("The password is missing!"),this.errors.length)this.$store.commit("setIsLoading",!1);else{const e={email:this.email,password:this.password};await le.Z.post("token/login/",e).then((e=>{this.$notify({title:"Login successful",type:"bg-success-subtle text-success",duration:5e3}),setTimeout((async()=>{const t=e.data.auth_token;this.$store.commit("setToken",t),le.Z.defaults.headers.common["Authorization"]="Token "+t,localStorage.setItem("token",t),console.log("Received Token:",t);const s=await le.Z.get("accounts/user/authenticated/"),a=s.data;console.log("User Details:",a),localStorage.setItem("userDetails",JSON.stringify(a)),this.$store.commit("setUserDetails",a),window.location.href="/dashboard"}),1e3)})).catch((e=>{this.$notify({title:"Login failed. Please check your credentials.",type:"alert-danger",duration:5e3}),console.error("Login failed:",e.response.data),this.errors.push("Login failed. Please check your credentials.")})).finally((()=>{this.$store.commit("setIsLoading",!1)}))}}}};const we=(0,re.Z)(ke,[["render",ve],["__scopeId","data-v-60d7e883"]]);var Ce=we,Se={name:"App",components:{LoginForm:Ce,AdminLte:de},data(){return{isLoggedIn:!1}},computed:{activeRoute(){return this.$route.path}},methods:{}};const De=(0,re.Z)(Se,[["render",r]]);var Pe=De,Ie=(s(8052),s(2483));const xe=e=>((0,i.dD)("data-v-23b37642"),e=e(),(0,i.Cn)(),e),Re={key:0,class:"container text-center"},$e=xe((()=>(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1))),Le=xe((()=>(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1))),Be=[$e,Le],Ue={key:1,class:"container"},Oe={class:"row align-items-center"},Ne={class:"d-flex align-items-center mt-4"},je=xe((()=>(0,i._)("h2",{class:"mb-0"},"Upload Bill Of Materials",-1))),Me=xe((()=>(0,i._)("span",{class:"ms-3 fs-4 text-muted"},"|",-1))),Ee={"aria-label":"breadcrumb",class:"d-inline-block ms-3"},Te={class:"breadcrumb bg-transparent m-0 p-0"},qe=xe((()=>(0,i._)("li",{class:"breadcrumb-item"},[(0,i._)("a",{href:"/"},[(0,i._)("i",{class:"fas fa-home me-1"}),(0,i.Uk)("Home")])],-1))),Ae={class:"breadcrumb-item"},Fe=xe((()=>(0,i._)("i",{class:"fas fa-clipboard-list me-1"},null,-1))),We=xe((()=>(0,i._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,i._)("i",{class:"fas fa-upload me-1"}),(0,i.Uk)(" Upload the bom ")],-1))),Ve={class:"card p-3 mb-4 mt-4"},Ze={class:"row mb-3"},Ge={class:"col-md-6"},ze=xe((()=>(0,i._)("label",{for:"projectDropdown",class:"form-label"},"Select Project",-1))),Qe=["value"],He={class:"col-md-6"},Ye=xe((()=>(0,i._)("label",{for:"productCode",class:"form-label"},"Product ",-1))),Ke=["value"],Je={class:"row mb-3"},Xe={class:"col-md-6"},et=xe((()=>(0,i._)("label",{for:"bomType",class:"form-label"},"BOM Type",-1))),tt={class:"col-md-6"},st=xe((()=>(0,i._)("label",{for:"bomRevNo",class:"form-label"},"BOM REV No",-1))),at={class:"row mb-3 justify-content-center"},it={class:"col-md-6"},lt=xe((()=>(0,i._)("label",{for:"batchQuantity",class:"form-label"},[(0,i._)("i",{class:"fas fa-flask me-2"}),(0,i.Uk)("Batch Quantity ")],-1))),ot={class:"col-md-6"},rt=xe((()=>(0,i._)("label",{for:"issueDate",class:"form-label"},"Issue Date",-1))),ct={class:"card p-3 mb-4"},dt=xe((()=>(0,i._)("label",{for:"fileInput",class:"form-label"},[(0,i._)("i",{class:"fas fa-cloud-upload-alt mr-2"}),(0,i.Uk)(" Choose BOM Excel file ")],-1))),nt={class:"custom-file"},ut={class:"custom-file-label",for:"fileInput"},mt={class:"card p-3"};function ht(e,t,s,l,o,r){const c=(0,i.up)("router-link");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",Re,Be)):((0,i.wg)(),(0,i.iD)("div",Ue,[(0,i._)("div",Oe,[(0,i._)("div",Ne,[je,Me,(0,i._)("nav",Ee,[(0,i._)("ol",Te,[qe,(0,i._)("li",Ae,[(0,i.Wm)(c,{to:"/bom"},{default:(0,i.w5)((()=>[Fe,(0,i.Uk)(" Bill Of Materials ")])),_:1})]),We])])])]),(0,i._)("section",Ve,[(0,i._)("div",Ze,[(0,i._)("div",Ge,[ze,(0,i.wy)((0,i._)("select",{class:"form-select",id:"projectDropdown","onUpdate:modelValue":t[0]||(t[0]=e=>o.selectedProject=e),onChange:t[1]||(t[1]=(...t)=>e.loadProducts&&e.loadProducts(...t)),required:""},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.projects,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e.id,value:e.id},(0,ne.zw)(e.name),9,Qe)))),128))],544),[[a.bM,o.selectedProject]])]),(0,i._)("div",He,[Ye,(0,i.wy)((0,i._)("select",{class:"form-select",id:"productCode","onUpdate:modelValue":t[2]||(t[2]=e=>o.selectedProduct=e),required:""},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.filteredProducts,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e.id,value:e.id},(0,ne.zw)(e.name),9,Ke)))),128))],512),[[a.bM,o.selectedProduct]])])]),(0,i._)("div",Je,[(0,i._)("div",Xe,[et,(0,i.wy)((0,i._)("input",{type:"text",class:"form-control",id:"bomType","onUpdate:modelValue":t[3]||(t[3]=e=>o.bomType=e),required:""},null,512),[[a.nr,o.bomType]])]),(0,i._)("div",tt,[st,(0,i.wy)((0,i._)("input",{type:"text",class:"form-control",id:"bomRevNo","onUpdate:modelValue":t[4]||(t[4]=e=>o.bomRevNo=e),required:""},null,512),[[a.nr,o.bomRevNo]])])]),(0,i._)("div",at,[(0,i._)("div",it,[lt,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>o.batchQuantity=e),type:"number",class:"form-control",placeholder:"Enter Batch Quantity",min:"1",required:""},null,512),[[a.nr,o.batchQuantity]])]),(0,i._)("div",ot,[rt,(0,i.wy)((0,i._)("input",{type:"date",class:"form-control",id:"issueDate","onUpdate:modelValue":t[6]||(t[6]=e=>o.issueDate=e),required:""},null,512),[[a.nr,o.issueDate]])])])]),(0,i._)("div",ct,[dt,(0,i._)("div",nt,[(0,i._)("input",{type:"file",class:"custom-file-input",id:"fileInput",onChange:t[7]||(t[7]=(...e)=>r.handleFileUpload&&r.handleFileUpload(...e)),accept:".xls, .xlsx",required:""},null,32),(0,i._)("label",ut,(0,ne.zw)(o.uploadedFileName||"Select file"),1)])]),(0,i._)("div",mt,[(0,i._)("button",{type:"button",class:"btn btn-primary",onClick:t[8]||(t[8]=(...e)=>r.submitForm&&r.submitForm(...e))}," Upload BOM ")])]))}var pt={data(){return{productName:"",productCode:"",bomType:"",bomRevNo:"",issueDate:"",batchQuantity:1,productRevNo:"",uploadedFileName:null,uploadedFile:null,selectedProject:null,selectedProduct:null,projects:[],products:[]}},computed:{filteredProducts(){if(this.products&&this.projects&&this.products.length&&this.projects.length){if(console.log("selectedProject",this.selectedProject),null!==this.selectedProject){const e=this.products.filter((e=>{const t=e.project;return t===this.selectedProject}));return console.log("Filtered Products:",e),e}return console.log("All Products:",this.products),[]}return console.log("No Products or Projects available."),[]}},mounted(){this.getData()},methods:{async getData(){try{const e=await le.Z.get("store/create-order/");console.log(e.data),this.projects=e.data.projects,this.projects=e.data.projects,this.products=e.data.products,console.log(this.projects)}catch(e){console.error("Error fetching projects:",e)}},async submitForm(){this.$store.commit("setIsLoading",!0);const e=new FormData;console.log("Form Data:",{selectedProjectId:this.selectedProject,selectedProductName:this.selectedProduct,bomType:this.bomType,bomRevNo:this.bomRevNo,issueDate:this.issueDate,uploadedFileName:this.uploadedFileName,batchQuantity:this.batchQuantity}),e.append("project_id",this.selectedProject),e.append("product_id",this.selectedProduct),e.append("bom_type",this.bomType),e.append("bom_rev_no",this.bomRevNo),e.append("issue_date",this.issueDate),e.append("batch_quantity",this.batchQuantity),e.append("bom_file",this.uploadedFile),console.log("Form Data:",e),await le.Z.post("store/upload-bom/",e,{headers:{"Content-Type":"multipart/form-data"}}).then((e=>{console.log(e.data);const t=e.data.task_id;"IN PROGRESS"===e.data.task_status||"PENDING"===e.data.task_status?setTimeout((()=>{this.checkTaskStatus(t)}),1e4):"SUCCESS"===e.data.task_status?(this.$store.commit("setIsLoading",!1),this.$notify({title:"BOM Uploaded Successfully",type:"bg-success-subtle text-success",duration:"5000"}),this.$router.push("/bom")):(this.$notify({title:"BOM Upload Failed",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1))})).catch((e=>{console.log("error:",e),this.$notify({title:"An error occured, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1)}))},async checkTaskStatus(e){try{const t=await le.Z.get(`store/check-task-status/${e}/`);"IN PROGRESS"===t.data.task_status||"PENDING"===t.data.task_status?setTimeout((()=>{this.checkTaskStatus(e)}),5e3):"SUCCESS"===t.data.task_status?(this.$notify({title:"BOM Uploaded Successfully",type:"bg-success-subtle text-success",duration:"5000"}),this.$router.push("/bom"),this.$store.commit("setIsLoading",!1)):(this.$notify({title:"BOM Upload Failed",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1))}catch(t){console.log("error:",t),this.$notify({title:"An error occurred, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1)}},handleFileUpload(e){const t=e.target.files[0];t&&(console.log("Uploaded file:",t),this.uploadedFileName=t.name,this.uploadedFile=t)}}};const bt=(0,re.Z)(pt,[["render",ht],["__scopeId","data-v-23b37642"]]);var ft=bt;const _t={key:0,class:"container text-center"},gt=(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1),yt=(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1),vt=[gt,yt],kt={key:1,class:"container"},wt={class:"row align-items-center"},Ct=(0,i.uE)('<div class="col-md-6 mt-4"><div class="d-flex align-items-center"><h2 class="mb-0">Bill Of Materials</h2><span class="ms-3 fs-4 text-muted">|</span><nav aria-label="breadcrumb" class="d-inline-block ms-3"><ol class="breadcrumb bg-transparent m-0 p-0"><li class="breadcrumb-item"><a href="/"><i class="fas fa-home me-1"></i>Home</a></li><li class="breadcrumb-item active" aria-current="page"><i class="fas fa-clipboard-list me-1"></i> Bill Of Materials </li></ol></nav></div></div>',1),St={class:"col-md-6 d-flex justify-content-end mt-4"};function Dt(e,t,s,a,l,o){const r=(0,i.up)("router-link"),c=(0,i.up)("BomDetailsTable");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",_t,vt)):((0,i.wg)(),(0,i.iD)("div",kt,[(0,i._)("div",wt,[Ct,(0,i._)("div",St,[(0,i.Wm)(r,{to:"/bom/upload",class:"btn btn-primary btn-sm ms-2"},{default:(0,i.w5)((()=>[(0,i.Uk)(" Upload BOM ")])),_:1})])]),(0,i.Wm)(c,{style:{"margin-top":"20px"},boms:l.boms,onRowClicked:o.handleRowClicked,onRowSelected:o.handleRowSelected},null,8,["boms","onRowClicked","onRowSelected"])]))}function Pt(e,t,s,a,l,o){const r=(0,i.up)("ag-grid-vue");return(0,i.wg)(),(0,i.iD)("div",null,[s.boms.length>0?((0,i.wg)(),(0,i.j4)(r,{key:0,style:{height:"500px"},class:"ag-theme-quartz",rowData:s.boms,defaultColDef:l.defaultColDef,columnDefs:l.colDefs,pagination:!0,onRowClicked:o.onRowClicked,onRowSelected:o.onRowSelected},null,8,["rowData","defaultColDef","columnDefs","onRowClicked","onRowSelected"])):(0,i.kq)("",!0)])}var It=s(6732),xt={name:"BombDetailsTable",components:{AgGridVue:It.n},props:{boms:{type:Array,required:!0}},data(){return{colDefs:[{field:"id",hide:!0},{field:"product.project.name",headerCheckboxSelection:!0,checkboxSelection:!0,headerName:"Project Name"},{field:"product.name",headerName:"Product Name"},{field:"product.product_code",headerName:"Product Code"},{field:"bom_type.name",headerName:"BOM Type"},{field:"bom_rev_number",headerName:"BOM Rev No"},{field:"issue_date",headerName:"Issue Date"},{field:"product.product_rev_number",headerName:"Product Rev No"},{headerName:"Actions",cellRenderer:this.editButtonRenderer}],defaultColDef:{filter:!0,sortable:!0,resizable:!0,autoSize:!0},selectedRows:[]}},methods:{onRowClicked(e){this.$emit("rowClicked",e.data),this.$router.push(`/bom/edit/${e.data.id}`)},onRowSelected(e){e.node.isSelected()&&this.$emit("rowSelected",e.node.data)},onSelectionChanged(){this.$refs.agGrid&&this.$refs.agGrid.api&&(this.selectedRows=this.$refs.agGrid.api.getSelectedRows())},editButtonRenderer(e){console.log(e);const t=document.createElement("button");return t.innerHTML='<i class="fas fa-edit"></i>',t.classList.add("btn","btn-primary"),t.addEventListener("click",(()=>this.onEditClick(e.data.id))),t},onEditClick(e){this.$router.push(`/bom/edit/${e}`)}}};const Rt=(0,re.Z)(xt,[["render",Pt],["__scopeId","data-v-1201045e"]]);var $t=Rt,Lt={components:{BomDetailsTable:$t},data(){return{boms:[]}},methods:{async fetchData(){try{this.$store.commit("setIsLoading",!0);const e=await le.Z.get("store/get-boms/");console.log("response.data",e.data),this.boms=e.data.boms,console.log("boms",this.boms),this.$store.commit("setIsLoading",!1)}catch(e){console.error("Error fetching BOM data:",e),this.$store.commit("setIsLoading",!1)}},handleRowClicked(e){console.log("Clicked Row:",e)},handleRowSelected(e){console.log("Row Selected:",e),this.selectedRow=e}},mounted(){this.fetchData()}};const Bt=(0,re.Z)(Lt,[["render",Dt]]);var Ut=Bt;const Ot=e=>((0,i.dD)("data-v-48a9a674"),e=e(),(0,i.Cn)(),e),Nt={key:0,class:"container text-center"},jt=Ot((()=>(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1))),Mt=Ot((()=>(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1))),Et=[jt,Mt],Tt={key:1,class:"container"},qt={class:"row align-items-center"},At={class:"d-flex align-items-center mt-4"},Ft=Ot((()=>(0,i._)("h2",{class:"mb-0"},"BOM Details",-1))),Wt=Ot((()=>(0,i._)("span",{class:"ms-3 fs-4 text-muted"},"|",-1))),Vt={"aria-label":"breadcrumb",class:"d-inline-block ms-3"},Zt={class:"breadcrumb bg-transparent m-0 p-0"},Gt=Ot((()=>(0,i._)("li",{class:"breadcrumb-item"},[(0,i._)("a",{href:"/"},[(0,i._)("i",{class:"fas fa-home me-1"}),(0,i.Uk)("Home")])],-1))),zt={class:"breadcrumb-item"},Qt=Ot((()=>(0,i._)("i",{class:"fas fa-clipboard-list me-1"},null,-1))),Ht=Ot((()=>(0,i._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,i._)("i",{class:"fas fa-list-alt me-1"}),(0,i.Uk)(" Bom Details ")],-1))),Yt={class:"card",style:{"margin-top":"20px"}},Kt={class:"card-body"},Jt={class:"row"},Xt={class:"col-md-6"},es={class:"mb-3"},ts=Ot((()=>(0,i._)("label",{class:"fw-bold"},"Product Name:",-1))),ss={key:0},as={class:"mb-3"},is=Ot((()=>(0,i._)("label",{class:"fw-bold"},"BOM Type:",-1))),ls={key:0},os={class:"mb-3"},rs=Ot((()=>(0,i._)("label",{class:"fw-bold"},"Issue Date:",-1))),cs={key:0},ds={class:"col-md-6"},ns={class:"mb-3"},us=Ot((()=>(0,i._)("label",{class:"fw-bold"},"Product Code:",-1))),ms={key:0},hs={class:"mb-3"},ps=Ot((()=>(0,i._)("label",{class:"fw-bold"},"BOM Rev No:",-1))),bs={key:0},fs={class:"mb-3"},_s=Ot((()=>(0,i._)("label",{class:"fw-bold"},"Product Rev No:",-1))),gs={key:0},ys=Ot((()=>(0,i._)("div",{class:"mt-4"},null,-1)));function vs(e,t,s,a,l,o){const r=(0,i.up)("router-link"),c=(0,i.up)("BomItemsTable");return(0,i.wg)(),(0,i.iD)("div",null,[e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",Nt,Et)):((0,i.wg)(),(0,i.iD)("div",Tt,[(0,i._)("div",qt,[(0,i._)("div",At,[Ft,Wt,(0,i._)("nav",Vt,[(0,i._)("ol",Zt,[Gt,(0,i._)("li",zt,[(0,i.Wm)(r,{to:"/bom"},{default:(0,i.w5)((()=>[Qt,(0,i.Uk)("Bill of Materials")])),_:1})]),Ht])]),(0,i._)("button",{class:"btn btn-primary ml-auto",onClick:t[0]||(t[0]=(...e)=>o.downloadBOM&&o.downloadBOM(...e))}," Download BOM ")])]),(0,i._)("div",Yt,[(0,i._)("div",Kt,[(0,i._)("div",Jt,[(0,i._)("div",Xt,[(0,i._)("div",es,[ts,l.bom.product?((0,i.wg)(),(0,i.iD)("div",ss,(0,ne.zw)(l.bom.product.name),1)):(0,i.kq)("",!0)]),(0,i._)("div",as,[is,l.bom.bom_type?((0,i.wg)(),(0,i.iD)("div",ls,(0,ne.zw)(l.bom.bom_type.name),1)):(0,i.kq)("",!0)]),(0,i._)("div",os,[rs,l.bom.issue_date?((0,i.wg)(),(0,i.iD)("div",cs,(0,ne.zw)(l.bom.issue_date),1)):(0,i.kq)("",!0)])]),(0,i._)("div",ds,[(0,i._)("div",ns,[us,l.bom.product?((0,i.wg)(),(0,i.iD)("div",ms,(0,ne.zw)(l.bom.product.product_code),1)):(0,i.kq)("",!0)]),(0,i._)("div",hs,[ps,l.bom.bom_rev_number?((0,i.wg)(),(0,i.iD)("div",bs,(0,ne.zw)(l.bom.bom_rev_number),1)):(0,i.kq)("",!0)]),(0,i._)("div",fs,[_s,l.bom.product?((0,i.wg)(),(0,i.iD)("div",gs,(0,ne.zw)(l.bom.product.product_rev_number),1)):(0,i.kq)("",!0)])])])])]),ys,(0,i.Wm)(c,{bom:l.bom.bom_line_items,onRowClicked:o.handleRowClicked,onRowSelected:o.handleRowSelected},null,8,["bom","onRowClicked","onRowSelected"])]))])}function ks(e,t,s,a,l,o){const r=(0,i.up)("ag-grid-vue");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(r,{style:{height:"500px"},class:"ag-theme-quartz",rowData:s.bom,defaultColDef:l.defaultColDef,columnDefs:l.colDefs,pagination:!0,onRowClicked:o.onRowClicked,frameworkComponents:{editButtonRenderer:o.editButtonRenderer}},null,8,["rowData","defaultColDef","columnDefs","onRowClicked","frameworkComponents"])])}var ws={name:"BomItemDetails",components:{AgGridVue:It.n},props:{bom:{type:Array,required:!0}},data(){return{colDefs:[{headerName:"ID",field:"id",hide:!0},{headerName:" Level",field:"level"},{headerName:"VEPL Part Number",field:"part_number"},{headerName:"Priority Level",field:"priority_level"},{headerName:"Value",field:"value"},{headerName:"PCB Footprint",field:"pcb_footprint"},{headerName:"Type",field:"line_item_type.name"},{headerName:"Description",field:"description"},{headerName:"References",valueGetter:function(e){const t=e.data.references;if(t&&t.length>0){const e=t.map((e=>e.name));return e.join(", ")}return""}},{headerName:"Manufacturer Parts",valueGetter:function(e){const t=e.data.manufacturer_parts;if(t&&t.length>0){const e=t.map((e=>{const t=e.manufacturer;return t?`${e.part_number} - ${t.name}`:""}));return e.join(", ")}return""}},{headerName:"Customer Part Number",field:"customer_part_number"},{headerName:"Quantity",field:"quantity"},{headerName:"UOM",field:"uom"},{headerName:"Assembly Stage",field:"assembly_stage.name"},{headerName:"ECN",field:"ecn"},{headerName:"MSL",field:"msl"},{headerName:"Remarks",field:"remarks"},{headerName:"Actions",cellRenderer:this.editButtonRenderer}],defaultColDef:{filter:!0,sortable:!0,resizable:!0,autoSize:!0},selectedRows:[]}},mounted(){},methods:{onRowClicked(e){this.$emit("rowClicked",e.data)},onRowSelected(e){e.node.isSelected()&&this.$emit("rowSelected",e.node.data)},editButtonRenderer(e){const t=document.createElement("button");return t.innerHTML='<i class="fas fa-edit"></i>',t.classList.add("btn","btn-primary"),t.addEventListener("click",(()=>this.onEditClick(e.data.id))),t},onEditClick(e){this.$router.push({name:"BomLineItemEdit",params:{id:e}})}}};const Cs=(0,re.Z)(ws,[["render",ks]]);var Ss=Cs,Ds={components:{BomItemsTable:Ss},data(){return{bom:""}},methods:{handleRowClicked(e){console.log("Row clicked:",e)},handleRowSelected(e){console.log("Row selected:",e)},async fetchData(){this.$store.commit("setIsLoading",!0),await le.Z.get(`store/get-boms/${this.$route.params.id}/`).then((e=>{console.log(e.data),this.bom=e.data.bom,this.$store.commit("setIsLoading",!1)})).catch((e=>{console.error("Error fetching data:",e),this.$store.commit("setIsLoading",!1)}))},downloadBOM(){try{const e=this.bom.bom_file_url,t=document.createElement("a");t.href=e,t.download=this.bom.bom_file_name,document.body.appendChild(t),t.click(),document.body.removeChild(t)}catch(e){console.error("Error downloading BOM:",e)}}},mounted(){this.fetchData()}};const Ps=(0,re.Z)(Ds,[["render",vs],["__scopeId","data-v-48a9a674"]]);var Is=Ps;const xs={key:0,class:"container text-center"},Rs=(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1),$s=(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1),Ls=[Rs,$s],Bs={key:1,class:"container"},Us={class:"row align-items-center"},Os=(0,i.uE)('<div class="col-md-6 mt-4"><div class="d-flex align-items-center"><h2 class="mb-0">Checklist</h2><span class="ms-3 fs-4 text-muted">|</span><nav aria-label="breadcrumb" class="d-inline-block ms-3"><ol class="breadcrumb bg-transparent m-0 p-0"><li class="breadcrumb-item"><a href="/"><i class="fas fa-home me-1"></i>Home</a></li><li class="breadcrumb-item active" aria-current="page"><i class="fas fa-list-alt me-1"></i> Checklist </li></ol></nav></div></div>',1),Ns={class:"col-md-6 mt-4 text-end"},js={class:"container has-text-centered"},Ms={class:"d-flex"},Es=["disabled"],Ts=["disabled"],qs=["disabled"],As={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Fs={class:"modal-dialog"},Ws={class:"modal-content"},Vs=(0,i._)("div",{class:"modal-header"},[(0,i._)("h1",{class:"modal-title fs-5",id:"exampleModalLabel"}," Fill the Required Batch Quantity "),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Zs={class:"modal-body"},Gs={class:"modal-footer"},zs=(0,i._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1);function Qs(e,t,s,l,o,r){const c=(0,i.up)("BomDetailsTableWithoutEdit");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",xs,Ls)):((0,i.wg)(),(0,i.iD)("div",Bs,[(0,i._)("div",Us,[Os,(0,i._)("div",Ns,[(0,i._)("div",js,[(0,i._)("div",Ms,[(0,i._)("button",{type:"button",disabled:!o.isButtonEnabled,class:"btn btn-primary btn-sm","data-bs-toggle":"modal","data-bs-target":"#exampleModal"}," Generate New Checklist ",8,Es),(0,i._)("button",{onClick:t[0]||(t[0]=(...e)=>r.checkExistingChecklist&&r.checkExistingChecklist(...e)),disabled:!o.isButtonEnabled,class:"btn btn-warning btn-sm ms-2"}," View Ongoing Checklist ",8,Ts),(0,i._)("button",{onClick:t[1]||(t[1]=(...e)=>r.viewGeneratedChecklists&&r.viewGeneratedChecklists(...e)),disabled:!o.isButtonEnabled,class:"btn btn-success btn-sm ms-2"}," View Generated Checklists ",8,qs)])])])]),(0,i.Wm)(c,{style:{"margin-top":"20px"},rowData:o.rowData,onRowClicked:r.handleRowClicked,onRowSelected:r.handleRowSelected,onRowDeselected:r.handleRowDeselected},null,8,["rowData","onRowClicked","onRowSelected","onRowDeselected"]),(0,i._)("div",As,[(0,i._)("div",Fs,[(0,i._)("div",Ws,[Vs,(0,i._)("div",Zs,[(0,i.wy)((0,i._)("input",{type:"number",class:"form-control",id:"requiredBatchQuantity","onUpdate:modelValue":t[2]||(t[2]=e=>o.batch_quantity=e),placeholder:"Enter Batch Quantity",min:"1"},null,512),[[a.nr,o.batch_quantity]])]),(0,i._)("div",Gs,[zs,(0,i._)("button",{onClick:t[3]||(t[3]=(...e)=>r.checkAndGenerateChecklist&&r.checkAndGenerateChecklist(...e)),type:"button",class:"btn btn-primary","data-bs-dismiss":"modal"}," Generate Checklist ")])])])])]))}function Hs(e,t,s,a,l,o){const r=(0,i.up)("ag-grid-vue");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(r,{style:{height:"500px"},class:"ag-theme-quartz",rowData:s.rowData,defaultColDef:l.defaultColDef,columnDefs:l.colDefs,pagination:!0,rowSelection:"single",onRowClicked:o.onRowClicked,onSelectionChanged:o.onSelectionChanged},null,8,["rowData","defaultColDef","columnDefs","onRowClicked","onSelectionChanged"])])}var Ys={name:"App",components:{AgGridVue:It.n},props:{rowData:{type:Array,required:!0}},data(){return{colDefs:[{field:"id",hide:!0},{field:"product.name",headerCheckboxSelection:!0,checkboxSelection:!0,headerName:"Product Name"},{field:"product.product_code",headerName:"Product Code"},{field:"bom_type.name",headerName:"BOM Type"},{field:"bom_rev_number",headerName:"BOM Rev No"},{field:"issue_date",headerName:"Issue Date"},{field:"product.product_rev_number",headerName:"Product Rev No"}],defaultColDef:{filter:!0,sortable:!0,resizable:!0,autoSize:!0},selectedRows:[]}},methods:{onRowClicked(e){this.$emit("rowClicked",e.data)},onSelectionChanged(e){const t=e.api.getSelectedRows(),s=t.length>0?t[0]:null;s?this.$emit("rowSelected",s):this.$emit("rowDeselected")},onEditClick(e){this.$router.push(`/bom/edit/${e}`)}}};const Ks=(0,re.Z)(Ys,[["render",Hs]]);var Js=Ks,Xs={components:{BomDetailsTableWithoutEdit:Js},data(){return{rowData:[],selectedRow:null,clickedRowId:null,isButtonEnabled:!1,isExisting:!1,isActive:!1,batch_quantity:1}},methods:{async fetchData(){try{this.$store.commit("setIsLoading",!0);const e=await le.Z.get("store/get-boms/");this.rowData=e.data.boms,console.log(e.data.boms),this.$store.commit("setIsLoading",!1)}catch(e){console.error("Error fetching BOM data:",e),this.$store.commit("setIsLoading",!1)}},handleRowClicked(e){console.log("Clicked Row:",e)},handleRowSelected(e){console.log("Row Selected:",e),e&&e.id&&(this.selectedRow=e,this.clickedRowId=e.id,this.isButtonEnabled=!0)},handleRowDeselected(){console.log("Row Deselected:"),this.isButtonEnabled=!1},async checkAndGenerateChecklist(){this.$store.commit("setIsLoading",!0),await le.Z.post(`store/check-existing-checklist/${this.clickedRowId}/`).then((e=>{console.log(e.data),this.isActive=e.data.is_active,this.isExisting=e.data.is_existing,this.isExisting?this.$notify({title:"There is already an active ongoing checklist for this bom, please end that checklist by viewing the ongoing checklist to generate a new one.",type:"bg-danger-subtle text-danger",duration:"5000"}):this.generateChecklist()})).catch((e=>{console.log("error:",e),this.$notify({title:"An error occured, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"})})).finally((()=>{this.$store.commit("setIsLoading",!1)}))},async generateChecklist(){this.$store.commit("setIsLoading",!0);const e={batch_quantity:this.batch_quantity};await le.Z.post(`store/generate-new-checklist/${this.clickedRowId}/`,e).then((e=>{console.log(e.data),this.$router.push(`/begin-checklist/${this.clickedRowId}`)})).catch((e=>{console.log("error:",e),this.$notify({title:"An error occured, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"})})).finally((()=>{this.$store.commit("setIsLoading",!1)}))},async checkExistingChecklist(){this.$store.commit("setIsLoading",!0),await le.Z.post(`store/check-existing-checklist/${this.clickedRowId}/`).then((e=>{console.log(e.data),this.isActive=e.data.is_active,this.isExisting=e.data.is_existing,this.isExisting?this.isActive?this.$router.push(`/begin-checklist/${this.clickedRowId}`):this.$notify({title:"No active checklist found for this bom, please generate a new checklist",type:"bg-danger-subtle text-danger",duration:"5000"}):this.$notify({title:"No ongoing checklist found for this bom, please generate a new checklist",type:"bg-danger-subtle text-danger",duration:"5000"})})).catch((e=>{console.log("error:",e),this.$notify({title:"An error occured, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"})})).finally((()=>{this.$store.commit("setIsLoading",!1)}))},viewOngoingChecklists(){this.clickedRowId&&this.$router.push(`/begin-checklist/${this.clickedRowId}`)},viewGeneratedChecklists(){this.clickedRowId&&this.$router.push(`/generated-checklists/${this.clickedRowId}`)}},mounted(){this.fetchData()}};const ea=(0,re.Z)(Xs,[["render",Qs]]);var ta=ea;const sa=e=>((0,i.dD)("data-v-cfa9c45e"),e=e(),(0,i.Cn)(),e),aa={key:0,class:"container text-center"},ia=sa((()=>(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1))),la=sa((()=>(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1))),oa=[ia,la],ra={key:1,class:"container"},ca={class:"row align-items-center"},da={class:"col-md-6 mt-4"},na={class:"d-flex align-items-center"},ua=sa((()=>(0,i._)("h2",{class:"mb-0"},"Checklist",-1))),ma=sa((()=>(0,i._)("span",{class:"ms-3 fs-4 text-muted me-3"},"|",-1))),ha={"aria-label":"breadcrumb"},pa={class:"breadcrumb bg-transparent m-0 p-0 justify-content-end"},ba=sa((()=>(0,i._)("li",{class:"breadcrumb-item"},[(0,i._)("a",{href:"/"},[(0,i._)("i",{class:"fas fa-home me-1"}),(0,i.Uk)("Home")])],-1))),fa={class:"breadcrumb-item active","aria-current":"page"},_a=sa((()=>(0,i._)("i",{class:"fas fa-list-alt me-1"},null,-1))),ga=sa((()=>(0,i._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,i._)("i",{class:"fas fa-spinner me-1"}),(0,i.Uk)(" Ongoing Checklist ")],-1))),ya={class:"col-md-6 mt-4"},va={class:"container"},ka={class:"d-flex justify-content-end"},wa={key:0,type:"button","data-bs-toggle":"modal","data-bs-target":"#generateLabelModal",class:"btn btn-success me-2"},Ca={key:1,type:"button","data-bs-toggle":"modal","data-bs-target":"#generateLabelModal",class:"btn btn-success me-2"},Sa=sa((()=>(0,i._)("button",{type:"button","data-bs-toggle":"modal","data-bs-target":"#endChecklistModal",class:"btn btn-danger"}," End Checklist ",-1))),Da={class:"modal fade",id:"generateLabelModal",tabindex:"-1","aria-labelledby":"generateLabelModalLabel","aria-hidden":"true"},Pa={class:"modal-dialog"},Ia={class:"modal-content"},xa=sa((()=>(0,i._)("div",{class:"modal-header"},[(0,i._)("h1",{class:"modal-title fs-5",id:"generateLabelModalLabel"}," Generate Label "),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),Ra={class:"modal-body"},$a={key:0},La={key:0,id:"printable-content"},Ba=["src"],Ua={key:1},Oa={key:1},Na={class:"modal-footer"},ja=sa((()=>(0,i._)("button",{type:"button",class:"btn btn-dark","data-bs-dismiss":"modal"}," Cancel ",-1))),Ma={key:0},Ea={class:"modal fade",id:"endChecklistModal",tabindex:"-1","aria-labelledby":"endChecklistModalLabel","aria-hidden":"true"},Ta={class:"modal-dialog"},qa={class:"modal-content"},Aa=sa((()=>(0,i._)("div",{class:"modal-header"},[(0,i._)("h1",{class:"modal-title fs-5",id:"endChecklistModalLabel"}," End Checklist "),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),Fa=sa((()=>(0,i._)("div",{class:"modal-body"}," Are you sure you want to end this checklist? ",-1))),Wa={class:"modal-footer"},Va=sa((()=>(0,i._)("button",{type:"button",class:"btn btn-dark","data-bs-dismiss":"modal"}," Cancel ",-1))),Za={class:"card border-primary mb-4 mt-4"},Ga=sa((()=>(0,i._)("div",{class:"card-header bg-primary text-white"},[(0,i._)("h4",{class:"mb-0"},"Active Bom Details")],-1))),za={class:"card-body"},Qa={class:"row"},Ha={key:0,class:"col"},Ya=sa((()=>(0,i._)("strong",null,"Project Name:",-1))),Ka={key:1,class:"col"},Ja=sa((()=>(0,i._)("strong",null,"Product Name:",-1))),Xa={class:"col"},ei=sa((()=>(0,i._)("strong",null,"BOM Rev No:",-1))),ti={class:"col"},si=sa((()=>(0,i._)("strong",null,"Issue Date:",-1))),ai={class:"col"},ii=sa((()=>(0,i._)("strong",null,"Batch Quantity:",-1))),li={class:"accordion",id:"accordionPanelsStayOpenExample"},oi={class:"accordion-item"},ri={class:"accordion-header",id:"panelsStayOpen-headingOne"},ci={class:"accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseOne","aria-expanded":"true","aria-controls":"panelsStayOpen-collapseOne"},di={key:0,class:"spinner-border ms-2",role:"status"},ni=sa((()=>(0,i._)("span",{class:"visually-hidden"},"Loading...",-1))),ui=[ni],mi={key:1},hi=sa((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),pi=[hi],bi={id:"panelsStayOpen-collapseOne",class:"accordion-collapse collapse show","aria-labelledby":"panelsStayOpen-headingOne"},fi={class:"accordion-body"},_i={class:"accordion-item"},gi={class:"accordion-header",id:"panelsStayOpen-headingTwo"},yi={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseTwo","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseTwo"},vi={key:0,class:"spinner-border ms-2",role:"status"},ki=sa((()=>(0,i._)("span",{class:"visually-hidden"},"Loading...",-1))),wi=[ki],Ci={key:1},Si=sa((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),Di=[Si],Pi={id:"panelsStayOpen-collapseTwo",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingTwo"},Ii={class:"accordion-body"},xi={class:"accordion-item"},Ri={class:"accordion-header",id:"panelsStayOpen-headingThree"},$i={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseThree","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseThree"},Li={key:0,class:"spinner-border ms-2",role:"status"},Bi=sa((()=>(0,i._)("span",{class:"visually-hidden"},"Loading...",-1))),Ui=[Bi],Oi={key:1},Ni=sa((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),ji=[Ni],Mi={id:"panelsStayOpen-collapseThree",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingThree"},Ei={class:"accordion-body"},Ti={class:"accordion-item"},qi={class:"accordion-header",id:"panelsStayOpen-headingFour"},Ai={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseFour","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseFour"},Fi={key:0,class:"spinner-border ms-2",role:"status"},Wi=sa((()=>(0,i._)("span",{class:"visually-hidden"},"Loading...",-1))),Vi=[Wi],Zi={key:1},Gi=sa((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),zi=[Gi],Qi={id:"panelsStayOpen-collapseFour",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingFour"},Hi={class:"accordion-body"},Yi={class:"accordion-item"},Ki={class:"accordion-header",id:"panelsStayOpen-headingFive"},Ji={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseFive","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseFive"},Xi={key:0,class:"spinner-border ms-2",role:"status"},el=sa((()=>(0,i._)("span",{class:"visually-hidden"},"Loading...",-1))),tl=[el],sl={key:1},al=sa((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),il=[al],ll={id:"panelsStayOpen-collapseFive",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingFive"},ol={class:"accordion-body"},rl={class:"accordion-item"},cl={class:"accordion-header",id:"panelsStayOpen-headingSix"},dl={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseSix","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseSix"},nl={key:0,class:"spinner-border ms-2",role:"status"},ul=sa((()=>(0,i._)("span",{class:"visually-hidden"},"Loading...",-1))),ml=[ul],hl={key:1},pl=sa((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),bl=[pl],fl={id:"panelsStayOpen-collapseSix",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingSix"},_l={class:"accordion-body"},gl={class:"accordion-item"},yl={class:"accordion-header",id:"panelsStayOpen-headingSeven"},vl={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseSeven","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseSeven"},kl={key:0,class:"spinner-border ms-2",role:"status"},wl=sa((()=>(0,i._)("span",{class:"visually-hidden"},"Loading...",-1))),Cl=[wl],Sl={key:1},Dl=sa((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),Pl=[Dl],Il={id:"panelsStayOpen-collapseSeven",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingSeven"},xl={class:"accordion-body"},Rl={class:"accordion-item"},$l={class:"accordion-header",id:"panelsStayOpen-headingEight"},Ll={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseEight","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseEight"},Bl={key:0,class:"spinner-border ms-2",role:"status"},Ul=sa((()=>(0,i._)("span",{class:"visually-hidden"},"Loading...",-1))),Ol=[Ul],Nl={key:1},jl=sa((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),Ml=[jl],El={id:"panelsStayOpen-collapseEight",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingEight"},Tl={class:"accordion-body"},ql={class:"accordion-item"},Al={class:"accordion-header",id:"panelsStayOpen-headingNine"},Fl={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseNine","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseNine"},Wl={key:0,class:"spinner-border ms-2",role:"status"},Vl=sa((()=>(0,i._)("span",{class:"visually-hidden"},"Loading...",-1))),Zl=[Vl],Gl={key:1},zl=sa((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),Ql=[zl],Hl={id:"panelsStayOpen-collapseNine",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingNine"},Yl={class:"accordion-body"},Kl={class:"accordion-item"},Jl={class:"accordion-header",id:"panelsStayOpen-headingTen"},Xl={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseTen","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseTen"},eo={key:0,class:"spinner-border ms-2",role:"status"},to=sa((()=>(0,i._)("span",{class:"visually-hidden"},"Loading...",-1))),so=[to],ao={key:1},io=sa((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),lo=[io],oo={id:"panelsStayOpen-collapseTen",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingTen"},ro={class:"accordion-body"};function co(e,t,s,a,l,o){const r=(0,i.up)("router-link"),c=(0,i.up)("CheckListTable");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",aa,oa)):((0,i.wg)(),(0,i.iD)("div",ra,[(0,i._)("div",ca,[(0,i._)("div",da,[(0,i._)("div",na,[ua,ma,(0,i._)("nav",ha,[(0,i._)("ol",pa,[ba,(0,i._)("li",fa,[(0,i.Wm)(r,{to:"/checklist"},{default:(0,i.w5)((()=>[_a,(0,i.Uk)(" Checklist")])),_:1})]),ga])])])]),(0,i._)("div",ya,[(0,i._)("div",va,[(0,i._)("div",ka,[l.generatedQRCode?((0,i.wg)(),(0,i.iD)("button",wa," View Generated Label ")):((0,i.wg)(),(0,i.iD)("button",Ca," Generate Label ")),(0,i._)("button",{class:"btn btn-primary me-2",onClick:t[0]||(t[0]=(...e)=>o.downloadBOM&&o.downloadBOM(...e))}," Download BOM "),Sa])])])]),(0,i._)("div",Da,[(0,i._)("div",Pa,[(0,i._)("div",Ia,[xa,(0,i._)("div",Ra,[l.isChecklistPassed?((0,i.wg)(),(0,i.iD)("div",$a,[l.generatedQRCode?((0,i.wg)(),(0,i.iD)("div",La,[(0,i._)("img",{src:l.generatedQRCode,alt:"QR Code"},null,8,Ba)])):((0,i.wg)(),(0,i.iD)("p",Ua," All Checks passed successfully, generate a label by pressing the generate button. "))])):((0,i.wg)(),(0,i.iD)("div",Oa," You can only generate a label if all checks are passed "))]),(0,i._)("div",Na,[ja,l.isChecklistPassed?((0,i.wg)(),(0,i.iD)("div",Ma,[l.generatedQRCode?((0,i.wg)(),(0,i.iD)("button",{key:0,type:"button",class:"btn btn-success",onClick:t[1]||(t[1]=(...e)=>o.printQRCode&&o.printQRCode(...e))}," Print ")):((0,i.wg)(),(0,i.iD)("button",{key:1,type:"button",class:"btn btn-success",onClick:t[2]||(t[2]=(...e)=>o.generateQRCode&&o.generateQRCode(...e))}," Generate "))])):(0,i.kq)("",!0)])])])]),(0,i._)("div",Ea,[(0,i._)("div",Ta,[(0,i._)("div",qa,[Aa,Fa,(0,i._)("div",Wa,[Va,(0,i._)("button",{type:"button",class:"btn btn-danger",onClick:t[3]||(t[3]=(...e)=>o.endChecklist&&o.endChecklist(...e)),"data-bs-dismiss":"modal"}," End ")])])])]),(0,i._)("div",Za,[Ga,(0,i._)("div",za,[(0,i._)("div",Qa,[l.activeBom.product?((0,i.wg)(),(0,i.iD)("div",Ha,[Ya,(0,i.Uk)(" "+(0,ne.zw)(l.activeBom.product.project.name),1)])):(0,i.kq)("",!0),l.activeBom.product?((0,i.wg)(),(0,i.iD)("div",Ka,[Ja,(0,i.Uk)(" "+(0,ne.zw)(l.activeBom.product.name),1)])):(0,i.kq)("",!0),(0,i._)("div",Xa,[ei,(0,i.Uk)(" "+(0,ne.zw)(l.activeBom.bom_rev_number),1)]),(0,i._)("div",ti,[si,(0,i.Uk)(" "+(0,ne.zw)(l.activeBom.issue_date),1)]),(0,i._)("div",ai,[ii,(0,i.Uk)(" "+(0,ne.zw)(l.checklist.batch_quantity),1)])])])]),(0,i._)("div",li,[(0,i._)("div",oi,[(0,i._)("h2",ri,[(0,i._)("button",ci,[(0,i.Uk)(" Raw Material Check "),!1===l.isRawMaterialSufficient?((0,i.wg)(),(0,i.iD)("div",di,ui)):((0,i.wg)(),(0,i.iD)("div",mi,pi))])]),(0,i._)("div",bi,[(0,i._)("div",fi,[(0,i.Wm)(c,{checklistItems:l.filteredChecklistItems["Raw Material"]},null,8,["checklistItems"])])])]),(0,i._)("div",_i,[(0,i._)("h2",gi,[(0,i._)("button",yi,[(0,i.Uk)(" PCB Check "),!1===l.isPcbSufficient?((0,i.wg)(),(0,i.iD)("div",vi,wi)):((0,i.wg)(),(0,i.iD)("div",Ci,Di))])]),(0,i._)("div",Pi,[(0,i._)("div",Ii,[(0,i.Wm)(c,{checklistItems:l.filteredChecklistItems["PCB"]},null,8,["checklistItems"])])])]),(0,i._)("div",xi,[(0,i._)("h2",Ri,[(0,i._)("button",$i,[(0,i.Uk)(" Solder Paste Check "),!1===l.isSolderPasteSufficient?((0,i.wg)(),(0,i.iD)("div",Li,Ui)):((0,i.wg)(),(0,i.iD)("div",Oi,ji))])]),(0,i._)("div",Mi,[(0,i._)("div",Ei,[(0,i.Wm)(c,{checklistItems:l.filteredChecklistItems["Solder Paste"]},null,8,["checklistItems"])])])]),(0,i._)("div",Ti,[(0,i._)("h2",qi,[(0,i._)("button",Ai,[(0,i.Uk)(" Solder Bar Check "),!1===l.isSolderBarSufficient?((0,i.wg)(),(0,i.iD)("div",Fi,Vi)):((0,i.wg)(),(0,i.iD)("div",Zi,zi))])]),(0,i._)("div",Qi,[(0,i._)("div",Hi,[(0,i.Wm)(c,{checklistItems:l.filteredChecklistItems["Solder Bar"]},null,8,["checklistItems"]),(0,i.Uk)("> ")])])]),(0,i._)("div",Yi,[(0,i._)("h2",Ki,[(0,i._)("button",Ji,[(0,i.Uk)(" Solder Flux Check "),!1===l.isSolderFluxSufficient?((0,i.wg)(),(0,i.iD)("div",Xi,tl)):((0,i.wg)(),(0,i.iD)("div",sl,il))])]),(0,i._)("div",ll,[(0,i._)("div",ol,[(0,i.Wm)(c,{checklistItems:l.filteredChecklistItems["Solder Flux"]},null,8,["checklistItems"])])])]),(0,i._)("div",rl,[(0,i._)("h2",cl,[(0,i._)("button",dl,[(0,i.Uk)(" IPA Check "),!1===l.isIpaSufficient?((0,i.wg)(),(0,i.iD)("div",nl,ml)):((0,i.wg)(),(0,i.iD)("div",hl,bl))])]),(0,i._)("div",fl,[(0,i._)("div",_l,[(0,i.Wm)(c,{checklistItems:l.filteredChecklistItems["IPA"]},null,8,["checklistItems"])])])]),(0,i._)("div",gl,[(0,i._)("h2",yl,[(0,i._)("button",vl,[(0,i.Uk)(" Solder Wire Check "),!1===l.isSolderWireSufficient?((0,i.wg)(),(0,i.iD)("div",kl,Cl)):((0,i.wg)(),(0,i.iD)("div",Sl,Pl))])]),(0,i._)("div",Il,[(0,i._)("div",xl,[(0,i.Wm)(c,{checklistItems:l.filteredChecklistItems["Solder Wire"]},null,8,["checklistItems"])])])]),(0,i._)("div",Rl,[(0,i._)("h2",$l,[(0,i._)("button",Ll,[(0,i.Uk)(" SMT Pallet Check "),!1===l.isSMTPalletSufficient?((0,i.wg)(),(0,i.iD)("div",Bl,Ol)):((0,i.wg)(),(0,i.iD)("div",Nl,Ml))])]),(0,i._)("div",El,[(0,i._)("div",Tl,[(0,i.Wm)(c,{checklistItems:l.filteredChecklistItems["SMT Pallet"]},null,8,["checklistItems"])])])]),(0,i._)("div",ql,[(0,i._)("h2",Al,[(0,i._)("button",Fl,[(0,i.Uk)(" Wave Pallet Check "),!1===l.isWavePalletSufficient?((0,i.wg)(),(0,i.iD)("div",Wl,Zl)):((0,i.wg)(),(0,i.iD)("div",Gl,Ql))])]),(0,i._)("div",Hl,[(0,i._)("div",Yl,[(0,i.Wm)(c,{checklistItems:l.filteredChecklistItems["Wave Pallet"]},null,8,["checklistItems"])])])]),(0,i._)("div",Kl,[(0,i._)("h2",Jl,[(0,i._)("button",Xl,[(0,i.Uk)(" PCB Serial Number Label Check "),!1===l.isLabelSufficient?((0,i.wg)(),(0,i.iD)("div",eo,so)):((0,i.wg)(),(0,i.iD)("div",ao,lo))])]),(0,i._)("div",oo,[(0,i._)("div",ro,[(0,i.Wm)(c,{checklistItems:l.filteredChecklistItems["PCB Serial Number Label"]},null,8,["checklistItems"])])])])])]))}function no(e,t,s,a,l,o){const r=(0,i.up)("ag-grid-vue");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(r,{ref:"agGrid",style:{height:"550px"},class:"ag-theme-quartz",rowData:s.checklistItems,defaultColDef:l.defaultColDef,columnDefs:l.colDefs,pagination:!0,onFirstDataRendered:o.onFirstDataRendered,onRowClicked:o.onRowClicked,onRowSelected:o.onRowSelected,onRowDeselected:o.onRowDeselected,onGridReady:o.onGridReady},null,8,["rowData","defaultColDef","columnDefs","onFirstDataRendered","onRowClicked","onRowSelected","onRowDeselected","onGridReady"])])}var uo={props:{checklistItems:{type:Array,required:!0}},components:{AgGridVue:It.n},data(){return{gridApi:null,isGridReady:!1,colDefs:[{headerName:"VEPL Part No",field:"bom_line_item.part_number"},{headerName:"UID",field:"checklist_item_uids",valueFormatter:function(e){if(!e.value||0===e.value.length)return null;const t=e.value.map((e=>e.uid));return t.join(", ")}},{headerName:"Present Quantity",field:"present_quantity"},{headerName:"Required Quantity",field:"required_quantity"},{headerName:"Delta",valueGetter:function(e){const t=e.data.present_quantity,s=e.data.required_quantity,a=t-s;return a>=0?`+${a}`:`-${Math.abs(a)}`}},{headerName:"Is Present",field:"is_present"},{headerName:"Is Quantity Sufficient",field:"is_quantity_sufficient"},{headerName:"Updated At",field:"updated_at"}],defaultColDef:{filter:!0,sortable:!0,resizable:!0,autoSize:!0,domLayout:"autoHeight"},selectedRows:[]}},mounted(){},methods:{statusCellRenderer(e){return e.value?"✔":"✘"},onRowClicked(e){this.$emit("rowClicked",e.data)},onRowSelected(e){e.node.isSelected()&&this.$emit("rowSelected",e.node.data),this.onSelectionChanged()},onRowDeselected(){this.onSelectionChanged()},onSelectionChanged(){this.selectedRows=this.gridApi.getSelectedRows()},onFirstDataRendered(e){e.api&&(this.gridApi=e.api,this.isGridReady=!0)},onGridReady(e){this.gridApi=e.api,this.isGridReady=!0}}};const mo=(0,re.Z)(uo,[["render",no],["__scopeId","data-v-68eea027"]]);var ho=mo,po=s(8385),bo={components:{CheckListTable:ho},data(){return{activeBom:"",checklist:"",checklistItems:[],isChecklistPassed:!1,isChecklistEnded:!1,isRawMaterialSufficient:!1,isPcbSufficient:!1,isSolderPasteSufficient:!1,isSolderBarSufficient:!1,isSolderFluxSufficient:!1,isIpaSufficient:!1,isSolderWireSufficient:!1,isSMTPalletSufficient:!1,isWavePalletSufficient:!1,isLabelSufficient:!1,pollingInterval:"",generatedQRCode:"",filteredChecklistItems:{"Raw Material":[],PCB:[],"Solder Paste":[],"Solder Bar":[],"Solder Flux":[],Ipa:[],"Solder Wire":[],"SMT Pallet":[],"Wave Pallet":[],"PCB Serial Number Label":[]},scannedEntries:[]}},mounted(){this.getChecklistBeginning(),this.pollingInterval=setInterval((()=>{this.isChecklistPassed?(clearInterval(this.pollingInterval),this.$notify({title:"BOM Check Passed",type:"bg-success-subtle text-success",duration:"5000"})):this.getChecklist()}),5e3)},beforeUnmount(){clearInterval(this.pollingInterval)},methods:{async getChecklistBeginning(){this.$store.commit("setIsLoading",!0),await le.Z.get(`store/get-active-checklist/${this.$route.params.id}/`).then((e=>{console.log(e.data),this.checklist=e.data.checklist,this.checklistItems=this.checklist.checklist_items,console.log("checklists items hereeeeee",this.checklistItems);const t=this.filterChecklistItemsByType("Raw Material"),s=this.filterChecklistItemsByType("PCB"),a=this.filterChecklistItemsByType("Solder Paste"),i=this.filterChecklistItemsByType("Solder Bar"),l=this.filterChecklistItemsByType("Solder Flux"),o=this.filterChecklistItemsByType("IPA"),r=this.filterChecklistItemsByType("Solder Wire"),c=this.filterChecklistItemsByType("SMT Pallet"),d=this.filterChecklistItemsByType("Wave Pallet"),n=this.filterChecklistItemsByType("PCB Serial Number Label");this.isChecklistPassed=this.checklist.is_passed,this.activeBom=this.checklist.bom,this.filteredChecklistItems={"Raw Material":t,PCB:s,"Solder Paste":a,"Solder Bar":i,"Solder Flux":l,IPA:o,"Solder Wire":r,"SMT Pallet":c,"Wave Pallet":d,"PCB Serial Number Label":n},console.log("filered checklsit items",this.filteredChecklistItems),this.isRawMaterialSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Raw Material"),this.isPcbSufficient=this.isItemsSufficient(this.filteredChecklistItems,"PCB"),this.isSolderPasteSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Paste"),console.log("checking solder paste",this.isSolderPasteSufficient),this.isSolderBarSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Bar"),console.log("checkinsssg solder bar",this.isSolderBarSufficient),this.isSolderFluxSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Flux"),this.isIpaSufficient=this.isItemsSufficient(this.filteredChecklistItems,"IPA"),this.isSolderWireSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Wire"),this.isSMTPalletSufficient=this.isItemsSufficient(this.filteredChecklistItems,"SMT Pallet"),this.isWavePalletSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Wave Pallet"),this.isLabelSufficient=this.isItemsSufficient(this.filteredChecklistItems,"PCB Serial Number Label"),"Completed"!=this.checklist.status&&"Failed"!=this.checklist.status||(this.isChecklistEnded=!0),this.checklist.qr_code_link&&(this.generatedQRCode=this.checklist.qr_code_link),this.$store.commit("setIsLoading",!1)})).catch((e=>{console.log("error:",e),this.$notify({title:"An error occured, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1)}))},async getChecklist(){await le.Z.get(`store/get-active-checklist/${this.$route.params.id}/`).then((e=>{console.log(e.data),this.checklist=e.data.checklist,this.checklistItems=this.checklist.checklist_items,console.log("chehcklist items hereeeeee",this.checklistItems);const t=this.filterChecklistItemsByType("Raw Material"),s=this.filterChecklistItemsByType("PCB"),a=this.filterChecklistItemsByType("Solder Paste"),i=this.filterChecklistItemsByType("Solder Bar"),l=this.filterChecklistItemsByType("Solder Flux"),o=this.filterChecklistItemsByType("IPA"),r=this.filterChecklistItemsByType("Solder Wire"),c=this.filterChecklistItemsByType("SMT Pallet"),d=this.filterChecklistItemsByType("Wave Pallet"),n=this.filterChecklistItemsByType("PCB Serial Number Label");this.isChecklistPassed=this.checklist.is_passed,this.activeBom=this.checklist.bom,this.filteredChecklistItems={"Raw Material":t,PCB:s,"Solder Paste":a,"Solder Bar":i,"Solder Flux":l,IPA:o,"Solder Wire":r,"SMT Pallet":c,"Wave Pallet":d,"PCB Serial Number Label":n},console.log("filered checklsit items",this.filteredChecklistItems),this.isRawMaterialSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Raw Material"),this.isPcbSufficient=this.isItemsSufficient(this.filteredChecklistItems,"PCB"),this.isSolderPasteSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Paste"),this.isSolderBarSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Bar"),console.log("checking solder bar",this.isSolderBarSufficient),this.isSolderFluxSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Flux"),this.isIpaSufficient=this.isItemsSufficient(this.filteredChecklistItems,"IPA"),this.isSolderWireSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Wire"),this.isSMTPalletSufficient=this.isItemsSufficient(this.filteredChecklistItems,"SMT Pallet"),this.isWavePalletSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Wave Pallet"),this.isLabelSufficient=this.isItemsSufficient(this.filteredChecklistItems,"PCB Serial Number Label"),"Completed"!=this.checklist.status&&"Failed"!=this.checklist.status||(this.isChecklistEnded=!0),this.checklist.qr_code_link&&(this.generatedQRCode=this.checklist.qr_code_link)})).catch((e=>{console.log("error:",e),this.$notify({title:"An error occured, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"})}))},async endChecklist(){this.$store.commit("setIsLoading",!0),clearInterval(this.pollingInterval),await le.Z.get(`store/end-checklist/${this.checklist.id}/`).then((e=>{console.log(e.data),this.$notify({title:"Checklist ended",type:"bg-danger-subtle text-danger",duration:"5000"}),this.checklist=e.data.checklist,this.checklistItems=this.checklist.checklist_items,this.isChecklistPassed=this.checklist.is_passed,this.activeBom=this.checklist.bom,"Completed"!=this.checklist.status&&"Failed"!=this.checklist.status||(this.isChecklistEnded=!0),this.$router.push(`/generated-checklists/${this.$route.params.id}`),this.$store.commit("setIsLoading",!1)})).catch((e=>{console.log("error:",e),this.$notify({title:"An error occured, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"}),clearInterval(this.pollingInterval),this.$store.commit("setIsLoading",!1)}))},async generateQRCode(){const e=this.generateUniqueCode();console.log(e);const t=await po.toDataURL(e),s={uniqueCode:e,qrCodeDataURL:t};this.saveQRCode(s)},generateUniqueCode(){const e=Date.now().toString(),t=Math.random().toString(36).substring(7);return`${e}-${t}`},async saveQRCode(e){await le.Z.post(`store/save-qr-code/${this.checklist.id}/`,e).then((t=>{console.log(t.data),this.generatedQRCode=e.qrCodeDataURL,this.$notify({title:"QR Code generated and saved successfully",type:"bg-success-subtle text-success",duration:"5000"})})).catch((e=>{console.log("error:",e),this.$notify({title:"An error occured, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"})}))},printQRCode(){if(this.generatedQRCode){const e=document.getElementById("printable-content"),t=window.open("","","height=1000,width=1000");t.document.write(e.innerHTML),t.print()}},filterChecklistItemsByType(e){return this.checklistItems.filter((t=>{const s=t.checklist_item_type;return!(!s||!s.name)&&s.name.toUpperCase()===e.toUpperCase()}))},isItemsSufficient(e,t){const s=this.filteredChecklistItems[t];if(s){if(0===s.length)return!0;const e=s.filter((e=>!0===e.is_quantity_sufficient));return e.length===s.length}return!1},downloadBOM(){try{const e=this.checklist.bom.bom_file_url;console.log("file url",e);const t=document.createElement("a");t.href=e,t.download=this.checklist.bom.bom_file_name,document.body.appendChild(t),t.click(),document.body.removeChild(t)}catch(e){console.error("Error downloading BOM:",e)}}}};const fo=(0,re.Z)(bo,[["render",co],["__scopeId","data-v-cfa9c45e"]]);var _o=fo;const go={key:0,class:"container text-center"},yo=(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1),vo=(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1),ko=[yo,vo],wo={key:1,class:"container"},Co={class:"row align-items-center"},So={class:"col-md-12 mt-4"},Do={class:"d-flex align-items-center"},Po=(0,i._)("h2",{class:"mb-0 me-3"},"Generated Checklists",-1),Io=(0,i._)("span",{class:"fs-4 text-muted"},"|",-1),xo={"aria-label":"breadcrumb",class:"d-inline-block ms-3"},Ro={class:"breadcrumb bg-transparent m-0 p-0"},$o=(0,i._)("li",{class:"breadcrumb-item"},[(0,i._)("a",{href:"/"},[(0,i._)("i",{class:"fas fa-home me-1"}),(0,i.Uk)("Home")])],-1),Lo={class:"breadcrumb-item"},Bo=(0,i._)("i",{class:"fas fa-list-alt me-1"},null,-1),Uo=(0,i._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,i._)("i",{class:"fa-solid fa-list-check me-1"}),(0,i.Uk)(" Generated Checklists ")],-1);function Oo(e,t,s,a,l,o){const r=(0,i.up)("router-link"),c=(0,i.up)("CheckListsTable");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",go,ko)):((0,i.wg)(),(0,i.iD)("div",wo,[(0,i._)("div",Co,[(0,i._)("div",So,[(0,i._)("div",Do,[Po,Io,(0,i._)("nav",xo,[(0,i._)("ol",Ro,[$o,(0,i._)("li",Lo,[(0,i.Wm)(r,{to:"/checklist"},{default:(0,i.w5)((()=>[Bo,(0,i.Uk)(" Checklist")])),_:1})]),Uo])])])])]),(0,i.Wm)(c,{style:{"margin-top":"20px"},rowData:l.rowData},null,8,["rowData"])]))}function No(e,t,s,a,l,o){const r=(0,i.up)("ag-grid-vue");return(0,i.wg)(),(0,i.iD)("div",null,[s.rowData.length>0?((0,i.wg)(),(0,i.j4)(r,{key:0,style:{height:"500px"},class:"ag-theme-quartz",rowData:s.rowData,defaultColDef:l.defaultColDef,columnDefs:l.colDefs,pagination:!0,onRowClicked:o.onRowClicked,onRowSelected:o.onRowSelected},null,8,["rowData","defaultColDef","columnDefs","onRowClicked","onRowSelected"])):(0,i.kq)("",!0)])}var jo={components:{AgGridVue:It.n},props:{rowData:{type:Array}},data(){return{colDefs:[{field:"id",hide:!0},{headerName:"Checklist ID",field:"id",headerCheckboxSelection:!0,checkboxSelection:!0},{headerName:"Unique Code",field:"unique_code",valueFormatter:function(e){return null===e.value?"null":e.value}},{headerName:"Project Name",field:"bom.product.project.name"},{headerName:"Product Name",field:"bom.product.name"},{headerName:"Product Code",field:"bom.product.product_code"},{headerName:"Batch Quantity",field:"batch_quantity"},{headerName:"Updated At",field:"updated_at"},{headerName:"Status",field:"status"},{headerName:"Actions",cellRenderer:this.editButtonRenderer}],defaultColDef:{filter:!0,sortable:!0,resizable:!0,autoSize:!0},selectedRows:[]}},methods:{onRowClicked(e){this.$emit("rowClicked",e.data)},onRowSelected(e){e.node.isSelected()&&this.$emit("rowSelected",e.node.data)},onSelectionChanged(){this.$refs.agGrid&&this.$refs.agGrid.api&&(this.selectedRows=this.$refs.agGrid.api.getSelectedRows())},editButtonRenderer(e){const t=document.createElement("button");return t.innerHTML='<i class="fas fa-eye"></i>',t.classList.add("btn","btn-success"),t.addEventListener("click",(()=>this.onViewClick(e.data))),t},onViewClick(e){"In Progress"===e.status?this.$router.push(`/begin-checklist/${e.bom.id}`):this.$router.push(`/checklist-details/${e.id}`)}}};const Mo=(0,re.Z)(jo,[["render",No],["__scopeId","data-v-4d2eec7a"]]);var Eo=Mo,To={components:{CheckListsTable:Eo},data(){return{rowData:[]}},mounted(){this.fetchData()},methods:{async fetchData(){try{this.$store.commit("setIsLoading",!0);const e=await le.Z.get(`store/generated-checklists/${this.$route.params.id}`);this.rowData=e.data,console.log("checklists",e.data),this.$store.commit("setIsLoading",!1)}catch(e){console.error("Error fetching CheckLists data:",e),this.$store.commit("setIsLoading",!1)}}}};const qo=(0,re.Z)(To,[["render",Oo]]);var Ao=qo;const Fo=e=>((0,i.dD)("data-v-d53e0868"),e=e(),(0,i.Cn)(),e),Wo={key:0,class:"container text-center"},Vo=Fo((()=>(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1))),Zo=Fo((()=>(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1))),Go=[Vo,Zo],zo={key:1,class:"container"},Qo={class:"row align-items-center"},Ho=(0,i.uE)('<div class="col-md-6 mt-4" data-v-d53e0868><div class="d-flex align-items-center" data-v-d53e0868><h2 class="mb-0" data-v-d53e0868>Checklist Details</h2><span class="ms-3 fs-4 text-muted me-3" data-v-d53e0868>|</span><nav aria-label="breadcrumb" data-v-d53e0868><ol class="breadcrumb bg-transparent m-0 p-0 justify-content-end" data-v-d53e0868><li class="breadcrumb-item" data-v-d53e0868><a href="/" data-v-d53e0868>Home</a></li><li class="breadcrumb-item active" aria-current="page" data-v-d53e0868> Checklist </li></ol></nav></div></div>',1),Yo={class:"col-md-6 mt-4 d-flex justify-content-end"},Ko={class:"container"},Jo={class:"d-flex justify-content-end"},Xo={key:0,type:"button","data-bs-toggle":"modal","data-bs-target":"#generateLabelModal",class:"btn btn-success me-2"},er={key:1,type:"button","data-bs-toggle":"modal","data-bs-target":"#generateLabelModal",class:"btn btn-success me-2"},tr={class:"modal fade",id:"generateLabelModal",tabindex:"-1","aria-labelledby":"generateLabelModalLabel","aria-hidden":"true"},sr={class:"modal-dialog"},ar={class:"modal-content"},ir=Fo((()=>(0,i._)("div",{class:"modal-header"},[(0,i._)("h1",{class:"modal-title fs-5",id:"generateLabelModalLabel"}," Generate Label "),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),lr={class:"modal-body"},or={key:0},rr={key:0,id:"printable-content"},cr=["src"],dr={key:1},nr={key:1},ur={class:"modal-footer"},mr=Fo((()=>(0,i._)("button",{type:"button",class:"btn btn-dark","data-bs-dismiss":"modal"}," Cancel ",-1))),hr={key:0},pr={class:"card border-primary mb-4 mt-4"},br=Fo((()=>(0,i._)("div",{class:"card-header bg-primary text-white"},[(0,i._)("h4",{class:"mb-0"},"BOM Details")],-1))),fr={class:"card-body"},_r={class:"row"},gr={key:0,class:"col"},yr=Fo((()=>(0,i._)("strong",null,"Project Name:",-1))),vr={key:1,class:"col"},kr=Fo((()=>(0,i._)("strong",null,"Product Name:",-1))),wr={class:"col"},Cr=Fo((()=>(0,i._)("strong",null,"BOM Rev No:",-1))),Sr={class:"col"},Dr=Fo((()=>(0,i._)("strong",null,"Issue Date:",-1))),Pr={class:"accordion",id:"accordionPanelsStayOpenExample"},Ir={class:"accordion-item"},xr={class:"accordion-header",id:"panelsStayOpen-headingOne"},Rr={class:"accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseOne","aria-expanded":"true","aria-controls":"panelsStayOpen-collapseOne"},$r={key:0},Lr=Fo((()=>(0,i._)("i",{class:"bi bi-x-circle-fill fs-4 ms-2"},null,-1))),Br=[Lr],Ur={key:1},Or=Fo((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),Nr=[Or],jr={id:"panelsStayOpen-collapseOne",class:"accordion-collapse collapse show","aria-labelledby":"panelsStayOpen-headingOne"},Mr={class:"accordion-body"},Er={class:"accordion-item"},Tr={class:"accordion-header",id:"panelsStayOpen-headingTwo"},qr={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseTwo","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseTwo"},Ar={key:0},Fr=Fo((()=>(0,i._)("i",{class:"bi bi-x-circle-fill fs-4 ms-2"},null,-1))),Wr=[Fr],Vr={key:1},Zr=Fo((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),Gr=[Zr],zr={id:"panelsStayOpen-collapseTwo",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingTwo"},Qr={class:"accordion-body"},Hr={class:"accordion-item"},Yr={class:"accordion-header",id:"panelsStayOpen-headingThree"},Kr={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseThree","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseThree"},Jr={key:0},Xr=Fo((()=>(0,i._)("i",{class:"bi bi-x-circle-fill fs-4 ms-2"},null,-1))),ec=[Xr],tc={key:1},sc=Fo((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),ac=[sc],ic={id:"panelsStayOpen-collapseThree",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingThree"},lc={class:"accordion-body"},oc={class:"accordion-item"},rc={class:"accordion-header",id:"panelsStayOpen-headingFour"},cc={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseFour","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseFour"},dc={key:0},nc=Fo((()=>(0,i._)("i",{class:"bi bi-x-circle-fill fs-4 ms-2"},null,-1))),uc=[nc],mc={key:1},hc=Fo((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),pc=[hc],bc={id:"panelsStayOpen-collapseFour",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingFour"},fc={class:"accordion-body"},_c={class:"accordion-item"},gc={class:"accordion-header",id:"panelsStayOpen-headingFive"},yc={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseFive","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseFive"},vc={key:0},kc=Fo((()=>(0,i._)("i",{class:"bi bi-x-circle-fill fs-4 ms-2"},null,-1))),wc=[kc],Cc={key:1},Sc=Fo((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),Dc=[Sc],Pc={id:"panelsStayOpen-collapseFive",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingFive"},Ic={class:"accordion-body"},xc={class:"accordion-item"},Rc={class:"accordion-header",id:"panelsStayOpen-headingSix"},$c={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseSix","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseSix"},Lc={key:0},Bc=Fo((()=>(0,i._)("i",{class:"bi bi-x-circle-fill fs-4 ms-2"},null,-1))),Uc=[Bc],Oc={key:1},Nc=Fo((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),jc=[Nc],Mc={id:"panelsStayOpen-collapseSix",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingSix"},Ec={class:"accordion-body"},Tc={class:"accordion-item"},qc={class:"accordion-header",id:"panelsStayOpen-headingSeven"},Ac={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseSeven","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseSeven"},Fc={key:0},Wc=Fo((()=>(0,i._)("i",{class:"bi bi-x-circle-fill fs-4 ms-2"},null,-1))),Vc=[Wc],Zc={key:1},Gc=Fo((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),zc=[Gc],Qc={id:"panelsStayOpen-collapseSeven",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingSeven"},Hc={class:"accordion-body"},Yc={class:"accordion-item"},Kc={class:"accordion-header",id:"panelsStayOpen-headingEight"},Jc={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseEight","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseEight"},Xc={key:0},ed=Fo((()=>(0,i._)("i",{class:"bi bi-x-circle-fill fs-4 ms-2"},null,-1))),td=[ed],sd={key:1},ad=Fo((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),id=[ad],ld={id:"panelsStayOpen-collapseEight",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingEight"},od={class:"accordion-body"},rd={class:"accordion-item"},cd={class:"accordion-header",id:"panelsStayOpen-headingNine"},dd={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseNine","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseNine"},nd={key:0},ud=Fo((()=>(0,i._)("i",{class:"bi bi-x-circle-fill fs-4 ms-2"},null,-1))),md=[ud],hd={key:1},pd=Fo((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),bd=[pd],fd={id:"panelsStayOpen-collapseNine",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingNine"},_d={class:"accordion-body"},gd={class:"accordion-item"},yd={class:"accordion-header",id:"panelsStayOpen-headingTen"},vd={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseTen","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseTen"},kd={key:0},wd=Fo((()=>(0,i._)("i",{class:"bi bi-x-circle-fill fs-4 ms-2"},null,-1))),Cd=[wd],Sd={key:1},Dd=Fo((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),Pd=[Dd],Id={id:"panelsStayOpen-collapseTen",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingTen"},xd={class:"accordion-body"};function Rd(e,t,s,a,l,o){const r=(0,i.up)("CheckListTable");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",Wo,Go)):((0,i.wg)(),(0,i.iD)("div",zo,[(0,i._)("div",Qo,[Ho,(0,i._)("div",Yo,[(0,i._)("div",Ko,[(0,i._)("div",Jo,[l.generatedQRCode?((0,i.wg)(),(0,i.iD)("button",Xo," View Generated Label ")):((0,i.wg)(),(0,i.iD)("button",er," Generate Label "))])])])]),(0,i._)("div",tr,[(0,i._)("div",sr,[(0,i._)("div",ar,[ir,(0,i._)("div",lr,[l.isChecklistPassed?((0,i.wg)(),(0,i.iD)("div",or,[l.generatedQRCode?((0,i.wg)(),(0,i.iD)("div",rr,[(0,i._)("img",{src:l.generatedQRCode,alt:"QR Code"},null,8,cr)])):((0,i.wg)(),(0,i.iD)("p",dr," All Checks passed successfully, generate a label by pressing the generate button. "))])):((0,i.wg)(),(0,i.iD)("div",nr," You can only generate a label if all checks are passed "))]),(0,i._)("div",ur,[mr,l.isChecklistPassed?((0,i.wg)(),(0,i.iD)("div",hr,[l.generatedQRCode?((0,i.wg)(),(0,i.iD)("button",{key:0,type:"button",class:"btn btn-success",onClick:t[0]||(t[0]=(...e)=>o.printQRCode&&o.printQRCode(...e))}," Print ")):((0,i.wg)(),(0,i.iD)("button",{key:1,type:"button",class:"btn btn-success",onClick:t[1]||(t[1]=(...e)=>o.generateQRCode&&o.generateQRCode(...e))}," Generate "))])):(0,i.kq)("",!0)])])])]),(0,i._)("div",pr,[br,(0,i._)("div",fr,[(0,i._)("div",_r,[l.activeBom.product?((0,i.wg)(),(0,i.iD)("div",gr,[yr,(0,i.Uk)(" "+(0,ne.zw)(l.activeBom.product.project.name),1)])):(0,i.kq)("",!0),l.activeBom.product?((0,i.wg)(),(0,i.iD)("div",vr,[kr,(0,i.Uk)(" "+(0,ne.zw)(l.activeBom.product.name),1)])):(0,i.kq)("",!0),(0,i._)("div",wr,[Cr,(0,i.Uk)(" "+(0,ne.zw)(l.activeBom.bom_rev_number),1)]),(0,i._)("div",Sr,[Dr,(0,i.Uk)(" "+(0,ne.zw)(l.activeBom.issue_date),1)])])])]),(0,i._)("div",Pr,[(0,i._)("div",Ir,[(0,i._)("h2",xr,[(0,i._)("button",Rr,[(0,i.Uk)(" Raw Material Check "),0==l.isRawMaterialSufficient?((0,i.wg)(),(0,i.iD)("div",$r,Br)):((0,i.wg)(),(0,i.iD)("div",Ur,Nr))])]),(0,i._)("div",jr,[(0,i._)("div",Mr,[(0,i.Wm)(r,{checklistItems:l.filteredChecklistItems["Raw Material"]},null,8,["checklistItems"])])])]),(0,i._)("div",Er,[(0,i._)("h2",Tr,[(0,i._)("button",qr,[(0,i.Uk)(" PCB Check "),0==l.isPcbSufficient?((0,i.wg)(),(0,i.iD)("div",Ar,Wr)):((0,i.wg)(),(0,i.iD)("div",Vr,Gr))])]),(0,i._)("div",zr,[(0,i._)("div",Qr,[(0,i.Wm)(r,{checklistItems:l.filteredChecklistItems["PCB"]},null,8,["checklistItems"])])])]),(0,i._)("div",Hr,[(0,i._)("h2",Yr,[(0,i._)("button",Kr,[(0,i.Uk)(" Solder Paste "),0==l.isSolderPasteSufficient?((0,i.wg)(),(0,i.iD)("div",Jr,ec)):((0,i.wg)(),(0,i.iD)("div",tc,ac))])]),(0,i._)("div",ic,[(0,i._)("div",lc,[(0,i.Wm)(r,{checklistItems:l.filteredChecklistItems["Solder Paste"]},null,8,["checklistItems"])])])]),(0,i._)("div",oc,[(0,i._)("h2",rc,[(0,i._)("button",cc,[(0,i.Uk)(" Solder Bar "),0==l.isSolderBarSufficient?((0,i.wg)(),(0,i.iD)("div",dc,uc)):((0,i.wg)(),(0,i.iD)("div",mc,pc))])]),(0,i._)("div",bc,[(0,i._)("div",fc,[(0,i.Wm)(r,{checklistItems:l.filteredChecklistItems["Solder Bar"]},null,8,["checklistItems"]),(0,i.Uk)("> ")])])]),(0,i._)("div",_c,[(0,i._)("h2",gc,[(0,i._)("button",yc,[(0,i.Uk)(" Solder Flux "),0==l.isSolderFluxSufficient?((0,i.wg)(),(0,i.iD)("div",vc,wc)):((0,i.wg)(),(0,i.iD)("div",Cc,Dc))])]),(0,i._)("div",Pc,[(0,i._)("div",Ic,[(0,i.Wm)(r,{checklistItems:l.filteredChecklistItems["Solder Flux"]},null,8,["checklistItems"])])])]),(0,i._)("div",xc,[(0,i._)("h2",Rc,[(0,i._)("button",$c,[(0,i.Uk)(" IPA "),0==l.isIpaSufficient?((0,i.wg)(),(0,i.iD)("div",Lc,Uc)):((0,i.wg)(),(0,i.iD)("div",Oc,jc))])]),(0,i._)("div",Mc,[(0,i._)("div",Ec,[(0,i.Wm)(r,{checklistItems:l.filteredChecklistItems["IPA"]},null,8,["checklistItems"])])])]),(0,i._)("div",Tc,[(0,i._)("h2",qc,[(0,i._)("button",Ac,[(0,i.Uk)(" Solder Wire "),0==l.isSolderWireSufficient?((0,i.wg)(),(0,i.iD)("div",Fc,Vc)):((0,i.wg)(),(0,i.iD)("div",Zc,zc))])]),(0,i._)("div",Qc,[(0,i._)("div",Hc,[(0,i.Wm)(r,{checklistItems:l.filteredChecklistItems["Solder Wire"]},null,8,["checklistItems"])])])]),(0,i._)("div",Yc,[(0,i._)("h2",Kc,[(0,i._)("button",Jc,[(0,i.Uk)(" SMT Pallet "),0==l.isSMTPalletSufficient?((0,i.wg)(),(0,i.iD)("div",Xc,td)):((0,i.wg)(),(0,i.iD)("div",sd,id))])]),(0,i._)("div",ld,[(0,i._)("div",od,[(0,i.Wm)(r,{checklistItems:l.filteredChecklistItems["SMT Pallet"]},null,8,["checklistItems"])])])]),(0,i._)("div",rd,[(0,i._)("h2",cd,[(0,i._)("button",dd,[(0,i.Uk)(" Wave Pallet "),0==l.isWavePalletSufficient?((0,i.wg)(),(0,i.iD)("div",nd,md)):((0,i.wg)(),(0,i.iD)("div",hd,bd))])]),(0,i._)("div",fd,[(0,i._)("div",_d,[(0,i.Wm)(r,{checklistItems:l.filteredChecklistItems["Wave Pallet"]},null,8,["checklistItems"])])])]),(0,i._)("div",gd,[(0,i._)("h2",yd,[(0,i._)("button",vd,[(0,i.Uk)(" PCB Serial Number Label "),0==l.isLabelSufficient?((0,i.wg)(),(0,i.iD)("div",kd,Cd)):((0,i.wg)(),(0,i.iD)("div",Sd,Pd))])]),(0,i._)("div",Id,[(0,i._)("div",xd,[(0,i.Wm)(r,{checklistItems:l.filteredChecklistItems["PCB Serial Number Label"]},null,8,["checklistItems"])])])])])]))}var $d={components:{CheckListTable:ho},data(){return{activeBom:"",checklist:"",checklistItems:[],isRawMaterialSufficient:!1,isPcbSufficient:!1,isSolderPasteSufficient:!1,isSolderBarSufficient:!1,isSolderFluxSufficient:!1,isIpaSufficient:!1,isSolderWireSufficient:!1,isSMTPalletSufficient:!1,isWavePalletSufficient:!1,isLabelSufficient:!1,isChecklistPassed:!1,isChecklistEnded:!1,pollingInterval:"",filteredChecklistItems:{"Raw Material":[],PCB:[],"Solder Paste":[],"Solder Bar":[],"Solder Flux":[],IPA:[],"Solder Wire":[],"SMT Pallet":[],"Wave Pallet":[],"PCB Serial Number Label":[]},generatedQRCode:""}},mounted(){this.getChecklist()},methods:{async getChecklist(){this.$store.commit("setIsLoading",!0),await le.Z.get(`store/get-checklist-details/${this.$route.params.id}/`).then((e=>{console.log("yehh",e.data),this.checklist=e.data.checklist,this.checklistItems=this.checklist.checklist_items,console.log("chehcklist items hereeeeee",this.checklistItems),console.log("chehcklist items hereeeeee",this.checklistItems);const t=this.filterChecklistItemsByType("Raw Material");console.log(t);const s=this.filterChecklistItemsByType("PCB"),a=this.filterChecklistItemsByType("Solder Paste"),i=this.filterChecklistItemsByType("Solder Bar"),l=this.filterChecklistItemsByType("Solder Flux"),o=this.filterChecklistItemsByType("IPA"),r=this.filterChecklistItemsByType("Solder Wire"),c=this.filterChecklistItemsByType("SMT Pallet"),d=this.filterChecklistItemsByType("Wave Pallet"),n=this.filterChecklistItemsByType("PCB Serial Number Label");this.isChecklistPassed=this.checklist.is_passed,this.activeBom=this.checklist.bom,this.filteredChecklistItems={"Raw Material":t,PCB:s,"Solder Paste":a,"Solder Bar":i,"Solder Flux":l,IPA:o,"Solder Wire":r,"SMT Pallet":c,"Wave Pallet":d,"PCB Serial Number Label":n},console.log("filered checklsit items",this.filteredChecklistItems),this.isRawMaterialSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Raw Material"),this.isPcbSufficient=this.isItemsSufficient(this.filteredChecklistItems,"PCB"),this.isSolderPasteSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Paste"),this.isSolderBarSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Bar"),console.log("checking solder bar",this.isSolderBarSufficient),this.isSolderFluxSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Flux"),this.isIpaSufficient=this.isItemsSufficient(this.filteredChecklistItems,"IPA"),this.isSolderWireSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Wire"),this.isSMTPalletSufficient=this.isItemsSufficient(this.filteredChecklistItems,"SMT Pallet"),this.isWavePalletSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Wave Pallet"),this.isLabelSufficient=this.isItemsSufficient(this.filteredChecklistItems,"PCB Serial Number Label"),this.isChecklistPassed=this.checklist.is_passed,this.activeBom=this.checklist.bom,"Completed"!=this.checklist.status&&"Failed"!=this.checklist.status||(this.isChecklistEnded=!0),this.checklist.qr_code_link&&(this.generatedQRCode=this.checklist.qr_code_link),this.$store.commit("setIsLoading",!1)})).catch((e=>{console.log("error:",e),this.$notify({title:"An error occured, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1)}))},filterChecklistItemsByType(e){return this.checklistItems.filter((t=>{const s=t.checklist_item_type;return!(!s||!s.name)&&s.name.toLowerCase()===e.toLowerCase()}))},isItemsSufficient(e,t){const s=this.filteredChecklistItems[t];if(0===s.length)return!0;const a=s.filter((e=>!0===e.is_quantity_sufficient));return a.length===s.length},async generateQRCode(){const e=this.generateUniqueCode();console.log(e);const t=await po.toDataURL(e),s={uniqueCode:e,qrCodeDataURL:t};this.saveQRCode(s)},generateUniqueCode(){const e=Date.now().toString(),t=Math.random().toString(36).substring(7);return`${e}-${t}`},async saveQRCode(e){await le.Z.post(`store/save-qr-code/${this.checklist.id}/`,e).then((t=>{console.log(t.data),this.generatedQRCode=e.qrCodeDataURL,this.$notify({title:"QR Code generated and saved successfully",type:"bg-success-subtle text-success",duration:"5000"})})).catch((e=>{console.log("error:",e),this.$notify({title:"An error occured, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"})}))},printQRCode(){if(this.generatedQRCode){const e=document.getElementById("printable-content"),t=window.open("","","height=1000,width=1000");t.document.write(e.innerHTML),t.print()}}}};const Ld=(0,re.Z)($d,[["render",Rd],["__scopeId","data-v-d53e0868"]]);var Bd=Ld;const Ud={class:"container"},Od=(0,i.uE)('<div class="row align-items-center"><div class="col-md-6 mt-4"><div class="d-flex align-items-center"><h2 class="mb-0">Reports</h2><span class="ms-3 fs-4 text-muted">|</span><nav aria-label="breadcrumb" class="d-inline-block ms-3"><ol class="breadcrumb bg-transparent m-0 p-0"><li class="breadcrumb-item"><a href="/"><i class="fas fa-home me-1"></i>Home</a></li><li class="breadcrumb-item active" aria-current="page"><i class="fas fa-chart-bar me-1"></i> Reports </li></ol></nav></div></div></div>',1),Nd={class:"conatiner"},jd={class:"list-group pt-4"};function Md(e,t){const s=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",Ud,[Od,(0,i._)("div",Nd,[(0,i._)("ul",jd,[(0,i.Wm)(s,{class:"list-group-item list-group-item-action text-left",to:"/checklist-report"},{default:(0,i.w5)((()=>[(0,i.Uk)(" Checklist Report ")])),_:1})])])])}const Ed={},Td=(0,re.Z)(Ed,[["render",Md]]);var qd=Td;const Ad=e=>((0,i.dD)("data-v-bbcef4d6"),e=e(),(0,i.Cn)(),e),Fd={key:0,class:"container text-center"},Wd=Ad((()=>(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1))),Vd=Ad((()=>(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1))),Zd=[Wd,Vd],Gd={key:1,class:"container"},zd={class:"row align-items-center"},Qd=(0,i.uE)('<div class="col-md-6 mt-4" data-v-bbcef4d6><div class="d-flex align-items-center" data-v-bbcef4d6><h2 class="mb-0" data-v-bbcef4d6>Dashboard</h2><span class="ms-3 fs-4 text-muted" data-v-bbcef4d6>|</span><nav aria-label="breadcrumb" class="d-inline-block ms-3" data-v-bbcef4d6><ol class="breadcrumb bg-transparent m-0 p-0" data-v-bbcef4d6><li class="breadcrumb-item" data-v-bbcef4d6><a href="/" data-v-bbcef4d6><i class="fas fa-home me-1" data-v-bbcef4d6></i>Home</a></li><li class="breadcrumb-item active" aria-current="page" data-v-bbcef4d6><i class="fa fa-tachometer me-1" aria-hidden="true" data-v-bbcef4d6></i> Dashboard </li></ol></nav></div></div>',1),Hd={class:"col-md-6 mt-4 text-end"},Yd={class:"container"},Kd={class:"dropdown"},Jd={class:"btn btn-secondary dropdown-toggle",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"},Xd={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton1"},en=Ad((()=>(0,i._)("a",{class:"dropdown-item",href:"#"},"Today",-1))),tn=[en],sn=Ad((()=>(0,i._)("a",{class:"dropdown-item",href:"#"},"Previous Week",-1))),an=[sn],ln=Ad((()=>(0,i._)("a",{class:"dropdown-item",href:"#"},"Previous Month",-1))),on=[ln],rn=Ad((()=>(0,i._)("li",null,[(0,i._)("button",{type:"button",class:"btn","data-bs-toggle":"modal","data-bs-target":"#exampleModal"}," Custom Date Range ")],-1))),cn={class:"row mt-4",style:{display:"flex",gap:"30px","justify-content":"space-between"}},dn={class:"small-box bg-gradient-success",style:{flex:"1"}},nn={class:"inner"},un=Ad((()=>(0,i._)("p",null,"Completed",-1))),mn=Ad((()=>(0,i._)("div",{class:"icon"},[(0,i._)("i",{class:"fa-solid fa-check"})],-1))),hn={class:"small-box bg-gradient-primary",style:{flex:"1"}},pn={class:"inner"},bn=Ad((()=>(0,i._)("p",null,"In Progress",-1))),fn=Ad((()=>(0,i._)("div",{class:"icon"},[(0,i._)("i",{class:"fa-solid fa-spinner"})],-1))),_n={class:"small-box bg-gradient-danger",style:{flex:"1"}},gn={class:"inner"},yn=Ad((()=>(0,i._)("p",null,"Failed",-1))),vn=Ad((()=>(0,i._)("div",{class:"icon"},[(0,i._)("i",{class:"fa-solid fa-xmark"})],-1))),kn={class:"row mt-4 d-flex"},wn={class:"col-6"},Cn={class:"card card-primary"},Sn={class:"card-header"},Dn=Ad((()=>(0,i._)("h3",{class:"card-title"},"In Progress Checklists",-1))),Pn={class:"card-tools"},In={class:"card-body"},xn={class:"row"},Rn={key:0},$n={class:"list-group list-group-flush"},Ln={key:1},Bn={class:"col-6"},Un={class:"card card-success"},On={class:"card-header"},Nn=Ad((()=>(0,i._)("h3",{class:"card-title"},"Completed Checklists",-1))),jn={class:"card-tools"},Mn={class:"card-body"},En={class:"row"},Tn={key:0},qn={class:"list-group list-group-flush"},An=["onClick"],Fn={key:1},Wn={class:"row mt-4 d-flex"},Vn={class:"col-6"},Zn={class:"card card-danger"},Gn={class:"card-header"},zn=Ad((()=>(0,i._)("h3",{class:"card-title"},"Failed Checklists",-1))),Qn={class:"card-tools"},Hn={class:"card-body"},Yn={class:"row"},Kn={key:0},Jn={class:"list-group list-group-flush"},Xn=["onClick"],eu=Ad((()=>(0,i._)("i",{class:"fas fa-eye"},null,-1))),tu={key:1},su=Ad((()=>(0,i._)("div",{class:"col-6"},null,-1))),au={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},iu={class:"modal-dialog"},lu={class:"modal-content"},ou=Ad((()=>(0,i._)("div",{class:"modal-header"},[(0,i._)("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},[(0,i._)("strong",null,"Custom Date Range")]),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),ru={class:"modal-body"},cu={class:"mb-3"},du=Ad((()=>(0,i._)("label",{for:"startDate",class:"form-label"},"Start Date:",-1))),nu={class:"mb-3"},uu=Ad((()=>(0,i._)("label",{for:"endDate",class:"form-label"},"End Date:",-1))),mu={key:0,class:"alert alert-danger mt-3 p-2"},hu=Ad((()=>(0,i._)("i",{class:"fas fa-exclamation-triangle"},null,-1))),pu={class:"modal-footer"},bu=Ad((()=>(0,i._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1))),fu=["disabled"];function _u(e,t,s,l,o,r){return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",Fd,Zd)):((0,i.wg)(),(0,i.iD)("div",Gd,[(0,i._)("div",zd,[Qd,(0,i._)("div",Hd,[(0,i._)("div",Yd,[(0,i._)("div",Kd,[(0,i._)("button",Jd,(0,ne.zw)("Previous_Week"===o.selectedOption?"Previous Week":"Previous_Month"===o.selectedOption?"Previous Month":o.selectedOption),1),(0,i._)("ul",Xd,[(0,i._)("li",{onClick:t[0]||(t[0]=e=>r.selectOption("Today")),class:(0,ne.C_)({active:"Today"===o.selectedOption})},tn,2),(0,i._)("li",{onClick:t[1]||(t[1]=e=>r.selectOption("Previous_Week")),class:(0,ne.C_)({active:"Previous_Week"===o.selectedOption})},an,2),(0,i._)("li",{onClick:t[2]||(t[2]=e=>r.selectOption("Previous_Month")),class:(0,ne.C_)({active:"Previous_Month"===o.selectedOption})},on,2),rn])])])])]),(0,i._)("div",cn,[(0,i._)("div",dn,[(0,i._)("div",nn,[(0,i._)("h3",null,(0,ne.zw)(o.result.completed_checklists?o.result.completed_checklists.length:"Loading"),1),un]),mn]),(0,i._)("div",hn,[(0,i._)("div",pn,[(0,i._)("h3",null,(0,ne.zw)(o.result.in_progress?o.result.in_progress.length:"Loading"),1),bn]),fn]),(0,i._)("div",_n,[(0,i._)("div",gn,[(0,i._)("h3",null,(0,ne.zw)(o.result.failed_checklists?o.result.failed_checklists.length:"Loading"),1),yn]),vn])]),(0,i._)("div",kn,[(0,i._)("div",wn,[(0,i._)("div",Cn,[(0,i._)("div",Sn,[Dn,(0,i._)("div",Pn,[(0,i._)("button",{class:"btn btn-primary btn-sm",onClick:t[3]||(t[3]=(...e)=>r.redirectToGeneratedChecklistPage&&r.redirectToGeneratedChecklistPage(...e))}," View All ")])]),(0,i._)("div",In,[(0,i._)("div",xn,[o.result&&o.result.in_progress&&o.result.in_progress.length>0?((0,i.wg)(),(0,i.iD)("div",Rn,[(0,i._)("ul",$n,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.result.in_progress,((e,s)=>((0,i.wg)(),(0,i.iD)("li",{key:s,class:"list-group-item d-flex justify-content-between align-items-center",style:{cursor:"pointer"}},[(0,i.Uk)((0,ne.zw)(e.bom.product.name)+" - "+(0,ne.zw)(e.updated_at)+" ",1),(0,i._)("i",{class:"fas fa-eye",onClick:t[4]||(t[4]=e=>r.InProgressRedirectToChecklist())})])))),128))])])):((0,i.wg)(),(0,i.iD)("div",Ln,"None"))])])])]),(0,i._)("div",Bn,[(0,i._)("div",Un,[(0,i._)("div",On,[Nn,(0,i._)("div",jn,[(0,i._)("button",{class:"btn btn-success btn-sm",onClick:t[5]||(t[5]=e=>r.redirectToGeneratedChecklistPage())}," View All ")])]),(0,i._)("div",Mn,[(0,i._)("div",En,[o.result&&o.result.completed_checklists&&o.result.completed_checklists.length>0?((0,i.wg)(),(0,i.iD)("div",Tn,[(0,i._)("ul",qn,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.result.completed_checklists,((e,t)=>((0,i.wg)(),(0,i.iD)("li",{key:t,class:"list-group-item d-flex justify-content-between align-items-center",style:{cursor:"pointer"}},[(0,i.Uk)((0,ne.zw)(e.bom.product.name)+" - "+(0,ne.zw)(e.updated_at)+" ",1),(0,i._)("i",{class:"fas fa-eye",onClick:t=>r.CompletedRedirectToDetailsChecklist(e.id)},null,8,An)])))),128))])])):((0,i.wg)(),(0,i.iD)("div",Fn,"None"))])])])])]),(0,i._)("div",Wn,[(0,i._)("div",Vn,[(0,i._)("div",Zn,[(0,i._)("div",Gn,[zn,(0,i._)("div",Qn,[(0,i._)("button",{class:"btn btn-danger btn-sm",onClick:t[6]||(t[6]=(...e)=>r.redirectToGeneratedChecklistPage&&r.redirectToGeneratedChecklistPage(...e))}," View All ")])]),(0,i._)("div",Hn,[(0,i._)("div",Yn,[o.result&&o.result.failed_checklists&&o.result.failed_checklists.length>0?((0,i.wg)(),(0,i.iD)("div",Kn,[(0,i._)("ul",Jn,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.result.failed_checklists,((e,t)=>((0,i.wg)(),(0,i.iD)("li",{key:t,class:"list-group-item d-flex justify-content-between align-items-center",onClick:t=>r.FailedRedirectToDetailsChecklist(e.id),style:{cursor:"pointer"}},[(0,i.Uk)((0,ne.zw)(e.bom.product.name)+" - "+(0,ne.zw)(e.updated_at)+" ",1),eu],8,Xn)))),128))])])):((0,i.wg)(),(0,i.iD)("div",tu,"None"))])])])]),su]),(0,i._)("div",au,[(0,i._)("div",iu,[(0,i._)("div",lu,[ou,(0,i._)("div",ru,[(0,i._)("div",cu,[du,(0,i.wy)((0,i._)("input",{id:"startDate",type:"date","onUpdate:modelValue":t[7]||(t[7]=e=>o.selectedStartDate=e),class:"form-control",placeholder:"Select start date",onInput:t[8]||(t[8]=(...e)=>r.validateDates&&r.validateDates(...e))},null,544),[[a.nr,o.selectedStartDate]])]),(0,i._)("div",nu,[uu,(0,i.wy)((0,i._)("input",{id:"endDate",type:"date","onUpdate:modelValue":t[9]||(t[9]=e=>o.selectedEndDate=e),class:"form-control",placeholder:"Select end date",onInput:t[10]||(t[10]=(...e)=>r.validateDates&&r.validateDates(...e))},null,544),[[a.nr,o.selectedEndDate]])]),o.errorMessage?((0,i.wg)(),(0,i.iD)("div",mu,[hu,(0,i.Uk)(" "+(0,ne.zw)(o.errorMessage),1)])):(0,i.kq)("",!0)]),(0,i._)("div",pu,[bu,(0,i._)("button",{type:"button",class:"btn btn-success",onClick:t[11]||(t[11]=(...e)=>r.setSelectedOptionAndFetchData&&r.setSelectedOptionAndFetchData(...e)),disabled:r.isFetchButtonDisabled,"data-bs-dismiss":"modal"}," Fetch Checklists ",8,fu)])])])])]))}var gu={components:{},data(){return{selectedOption:"Today",result:{},selectedCustomDate:null,selectedStartDate:"",selectedEndDate:"",errorMessage:""}},computed:{isFetchButtonDisabled(){return!this.selectedStartDate||!this.selectedEndDate||new Date(this.selectedStartDate)>new Date(this.selectedEndDate)||new Date(this.selectedStartDate)>new Date||new Date(this.selectedEndDate)>new Date}},mounted(){this.fetchData()},methods:{validateDates(){if(!this.selectedStartDate)return void(this.errorMessage="Please select a start date.");const e=new Date(this.selectedStartDate),t=new Date;if(e>t)return void(this.errorMessage="Start date cannot be in the future.");if(!this.selectedEndDate)return void(this.errorMessage="");const s=new Date(this.selectedEndDate);this.errorMessage=e>s?"Start date cannot be greater than end date.":s>t?"End date cannot be in the future.":""},selectOption(e){this.selectedOption=e,"Custom"!==this.selectOption&&this.fetchData()},async fetchData(){const e={selected_option:this.selectedOption,start_date:this.selectedStartDate,end_date:this.selectedEndDate};console.log(e.selected_option),console.log(e.start_date),console.log(e.end_date),this.$store.commit("setIsLoading",!0),await le.Z.post("store/get-checklist-count/",e).then((e=>{this.result=e.data,console.log("backend data",this.result),this.$store.commit("setIsLoading",!1)})).catch((e=>{console.error(e),this.$store.commit("setIsLoading",!1)}))},setSelectedOptionAndFetchData(){this.selectedOption="Custom",this.validateDates(),""===this.errorMessage&&this.fetchData()},redirectToGeneratedChecklistPage(){const e=[...this.result.in_progress,...this.result.completed_checklists,...this.result.failed_checklists],t=e.find((e=>void 0!==e.bom?.id&&null!==e.bom?.id));if(t){const e=t.bom.id;console.log(e),this.$router.push(`/generated-checklists/${e}`)}else console.error("No valid id found in the checklists")},InProgressRedirectToChecklist(){const e=this.result?.in_progress?.[0]?.bom?.id;console.log(e),void 0!==e&&null!==e?this.$router.push(`/begin-checklist/${e}`):console.error("id is not available")},FailedRedirectToDetailsChecklist(e){void 0!==e&&null!==e?this.$router.push(`/checklist-details/${e}`):console.error("checklistId is not available")},CompletedRedirectToDetailsChecklist(e){void 0!==e&&null!==e?this.$router.push(`/checklist-details/${e}`):console.error("checklistId is not available")}}};const yu=(0,re.Z)(gu,[["render",_u],["__scopeId","data-v-bbcef4d6"]]);var vu=yu;const ku={key:0,class:"container text-center"},wu=(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1),Cu=(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1),Su=[wu,Cu],Du={key:1,class:"container"},Pu={class:"row align-items-center"},Iu={class:"d-flex align-items-center mt-4"},xu=(0,i._)("h2",{class:"mb-0"},"Checklist Report",-1),Ru=(0,i._)("span",{class:"ms-3 fs-4 text-muted"},"|",-1),$u={"aria-label":"breadcrumb",class:"d-inline-block ms-3"},Lu={class:"breadcrumb bg-transparent m-0 p-0"},Bu=(0,i._)("li",{class:"breadcrumb-item"},[(0,i._)("a",{href:"/"},[(0,i._)("i",{class:"fas fa-home me-1"}),(0,i.Uk)("Home")])],-1),Uu={class:"breadcrumb-item active"},Ou=(0,i._)("i",{class:"fas fa-chart-bar me-1"},null,-1),Nu=(0,i._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,i._)("i",{class:"fas fa-file-alt me-1"}),(0,i.Uk)(" Reports Checklist ")],-1);function ju(e,t,s,a,l,o){const r=(0,i.up)("router-link"),c=(0,i.up)("ChecklistReportTable");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",ku,Su)):((0,i.wg)(),(0,i.iD)("div",Du,[(0,i._)("div",Pu,[(0,i._)("div",Iu,[xu,Ru,(0,i._)("nav",$u,[(0,i._)("ol",Lu,[Bu,(0,i._)("li",Uu,[(0,i.Wm)(r,{to:"/reports"},{default:(0,i.w5)((()=>[Ou,(0,i.Uk)("Reports")])),_:1})]),Nu])])])]),(0,i.Wm)(c,{checklists:l.checklists,style:{"margin-top":"20px"}},null,8,["checklists"])]))}const Mu=e=>((0,i.dD)("data-v-0a735c3c"),e=e(),(0,i.Cn)(),e),Eu={class:"card card-outline card-primary mt-3"},Tu={class:"card-body"},qu={class:"row"},Au={class:"col-md-3 text-center"},Fu=Mu((()=>(0,i._)("h6",{class:"lead"},"Total Completed",-1))),Wu={class:"display-6"},Vu={class:"col-md-3 text-center"},Zu=Mu((()=>(0,i._)("h6",{class:"lead"},"Total In Progress",-1))),Gu={class:"display-6"},zu={class:"col-md-3 text-center"},Qu=Mu((()=>(0,i._)("h6",{class:"lead"},"Total Failed",-1))),Hu={class:"display-6"},Yu={class:"col-md-3 text-center"},Ku=Mu((()=>(0,i._)("h6",{class:"lead"},"Total Checklists",-1))),Ju={class:"display-6"};function Xu(e,t,s,a,l,o){const r=(0,i.up)("ag-grid-vue");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",Eu,[(0,i._)("div",Tu,[(0,i._)("div",qu,[(0,i._)("div",Au,[Fu,(0,i._)("p",Wu,(0,ne.zw)(l.total_completed),1)]),(0,i._)("div",Vu,[Zu,(0,i._)("p",Gu,(0,ne.zw)(l.total_in_progress),1)]),(0,i._)("div",zu,[Qu,(0,i._)("p",Hu,(0,ne.zw)(l.total_failed),1)]),(0,i._)("div",Yu,[Ku,(0,i._)("p",Ju,(0,ne.zw)(l.total_checklists),1)])])])]),(0,i._)("div",null,[(0,i.Wm)(r,{style:{height:"500px"},class:"ag-theme-quartz",rowData:s.checklists,defaultColDef:l.defaultColDef,columnDefs:l.colDefs,pagination:!0,onFirstDataRendered:o.onFirstDataRendered,onGridReady:o.onGridReady},null,8,["rowData","defaultColDef","columnDefs","onFirstDataRendered","onGridReady"])])],64)}var em={components:{AgGridVue:It.n},props:{checklists:{type:Array,required:!0}},data(){return{colDefs:[{headerName:"Checklist ID",field:"id"},{headerName:"Unique Code",field:"unique_code",valueFormatter:function(e){return null===e.value?"null":e.value}},{headerName:"Project Name",field:"bom.product.project.name"},{headerName:"Product Name",field:"bom.product.name"},{headerName:"Product Code",field:"bom.product.product_code"},{headerName:"Updated At",field:"updated_at"},{headerName:"Updated By",valueGetter:function(e){if(console.log(e.data.updated_by),null!=e.data.updated_by){const t=e.data.updated_by.first_name||"",s=e.data.updated_by.last_name||"";return t||s?`${t} ${s}`:""}return""}},{headerName:"Created At",field:"created_at"},{headerName:"Created By",valueGetter:function(e){const t=e.data.created_by.first_name||"",s=e.data.created_by.last_name||"";return t||s?`${t} ${s}`:""}},{headerName:"Status",field:"status"},{headerName:"View",cellRenderer:this.viewButtonRenderer}],defaultColDef:{filter:!0,sortable:!0,resizable:!0,autoSize:!0},gridApi:null,total_completed:0,total_in_progress:0,total_failed:0,total_checklists:0}},mounted(){},methods:{onFirstDataRendered(){this.calculateTotalSum(),this.gridApi.addEventListener("filterChanged",this.calculateTotalSum)},onGridReady(e){this.gridApi=e.api},calculateTotalSum(){let e=0,t=0,s=0;this.gridApi.forEachNodeAfterFilter((a=>{"Completed"==a.data.status?e+=1:"In Progress"==a.data.status?t+=1:s+=1})),this.total_completed=e,this.total_failed=s,this.total_in_progress=t,this.total_checklists=this.gridApi.getDisplayedRowCount()},viewButtonRenderer(e){const t=document.createElement("button");return t.innerHTML='<i class="fas fa-eye"></i>',t.classList.add("btn","btn-outline-secondary"),t.addEventListener("click",(()=>this.onViewClick(e.data))),t},onViewClick(e){"In Progress"===e.status?this.$router.push(`/begin-checklist/${e.bom.id}`):this.$router.push(`/checklist-details/${e.id}`)}}};const tm=(0,re.Z)(em,[["render",Xu],["__scopeId","data-v-0a735c3c"]]);var sm=tm,am={components:{ChecklistReportTable:sm},data(){return{checklists:[]}},mounted(){this.getChecklistReport()},methods:{async getChecklistReport(){console.log("run"),this.$store.commit("setIsLoading",!0),this.$store.commit("setIsLoading",!1),await le.Z.get("store/get-checklist-report/").then((e=>{console.log(e.data),this.checklists=e.data.checklists,this.$store.commit("setIsLoading",!1)})).catch((e=>{console.log("error:",e),this.$notify({title:"An error occured, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1)}))}}};const im=(0,re.Z)(am,[["render",ju]]);var lm=im;const om=e=>((0,i.dD)("data-v-4239cd5f"),e=e(),(0,i.Cn)(),e),rm={key:0,class:"container text-center"},cm=om((()=>(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1))),dm=om((()=>(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1))),nm=[cm,dm],um={key:1,class:"container"},mm={class:"row align-items-center"},hm={class:"col-md-6 mt-4"},pm={class:"d-flex align-items-center"},bm=om((()=>(0,i._)("h2",{class:"mb-0"},"Users",-1))),fm=om((()=>(0,i._)("span",{class:"ms-3 fs-4 text-muted"},"|",-1))),_m={"aria-label":"breadcrumb",class:"d-inline-block ms-3"},gm={class:"breadcrumb bg-transparent m-0 p-0"},ym={class:"breadcrumb-item"},vm=om((()=>(0,i._)("i",{class:"fas fa-home me-1"},null,-1))),km=om((()=>(0,i._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,i._)("i",{class:"fas fa-users me-1"}),(0,i.Uk)("Users ")],-1))),wm={class:"col-md-6 mt-4 text-end"},Cm=om((()=>(0,i._)("i",{class:"fas fa-user-plus me-1"},null,-1))),Sm={class:"container mt-5"},Dm={class:"table table-hover"},Pm=om((()=>(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",null,"Email"),(0,i._)("th",null,"Actions")])],-1))),Im=["onClick"],xm=om((()=>(0,i._)("i",{class:"fas fa-edit me-1"},null,-1))),Rm=["onClick"],$m=om((()=>(0,i._)("i",{class:"fas fa-trash-alt me-1"},null,-1)));function Lm(e,t,s,a,l,o){const r=(0,i.up)("router-link");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",rm,nm)):((0,i.wg)(),(0,i.iD)("div",um,[(0,i._)("div",mm,[(0,i._)("div",hm,[(0,i._)("div",pm,[bm,fm,(0,i._)("nav",_m,[(0,i._)("ol",gm,[(0,i._)("li",ym,[(0,i.Wm)(r,{to:"/"},{default:(0,i.w5)((()=>[vm,(0,i.Uk)(" Home")])),_:1})]),km])])])]),(0,i._)("div",wm,[(0,i.Wm)(r,{to:"/users/create-user",class:"btn btn-primary btn-sm ms-2"},{default:(0,i.w5)((()=>[Cm,(0,i.Uk)(" Create New User ")])),_:1})])]),(0,i._)("div",Sm,[(0,i._)("table",Dm,[Pm,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.userList,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e.id,onClick:t=>o.redirectToEditPage(e.id)},[(0,i._)("td",null,(0,ne.zw)(e.email),1),(0,i._)("td",null,[(0,i.Wm)(r,{to:{name:"EditUser",params:{id:e.id}},class:"btn btn-primary btn-sm"},{default:(0,i.w5)((()=>[xm,(0,i.Uk)(" Edit ")])),_:2},1032,["to"]),(0,i._)("button",{onClick:t=>o.deleteUser(t,e.id),class:"btn btn-danger btn-sm ml-3"},[$m,(0,i.Uk)(" Delete ")],8,Rm)])],8,Im)))),128))])])])]))}var Bm={name:"UserManagement",data(){return{userList:[]}},mounted(){this.fetchUsers()},methods:{fetchUsers(){this.$store.commit("setIsLoading",!0),le.Z.get("/accounts/users/").then((e=>{console.log("response.data",e.data),this.userList=e.data,this.$store.commit("setIsLoading",!1)})).catch((e=>{console.error("Error fetching users:",e),this.$store.commit("setIsLoading",!1)}))},redirectToEditPage(e){this.$router.push({name:"EditUser",params:{id:e}})},deleteUser(e,t){e.stopPropagation(),confirm("Are you sure you want to delete this user?")&&le.Z.delete(`/accounts/users/delete/${t}/`).then((()=>{console.log("User deleted successfully."),alert("User Deleted successfully!"),this.fetchUsers(),this.$router.push("/users")})).catch((e=>{alert("error deleting!"),console.error("Error deleting user:",e)}))}}};const Um=(0,re.Z)(Bm,[["render",Lm],["__scopeId","data-v-4239cd5f"]]);var Om=Um;const Nm=e=>((0,i.dD)("data-v-2b0f4779"),e=e(),(0,i.Cn)(),e),jm={key:0,class:"container text-center"},Mm=Nm((()=>(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1))),Em=Nm((()=>(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1))),Tm=[Mm,Em],qm={key:1,class:"container mt-4"},Am={class:"row align-items-center"},Fm={class:"col-md-8 mt-4"},Wm={class:"d-flex align-items-center"},Vm=Nm((()=>(0,i._)("h2",{class:"mb-0"},"Edit Line Item |",-1))),Zm={"aria-label":"breadcrumb",class:"ms-3"},Gm={class:"breadcrumb bg-transparent m-0 p-0 justify-content-end"},zm=Nm((()=>(0,i._)("li",{class:"breadcrumb-item"},[(0,i._)("a",{href:"/"},[(0,i._)("i",{class:"fas fa-home me-1"}),(0,i.Uk)("Home")])],-1))),Qm={class:"breadcrumb-item active","aria-current":"page"},Hm=Nm((()=>(0,i._)("i",{class:"fas fa-clipboard-list me-1"},null,-1))),Ym={class:"breadcrumb-item","aria-current":"page"},Km=Nm((()=>(0,i._)("i",{class:"fas fa-list-alt me-1"},null,-1))),Jm=Nm((()=>(0,i._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,i._)("i",{class:"fa fa-bars me-1","aria-hidden":"true"}),(0,i.Uk)("BOM Line Item ")],-1))),Xm={class:"col-md-4 mt-4 d-flex justify-content-end"},eh={class:"row mt-5"},th={class:"col-md-8 offset-md-2"},sh={class:"row"},ah={class:"col-md-4"},ih={class:"form-group"},lh=Nm((()=>(0,i._)("label",{for:"veplPartNumber"},"VEPL Part Number",-1))),oh={class:"col-md-4"},rh={class:"form-group"},ch=Nm((()=>(0,i._)("label",{for:"level"},"Level",-1))),dh={class:"col-md-4"},nh={class:"form-group"},uh=Nm((()=>(0,i._)("label",{for:"priorityLevel"},"Priority Level",-1))),mh={class:"row"},hh={class:"col-md-4"},ph={class:"form-group"},bh=Nm((()=>(0,i._)("label",{for:"value"},"Value",-1))),fh={class:"col-md-4"},_h={class:"form-group"},gh=Nm((()=>(0,i._)("label",{for:"pcbFootprint"},"PCB Footprint",-1))),yh={class:"col-md-4"},vh={class:"form-group"},kh=Nm((()=>(0,i._)("label",{for:"lineItemType"},"Type",-1))),wh=["value"],Ch={class:"form-group"},Sh=Nm((()=>(0,i._)("label",{for:"description"},"Description",-1))),Dh={class:"form-group"},Ph=Nm((()=>(0,i._)("label",{for:"references"},"References",-1))),Ih=["onClick"],xh={class:"form-group"},Rh=Nm((()=>(0,i._)("label",{for:"manufacturerParts"},"Manufacturer Parts",-1))),$h=Nm((()=>(0,i._)("br",null,null,-1))),Lh=Nm((()=>(0,i._)("button",{type:"button",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#exampleModal"}," Add Manufacturer Parts ",-1))),Bh={class:"form-group"},Uh=Nm((()=>(0,i._)("label",{for:"customerPartNumber"},"Customer Part Number",-1))),Oh={class:"row"},Nh={class:"col-md-6"},jh={class:"form-group"},Mh=Nm((()=>(0,i._)("label",{for:"quantity"},"Quantity",-1))),Eh={class:"col-md-6"},Th={class:"form-group"},qh=Nm((()=>(0,i._)("label",{for:"uom"},"UOM",-1))),Ah={class:"form-group"},Fh=Nm((()=>(0,i._)("label",{for:"assemblyStage"},"Assembly Stage",-1))),Wh=["value"],Vh={class:"form-group"},Zh=Nm((()=>(0,i._)("label",{for:"ecn"},"ECN",-1))),Gh={class:"form-group"},zh=Nm((()=>(0,i._)("label",{for:"msl"},"MSL",-1))),Qh={class:"form-group"},Hh=Nm((()=>(0,i._)("label",{for:"remarks"},"Remarks",-1))),Yh={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Kh={class:"modal-dialog modal-fullscreen"},Jh={class:"modal-content"},Xh=Nm((()=>(0,i._)("div",{class:"modal-header"},[(0,i._)("h1",{class:"modal-title fs-5",id:"exampleModalLabel"}," Select the Manufacturer Parts "),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),ep={class:"modal-body"},tp=Nm((()=>(0,i._)("div",{class:"modal-footer"},[(0,i._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close "),(0,i._)("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal"}," Save changes ")],-1)));function sp(e,t,s,l,o,r){const c=(0,i.up)("router-link"),d=(0,i.up)("manufacturer-parts-grid");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",jm,Tm)):((0,i.wg)(),(0,i.iD)("div",qm,[(0,i._)("div",Am,[(0,i._)("div",Fm,[(0,i._)("div",Wm,[Vm,(0,i._)("nav",Zm,[(0,i._)("ol",Gm,[zm,(0,i._)("li",Qm,[(0,i.Wm)(c,{to:"/bom"},{default:(0,i.w5)((()=>[Hm,(0,i.Uk)("Bill Of Materials ")])),_:1})]),(0,i._)("li",Ym,[(0,i.Wm)(c,{to:`/bom/edit/${o.bom_id}`},{default:(0,i.w5)((()=>[Km,(0,i.Uk)(" BOM Details ")])),_:1},8,["to"])]),Jm])])])]),(0,i._)("div",Xm,[(0,i._)("button",{type:"button",class:"btn btn-success me-2",onClick:t[0]||(t[0]=(...e)=>r.saveChanges&&r.saveChanges(...e))}," Update Changes "),(0,i._)("button",{type:"button",class:"btn btn-danger",onClick:t[1]||(t[1]=(...e)=>r.confirmDelete&&r.confirmDelete(...e))}," Delete Line Item ")])]),(0,i._)("div",eh,[(0,i._)("div",th,[(0,i._)("section",null,[(0,i._)("div",sh,[(0,i._)("div",ah,[(0,i._)("div",ih,[lh,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>o.editedBom.part_number=e),type:"text",class:"form-control"},null,512),[[a.nr,o.editedBom.part_number]])])]),(0,i._)("div",oh,[(0,i._)("div",rh,[ch,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>o.editedBom.level=e),type:"text",class:"form-control"},null,512),[[a.nr,o.editedBom.level]])])]),(0,i._)("div",dh,[(0,i._)("div",nh,[uh,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>o.editedBom.priority_level=e),type:"text",class:"form-control"},null,512),[[a.nr,o.editedBom.priority_level]])])])]),(0,i._)("div",mh,[(0,i._)("div",hh,[(0,i._)("div",ph,[bh,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>o.editedBom.value=e),type:"text",class:"form-control"},null,512),[[a.nr,o.editedBom.value]])])]),(0,i._)("div",fh,[(0,i._)("div",_h,[gh,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>o.editedBom.pcb_footprint=e),type:"text",class:"form-control"},null,512),[[a.nr,o.editedBom.pcb_footprint]])])]),(0,i._)("div",yh,[(0,i._)("div",vh,[kh,(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[7]||(t[7]=e=>o.editedBom.line_item_type=e),class:"form-control"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.line_item_types,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e.id,value:e.id},(0,ne.zw)(e.name),9,wh)))),128))],512),[[a.bM,o.editedBom.line_item_type]])])])]),(0,i._)("div",Ch,[Sh,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>o.editedBom.description=e),type:"text",class:"form-control"},null,512),[[a.nr,o.editedBom.description]])]),(0,i._)("div",Dh,[Ph,(0,i._)("div",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.editedBom.references,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e.id,class:"tag"},[(0,i.Uk)((0,ne.zw)(e.name)+" ",1),(0,i._)("span",{onClick:t=>r.removeReference(e),class:"remove-tag"},"X",8,Ih)])))),128))]),(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>o.newReference=e),onKeyup:t[10]||(t[10]=(0,a.D2)(((...e)=>r.addNewReference&&r.addNewReference(...e)),["enter"])),type:"text",placeholder:"Type to add a new reference",class:"form-control mt-2"},null,544),[[a.nr,o.newReference]])]),(0,i._)("div",xh,[Rh,$h,(0,i._)("div",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.editedBom.manufacturer_parts,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e.id,class:"tag"},(0,ne.zw)(e.part_number)+" - "+(0,ne.zw)(e.manufacturer.name),1)))),128))]),Lh]),(0,i._)("div",Bh,[Uh,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>o.editedBom.customer_part_number=e),type:"text",class:"form-control"},null,512),[[a.nr,o.editedBom.customer_part_number]])]),(0,i._)("div",Oh,[(0,i._)("div",Nh,[(0,i._)("div",jh,[Mh,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[12]||(t[12]=e=>o.editedBom.quantity=e),type:"text",class:"form-control"},null,512),[[a.nr,o.editedBom.quantity]])])]),(0,i._)("div",Eh,[(0,i._)("div",Th,[qh,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[13]||(t[13]=e=>o.editedBom.uom=e),type:"text",class:"form-control"},null,512),[[a.nr,o.editedBom.uom]])])])]),(0,i._)("div",Ah,[Fh,(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[14]||(t[14]=e=>o.editedBom.assembly_stage=e),class:"form-control"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.assembly_stages,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e.id,value:e.id},(0,ne.zw)(e.name),9,Wh)))),128))],512),[[a.bM,o.editedBom.assembly_stage]])]),(0,i._)("div",Vh,[Zh,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[15]||(t[15]=e=>o.editedBom.ecn=e),type:"text",class:"form-control"},null,512),[[a.nr,o.editedBom.ecn]])]),(0,i._)("div",Gh,[zh,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[16]||(t[16]=e=>o.editedBom.msl=e),type:"text",class:"form-control"},null,512),[[a.nr,o.editedBom.msl]])]),(0,i._)("div",Qh,[Hh,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[17]||(t[17]=e=>o.editedBom.remarks=e),type:"text",class:"form-control"},null,512),[[a.nr,o.editedBom.remarks]])])])])]),(0,i._)("div",Yh,[(0,i._)("div",Kh,[(0,i._)("div",Jh,[Xh,(0,i._)("div",ep,[(0,i.Wm)(d,{manufacturerParts:o.manufacturerParts,selectedManufacturerParts:o.editedBom.manufacturer_parts,"onUpdate:selectedManufacturerParts":r.updateManufacturerParts},null,8,["manufacturerParts","selectedManufacturerParts","onUpdate:selectedManufacturerParts"])]),tp])])])]))}const ap={class:"ag-theme-quartz",style:{height:"600px"}};function ip(e,t,s,a,l,o){const r=(0,i.up)("ag-grid-vue");return(0,i.wg)(),(0,i.iD)("div",ap,[(0,i.Wm)(r,{ref:"agGrid",gridOptions:l.gridOptions,columnDefs:l.columnDefs,rowData:s.manufacturerParts,onFirstDataRendered:o.onFirstDataRendered,onSelectionChanged:o.onSelectionChanged},null,8,["gridOptions","columnDefs","rowData","onFirstDataRendered","onSelectionChanged"])])}var lp={components:{"ag-grid-vue":It.n},props:{manufacturerParts:{type:Array,default:()=>[]},selectedManufacturerParts:{type:Array,default:()=>[]}},data(){return{gridOptions:{domLayout:"autoHeight",rowSelection:"multiple",pagination:!0,paginationPageSize:20},columnDefs:[{headerCheckboxSelection:!0,checkboxSelection:!0,headerName:"Part Number",field:"part_number"},{headerName:"Manufacturer Name",field:"manufacturer.name"}]}},methods:{onFirstDataRendered(e){const t=e.api;t.forEachNode((e=>{const t=e.data,s=this.selectedManufacturerParts.some((e=>e.id===t.id));e.setSelected(s)}))},onSelectionChanged(){const e=this.$refs.agGrid.api.getSelectedRows();this.$emit("update:selectedManufacturerParts",e)}}};const op=(0,re.Z)(lp,[["render",ip],["__scopeId","data-v-7265bedc"]]);var rp=op,cp={data(){return{editedBom:{part_number:"",level:"",priority_level:"",value:"",pcb_footprint:"",line_item_type:"",description:"",references:[],manufacturer_parts:[],customer_part_number:"",quantity:"",uom:"",assembly_stage:"",ecn:"",msl:"",remarks:""},line_item_types:[],newReference:"",message:"",manufacturerParts:[],assembly_stages:[],bom_id:""}},components:{"manufacturer-parts-grid":rp},methods:{async fetchDataFromAPI(){try{const e=await le.Z.get(`store/edit-bom-line-item/${this.$route.params.id}/`);console.log(" Main API response for line items",e.data),this.editedBom=e.data.bom_line_item,this.bom_id=e.data.bom_line_item.bom,console.log("bom-id",this.bom_id),this.line_item_types=e.data.line_item_types,this.manufacturerParts=e.data.manufacturers_parts,this.assembly_stages=e.data.assembly_stages,console.log("line_item_types",this.line_item_types),this.line_item_types.length>0&&(this.editedBom.line_item_type=e.data.bom_line_item.line_item_type.id),this.assembly_stages.length>0&&(this.editedBom.assembly_stage=e.data.bom_line_item.assembly_stage.id),console.log("this is edit bom",this.editedBom)}catch(e){console.error("Error fetching data from the API:",e)}},addNewReference(){if(""!==this.newReference.trim()){if(!this.isReferenceExists(this.newReference.trim())){const e={name:this.newReference.trim()};this.editedBom.references.push(e)}this.newReference=""}},isReferenceExists(e){return this.editedBom.references.some((t=>t.name.toLowerCase()===e.toLowerCase()))},removeReference(e){this.editedBom.references=this.editedBom.references.filter((t=>t!==e))},submit(){console.log(this.editedBom)},async saveChanges(){try{const e=await le.Z.put(`store/edit-bom-line-item/${this.$route.params.id}/`,this.editedBom);console.log(e.data),this.$notify({title:"Success",text:"BOM Line Item successfully edited",type:"success"}),this.$router.go()}catch(e){console.error("Error updating BOM line item:",e),this.$notify({title:"Error",text:"Failed to edit BOM Line Item",type:"error"})}},async confirmDelete(){if(confirm("Are you sure you want to delete this BOM Line Item?"))try{const e=await le.Z.delete(`store/delete-bom-line-item/${this.$route.params.id}`);204===e.status?(this.$notify({title:"Bom Line Item Deleted Successfully",type:"bg-success-subtle text-success",duration:5e3}),this.$router.push(`/bom/edit/${this.bom_id}`)):this.$notify({title:"An error occurred while deleting BOM Line Item",type:"alert-danger",duration:5e3})}catch(e){console.error("Error deleting BOM Line Item:",e),this.$notify({title:"An error occurred while deleting BOM Line Item",type:"alert-danger",duration:5e3})}},updateManufacturerParts(e){this.editedBom.manufacturer_parts=e},getReferences(e){return e&&e.length>0?e.map((e=>e.name)).join(", "):""},getManufacturerParts(e){return e&&e.length>0?e.map((e=>`${e.part_number} - ${e.manufacturer.name}`)).join(", "):""}},updateManufacturerParts(e){this.editedBom.manufacturer_parts=e},mounted(){this.fetchDataFromAPI()}};const dp=(0,re.Z)(cp,[["render",sp],["__scopeId","data-v-2b0f4779"]]);var np=dp;const up=e=>((0,i.dD)("data-v-40564fe1"),e=e(),(0,i.Cn)(),e),mp={key:0,class:"container text-center"},hp=up((()=>(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1))),pp=up((()=>(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1))),bp=[hp,pp],fp={key:1,class:"container"},_p={class:"row align-items-center"},gp={class:"col-md-6 mt-4"},yp={class:"d-flex align-items-center"},vp=up((()=>(0,i._)("h2",{class:"mb-0"},"Users",-1))),kp=up((()=>(0,i._)("span",{class:"ms-3 fs-4 text-muted"},"|",-1))),wp={"aria-label":"breadcrumb",class:"d-inline-block ms-3"},Cp={class:"breadcrumb bg-transparent m-0 p-0"},Sp={class:"breadcrumb-item"},Dp=up((()=>(0,i._)("i",{class:"fas fa-home me-1"},null,-1))),Pp={class:"breadcrumb-item"},Ip=up((()=>(0,i._)("i",{class:"fas fa-users me-1"},null,-1))),xp=up((()=>(0,i._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,i._)("i",{class:"fas fa-edit me-1"}),(0,i.Uk)(" Edit User ")],-1))),Rp={class:"col-md-6 mt-4 text-end"},$p=up((()=>(0,i._)("i",{class:"fas fa-save me-1"},null,-1))),Lp=up((()=>(0,i._)("i",{class:"fas fa-trash me-1"},null,-1))),Bp={class:"card animate__animated animate__fadeIn mt-5"},Up=up((()=>(0,i._)("div",{class:"card-header bg-primary text-white"},[(0,i._)("h4",{class:"card-title"},[(0,i._)("i",{class:"fas fa-user me-1"}),(0,i.Uk)(" User Information ")])],-1))),Op={class:"card-body"},Np={class:"mb-3"},jp=up((()=>(0,i._)("label",{for:"email",class:"form-label"},"Email:",-1))),Mp={class:"input-group"},Ep=up((()=>(0,i._)("span",{class:"input-group-text"},[(0,i._)("i",{class:"fas fa-envelope"})],-1))),Tp={key:0,class:"text-danger"},qp={class:"mb-3 row"},Ap={class:"col"},Fp=up((()=>(0,i._)("label",{for:"first_name",class:"form-label"},"First Name:",-1))),Wp={class:"input-group"},Vp=up((()=>(0,i._)("span",{class:"input-group-text"},[(0,i._)("i",{class:"fas fa-user"})],-1))),Zp={key:0,class:"text-danger"},Gp={class:"col"},zp=up((()=>(0,i._)("label",{for:"last_name",class:"form-label"},"Last Name:",-1))),Qp={class:"input-group"},Hp=up((()=>(0,i._)("span",{class:"input-group-text"},[(0,i._)("i",{class:"fas fa-user"})],-1))),Yp={class:"mb-3"},Kp=up((()=>(0,i._)("label",{for:"phone_number",class:"form-label"},"Phone Number:",-1))),Jp={class:"input-group"},Xp=up((()=>(0,i._)("span",{class:"input-group-text"},[(0,i._)("i",{class:"fas fa-phone"})],-1))),eb={class:"mb-3 row"},tb={class:"col"},sb={class:"form-check"},ab=up((()=>(0,i._)("label",{class:"form-check-label",for:"is_superuser"},[(0,i._)("i",{class:"fas fa-user-shield me-1"}),(0,i.Uk)(" Is Admin")],-1))),ib={class:"col"},lb={class:"form-check"},ob=["disabled"],rb=up((()=>(0,i._)("label",{class:"form-check-label",for:"is_staff"},[(0,i._)("i",{class:"fas fa-user-cog me-1"}),(0,i.Uk)(" Is Staff")],-1))),cb={class:"mb-3 row"},db={class:"col"},nb={class:"form-check"},ub=["disabled"],mb=up((()=>(0,i._)("label",{class:"form-check-label",for:"is_store_team"},[(0,i._)("i",{class:"fas fa-user-shield me-1"}),(0,i.Uk)(" Is Store Team")],-1))),hb={class:"col"},pb={class:"form-check"},bb=["disabled"],fb=up((()=>(0,i._)("label",{class:"form-check-label",for:"is_design_team"},[(0,i._)("i",{class:"fas fa-user-cog me-1"}),(0,i.Uk)(" Is Design Team")],-1)));function _b(e,t,s,l,o,r){const c=(0,i.up)("router-link");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",mp,bp)):((0,i.wg)(),(0,i.iD)("div",fp,[(0,i._)("div",_p,[(0,i._)("div",gp,[(0,i._)("div",yp,[vp,kp,(0,i._)("nav",wp,[(0,i._)("ol",Cp,[(0,i._)("li",Sp,[(0,i.Wm)(c,{to:"/"},{default:(0,i.w5)((()=>[Dp,(0,i.Uk)(" Home")])),_:1})]),(0,i._)("li",Pp,[(0,i.Wm)(c,{to:"/users"},{default:(0,i.w5)((()=>[Ip,(0,i.Uk)(" Users")])),_:1})]),xp])])])]),(0,i._)("div",Rp,[(0,i._)("button",{type:"submit",class:"btn btn-success btn-sm",onClick:t[0]||(t[0]=(...e)=>r.updateUser&&r.updateUser(...e))},[$p,(0,i.Uk)(" Save Changes ")]),(0,i._)("button",{type:"button",class:"btn btn-danger ms-2 btn-sm",onClick:t[1]||(t[1]=(...e)=>r.deleteUser&&r.deleteUser(...e))},[Lp,(0,i.Uk)(" Delete User ")])])]),(0,i._)("div",Bp,[Up,(0,i._)("div",Op,[(0,i._)("div",Np,[jp,(0,i._)("div",Mp,[Ep,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>o.editedUser.email=e),type:"email",class:"form-control",id:"email",required:""},null,512),[[a.nr,o.editedUser.email]])]),o.editedUser.email?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("small",Tp,"Email is required."))]),(0,i._)("div",qp,[(0,i._)("div",Ap,[Fp,(0,i._)("div",Wp,[Vp,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>o.editedUser.first_name=e),type:"text",class:"form-control",id:"first_name",required:""},null,512),[[a.nr,o.editedUser.first_name]])]),o.editedUser.first_name?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("small",Zp,"First Name is required."))]),(0,i._)("div",Gp,[zp,(0,i._)("div",Qp,[Hp,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>o.editedUser.last_name=e),type:"text",class:"form-control",id:"last_name"},null,512),[[a.nr,o.editedUser.last_name]])])])]),(0,i._)("div",Yp,[Kp,(0,i._)("div",Jp,[Xp,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>o.editedUser.phone_number=e),type:"tel",class:"form-control",id:"phone_number"},null,512),[[a.nr,o.editedUser.phone_number]])])]),(0,i._)("div",eb,[(0,i._)("div",tb,[(0,i._)("div",sb,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>o.editedUser.is_superuser=e),onChange:t[7]||(t[7]=(...e)=>r.updateOthers&&r.updateOthers(...e)),type:"checkbox",class:"form-check-input",id:"is_superuser"},null,544),[[a.e8,o.editedUser.is_superuser]]),ab])]),(0,i._)("div",ib,[(0,i._)("div",lb,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>o.editedUser.is_staff=e),disabled:o.editedUser.is_superuser,type:"checkbox",class:"form-check-input",id:"is_staff"},null,8,ob),[[a.e8,o.editedUser.is_staff]]),rb])])]),(0,i._)("div",cb,[(0,i._)("div",db,[(0,i._)("div",nb,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>o.editedUser.is_store_team=e),disabled:o.editedUser.is_superuser,type:"checkbox",class:"form-check-input",id:"is_store_team"},null,8,ub),[[a.e8,o.editedUser.is_store_team]]),mb])]),(0,i._)("div",hb,[(0,i._)("div",pb,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>o.editedUser.is_design_team=e),disabled:o.editedUser.is_superuser,type:"checkbox",class:"form-check-input",id:"is_design_team"},null,8,bb),[[a.e8,o.editedUser.is_design_team]]),fb])])])])])]))}var gb={name:"EditUser",data(){return{userId:null,editedUser:{email:"",first_name:"",last_name:"",phone_number:"",is_superuser:!1,is_staff:!1,is_store_team:!1,is_design_team:!1}}},mounted(){this.userId=this.$route.params.id,this.fetchUserData()},methods:{fetchUserData(){this.$store.commit("setIsLoading",!0),le.Z.get(`/accounts/users/${this.userId}/`).then((e=>{console.log("edit user response data",e.data),this.editedUser=e.data,this.$store.commit("setIsLoading",!1)})).catch((e=>{this.$store.commit("setIsLoading",!1),console.error("Error fetching user data:",e)}))},updateOthers(){this.editedUser.is_superuser&&(this.editedUser.is_staff=!0,this.editedUser.is_store_team=!0,this.editedUser.is_design_team=!0)},updateUser(){confirm("Are you sure you want to update this user?")&&(this.$store.commit("setIsLoading",!0),le.Z.put(`/accounts/users/update/${this.userId}/`,this.editedUser).then((e=>{console.log("User updated successfully:",e.data),this.$store.commit("setIsLoading",!1),alert("User Updated successfully!")})).catch((e=>{console.error("Error updating user:",e),this.$store.commit("setIsLoading",!1)})))},deleteUser(){confirm("Are you sure you want to delete this user?")&&(this.$store.commit("setIsLoading",!0),le.Z.delete(`/accounts/users/delete/${this.userId}/`).then((()=>{console.log("User deleted successfully."),this.$store.commit("setIsLoading",!1),alert("User Deleted successfully!"),this.$router.push("/users")})).catch((e=>{alert("error deleting!"),console.error("Error deleting user:",e)})))}}};const yb=(0,re.Z)(gb,[["render",_b],["__scopeId","data-v-40564fe1"]]);var vb=yb;const kb=e=>((0,i.dD)("data-v-1ac747f3"),e=e(),(0,i.Cn)(),e),wb={class:"container"},Cb={class:"row align-items-center"},Sb={class:"col-md-6 mt-4"},Db={class:"d-flex align-items-center"},Pb=kb((()=>(0,i._)("h2",{class:"mb-0"},"Users",-1))),Ib=kb((()=>(0,i._)("span",{class:"ms-3 fs-4 text-muted"},"|",-1))),xb={"aria-label":"breadcrumb",class:"d-inline-block ms-3"},Rb={class:"breadcrumb bg-transparent m-0 p-0"},$b={class:"breadcrumb-item"},Lb=kb((()=>(0,i._)("i",{class:"fas fa-home me-1"},null,-1))),Bb={class:"breadcrumb-item"},Ub=kb((()=>(0,i._)("i",{class:"fas fa-users me-1"},null,-1))),Ob=kb((()=>(0,i._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,i._)("i",{class:"fa fa-user-plus"}),(0,i.Uk)(" Create User ")],-1))),Nb={class:"col-md-6 mt-4 text-end"},jb=kb((()=>(0,i._)("i",{class:"fas fa-save me-1"},null,-1))),Mb={class:"card animate__animated animate__fadeIn mt-5"},Eb=kb((()=>(0,i._)("div",{class:"card-header bg-primary text-white"},[(0,i._)("h4",{class:"card-title"},[(0,i._)("i",{class:"fas fa-user"}),(0,i.Uk)(" User Information")])],-1))),Tb={class:"card-body"},qb={class:"mb-3"},Ab=kb((()=>(0,i._)("label",{for:"email",class:"form-label"},"Email:",-1))),Fb={class:"input-group"},Wb=kb((()=>(0,i._)("span",{class:"input-group-text"},[(0,i._)("i",{class:"fas fa-envelope"})],-1))),Vb={key:0,class:"text-danger"},Zb={class:"mb-3"},Gb=kb((()=>(0,i._)("label",{for:"password",class:"form-label"},"Password:",-1))),zb={class:"input-group"},Qb=kb((()=>(0,i._)("span",{class:"input-group-text"},[(0,i._)("i",{class:"fas fa-lock"})],-1))),Hb={key:0,class:"text-danger"},Yb={key:1,class:"text-danger"},Kb=kb((()=>(0,i._)("i",{class:"fas fa-exclamation-triangle"},null,-1))),Jb={class:"mb-3 row"},Xb={class:"col"},ef=kb((()=>(0,i._)("label",{for:"first_name",class:"form-label"},"First Name:",-1))),tf={class:"input-group"},sf=kb((()=>(0,i._)("span",{class:"input-group-text"},[(0,i._)("i",{class:"fas fa-user"})],-1))),af={key:0,class:"text-danger"},lf={class:"col"},of=kb((()=>(0,i._)("label",{for:"last_name",class:"form-label"},"Last Name:",-1))),rf={class:"input-group"},cf=kb((()=>(0,i._)("span",{class:"input-group-text"},[(0,i._)("i",{class:"fas fa-user"})],-1))),df={class:"mb-3"},nf=kb((()=>(0,i._)("label",{for:"phone_number",class:"form-label"},"Phone Number:",-1))),uf={class:"input-group"},mf=kb((()=>(0,i._)("span",{class:"input-group-text"},[(0,i._)("i",{class:"fas fa-phone"})],-1))),hf={class:"mb-3 row"},pf={class:"col"},bf={class:"form-check"},ff=kb((()=>(0,i._)("label",{class:"form-check-label",for:"is_superuser"},"Is Admin",-1))),_f={class:"col"},gf={class:"form-check"},yf=kb((()=>(0,i._)("label",{class:"form-check-label",for:"is_staff"},"Is Staff",-1)));function vf(e,t,s,l,o,r){const c=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",wb,[(0,i._)("div",Cb,[(0,i._)("div",Sb,[(0,i._)("div",Db,[Pb,Ib,(0,i._)("nav",xb,[(0,i._)("ol",Rb,[(0,i._)("li",$b,[(0,i.Wm)(c,{to:"/"},{default:(0,i.w5)((()=>[Lb,(0,i.Uk)("Home")])),_:1})]),(0,i._)("li",Bb,[(0,i.Wm)(c,{to:"/users"},{default:(0,i.w5)((()=>[Ub,(0,i.Uk)("Users")])),_:1})]),Ob])])])]),(0,i._)("div",Nb,[(0,i._)("button",{type:"submit",class:"btn btn-success btn-sm",onClick:t[0]||(t[0]=(...e)=>r.createUser&&r.createUser(...e))},[jb,(0,i.Uk)(" Create User ")])])]),(0,i._)("div",Mb,[Eb,(0,i._)("div",Tb,[(0,i._)("div",qb,[Ab,(0,i._)("div",Fb,[Wb,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>o.newUser.email=e),type:"email",class:"form-control",id:"email",required:""},null,512),[[a.nr,o.newUser.email]])]),!o.newUser.email&&o.formSubmitted?((0,i.wg)(),(0,i.iD)("small",Vb," Email is required. ")):(0,i.kq)("",!0)]),(0,i._)("div",Zb,[Gb,(0,i._)("div",zb,[Qb,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>o.newUser.password=e),type:"password",class:"form-control",id:"password",required:"",onFocus:t[3]||(t[3]=(...e)=>r.clearPasswordError&&r.clearPasswordError(...e))},null,544),[[a.nr,o.newUser.password]])]),!o.newUser.password&&o.formSubmitted?((0,i.wg)(),(0,i.iD)("small",Hb," Password is required. ")):(0,i.kq)("",!0),o.passwordAuthenticationError?((0,i.wg)(),(0,i.iD)("div",Yb,[(0,i._)("strong",null,[Kb,(0,i.Uk)(" "+(0,ne.zw)(o.passwordAuthenticationError),1)])])):(0,i.kq)("",!0)]),(0,i._)("div",Jb,[(0,i._)("div",Xb,[ef,(0,i._)("div",tf,[sf,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>o.newUser.first_name=e),type:"text",class:"form-control",id:"first_name",required:""},null,512),[[a.nr,o.newUser.first_name]])]),!o.newUser.first_name&&o.formSubmitted?((0,i.wg)(),(0,i.iD)("small",af," First Name is required. ")):(0,i.kq)("",!0)]),(0,i._)("div",lf,[of,(0,i._)("div",rf,[cf,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>o.newUser.last_name=e),type:"text",class:"form-control",id:"last_name",required:""},null,512),[[a.nr,o.newUser.last_name]])])])]),(0,i._)("div",df,[nf,(0,i._)("div",uf,[mf,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>o.newUser.phone_number=e),type:"tel",class:"form-control",id:"phone_number"},null,512),[[a.nr,o.newUser.phone_number]])])]),(0,i._)("div",hf,[(0,i._)("div",pf,[(0,i._)("div",bf,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>o.newUser.is_superuser=e),type:"checkbox",class:"form-check-input",id:"is_superuser"},null,512),[[a.e8,o.newUser.is_superuser]]),ff])]),(0,i._)("div",_f,[(0,i._)("div",gf,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>o.newUser.is_staff=e),type:"checkbox",class:"form-check-input",id:"is_staff"},null,512),[[a.e8,o.newUser.is_staff]]),yf])])])])])])}var kf={name:"CreateUser",data(){return{newUser:{email:"",password:"",first_name:"",last_name:"",phone_number:"",is_superuser:!1,is_staff:!1},formSubmitted:!1,passwordAuthenticationError:null}},methods:{createUser(){this.formSubmitted=!0,this.passwordAuthenticationError=null,this.newUser.email&&this.newUser.password&&this.newUser.first_name&&le.Z.post("/accounts/users/create/",this.newUser).then((e=>{console.log("User created successfully:",e.data),alert("User created successfully!"),this.$router.push("/users")})).catch((e=>{e.response&&e.response.data.password?this.passwordAuthenticationError=e.response.data.password[0]:console.error("Error creating user:",e)}))},clearPasswordError(){this.passwordAuthenticationError=null}}};const wf=(0,re.Z)(kf,[["render",vf],["__scopeId","data-v-1ac747f3"]]);var Cf=wf;const Sf={key:0,class:"container text-center"},Df=(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1),Pf=(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1),If=[Df,Pf],xf={key:1,class:"container"},Rf={class:"row align-items-center"},$f=(0,i.uE)('<div class="col-md-6 mt-4"><div class="d-flex align-items-center"><h2 class="mb-0">Orders</h2><span class="ms-3 fs-4 text-muted">|</span><nav aria-label="breadcrumb" class="d-inline-block ms-3"><ol class="breadcrumb bg-transparent m-0 p-0"><li class="breadcrumb-item"><a href="/"><i class="fas fa-home me-1"></i>Home</a></li><li class="breadcrumb-item active" aria-current="page"><i class="fas fa-shopping-cart me-1"></i> Orders </li></ol></nav></div></div>',1),Lf={class:"col-md-6 d-flex justify-content-end mt-4"};function Bf(e,t,s,a,l,o){const r=(0,i.up)("router-link"),c=(0,i.up)("OrderDetailsTable");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",Sf,If)):((0,i.wg)(),(0,i.iD)("div",xf,[(0,i._)("div",Rf,[$f,(0,i._)("div",Lf,[(0,i.Wm)(r,{to:"/orders/create",class:"btn btn-primary btn-sm ms-2"},{default:(0,i.w5)((()=>[(0,i.Uk)(" Create Order ")])),_:1})])]),(0,i.Wm)(c,{style:{"margin-top":"20px"},orders:l.orders,onRowClicked:o.handleRowClicked,onRowSelected:o.handleRowSelected},null,8,["orders","onRowClicked","onRowSelected"])]))}function Uf(e,t,s,a,l,o){const r=(0,i.up)("ag-grid-vue");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(r,{style:{height:"500px"},class:"ag-theme-quartz",rowData:s.orders,defaultColDef:l.defaultColDef,columnDefs:l.colDefs,pagination:!0,rowSelection:"multiple",onRowClicked:o.onRowClicked,onSelectionChanged:o.onSelectionChanged},null,8,["rowData","defaultColDef","columnDefs","onRowClicked","onSelectionChanged"])])}var Of={name:"App",components:{AgGridVue:It.n},props:{orders:{type:Array,required:!0}},data(){return{colDefs:[{field:"id",headerName:"Order ID",hide:!0},{field:"bom.id",headerName:"BOM ID ",hide:!0},{field:"bom.product.project.name",checkboxSelection:!0,headerName:"Project Name"},{field:"bom.product.name",headerName:"Product"},{field:"batch_quantity",headerName:"Batch Quantity"},{field:"bom.bom_file_name",headerName:"BOM File Name"},{headerName:"Download",cellRenderer:this.editButtonRenderer,flex:1}],defaultColDef:{filter:!0,sortable:!0,resizable:!0,autoSize:!0,autoSizeColumns:!0},selectedRows:[]}},methods:{onRowClicked(e){this.$emit("rowClicked",e.data)},onSelectionChanged(e){const t=e.api.getSelectedRows(),s=t.length>0?t[0]:null;s?this.$emit("rowSelected",s):this.$emit("rowDeselected")},editButtonRenderer(e){console.log(e);const t=document.createElement("button");return t.innerHTML='<i class="fas fa-download"></i>',t.classList.add("btn-sm","btn-primary"),t.addEventListener("click",(()=>this.downloadFile(e.data.bom.bom_file_url))),t},downloadFile(e){const t=document.createElement("a");t.href=e,t.target="_blank",t.download="BOM_File",document.body.appendChild(t),t.click(),document.body.removeChild(t)},onEditClick(e){this.$router.push(`/bom/edit/${e}`)}}};const Nf=(0,re.Z)(Of,[["render",Uf]]);var jf=Nf,Mf={components:{OrderDetailsTable:jf},data(){return{orders:[]}},methods:{async fetchData(){try{this.$store.commit("setIsLoading",!0);const e=await le.Z.get("store/get-orders/");console.log("response.data",e.data),this.orders=e.data.orders,console.log("orders",this.orders),this.$store.commit("setIsLoading",!1)}catch(e){console.error("Error fetching BOM data:",e),this.$store.commit("setIsLoading",!1)}},handleRowClicked(e){console.log("Clicked Row:",e)},handleRowSelected(e){console.log("Row Selected:",e),this.selectedRow=e}},mounted(){this.fetchData()}};const Ef=(0,re.Z)(Mf,[["render",Bf]]);var Tf=Ef;const qf=e=>((0,i.dD)("data-v-ffafc8a8"),e=e(),(0,i.Cn)(),e),Af={key:0,class:"container text-center"},Ff=qf((()=>(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1))),Wf=qf((()=>(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1))),Vf=[Ff,Wf],Zf={key:1,class:"container"},Gf={class:"row align-items-center"},zf={class:"col-md-6 mt-4"},Qf={class:"d-flex align-items-center"},Hf=qf((()=>(0,i._)("h2",{class:"mb-0"},"Orders",-1))),Yf=qf((()=>(0,i._)("span",{class:"ms-3 fs-4 text-muted"},"|",-1))),Kf={"aria-label":"breadcrumb",class:"d-inline-block ms-3"},Jf={class:"breadcrumb bg-transparent m-0 p-0"},Xf=qf((()=>(0,i._)("li",{class:"breadcrumb-item"},[(0,i._)("a",{href:"/"},[(0,i._)("i",{class:"fas fa-home me-1"}),(0,i.Uk)("Home")])],-1))),e_={class:"breadcrumb-item active"},t_=qf((()=>(0,i._)("i",{class:"fas fa-shopping-cart me-1"},null,-1))),s_=qf((()=>(0,i._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,i._)("i",{class:"fa-solid fa-receipt me-1"}),(0,i.Uk)(" Create Order ")],-1))),a_={class:"col-md-6 d-flex justify-content-end mt-4"},i_={class:"card p-3 mb-4 mt-4"},l_={class:"row mb-3"},o_={class:"col-md-6"},r_=qf((()=>(0,i._)("label",{for:"projectDropdown",class:"form-label"},"Select Project",-1))),c_=["value"],d_={class:"col-md-6"},n_=qf((()=>(0,i._)("label",{for:"productCode",class:"form-label"},"Product ",-1))),u_=["value"],m_={key:0,class:"row mb-3"},h_={class:"col-md-6"},p_=qf((()=>(0,i._)("label",{for:"bomType",class:"form-label"},"BOM Type",-1))),b_={class:"col-md-6"},f_=qf((()=>(0,i._)("label",{for:"bomRevNo",class:"form-label"},"BOM REV No",-1))),__={class:"row mb-3 justify-content-center"},g_={class:"col-md-6"},y_=qf((()=>(0,i._)("label",{for:"batchQuantity",class:"form-label"},[(0,i._)("i",{class:"fas fa-flask me-2"}),(0,i.Uk)("Batch Quantity ")],-1))),v_={key:0,class:"col-md-6"},k_=qf((()=>(0,i._)("label",{for:"issueDate",class:"form-label"},"Issue Date",-1))),w_={key:1,class:"card p-3 mb-4"},C_=qf((()=>(0,i._)("label",{for:"fileInput",class:"form-label"},[(0,i._)("i",{class:"fas fa-cloud-upload-alt mr-2"}),(0,i.Uk)(" Choose BOM Excel file ")],-1))),S_={class:"custom-file"},D_={class:"custom-file-label",for:"fileInput"},P_={class:"radio-button"},I_={class:"form-check form-check-inline"},x_=qf((()=>(0,i._)("label",{class:"form-check-label",for:"flexRadioDefault1"}," Upload a new BOM ",-1))),R_={class:"form-check form-check-inline"},$_=qf((()=>(0,i._)("label",{class:"form-check-label",for:"flexRadioDefault2"}," Select BOM ",-1))),L_={key:2},B_={type:"button",class:"btn btn-primary mt-4","data-bs-toggle":"modal","data-bs-target":"#exampleModal"},U_={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},O_={class:"modal-dialog modal-xl"},N_={class:"modal-content"},j_=qf((()=>(0,i._)("div",{class:"modal-header"},[(0,i._)("h5",{class:"modal-title",id:"exampleModalLabel"},"Details"),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),M_={class:"modal-body"},E_={class:"modal-footer"},T_=qf((()=>(0,i._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1)));function q_(e,t,s,l,o,r){const c=(0,i.up)("router-link"),d=(0,i.up)("OrderBomDetailsVue");return o.isLoading?((0,i.wg)(),(0,i.iD)("div",Af,Vf)):((0,i.wg)(),(0,i.iD)("div",Zf,[(0,i._)("div",Gf,[(0,i._)("div",zf,[(0,i._)("div",Qf,[Hf,Yf,(0,i._)("nav",Kf,[(0,i._)("ol",Jf,[Xf,(0,i._)("li",e_,[(0,i.Wm)(c,{to:"/orders"},{default:(0,i.w5)((()=>[t_,(0,i.Uk)(" Orders ")])),_:1})]),s_])])])]),(0,i._)("div",a_,[(0,i._)("button",{type:"button",class:"btn-sm btn-primary",onClick:t[0]||(t[0]=(...e)=>r.createOrder&&r.createOrder(...e))}," Create Order ")])]),(0,i._)("section",i_,[(0,i._)("div",l_,[(0,i._)("div",o_,[r_,(0,i.wy)((0,i._)("select",{class:"form-select",id:"projectDropdown","onUpdate:modelValue":t[1]||(t[1]=e=>o.selectedProject=e),required:""},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.projects,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e.id,value:e.id},(0,ne.zw)(e.name),9,c_)))),128))],512),[[a.bM,o.selectedProject]])]),(0,i._)("div",d_,[n_,(0,i.wy)((0,i._)("select",{class:"form-select",id:"productCode","onUpdate:modelValue":t[2]||(t[2]=e=>o.selectedProduct=e),onChange:t[3]||(t[3]=(...e)=>r.filteredBoms&&r.filteredBoms(...e)),required:""},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.filteredProducts,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e.id,value:e.id},(0,ne.zw)(e.name),9,u_)))),128))],544),[[a.bM,o.selectedProduct]])])]),"uploadNewBom"===o.selectedRadio?((0,i.wg)(),(0,i.iD)("div",m_,[(0,i._)("div",h_,[p_,(0,i.wy)((0,i._)("input",{type:"text",class:"form-control",id:"bomType","onUpdate:modelValue":t[4]||(t[4]=e=>o.bomType=e)},null,512),[[a.nr,o.bomType]])]),(0,i._)("div",b_,[f_,(0,i.wy)((0,i._)("input",{type:"text",class:"form-control",id:"bomRevNo","onUpdate:modelValue":t[5]||(t[5]=e=>o.bomRevNo=e),required:""},null,512),[[a.nr,o.bomRevNo]])])])):(0,i.kq)("",!0),(0,i._)("div",__,[(0,i._)("div",g_,[y_,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>o.order.batchQuantity=e),type:"number",class:"form-control",placeholder:"Enter Batch Quantity",min:"1",required:""},null,512),[[a.nr,o.order.batchQuantity]])]),"uploadNewBom"===o.selectedRadio?((0,i.wg)(),(0,i.iD)("div",v_,[k_,(0,i.wy)((0,i._)("input",{type:"date",class:"form-control",id:"issueDate","onUpdate:modelValue":t[7]||(t[7]=e=>o.issueDate=e),required:""},null,512),[[a.nr,o.issueDate]])])):(0,i.kq)("",!0)]),"uploadNewBom"===o.selectedRadio?((0,i.wg)(),(0,i.iD)("div",w_,[C_,(0,i._)("div",S_,[(0,i._)("input",{type:"file",class:"custom-file-input",id:"fileInput",onChange:t[8]||(t[8]=(...e)=>r.handleFileUpload&&r.handleFileUpload(...e)),accept:".xls, .xlsx",required:""},null,32),(0,i._)("label",D_,(0,ne.zw)(o.uploadedFileName||"Select file"),1)])])):(0,i.kq)("",!0),(0,i._)("div",P_,[(0,i._)("div",I_,[(0,i.wy)((0,i._)("input",{class:"form-check-input",type:"radio",name:"flexRadioDefault",id:"flexRadioDefault1","onUpdate:modelValue":t[9]||(t[9]=e=>o.selectedRadio=e),value:"uploadNewBom"},null,512),[[a.G2,o.selectedRadio]]),x_]),(0,i._)("div",R_,[(0,i.wy)((0,i._)("input",{class:"form-check-input",type:"radio",name:"flexRadioDefault",id:"flexRadioDefault2","onUpdate:modelValue":t[10]||(t[10]=e=>o.selectedRadio=e),value:"selectBom"},null,512),[[a.G2,o.selectedRadio]]),$_])]),"selectBom"===o.selectedRadio?((0,i.wg)(),(0,i.iD)("div",L_,[(0,i._)("button",B_,(0,ne.zw)(o.selectBomButtonText),1)])):(0,i.kq)("",!0)]),(0,i._)("div",U_,[(0,i._)("div",O_,[(0,i._)("div",N_,[j_,(0,i._)("div",M_,[(0,i.Wm)(d,{bomByProducts:o.bomByProducts,onRowClicked:r.handleRowClicked,onRowSelected:r.handleRowSelected,onRowDeselected:r.handleRowDeselected},null,8,["bomByProducts","onRowClicked","onRowSelected","onRowDeselected"])]),(0,i._)("div",E_,[T_,(0,i._)("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal",onClick:t[11]||(t[11]=(...e)=>r.saveChanges&&r.saveChanges(...e))}," Save changes ")])])])])]))}function A_(e,t,s,a,l,o){const r=(0,i.up)("ag-grid-vue");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(r,{style:{height:"500px"},class:"ag-theme-quartz",rowData:s.bomByProducts,defaultColDef:l.defaultColDef,columnDefs:l.colDefs,pagination:!0,onRowClicked:o.onRowClicked,onSelectionChanged:o.onSelectionChanged,rowSelection:"single"},null,8,["rowData","defaultColDef","columnDefs","onRowClicked","onSelectionChanged"])])}var F_={name:"OrderBomDetails",components:{AgGridVue:It.n},props:{bomByProducts:{type:Array,required:!0}},data(){return{colDefs:[{field:"id",checkboxSelection:!0,headerName:"BOM ID"},{field:"product.project.name",headerName:"Project Name"},{field:"product.name",headerName:"Product Name"},{field:"product.product_code",headerName:"Product Code"},{field:"bom_type.name",headerName:"BOM Type"},{field:"issue_date",headerName:"Issue Date"},{field:"product.product_rev_number",headerName:"Product Rev No"},{headerName:"Download",cellRenderer:this.editButtonRenderer}],defaultColDef:{filter:!0,sortable:!0,resizable:!0,autoSize:!0},selectedRows:[]}},methods:{onRowClicked(e){this.$emit("rowClicked",e.data)},onSelectionChanged(e){const t=e.api.getSelectedRows(),s=t.length>0?t[0]:null;s?this.$emit("rowSelected",s):this.$emit("rowDeselected")},editButtonRenderer(e){console.log(e);const t=document.createElement("button");return t.innerHTML=`<i class="fas fa-download"></i> ${e.data.bom_file_name} `,t.classList.add("btn-sm","btn-primary"),t.addEventListener("click",(()=>this.downloadFile(e.data.bom_file_url))),t},downloadFile(e){const t=document.createElement("a");t.href=e,t.target="_blank",t.download="BOM_File",document.body.appendChild(t),t.click(),document.body.removeChild(t)},onEditClick(e){this.$router.push(`/bom/edit/${e}`)}}};const W_=(0,re.Z)(F_,[["render",A_]]);var V_=W_,Z_={components:{OrderBomDetailsVue:V_},data(){return{selectedRadio:null,issueDate:"",order:{selectedBomId:null,batchQuantity:1},boms:[],projects:[],products:[],orders:[],selectedProduct:null,selectedProject:null,bomByProducts:[],selectedBomFileName:"",selectedBomId:null,selectBomButtonText:"Select BOM",bomRevNo:null,bomType:null,uploadedFileName:null,uploadedFile:null,isLoading:!1}},computed:{filteredProducts(){if(this.products&&this.projects&&this.products.length&&this.projects.length){if(console.log("selectedProject",this.selectedProject),null!==this.selectedProject){const e=this.products.filter((e=>{const t=e.project;return t===this.selectedProject}));return console.log("Filtered Products:",e),e}return console.log("All Products:",this.products),[]}return console.log("No Products or Projects available."),[]},prepopulatedIssueDate(){return this.bomByProducts.length>0?this.bomByProducts[0].issue_date:null},formattedIssueDate(){if(this.prepopulatedIssueDate){const[e,t,s]=this.prepopulatedIssueDate.split("/");return`${s}-${e.padStart(2,"0")}-${t.padStart(2,"0")}`}return null}},mounted(){this.getData()},methods:{setIsLoading(e){this.isLoading=e},notifySuccess(e){this.$notify({title:e,type:"bg-success-subtle text-success",duration:"5000"})},notifyError(e){this.$notify({title:e,type:"bg-danger-subtle text-danger",duration:"5000"})},handleError(e){this.notifyError(e),this.setIsLoading(!1)},handleFileUpload(e){const t=e.target.files[0];t&&(console.log("Uploaded file:",t),this.uploadedFileName=t.name,this.uploadedFile=t)},async getData(){try{this.setIsLoading(!0);const e=await le.Z.get("store/create-order/");console.log("boms + products + projects",e.data),this.setIsLoading(!1),this.boms=e.data.boms,this.projects=e.data.projects,this.products=e.data.products,this.orders=e.data.orders}catch(e){console.error("Error fetching projects:",e),this.setIsLoading(!1)}},filteredBoms(){console.log(this.selectedProduct),this.boms&&null!==this.selectedProduct?(this.bomByProducts=this.boms.filter((e=>e.product.id===this.selectedProduct)),console.log("Filtered Boms i.e bomByProducts=:",this.bomByProducts)):(console.log("No Boms or Selected Product available."),this.bomByProducts=[])},handleRowClicked(e){console.log("Row Clicked:",e),this.selectedBomFileName=e.bom_file_name,this.selectedBomId=e.id},handleRowSelected(e){console.log("Row Selected:",e),this.selectedBomFileName=e.bom_file_name,this.selectedBomId=e.id},handleRowDeselected(){console.log("Row Deselected")},saveChanges(){this.selectedBomFileName&&null!==this.selectedBomId?(this.selectBomButtonText=this.selectedBomFileName,this.order.selectedBomId=this.selectedBomId,console.log("Selected BOM File Name:",this.selectedBomFileName),console.log("Selected BOM ID:",this.selectedBomId)):(console.warn("No BOM selected."),this.selectBomButtonText="Select BOM"),this.selectedBomFileName="",this.selectedBomId=null},async createSelectedBOMOrder(){this.setIsLoading(!0),await le.Z.post("store/create-order/",this.order).then((e=>{console.log("Order Created:",e.data),this.notifySuccess("Order Created Successfully"),this.setIsLoading(!1),this.$router.push("/orders")})).catch((e=>{console.error("Error creating order:",e),this.handleError("Order Creation Failed")}))},createOrder(){this.setIsLoading(!0),"selectBom"===this.selectedRadio?this.createSelectedBOMOrder():"uploadNewBom"===this.selectedRadio&&this.createBomTask()},async createBomTask(){this.setIsLoading(!0);const e=new FormData;e.append("project_id",this.selectedProject),e.append("product_id",this.selectedProduct),e.append("bom_type",this.bomType),e.append("bom_rev_no",this.bomRevNo),e.append("issue_date",this.issueDate),e.append("batch_quantity",this.order.batchQuantity),e.append("bom_file",this.uploadedFile),await le.Z.post("store/create-order-task/",e,{headers:{"Content-Type":"multipart/form-data"}}).then((e=>{console.log(e.data);const t=e.data.task_id;"IN PROGRESS"===e.data.task_status||"PENDING"===e.data.task_status?setTimeout((()=>{this.checkTaskStatus(t)}),1e4):"SUCCESS"===e.data.task_status?(this.setIsLoading(!1),this.notifySuccess("BOM Uploaded and Order Created Successfully"),this.$router.push("/orders")):(this.notifyError("BOM Upload and Order Creation Failed"),this.setIsLoading(!1))})).catch((e=>{console.log("error:",e),this.handleError("An error occurred, please try again later")}))},async checkTaskStatus(e){try{const t=await le.Z.get(`store/check-task-status/${e}/`);"IN PROGRESS"===t.data.task_status||"PENDING"===t.data.task_status?setTimeout((()=>{this.checkTaskStatus(e)}),5e3):"SUCCESS"===t.data.task_status?(this.notifySuccess("BOM Uploaded and Order Created Successfully"),this.setIsLoading(!1),this.$router.push("/orders")):(this.notifyError("BOM Upload Failed"),this.setIsLoading(!1))}catch(t){console.log("error:",t),this.handleError("An error occurred, please try again later")}}}};const G_=(0,re.Z)(Z_,[["render",q_],["__scopeId","data-v-ffafc8a8"]]);var z_=G_;const Q_={key:0,class:"container text-center"},H_=(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1),Y_=(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1),K_=[H_,Y_],J_={key:1,class:"container"},X_={class:"row align-items-center"},eg={class:"col-md-6 mt-4"},tg={class:"d-flex align-items-center"},sg=(0,i._)("h2",{class:"mb-0"},"Project",-1),ag=(0,i._)("span",{class:"ms-3 fs-4 text-muted"},"|",-1),ig={"aria-label":"breadcrumb",class:"d-inline-block ms-3"},lg={class:"breadcrumb bg-transparent m-0 p-0"},og={class:"breadcrumb-item"},rg=(0,i._)("i",{class:"fas fa-home me-1"},null,-1),cg=(0,i._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,i._)("i",{class:"fas fa-project-diagram me-1"}),(0,i.Uk)(" Project ")],-1),dg={class:"col-md-6 mt-4 text-end"},ng=(0,i._)("i",{class:"fas fa-plus me-1"},null,-1);function ug(e,t,s,a,l,o){const r=(0,i.up)("router-link"),c=(0,i.up)("ProjectsLandingTable");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",Q_,K_)):((0,i.wg)(),(0,i.iD)("div",J_,[(0,i._)("div",X_,[(0,i._)("div",eg,[(0,i._)("div",tg,[sg,ag,(0,i._)("nav",ig,[(0,i._)("ol",lg,[(0,i._)("li",og,[(0,i.Wm)(r,{to:"/"},{default:(0,i.w5)((()=>[rg,(0,i.Uk)(" Home")])),_:1})]),cg])])])]),(0,i._)("div",dg,[(0,i.Wm)(r,{to:"/projects/create-project",class:"btn btn-primary btn-sm ms-2"},{default:(0,i.w5)((()=>[ng,(0,i.Uk)(" Create New Product ")])),_:1})])]),(0,i.Wm)(c,{style:{"margin-top":"20px"},projectList:l.projectList},null,8,["projectList"])]))}function mg(e,t,s,a,l,o){const r=(0,i.up)("ag-grid-vue");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(r,{style:{height:"500px"},class:"ag-theme-quartz",rowData:s.projectList,defaultColDef:l.defaultColDef,columnDefs:l.colDefs,pagination:!0,onRowClicked:o.onRowClicked,onSelectionChanged:o.onSelectionChanged},null,8,["rowData","defaultColDef","columnDefs","onRowClicked","onSelectionChanged"])])}var hg={name:"App",components:{AgGridVue:It.n},props:{projectList:{type:Array,required:!0}},data(){return{colDefs:[{field:"id",hide:!0},{field:"name",headerName:"Project Name"},{field:"project_code",headerName:"Project Code"},{field:"project_rev_number",headerName:"Project Rev No"},{headerName:"Actions",cellRenderer:this.editButtonRenderer}],defaultColDef:{filter:!0,sortable:!0,resizable:!0,autoSize:!0},selectedRows:[]}},methods:{onRowClicked(e){this.$emit("rowClicked",e.data),this.$router.push(`/project-edit/${e.data.id}`)},onRowSelected(e){e.node.isSelected()&&this.$emit("rowSelected",e.node.data)},onSelectionChanged(e){const t=e.api.getSelectedRows(),s=t.length>0?t[0]:null;s?this.$emit("rowSelected",s):this.$emit("rowDeselected")},editButtonRenderer(e){console.log(e);const t=document.createElement("button");return t.innerHTML='<i class="fas fa-edit"></i>',t.classList.add("btn","btn-primary"),t.addEventListener("click",(()=>this.onEditClick(e.data.id))),t},onEditClick(e){this.$router.push(`/project-edit/${e}`)}}};const pg=(0,re.Z)(hg,[["render",mg]]);var bg=pg,fg={components:{ProjectsLandingTable:bg},data(){return{projectList:[]}},mounted(){this.getData()},methods:{getData(){this.$store.commit("setIsLoading",!0),le.Z.get("/store/edit-project").then((e=>{console.log("response.data",e.data),this.projectList=e.data.projects,this.$store.commit("setIsLoading",!1)})).catch((e=>{console.error("Error fetching products:",e),this.$store.commit("setIsLoading",!1)}))}}};const _g=(0,re.Z)(fg,[["render",ug]]);var gg=_g;const yg=e=>((0,i.dD)("data-v-4755fc42"),e=e(),(0,i.Cn)(),e),vg={key:0,class:"container text-center"},kg=yg((()=>(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1))),wg=yg((()=>(0,i._)("div",null,[(0,i._)("b",null," Loading...")],-1))),Cg=[kg,wg],Sg={key:1,class:"container"},Dg={class:"row align-items-center"},Pg={class:"col-md-8 mt-4"},Ig={class:"d-flex align-items-center"},xg=yg((()=>(0,i._)("h2",{class:"mb-0"},"Edit Project |",-1))),Rg={"aria-label":"breadcrumb",class:"ms-3"},$g={class:"breadcrumb bg-transparent m-0 p-0 justify-content-end"},Lg=yg((()=>(0,i._)("li",{class:"breadcrumb-item"},[(0,i._)("a",{href:"/"},[(0,i._)("i",{class:"fas fa-home me-1"}),(0,i.Uk)("Home")])],-1))),Bg={class:"breadcrumb-item active","aria-current":"page"},Ug=yg((()=>(0,i._)("i",{class:"fas fa-project-diagram me-1"},null,-1))),Og=yg((()=>(0,i._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,i._)("i",{class:"fa fa-bars me-1","aria-hidden":"true"}),(0,i.Uk)("Project Details ")],-1))),Ng={class:"col-md-4 mt-4 d-flex justify-content-end"},jg={class:"mt-5"},Mg={class:"row"},Eg={class:"col-md-4"},Tg={class:"form-group"},qg=yg((()=>(0,i._)("label",{for:"veplPartNumber"},"Project Name",-1))),Ag={class:"col-md-4"},Fg={class:"form-group"},Wg=yg((()=>(0,i._)("label",{for:"level"},"Project Code",-1))),Vg={class:"col-md-4"},Zg={class:"form-group"},Gg=yg((()=>(0,i._)("label",{for:"priorityLevel"},"Project Rev No",-1))),zg={class:"form-group"},Qg=yg((()=>(0,i._)("label",{for:"products"},"Products:",-1))),Hg=yg((()=>(0,i._)("br",null,null,-1))),Yg=yg((()=>(0,i._)("button",{type:"button",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#exampleModal"}," Add Product ",-1))),Kg={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Jg={class:"modal-dialog modal-xl"},Xg={class:"modal-content"},ey=yg((()=>(0,i._)("div",{class:"modal-header"},[(0,i._)("h1",{class:"modal-title fs-5",id:"exampleModalLabel"}," Create New Product "),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),ty={class:"modal-body"},sy={class:"card mt-4"},ay=yg((()=>(0,i._)("div",{class:"card-header bg-primary text-white"},[(0,i._)("h4",{class:"card-title"},[(0,i._)("i",{class:"fas fa-Product-diagram me-2"}),(0,i.Uk)(" Product Information ")])],-1))),iy={class:"card-body"},ly={class:"mb-3"},oy=yg((()=>(0,i._)("label",{for:"productName",class:"form-label"},"Product Name:",-1))),ry={key:0,class:"text-danger"},cy={class:"mb-3"},dy=yg((()=>(0,i._)("label",{for:"productCode",class:"form-label"},"Product Code:",-1))),ny={key:0,class:"text-danger"},uy={class:"mb-3"},my=yg((()=>(0,i._)("label",{for:"ProductRevNo",class:"form-label"},"Product Rev No:",-1))),hy={key:0,class:"text-danger"},py={class:"modal-footer"},by=yg((()=>(0,i._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1))),fy=yg((()=>(0,i._)("i",{class:"fas fa-save me-1"},null,-1)));function _y(e,t,s,l,o,r){const c=(0,i.up)("router-link"),d=(0,i.up)("products-for-project-grid");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",vg,Cg)):((0,i.wg)(),(0,i.iD)("div",Sg,[(0,i._)("div",Dg,[(0,i._)("div",Pg,[(0,i._)("div",Ig,[xg,(0,i._)("nav",Rg,[(0,i._)("ol",$g,[Lg,(0,i._)("li",Bg,[(0,i.Wm)(c,{to:"/projects"},{default:(0,i.w5)((()=>[Ug,(0,i.Uk)("Projects ")])),_:1})]),Og])])])]),(0,i._)("div",Ng,[(0,i._)("button",{type:"button",class:"btn btn-success me-2",onClick:t[0]||(t[0]=(...e)=>r.updateProject&&r.updateProject(...e))}," Update Project "),(0,i._)("button",{type:"button",class:"btn btn-danger",onClick:t[1]||(t[1]=(...e)=>r.deleteProject&&r.deleteProject(...e))}," Delete Project ")])]),(0,i._)("section",jg,[(0,i._)("div",Mg,[(0,i._)("div",Eg,[(0,i._)("div",Tg,[qg,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>o.editedProject.name=e),type:"text",class:"form-control"},null,512),[[a.nr,o.editedProject.name]])])]),(0,i._)("div",Ag,[(0,i._)("div",Fg,[Wg,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>o.editedProject.project_code=e),type:"text",class:"form-control"},null,512),[[a.nr,o.editedProject.project_code]])])]),(0,i._)("div",Vg,[(0,i._)("div",Zg,[Gg,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>o.editedProject.project_rev_number=e),type:"text",class:"form-control"},null,512),[[a.nr,o.editedProject.project_rev_number]])])])]),(0,i._)("div",zg,[Qg,Hg,Yg,(0,i.Wm)(d,{style:{"margin-top":"20px"},products:o.project.products,onRowSelected:e.handleRowSelected},null,8,["products","onRowSelected"])])]),(0,i._)("div",Kg,[(0,i._)("div",Jg,[(0,i._)("div",Xg,[ey,(0,i._)("div",ty,[(0,i._)("div",sy,[ay,(0,i._)("div",iy,[(0,i._)("div",ly,[oy,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>o.newProduct.name=e),type:"text",class:"form-control",id:"productName",required:""},null,512),[[a.nr,o.newProduct.name]]),o.newProduct.name?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("small",ry,"Product Name is required."))]),(0,i._)("div",cy,[dy,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>o.newProduct.product_code=e),class:"form-control",id:"productCode",required:""},null,512),[[a.nr,o.newProduct.product_code]]),o.newProduct.product_code?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("small",ny,"Product Code is required."))]),(0,i._)("div",uy,[my,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>o.newProduct.product_rev_number=e),type:"text",class:"form-control",id:"productRevNo",required:""},null,512),[[a.nr,o.newProduct.product_rev_number]]),o.newProduct.product_rev_number?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("small",hy,"Product Rev No is required."))])])])]),(0,i._)("div",py,[by,(0,i._)("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal",onClick:t[8]||(t[8]=(...e)=>r.createProduct&&r.createProduct(...e))},[fy,(0,i.Uk)(" Create New Product ")])])])])])]))}const gy={class:"ag-theme-quartz",style:{height:"600px"}};function yy(e,t,s,a,l,o){const r=(0,i.up)("ag-grid-vue");return(0,i.wg)(),(0,i.iD)("div",gy,[(0,i.Wm)(r,{ref:"agGrid",gridOptions:l.gridOptions,columnDefs:l.columnDefs,rowData:s.products,onRowClicked:o.onRowClicked,onRowSelected:o.onRowSelected},null,8,["gridOptions","columnDefs","rowData","onRowClicked","onRowSelected"])])}var vy={components:{"ag-grid-vue":It.n},props:{products:{type:Array,default:()=>[]},selectedProducts:{type:Array,default:()=>[]}},data(){return{gridOptions:{domLayout:"autoHeight",rowSelection:"multiple",pagination:!0,paginationPageSize:20},columnDefs:[{headerCheckboxSelection:!0,checkboxSelection:!0,headerName:"Product name",field:"name"},{headerName:"Product Code",field:"product_code"},{headerName:"Product Rev No",field:"product_rev_number"},{headerName:"Actions",field:"actions",cellRenderer:this.actionsCellRenderer,sortable:!1,filter:!1}]}},methods:{onRowClicked(e){this.$emit("rowClicked",e.data),this.$router.push(`/product/edit/${e.data.id}`)},onRowSelected(e){e.node.isSelected()&&this.$emit("rowSelected",e.data)},onSelectionChanged(){this.$refs.agGrid&&this.$refs.agGrid.api&&(this.selectedRows=this.$refs.agGrid.api.getSelectedRows())},actionsCellRenderer(e){const t=document.createElement("button");t.innerHTML='<i class="fas fa-edit"></i>',t.classList.add("btn","btn-primary"),t.addEventListener("click",(()=>this.onEditClick(e.data.id)));const s=document.createElement("button");s.innerHTML='<i class="fas fa-trash-alt"></i>',s.classList.add("btn","btn-danger","ms-1"),s.addEventListener("click",(()=>this.deleteProduct(e.data.id)));const a=document.createElement("div");return a.appendChild(t),a.appendChild(s),a},onEditClick(e){this.$router.push(`/product/edit/${e}`)},async deleteProduct(e){if(confirm("Are you sure you want to delete this user?")){this.$store.commit("setIsLoading",!0);try{const t=await le.Z.delete(`/store/delete-product/${e}/`);console.log("Response:",t),204===t.status?(console.log("Product deleted successfully."),this.$store.commit("setIsLoading",!1),this.$notify({title:"Product Deleted Successfully",type:"bg-success-subtle text-success",duration:"5000"}),window.location.reload()):(console.error("Error deleting product. Unexpected status:",t.status),this.$notify({title:"Product Deletion Unsuccessful",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1))}catch(t){console.error("Error deleting product:",t),this.$notify({title:"Product Deletion Unsuccessful",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1)}}}}};const ky=(0,re.Z)(vy,[["render",yy],["__scopeId","data-v-60613202"]]);var wy=ky,Cy={components:{"products-for-project-grid":wy},data(){return{editedProject:{name:"",project_code:"",project_rev_number:"",products:[]},newProduct:{name:"",product_code:"",product_rev_number:""},project:[],products:[]}},mounted(){this.fetchData()},methods:{async fetchData(){this.$store.commit("setIsLoading",!0),le.Z.get(`/store/edit-project/${this.$route.params.id}`).then((e=>{console.log("response.data",e.data),this.project=e.data.project,this.project&&(this.editedProject.name=this.project.name,this.editedProject.project_code=this.project.project_code,this.editedProject.project_rev_number=this.project.project_rev_number),this.$store.commit("setIsLoading",!1)})).catch((e=>{console.error("Error fetching products:",e),this.$store.commit("setIsLoading",!1)}))},updateProject(){console.log("Edited Project:",this.editedProject),confirm("Are you sure you want to update this project?")&&(this.$store.commit("setIsLoading",!0),le.Z.put(`/store/edit-project/${this.$route.params.id}/`,this.editedProject).then((e=>{console.log("Project updated successfully:",e.data),this.$store.commit("setIsLoading",!1),this.$notify({title:"Project Updated Successfully",type:"bg-success-subtle text-success",duration:"5000"}),this.$router.push("/projects")})).catch((e=>{console.error("Error updating Project:",e),this.$notify({title:"Project Creation Unsuccessful",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1)})))},createProduct(){this.$store.commit("setIsLoading",!0),console.log("form data",this.newProduct),this.newProduct.name&&this.newProduct.product_code&&this.newProduct.product_rev_number&&le.Z.post(`/store/create-product/${this.$route.params.id}/`,this.newProduct).then((e=>{console.log("Product created successfully:",e.data),this.$store.commit("setIsLoading",!1);const t=e.data.product;this.project.products.push(t),this.$notify({title:"Product Created Successfully",type:"bg-success-subtle text-success",duration:"5000"}),this.newProduct={};const s=this.$route.params.id;this.$router.push(`/project-edit/${s}`)})).catch((e=>{console.error("Error creating Product:",e),this.$store.commit("setIsLoading",!1),this.$notify({title:"Product Creation Unsuccessful",type:"bg-danger-subtle text-danger",duration:"5000"})}))},deleteProject(){confirm("Are you sure you want to delete this project?")&&(this.$store.commit("setIsLoading",!0),le.Z.delete(`/store/delete-project/${this.$route.params.id}/`).then((e=>{console.log(e.data),console.log("Project deleted successfully."),this.$store.commit("setIsLoading",!1),this.$notify({title:"Project Deleted Successfully",type:"bg-success-subtle text-success",duration:"5000"}),this.$router.push("/projects")})).catch((e=>{console.error("Error deleting user:",e),this.$notify({title:"Project Deletion Unsuccessful",type:"bg-danger-subtle text-danger",duration:"5000"})})))}}};const Sy=(0,re.Z)(Cy,[["render",_y],["__scopeId","data-v-4755fc42"]]);var Dy=Sy;const Py=e=>((0,i.dD)("data-v-5c54ad78"),e=e(),(0,i.Cn)(),e),Iy={class:"container"},xy={class:"row align-items-center"},Ry={class:"col-md-6 mt-4"},$y={class:"d-flex align-items-center"},Ly=Py((()=>(0,i._)("h2",{class:"mb-0"},"Projects",-1))),By=Py((()=>(0,i._)("span",{class:"ms-3 fs-4 text-muted"},"|",-1))),Uy={"aria-label":"breadcrumb",class:"d-inline-block ms-3"},Oy={class:"breadcrumb bg-transparent m-0 p-0"},Ny={class:"breadcrumb-item"},jy=Py((()=>(0,i._)("i",{class:"fas fa-home me-1"},null,-1))),My={class:"breadcrumb-item"},Ey=Py((()=>(0,i._)("i",{class:"fas fa-project-diagram me-1"},null,-1))),Ty=Py((()=>(0,i._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,i._)("i",{class:"fa fa-plus"}),(0,i.Uk)(" Create Project ")],-1))),qy={class:"col-md-6 mt-4 text-end"},Ay=Py((()=>(0,i._)("i",{class:"fas fa-save me-1"},null,-1))),Fy={class:"card mt-4"},Wy=Py((()=>(0,i._)("div",{class:"card-header bg-primary text-white"},[(0,i._)("h4",{class:"card-title"},[(0,i._)("i",{class:"fas fa-project-diagram me-2"}),(0,i.Uk)(" Project Information ")])],-1))),Vy={class:"card-body"},Zy={class:"mb-3"},Gy=Py((()=>(0,i._)("label",{for:"projectName",class:"form-label"},"Project Name:",-1))),zy={key:0,class:"text-danger"},Qy={class:"mb-3"},Hy=Py((()=>(0,i._)("label",{for:"projectCode",class:"form-label"},"Project Code:",-1))),Yy={key:0,class:"text-danger"},Ky={class:"mb-3"},Jy=Py((()=>(0,i._)("label",{for:"projectRevNo",class:"form-label"},"Project Rev No:",-1)));function Xy(e,t,s,l,o,r){const c=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",Iy,[(0,i._)("div",xy,[(0,i._)("div",Ry,[(0,i._)("div",$y,[Ly,By,(0,i._)("nav",Uy,[(0,i._)("ol",Oy,[(0,i._)("li",Ny,[(0,i.Wm)(c,{to:"/"},{default:(0,i.w5)((()=>[jy,(0,i.Uk)("Home")])),_:1})]),(0,i._)("li",My,[(0,i.Wm)(c,{to:"/projects"},{default:(0,i.w5)((()=>[Ey,(0,i.Uk)("Projects")])),_:1})]),Ty])])])]),(0,i._)("div",qy,[(0,i._)("button",{type:"submit",class:"btn btn-success btn-sm",onClick:t[0]||(t[0]=(...e)=>r.createProject&&r.createProject(...e))},[Ay,(0,i.Uk)(" Create Project ")])])]),(0,i._)("div",Fy,[Wy,(0,i._)("div",Vy,[(0,i._)("div",Zy,[Gy,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>o.newProject.name=e),type:"text",class:"form-control",id:"projectName",required:""},null,512),[[a.nr,o.newProject.name]]),o.newProject.name?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("small",zy,"Project Name is required."))]),(0,i._)("div",Qy,[Hy,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>o.newProject.project_code=e),type:"text",class:"form-control",id:"projectCode",required:""},null,512),[[a.nr,o.newProject.project_code]]),o.newProject.project_code?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("small",Yy,"Project Code is required."))]),(0,i._)("div",Ky,[Jy,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>o.newProject.project_rev_number=e),type:"text",class:"form-control",id:"projectRevNo"},null,512),[[a.nr,o.newProject.project_rev_number]])])])])])}var ev={name:"CreateProject",data(){return{newProject:{name:"",project_code:"",project_rev_number:""}}},methods:{createProject(){this.$store.commit("setIsLoading",!0),this.newProject.name&&this.newProject.project_code&&this.newProject.project_rev_number&&le.Z.post("/store/create-project/",this.newProject).then((e=>{console.log("Project created successfully:",e.data),this.$store.commit("setIsLoading",!1),this.$notify({title:"Project Created Successfully",type:"bg-success-subtle text-success",duration:"5000"}),this.$router.push("/projects")})).catch((e=>{console.error("Error creating project:",e),this.$store.commit("setIsLoading",!1),this.$notify({title:"Project Creation Unsuccessful",type:"bg-danger-subtle text-danger",duration:"5000"})}))}}};const tv=(0,re.Z)(ev,[["render",Xy],["__scopeId","data-v-5c54ad78"]]);var sv=tv;const av=e=>((0,i.dD)("data-v-d26aff34"),e=e(),(0,i.Cn)(),e),iv={key:0,class:"container text-center"},lv=av((()=>(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1))),ov=av((()=>(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1))),rv=[lv,ov],cv={key:1,class:"container"},dv={class:"row align-items-center"},nv={class:"col-md-6 mt-4"},uv={class:"d-flex align-items-center"},mv=av((()=>(0,i._)("h2",{class:"mb-0"},"Edit Product",-1))),hv=av((()=>(0,i._)("span",{class:"ms-3 fs-4 text-muted"},"|",-1))),pv={"aria-label":"breadcrumb",class:"d-inline-block ms-3"},bv={class:"breadcrumb bg-transparent m-0 p-0"},fv={class:"breadcrumb-item"},_v=av((()=>(0,i._)("i",{class:"fas fa-home me-1"},null,-1))),gv={class:"breadcrumb-item"},yv=av((()=>(0,i._)("i",{class:"fas fa-users me-1"},null,-1))),vv=av((()=>(0,i._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,i._)("i",{class:"fas fa-edit me-1"}),(0,i.Uk)(" Edit Product ")],-1))),kv={class:"col-md-6 mt-4 text-end"},wv=av((()=>(0,i._)("i",{class:"fas fa-save me-1"},null,-1))),Cv=av((()=>(0,i._)("i",{class:"fas fa-trash me-1"},null,-1))),Sv={class:"card animate__animated animate__fadeIn mt-5"},Dv=av((()=>(0,i._)("div",{class:"card-header bg-primary text-white"},[(0,i._)("h4",{class:"card-title"},[(0,i._)("i",{class:"fas fa-user me-1"}),(0,i.Uk)(" Product Information ")])],-1))),Pv={class:"card-body"},Iv={class:"mb-3"},xv=av((()=>(0,i._)("label",{for:"email",class:"form-label"},"Product Name:",-1))),Rv={class:"input-group"},$v=av((()=>(0,i._)("span",{class:"input-group-text"},[(0,i._)("i",{class:"fas fa-envelope"})],-1))),Lv={key:0,class:"text-danger"},Bv={class:"mb-3 row"},Uv={class:"col"},Ov=av((()=>(0,i._)("label",{for:"first_name",class:"form-label"},"Product Code:",-1))),Nv={class:"input-group"},jv=av((()=>(0,i._)("span",{class:"input-group-text"},[(0,i._)("i",{class:"fas fa-user"})],-1))),Mv={key:0,class:"text-danger"},Ev={class:"col"},Tv=av((()=>(0,i._)("label",{for:"first_name",class:"form-label"},"Product Rev No:",-1))),qv={class:"input-group"},Av=av((()=>(0,i._)("span",{class:"input-group-text"},[(0,i._)("i",{class:"fas fa-user"})],-1))),Fv={key:0,class:"text-danger"};function Wv(e,t,s,l,o,r){const c=(0,i.up)("router-link");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",iv,rv)):((0,i.wg)(),(0,i.iD)("div",cv,[(0,i._)("div",dv,[(0,i._)("div",nv,[(0,i._)("div",uv,[mv,hv,(0,i._)("nav",pv,[(0,i._)("ol",bv,[(0,i._)("li",fv,[(0,i.Wm)(c,{to:"/"},{default:(0,i.w5)((()=>[_v,(0,i.Uk)(" Home")])),_:1})]),(0,i._)("li",gv,[(0,i.Wm)(c,{to:"/products"},{default:(0,i.w5)((()=>[yv,(0,i.Uk)(" Products")])),_:1})]),vv])])])]),(0,i._)("div",kv,[(0,i._)("button",{type:"submit",class:"btn btn-success btn-sm",onClick:t[0]||(t[0]=(...e)=>r.updateProduct&&r.updateProduct(...e))},[wv,(0,i.Uk)(" Save Changes ")]),(0,i._)("button",{type:"button",class:"btn btn-danger ms-2 btn-sm",onClick:t[1]||(t[1]=(...e)=>r.deleteProduct&&r.deleteProduct(...e))},[Cv,(0,i.Uk)(" Delete Product ")])])]),(0,i._)("div",Sv,[Dv,(0,i._)("div",Pv,[(0,i._)("div",Iv,[xv,(0,i._)("div",Rv,[$v,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>o.editedProduct.name=e),type:"text",class:"form-control",id:"project_name",required:""},null,512),[[a.nr,o.editedProduct.name]])]),o.editedProduct.name?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("small",Lv,"Project Name is required."))]),(0,i._)("div",Bv,[(0,i._)("div",Uv,[Ov,(0,i._)("div",Nv,[jv,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>o.editedProduct.product_code=e),type:"text",class:"form-control",id:"product_code",required:""},null,512),[[a.nr,o.editedProduct.product_code]])]),o.editedProduct.product_code?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("small",Mv,"First Name is required."))]),(0,i._)("div",Ev,[Tv,(0,i._)("div",qv,[Av,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>o.editedProduct.product_rev_number=e),type:"text",class:"form-control",id:"product_rev_number",required:""},null,512),[[a.nr,o.editedProduct.product_rev_number]])]),o.editedProduct.product_rev_number?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("small",Fv,"Product Rev Number is required."))])])])])]))}var Vv={name:"EditProduct",data(){return{editedProduct:{name:"",product_code:"",product_rev_number:""},product:[]}},mounted(){this.fetchData()},methods:{async fetchData(){this.$store.commit("setIsLoading",!0),console.log("id",this.$route.params.id),le.Z.get(`/store/edit-product/${this.$route.params.id}`).then((e=>{console.log("response.data ",e.data),this.product=e.data.product,this.product&&(this.editedProduct.name=this.product.name,this.editedProduct.product_code=this.product.product_code,this.editedProduct.product_rev_number=this.product.product_rev_number),this.$store.commit("setIsLoading",!1)})).catch((e=>{console.error("Error fetching products:",e),this.$store.commit("setIsLoading",!1)}))},updateProduct(){confirm("Are you sure you want to update this product?")&&(this.$store.commit("setIsLoading",!0),le.Z.put(`/store/edit-product/${this.$route.params.id}/`,this.editedProduct).then((e=>{console.log("Product updated successfully:",e.data),this.$store.commit("setIsLoading",!1),this.$notify({title:"Product Updated Successfully",type:"bg-success-subtle text-success",duration:"5000"});const t=this.product.project;this.$router.push(`/project-edit/${t}`)})).catch((e=>{console.error("Error updating Product:",e),this.$notify({title:"Product Creation Unsuccessful",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1)})))},deleteProduct(){confirm("Are you sure you want to delete this product?")&&(this.$store.commit("setIsLoading",!0),le.Z.delete(`/store/delete-product/${this.$route.params.id}/`).then((()=>{console.log("Product  deleted successfully."),this.$store.commit("setIsLoading",!1),this.$notify({title:"Product Deleted Successfully",type:"bg-success-subtle text-success",duration:"5000"});const e=this.product.project;this.$router.push(`/project-edit/${e}`)})).catch((e=>{console.error("Error deleting user:",e),this.$notify({title:"Product Deletion Unsuccessful",type:"bg-danger-subtle text-danger",duration:"5000"})})))}}};const Zv=(0,re.Z)(Vv,[["render",Wv],["__scopeId","data-v-d26aff34"]]);var Gv=Zv;const zv={key:0,class:"container text-center"},Qv=(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1),Hv=(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1),Yv=[Qv,Hv],Kv={key:1,class:"container"},Jv={class:"row align-items-center"},Xv=(0,i.uE)('<div class="col-md-6 mt-4"><div class="d-flex align-items-center"><h2 class="mb-0">Checklist</h2><span class="ms-3 fs-4 text-muted">|</span><nav aria-label="breadcrumb" class="d-inline-block ms-3"><ol class="breadcrumb bg-transparent m-0 p-0"><li class="breadcrumb-item"><a href="/"><i class="fas fa-home me-1"></i>Home</a></li><li class="breadcrumb-item active" aria-current="page"><i class="fas fa-list-alt me-1"></i> Checklist </li></ol></nav></div></div>',1),ek={class:"col-md-6 mt-4 text-end"},tk={class:"container has-text-centered"},sk={class:"d-flex"},ak=["disabled"],ik=["disabled"],lk=["disabled"],ok={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},rk={class:"modal-dialog"},ck={class:"modal-content"},dk=(0,i._)("div",{class:"modal-header"},[(0,i._)("h1",{class:"modal-title fs-5",id:"exampleModalLabel"}," Fill the Required Batch Quantity "),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),nk={class:"modal-body"},uk={class:"modal-footer"},mk=(0,i._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1);function hk(e,t,s,l,o,r){const c=(0,i.up)("OrderDetailsTable");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",zv,Yv)):((0,i.wg)(),(0,i.iD)("div",Kv,[(0,i._)("div",Jv,[Xv,(0,i._)("div",ek,[(0,i._)("div",tk,[(0,i._)("div",sk,[(0,i._)("button",{type:"button",disabled:!o.isButtonEnabled,class:"btn btn-primary btn-sm",onClick:t[0]||(t[0]=(...e)=>r.checkAndGenerateChecklist&&r.checkAndGenerateChecklist(...e))}," Generate New Checklist ",8,ak),(0,i._)("button",{onClick:t[1]||(t[1]=(...e)=>r.checkExistingChecklist&&r.checkExistingChecklist(...e)),disabled:!o.isButtonEnabled,class:"btn btn-warning btn-sm ms-2"}," View Ongoing Checklist ",8,ik),(0,i._)("button",{onClick:t[2]||(t[2]=(...e)=>r.viewGeneratedChecklists&&r.viewGeneratedChecklists(...e)),disabled:!o.isButtonEnabled,class:"btn btn-success btn-sm ms-2"}," View Generated Checklists ",8,lk)])])])]),(0,i.Wm)(c,{style:{"margin-top":"20px"},orders:e.orders,onRowClicked:r.handleRowClicked,onRowSelected:r.handleRowSelected,onRowDeselected:r.handleRowDeselected},null,8,["orders","onRowClicked","onRowSelected","onRowDeselected"]),(0,i._)("div",ok,[(0,i._)("div",rk,[(0,i._)("div",ck,[dk,(0,i._)("div",nk,[(0,i.wy)((0,i._)("input",{type:"number",class:"form-control",id:"requiredBatchQuantity","onUpdate:modelValue":t[3]||(t[3]=e=>o.batch_quantity=e),placeholder:"Enter Batch Quantity",min:"1"},null,512),[[a.nr,o.batch_quantity]])]),(0,i._)("div",uk,[mk,(0,i._)("button",{onClick:t[4]||(t[4]=(...e)=>r.checkAndGenerateChecklist&&r.checkAndGenerateChecklist(...e)),type:"button",class:"btn btn-primary","data-bs-dismiss":"modal"}," Generate Checklist ")])])])])]))}var pk={components:{OrderDetailsTable:jf},data(){return{rowData:[],selectedRow:null,clickedRowId:null,orderId:null,isButtonEnabled:!1,isExisting:!1,isActive:!1,batch_quantity:1}},methods:{async fetchData(){try{this.$store.commit("setIsLoading",!0);const e=await le.Z.get("store/get-orders/");this.orders=e.data.orders,console.log(e.data.orders),this.$store.commit("setIsLoading",!1)}catch(e){console.error("Error fetching BOM data:",e),this.$store.commit("setIsLoading",!1)}},handleRowClicked(e){console.log("Clicked Row:",e)},handleRowSelected(e){console.log("Row Selected:",e),e&&e.id&&(this.selectedRow=e,this.clickedRowId=e.bom.id,this.orderId=e.id,console.log("clicked row id +BOM ID =",this.clickedRowId),console.log("Order ID =",this.orderId),this.isButtonEnabled=!0)},handleRowDeselected(){console.log("Row Deselected:"),this.isButtonEnabled=!1},async checkAndGenerateChecklist(){this.$store.commit("setIsLoading",!0),await le.Z.post(`store/check-existing-checklist/${this.clickedRowId}/`).then((e=>{console.log(e.data),this.isActive=e.data.is_active,this.isExisting=e.data.is_existing,this.isExisting?this.$notify({title:"There is already an active ongoing checklist for this order, please end that checklist by viewing the ongoing checklist to generate a new one.",type:"bg-danger-subtle text-danger",duration:"5000"}):(this.$store.commit("setIsLoading",!0),this.generateChecklist())})).catch((e=>{console.log("error:",e),this.$notify({title:"An error occurred, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"})})).finally((()=>{this.$store.commit("setIsLoading",!1)}))},async generateChecklist(){this.$store.commit("setIsLoading",!0),await le.Z.post(`store/generate-new-checklist/${this.orderId}/`).then((e=>{this.$store.commit("setIsLoading",!1),console.log(e.data),this.$router.push(`/begin-checklist/${this.clickedRowId}`)})).catch((e=>{this.$store.commit("setIsLoading",!1),console.log("error:",e),this.$notify({title:"An error occurred, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"})})).finally((()=>{this.$store.commit("setIsLoading",!1)}))},async checkExistingChecklist(){this.$store.commit("setIsLoading",!0),await le.Z.post(`store/check-existing-checklist/${this.clickedRowId}/`).then((e=>{console.log(e.data),this.isActive=e.data.is_active,this.isExisting=e.data.is_existing,this.isExisting?this.isActive?this.$router.push(`/begin-checklist/${this.clickedRowId}`):this.$notify({title:"No active checklist found for this bom, please generate a new checklist",type:"bg-danger-subtle text-danger",duration:"5000"}):this.$notify({title:"No ongoing checklist found for this order, please generate a new checklist",type:"bg-danger-subtle text-danger",duration:"5000"})})).catch((e=>{console.log("error:",e),this.$notify({title:"An error occured, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"})})).finally((()=>{this.$store.commit("setIsLoading",!1)}))},viewOngoingChecklists(){this.clickedRowId&&this.$router.push(`/begin-checklist/${this.clickedRowId}`)},viewGeneratedChecklists(){this.clickedRowId&&this.$router.push(`/generated-checklists/${this.clickedRowId}`)}},mounted(){this.fetchData()}};const bk=(0,re.Z)(pk,[["render",hk]]);var fk=bk;const _k=[{path:"/",name:"Home",component:vu},{path:"/login",name:"LoginForm",component:Ce},{path:"/bom",name:"BomLanding",component:Ut},{path:"/bom/upload",name:"UploadBom",component:ft},{path:"/CheckList",name:"CheckListOrderBased",component:fk,props:!0},{path:"/reports",name:"ReportsList",component:qd},{path:"/dashboard",name:"CheckListsDashboard",component:vu},{path:"/checklist-report",name:"ChecklistReport",component:lm},{path:"/bom/edit/:id",name:"BomLineLevel",component:Is,props:!0},{path:"/begin-checklist/:id",name:"begin-checklist",component:_o,props:!0},{path:"/generated-checklists/:id",name:"generated-checklist",component:Ao,props:!0},{path:"/checklist-details/:id",name:"checklist-details",component:Bd,props:!0},{path:"/users",name:"users",component:Om},{path:"/users/edit-user/:id",name:"EditUser",component:vb},{path:"/users/create-user",name:"CreateUser",component:Cf},{path:"/bom-line-item/edit/:id",name:"BomLineItemEdit",component:np,props:e=>({bom_id:e.params.id})},{path:"/orders",name:"OrdersLanding",component:Tf},{path:"/orders/create",name:"OrderCreation",component:z_},{path:"/projects",name:"ProjectsLanding",component:gg},{path:"/projects/create-project",name:"CreateProject",component:sv},{path:"/project-edit/:id",name:"ProjectEdit",component:Dy,props:!0},{path:"/product/edit/:id",name:"ProductEdit",component:Gv,props:!0},{path:"/new",name:"CheckList",component:ta,props:!0}],gk=(0,Ie.p7)({history:(0,Ie.PO)("/"),routes:_k});var yk=gk,vk=s(65);const kk=(0,vk.MT)({state:{user:{token:"",isAuthenticated:!1,username:"",password:"",first_name:"",last_name:"",is_staff:!1,is_superuser:!1,is_store_team:!1,is_design_team:!1},isLoading:!1},mutations:{initializeStore(e){if(localStorage.getItem("token")){e.user.token=localStorage.getItem("token"),le.Z.defaults.headers.common["Authorization"]="Token "+e.user.token,e.user.isAuthenticated=!0;const t=localStorage.getItem("userDetails");if(t){const s=JSON.parse(t);e.user.first_name=s.first_name,e.user.last_name=s.last_name,e.user.is_staff=s.is_staff,e.user.is_superuser=s.is_superuser,e.user.is_store_team=s.is_store_team,e.user.is_design_team=s.is_design_team}}else e.user.token="",e.user.isAuthenticated=!1;e.isLoading=!1},setToken(e,t){e.user.token=t,le.Z.defaults.headers.common["Authorization"]="Token "+e.user.token,e.user.isAuthenticated=!0},setUserDetails(e,t){e.user.first_name=t.first_name,e.user.last_name=t.last_name,e.user.is_staff=t.is_staff,e.user.is_superuser=t.is_superuser,e.user.is_store_team=t.is_store_team,e.user.is_design_team=t.is_design_team},setIsLoading(e,t){e.isLoading=t},removeToken(e){e.user.token="",e.user.first_name="",e.user.last_name="",e.user.is_staff=!1,e.user.is_superuser=!1,e.user.is_store_team=!1,e.user.is_design_team=!1,e.user.isAuthenticated=!1,localStorage.removeItem("token"),localStorage.removeItem("userDetails"),le.Z.defaults.headers.common["Authorization"]=""},setAuthentication(e,t){e.user.isAuthenticated=t}},actions:{},modules:{}});kk.commit("initializeStore");var wk=kk,Ck=s(1037);s(8830),s(5572);le.Z.defaults.baseURL="https://sfcsdev.xtractautomation.com/api/v1/";const Sk=(0,a.ri)(Pe);Sk.use(wk).use(yk).use(Ck.ZP),Sk.mount("#app")}},t={};function s(a){var i=t[a];if(void 0!==i)return i.exports;var l=t[a]={exports:{}};return e[a].call(l.exports,l,l.exports,s),l.exports}s.m=e,function(){var e=[];s.O=function(t,a,i,l){if(!a){var o=1/0;for(n=0;n<e.length;n++){a=e[n][0],i=e[n][1],l=e[n][2];for(var r=!0,c=0;c<a.length;c++)(!1&l||o>=l)&&Object.keys(s.O).every((function(e){return s.O[e](a[c])}))?a.splice(c--,1):(r=!1,l<o&&(o=l));if(r){e.splice(n--,1);var d=i();void 0!==d&&(t=d)}}return t}l=l||0;for(var n=e.length;n>0&&e[n-1][2]>l;n--)e[n]=e[n-1];e[n]=[a,i,l]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,a){var i,l,o=a[0],r=a[1],c=a[2],d=0;if(o.some((function(t){return 0!==e[t]}))){for(i in r)s.o(r,i)&&(s.m[i]=r[i]);if(c)var n=c(s)}for(t&&t(a);d<o.length;d++)l=o[d],s.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return s.O(n)},a=self["webpackChunksfcs_checklist"]=self["webpackChunksfcs_checklist"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=s.O(void 0,[998],(function(){return s(9453)}));a=s.O(a)})();
//# sourceMappingURL=app.e0c19fe3.js.map