(function(){"use strict";var e={8677:function(e,t,s){var a=s(9242),i=s(3396);const l={id:"app"},o={key:0},r={key:1};function c(e,t,s,a,c,d){const n=(0,i.up)("LoginForm"),u=(0,i.up)("AdminLte"),m=(0,i.up)("notifications");return(0,i.wg)(),(0,i.iD)("div",l,["/login"==d.activeRoute?((0,i.wg)(),(0,i.iD)("div",o,[(0,i.Wm)(n)])):((0,i.wg)(),(0,i.iD)("div",r,[(0,i._)("div",null,[(0,i.Wm)(u)])])),(0,i.Wm)(m,{position:"bottom right",classes:"alert"})])}const d=e=>((0,i.dD)("data-v-2d5c7dae"),e=e(),(0,i.Cn)(),e),n={class:"wrapper"},u={class:"main-header navbar navbar-expand navbar-white navbar-light"},m={class:"navbar-nav"},h=d((()=>(0,i._)("li",{class:"nav-item"},[(0,i._)("a",{class:"nav-link","data-widget":"pushmenu",href:"#",role:"button"},[(0,i._)("i",{class:"fas fa-bars"})])],-1))),p={class:"nav-item"},b=d((()=>(0,i._)("i",{class:"fas fa-home"},null,-1))),f={class:"navbar-nav ml-auto"},g={class:"nav-item"},_=d((()=>(0,i._)("i",{class:"fas fa-sign-out-alt"},null,-1))),y=[_],v={class:"main-sidebar sidebar-dark-primary elevation-4"},k=d((()=>(0,i._)("a",{href:"/",class:"brand-link"},[(0,i._)("img",{src:"https://content.jdmagicbox.com/comp/bangalore/73/080ppe03673/catalogue/velankani-software-pvt-ltd-electronic-city-bangalore-computer-software-developers-2rgz2h5-250.jpg",alt:"AdminLTE Logo",class:"brand-image img-circle elevation-3",style:{opacity:"0.8"}}),(0,i._)("span",{class:"brand-text font-weight-light"},"Velankani SFCS")],-1))),w={class:"sidebar"},C={class:"mt-2"},S={class:"nav nav-pills nav-sidebar flex-column","data-widget":"treeview",role:"menu","data-accordion":"false"},D={key:0,class:"nav-item text-left"},P=d((()=>(0,i._)("a",{href:"#",class:"nav-link"},[(0,i._)("i",{class:"nav-icon fas fa-users"}),(0,i._)("p",null,[(0,i.Uk)(" Accounts "),(0,i._)("i",{class:"right fas fa-angle-left"})])],-1))),I={class:"nav nav-treeview"},R={class:"nav-item"},x=d((()=>(0,i._)("i",{class:"fas fa-user-plus nav-icon"},null,-1))),$=d((()=>(0,i._)("p",null,"Users",-1))),L={key:1,class:"nav-item text-left"},B=d((()=>(0,i._)("a",{href:"#",class:"nav-link"},[(0,i._)("i",{class:"nav-icon fas fa-store"}),(0,i._)("p",null,[(0,i.Uk)(" Store "),(0,i._)("i",{class:"right fas fa-angle-left"})])],-1))),U={class:"nav nav-treeview"},N={class:"nav-item"},M=d((()=>(0,i._)("i",{class:"fas fa-chart-line nav-icon"},null,-1))),O=d((()=>(0,i._)("p",null,"Dashboard",-1))),j={class:"nav-item"},E=d((()=>(0,i._)("i",{class:"fas fa-list-ul nav-icon"},null,-1))),T=d((()=>(0,i._)("p",null,"Checklist",-1))),q={class:"nav-item"},A=d((()=>(0,i._)("i",{class:"fas fa-chart-bar nav-icon"},null,-1))),F=d((()=>(0,i._)("p",null,"Reports",-1))),W={key:2,class:"nav-item text-left"},V=d((()=>(0,i._)("a",{href:"#",class:"nav-link"},[(0,i._)("i",{class:"nav-icon fas fa-shopping-cart"}),(0,i._)("p",null,[(0,i.Uk)(" Orders "),(0,i._)("i",{class:"right fas fa-angle-left"})])],-1))),Z={class:"nav nav-treeview"},z={class:"nav-item"},G=d((()=>(0,i._)("i",{class:"fas fa-receipt nav-icon"},null,-1))),Q=d((()=>(0,i._)("p",null,"Orders",-1))),H={key:3,class:"nav-item text-left"},Y=d((()=>(0,i._)("a",{href:"#",class:"nav-link"},[(0,i._)("i",{class:"nav-icon fas fa-industry"}),(0,i._)("p",null,[(0,i.Uk)(" Material Management "),(0,i._)("i",{class:"right fas fa-angle-left"})])],-1))),K={class:"nav nav-treeview"},J={class:"nav-item"},X=d((()=>(0,i._)("i",{class:"fas fa-clipboard-list nav-icon"},null,-1))),ee=d((()=>(0,i._)("p",null,"Bill Of Materials",-1))),te={class:"nav-item"},se=d((()=>(0,i._)("i",{class:"fas fa-project-diagram nav-icon"},null,-1))),ae=d((()=>(0,i._)("p",null,"Projects",-1))),ie={key:4,class:"nav-item text-left"},le=d((()=>(0,i._)("a",{href:"#",class:"nav-link"},[(0,i._)("i",{class:"nav-icon fas fa-clipboard-check"}),(0,i._)("p",null,[(0,i.Uk)(" IQC "),(0,i._)("i",{class:"right fas fa-angle-left"})])],-1))),oe={class:"nav nav-treeview"},re={class:"nav-item"},ce=d((()=>(0,i._)("i",{class:"fas fa-tasks nav-icon"},null,-1))),de=d((()=>(0,i._)("p",null,"IQC Checklist",-1))),ne={key:5,class:"nav-item text-left"},ue=d((()=>(0,i._)("a",{href:"#",class:"nav-link"},[(0,i._)("i",{class:"nav-icon fas fa-tag"}),(0,i._)("p",null,[(0,i.Uk)(" Pricing "),(0,i._)("i",{class:"right fas fa-angle-left"})])],-1))),me={class:"nav nav-treeview"},he={class:"nav-item"},pe=d((()=>(0,i._)("i",{class:"fas fa-money-bill nav-icon"},null,-1))),be=d((()=>(0,i._)("p",null,"Project Pricing Details",-1))),fe={key:0,class:"content-wrapper"},ge={key:1,class:"content-wrapper"};function _e(e,t,s,a,l,o){const r=(0,i.up)("router-link"),c=(0,i.up)("RestrictedAccess"),d=(0,i.up)("router-view");return(0,i.wg)(),(0,i.iD)("div",n,[(0,i._)("nav",u,[(0,i._)("ul",m,[h,(0,i._)("li",p,[(0,i.Wm)(r,{to:"/",class:"nav-link"},{default:(0,i.w5)((()=>[b])),_:1})])]),(0,i._)("ul",f,[(0,i._)("li",g,[(0,i._)("a",{href:"#",class:"nav-link",onClick:t[0]||(t[0]=(...e)=>o.logout&&o.logout(...e))},y)])])]),(0,i._)("aside",v,[k,(0,i._)("div",w,[(0,i._)("nav",C,[(0,i._)("ul",S,[e.$store.state.user.is_superuser?((0,i.wg)(),(0,i.iD)("li",D,[P,(0,i._)("ul",I,[(0,i._)("li",R,[(0,i.Wm)(r,{to:"/users",class:"nav-link"},{default:(0,i.w5)((()=>[x,$])),_:1})])])])):(0,i.kq)("",!0),e.$store.state.user.is_superuser||e.$store.state.user.is_store_team?((0,i.wg)(),(0,i.iD)("li",L,[B,(0,i._)("ul",U,[(0,i._)("li",N,[(0,i.Wm)(r,{to:"/dashboard",class:"nav-link"},{default:(0,i.w5)((()=>[M,O])),_:1})]),(0,i._)("li",j,[(0,i.Wm)(r,{to:"/checklist",class:"nav-link"},{default:(0,i.w5)((()=>[E,T])),_:1})]),(0,i._)("li",q,[(0,i.Wm)(r,{to:"/reports",class:"nav-link"},{default:(0,i.w5)((()=>[A,F])),_:1})])])])):(0,i.kq)("",!0),e.$store.state.user.is_superuser||e.$store.state.user.is_design_team?((0,i.wg)(),(0,i.iD)("li",W,[V,(0,i._)("ul",Z,[(0,i._)("li",z,[(0,i.Wm)(r,{to:"/orders",class:"nav-link"},{default:(0,i.w5)((()=>[G,Q])),_:1})])])])):(0,i.kq)("",!0),e.$store.state.user.is_superuser||e.$store.state.user.is_design_team?((0,i.wg)(),(0,i.iD)("li",H,[Y,(0,i._)("ul",K,[(0,i._)("li",J,[(0,i.Wm)(r,{to:"/bom",class:"nav-link"},{default:(0,i.w5)((()=>[X,ee])),_:1})]),(0,i._)("li",te,[(0,i.Wm)(r,{to:"/projects",class:"nav-link"},{default:(0,i.w5)((()=>[se,ae])),_:1})])])])):(0,i.kq)("",!0),e.$store.state.user.is_superuser||e.$store.state.user.is_design_team?((0,i.wg)(),(0,i.iD)("li",ie,[le,(0,i._)("ul",oe,[(0,i._)("li",re,[(0,i.Wm)(r,{to:"/iqc",class:"nav-link"},{default:(0,i.w5)((()=>[ce,de])),_:1})])])])):(0,i.kq)("",!0),e.$store.state.user.is_superuser?((0,i.wg)(),(0,i.iD)("li",ne,[ue,(0,i._)("ul",me,[(0,i._)("li",he,[(0,i.Wm)(r,{to:"/project-pricing",class:"nav-link"},{default:(0,i.w5)((()=>[pe,be])),_:1})])])])):(0,i.kq)("",!0)])])])]),l.showLogInModal?((0,i.wg)(),(0,i.iD)("div",fe,[(0,i.Wm)(c,{onCloseLogInModal:o.handleCloseLogInModal,show:l.showLogInModal},null,8,["onCloseLogInModal","show"])])):((0,i.wg)(),(0,i.iD)("div",ge,[(0,i.Wm)(d)]))])}s(560);var ye=s(1076);const ve={key:0,class:"modal fade show",id:"customRestrictedAccessModal",tabindex:"-1","aria-labelledby":"customRestrictedAccessLabel","aria-modal":"true",role:"dialog",style:{display:"block"}},ke={class:"modal-dialog"},we={class:"modal-content"},Ce=(0,i._)("div",{class:"modal-header"},[(0,i._)("h4",{class:"modal-title",id:"customRestrictedAccessLabel"},[(0,i._)("strong",{style:{color:"#333"}},"Restriced Access")])],-1),Se={class:"modal-body"},De={class:"row justify-content-center"},Pe=(0,i._)("h6",null,"Please Log In to Continue",-1),Ie={class:"button mb-2"};function Re(e,t,s,a,l,o){return(0,i.wg)(),(0,i.iD)("div",null,[s.show?((0,i.wg)(),(0,i.iD)("div",ve,[(0,i._)("div",ke,[(0,i._)("div",we,[Ce,(0,i._)("div",Se,[(0,i._)("div",De,[Pe,(0,i._)("div",Ie,[(0,i._)("button",{onClick:t[0]||(t[0]=t=>e.$emit("closeLogInModal")),class:"btn btn-outline-success btn-block",type:"button"}," Log In ")])])])])])])):(0,i.kq)("",!0),s.show?((0,i.wg)(),(0,i.iD)("div",{key:1,class:"modal-backdrop fade show",id:"customRestrictedAccessBackdrop",style:{display:"block"},onClick:t[1]||(t[1]=(...e)=>o.closeModal&&o.closeModal(...e))})):(0,i.kq)("",!0)])}var xe={data(){return{}},props:{show:{type:Boolean,required:!0,default:!1}},methods:{closeModal(){document.getElementById("customRestrictedAccessBackdrop").style.display="none",document.getElementById("customRestrictedAccessModal").style.display="none",document.getElementById("customRestrictedAccessModal").classList.remove("show")}}},$e=s(89);const Le=(0,$e.Z)(xe,[["render",Re]]);var Be=Le,Ue={data(){return{showLogInModal:!1}},mounted(){this.checkLogin()},components:{RestrictedAccess:Be},methods:{async logout(){await ye.Z.post("token/logout/").then((e=>{console.log("Logged out",e.data),this.$store.commit("removeToken"),window.location.href="/login"})).catch((e=>{console.log(e)}))},async checkLogin(){await ye.Z.get("accounts/check-login").then((e=>{200===e.status?this.showLogInModal=!1:this.showLogInModal=!0})).catch((e=>{console.error("Error in API call:",e),this.showLogInModal=!0,localStorage.removeItem("token"),this.$store.commit("removeToken")}))},handleCloseLogInModal(){this.showLogInModal=!1,this.$router.push("/login")}}};const Ne=(0,$e.Z)(Ue,[["render",_e],["__scopeId","data-v-2d5c7dae"]]);var Me=Ne,Oe=s(7139);const je=e=>((0,i.dD)("data-v-60d7e883"),e=e(),(0,i.Cn)(),e),Ee={class:"container"},Te={class:"login"},qe=je((()=>(0,i._)("h1",null,"Velankani SFCS",-1))),Ae={class:"input-box"},Fe=je((()=>(0,i._)("i",{class:"fa fa-envelope"},null,-1))),We={class:"input-box"},Ve=["type"],Ze=je((()=>(0,i._)("button",{type:"submit"},"Login",-1)));function ze(e,t,s,l,o,r){return(0,i.wg)(),(0,i.iD)("div",Ee,[(0,i._)("div",Te,[qe,(0,i._)("form",{onSubmit:t[3]||(t[3]=(0,a.iM)(((...e)=>r.handleSubmit&&r.handleSubmit(...e)),["prevent"]))},[(0,i._)("div",Ae,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>o.email=e),type:"email",placeholder:"Email"},null,512),[[a.nr,o.email]]),Fe]),(0,i._)("div",We,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>o.password=e),type:o.showPassword?"text":"password",placeholder:"Password"},null,8,Ve),[[a.YZ,o.password]]),(0,i._)("i",{onClick:t[2]||(t[2]=(...e)=>r.togglePasswordVisibility&&r.togglePasswordVisibility(...e)),class:(0,Oe.C_)(o.showPassword?"fa fa-eye-slash":"fa fa-eye")},null,2)]),Ze],32)])])}var Ge={data(){return{email:"",password:"",errors:[],showPassword:!1}},methods:{togglePasswordVisibility(){this.showPassword=!this.showPassword},async handleSubmit(){if(this.$store.commit("setIsLoading",!0),this.errors=[],""===this.email&&this.errors.push("The email is missing!"),""===this.password&&this.errors.push("The password is missing!"),this.errors.length)this.$store.commit("setIsLoading",!1);else{const e={email:this.email,password:this.password};await ye.Z.post("token/login/",e).then((e=>{this.$notify({title:"Login successful",type:"bg-success-subtle text-success",duration:5e3}),setTimeout((async()=>{const t=e.data.auth_token;this.$store.commit("setToken",t),ye.Z.defaults.headers.common["Authorization"]="Token "+t,localStorage.setItem("token",t),console.log("Received Token:",t);const s=await ye.Z.get("accounts/user/authenticated/"),a=s.data;console.log("User Details:",a),localStorage.setItem("userDetails",JSON.stringify(a)),this.$store.commit("setUserDetails",a),window.location.href="/dashboard"}),1e3)})).catch((e=>{this.$notify({title:"Login failed. Please check your credentials.",type:"alert-danger",duration:5e3}),console.error("Login failed:",e.response.data),this.errors.push("Login failed. Please check your credentials.")})).finally((()=>{this.$store.commit("setIsLoading",!1)}))}}}};const Qe=(0,$e.Z)(Ge,[["render",ze],["__scopeId","data-v-60d7e883"]]);var He=Qe,Ye={name:"App",components:{LoginForm:He,AdminLte:Me},data(){return{}},computed:{activeRoute(){return this.$route.path}},methods:{}};const Ke=(0,$e.Z)(Ye,[["render",c]]);var Je=Ke,Xe=(s(8052),s(2483));const et=e=>((0,i.dD)("data-v-55266bd6"),e=e(),(0,i.Cn)(),e),tt={key:0,class:"container text-center"},st=et((()=>(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1))),at=et((()=>(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1))),it=[st,at],lt={key:1,class:"container"},ot={class:"row align-items-center"},rt={class:"d-flex align-items-center mt-4"},ct=et((()=>(0,i._)("h2",{class:"mb-0"},"Upload Bill Of Materials",-1))),dt=et((()=>(0,i._)("span",{class:"ms-3 fs-4 text-muted"},"|",-1))),nt={"aria-label":"breadcrumb",class:"d-inline-block ms-3"},ut={class:"breadcrumb bg-transparent m-0 p-0"},mt=et((()=>(0,i._)("li",{class:"breadcrumb-item"},[(0,i._)("a",{href:"/"},[(0,i._)("i",{class:"fas fa-home me-1"}),(0,i.Uk)("Home")])],-1))),ht={class:"breadcrumb-item"},pt=et((()=>(0,i._)("i",{class:"fas fa-clipboard-list me-1"},null,-1))),bt=et((()=>(0,i._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,i._)("i",{class:"fas fa-upload me-1"}),(0,i.Uk)(" Upload the bom ")],-1))),ft={class:"card p-3 mb-4 mt-4"},gt={class:"row mb-3"},_t={class:"col-md-6"},yt=et((()=>(0,i._)("label",{for:"projectDropdown",class:"form-label"},"Select Project",-1))),vt=["value"],kt={class:"col-md-6"},wt=et((()=>(0,i._)("label",{for:"productCode",class:"form-label"},"Product ",-1))),Ct=["value"],St={class:"row mb-3"},Dt={class:"col-md-6"},Pt=et((()=>(0,i._)("label",{for:"bomType",class:"form-label"},"BOM Type",-1))),It={class:"col-md-6"},Rt=et((()=>(0,i._)("label",{for:"bomRevNo",class:"form-label"},"BOM REV No",-1))),xt={key:0,class:"text-danger"},$t={class:"row mb-3 justify-content-center"},Lt={class:"col-md-6"},Bt=et((()=>(0,i._)("label",{for:"issueDate",class:"form-label"},"Issue Date",-1))),Ut={class:"card p-3 mb-4"},Nt=et((()=>(0,i._)("label",{for:"fileInput",class:"form-label"},[(0,i._)("i",{class:"fas fa-cloud-upload-alt mr-2"}),(0,i.Uk)(" Choose BOM Excel file ")],-1))),Mt={class:"custom-file"},Ot={class:"custom-file-label",for:"fileInput"},jt={class:"card p-3"};function Et(e,t,s,l,o,r){const c=(0,i.up)("router-link"),d=(0,i.up)("CustomModal");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",tt,it)):((0,i.wg)(),(0,i.iD)("div",lt,[(0,i._)("div",ot,[(0,i._)("div",rt,[ct,dt,(0,i._)("nav",nt,[(0,i._)("ol",ut,[mt,(0,i._)("li",ht,[(0,i.Wm)(c,{to:"/bom"},{default:(0,i.w5)((()=>[pt,(0,i.Uk)(" Bill Of Materials ")])),_:1})]),bt])])])]),(0,i._)("section",ft,[(0,i._)("div",gt,[(0,i._)("div",_t,[yt,(0,i.wy)((0,i._)("select",{class:"form-select",id:"projectDropdown","onUpdate:modelValue":t[0]||(t[0]=e=>o.selectedProject=e),onChange:t[1]||(t[1]=(...t)=>e.loadProducts&&e.loadProducts(...t)),required:""},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.projects,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e.id,value:e.id},(0,Oe.zw)(e.name),9,vt)))),128))],544),[[a.bM,o.selectedProject]])]),(0,i._)("div",kt,[wt,(0,i.wy)((0,i._)("select",{class:"form-select",id:"productCode","onUpdate:modelValue":t[2]||(t[2]=e=>o.selectedProduct=e),required:""},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.filteredProducts,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e.id,value:e.id},(0,Oe.zw)(e.name),9,Ct)))),128))],512),[[a.bM,o.selectedProduct]])])]),(0,i._)("div",St,[(0,i._)("div",Dt,[Pt,(0,i.wy)((0,i._)("input",{type:"text",class:"form-control",id:"bomType","onUpdate:modelValue":t[3]||(t[3]=e=>o.bomType=e),required:""},null,512),[[a.nr,o.bomType]])]),(0,i._)("div",It,[Rt,(0,i.wy)((0,i._)("input",{type:"text",class:"form-control",id:"bomRevNo","onUpdate:modelValue":t[4]||(t[4]=e=>o.bomRevNo=e),onInput:t[5]||(t[5]=(...e)=>r.validateBomRevNo&&r.validateBomRevNo(...e)),required:""},null,544),[[a.nr,o.bomRevNo]]),""===o.bomRevNo||o.isValidBomRevNo?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("p",xt," BOM REV No should be a decimal type with a minimum of 1.0. "))])]),(0,i._)("div",$t,[(0,i._)("div",Lt,[Bt,(0,i.wy)((0,i._)("input",{type:"date",class:"form-control",id:"issueDate","onUpdate:modelValue":t[6]||(t[6]=e=>o.issueDate=e),required:""},null,512),[[a.nr,o.issueDate]])])])]),(0,i._)("div",Ut,[Nt,(0,i._)("div",Mt,[(0,i._)("input",{type:"file",class:"custom-file-input",id:"fileInput",onChange:t[7]||(t[7]=(...e)=>r.handleFileUpload&&r.handleFileUpload(...e)),accept:".xls, .xlsx",required:""},null,32),(0,i._)("label",Ot,(0,Oe.zw)(o.uploadedFileName||"Select file"),1)])]),(0,i._)("div",jt,[(0,i._)("button",{type:"button",class:"btn btn-primary",onClick:t[8]||(t[8]=(...e)=>r.submitForm&&r.submitForm(...e))}," Upload BOM ")]),(0,i.Wm)(d,{show:o.isCustomModalVisible,onCloseModal:r.handleCloseModal,onHandleModalSubmitted:r.handleModalSubmission,onDismissModal:r.handleCloseModal},null,8,["show","onCloseModal","onHandleModalSubmitted","onDismissModal"])]))}const Tt={key:0,class:"modal fade show",id:"customBomRevisionModal",tabindex:"-1","aria-labelledby":"customBomRevisionLabel","aria-modal":"true",role:"dialog",style:{display:"block"}},qt={class:"modal-dialog",role:"document"},At={class:"modal-content"},Ft={class:"modal-header"},Wt=(0,i._)("h4",{class:"modal-title",id:"customBomRevisionLabel"},[(0,i._)("strong",{style:{color:"#333"}}," Reason for BOM Revision")],-1),Vt={class:"modal-body"},Zt={class:"row justify-content-center"},zt={class:"needs-validation",novalidate:""},Gt={class:"mb-4"},Qt=(0,i._)("div",{class:"invalid-feedback"},"Reason is required.",-1),Ht={class:"button mb-2"};function Yt(e,t,s,l,o,r){return(0,i.wg)(),(0,i.iD)("div",null,[s.show?((0,i.wg)(),(0,i.iD)("div",Tt,[(0,i._)("div",qt,[(0,i._)("div",At,[(0,i._)("div",Ft,[Wt,(0,i._)("button",{type:"button",class:"btn-close","aria-label":"Close",onClick:t[0]||(t[0]=(...e)=>r.closeModal&&r.closeModal(...e))})]),(0,i._)("div",Vt,[(0,i._)("div",Zt,[(0,i._)("form",zt,[(0,i._)("div",Gt,[(0,i.wy)((0,i._)("textarea",{"onUpdate:modelValue":t[1]||(t[1]=e=>o.bom_rev_change_note=e),class:"form-control",id:"revisionReason",required:"",placeholder:"Please provide the reason for the change...",style:{height:"150px"}},null,512),[[a.nr,o.bom_rev_change_note]]),Qt]),(0,i._)("div",Ht,[(0,i._)("button",{class:"btn btn-outline-success btn-block",type:"button",onClick:t[2]||(t[2]=(...e)=>r.submitCustomBomRevision&&r.submitCustomBomRevision(...e))}," Submit ")])])])])])])])):(0,i.kq)("",!0),s.show?((0,i.wg)(),(0,i.iD)("div",{key:1,class:"modal-backdrop fade show",id:"customBomRevisionBackdrop",style:{display:"block"},onClick:t[3]||(t[3]=(...e)=>r.closeModal&&r.closeModal(...e))})):(0,i.kq)("",!0)])}var Kt={data(){return{bom_rev_change_note:""}},props:{show:{type:Boolean,required:!0,default:!1}},methods:{closeModal(){document.getElementById("customBomRevisionBackdrop").style.display="none",document.getElementById("customBomRevisionModal").style.display="none",document.getElementById("customBomRevisionModal").classList.remove("show")},submitCustomBomRevision(){this.$emit("handle-modal-submitted",this.bom_rev_change_note),this.closeModal()}}};const Jt=(0,$e.Z)(Kt,[["render",Yt]]);var Xt=Jt,es={components:{CustomModal:Xt},data(){return{productName:"",productCode:"",bomType:"",bomRevNo:"",isValidBomRevNo:!0,issueDate:"",batchQuantity:1,productRevNo:"",uploadedFileName:null,uploadedFile:null,selectedProject:null,selectedProduct:null,projects:[],products:[],bom_rev_change_note:"",isCustomModalVisible:!1}},computed:{filteredProducts(){if(this.products&&this.projects&&this.products.length&&this.projects.length){if(console.log("selectedProject",this.selectedProject),null!==this.selectedProject){const e=this.products.filter((e=>{const t=e.project;return t===this.selectedProject}));return console.log("Filtered Products:",e),e}return console.log("All Products:",this.products),[]}return console.log("No Products or Projects available."),[]}},mounted(){this.getData()},methods:{openCustomModal(){this.isCustomModalVisible=!0},handleCloseModal(){this.isCustomModalVisible=!1},validateBomRevNo(){const e=/^(1\.[0-9]|1[0-9]|2\.0)$/;e.test(this.bomRevNo)?this.isValidBomRevNo=!0:this.isValidBomRevNo=!1},async getData(){try{const e=await ye.Z.get("store/create-order/");console.log(e.data),this.projects=e.data.projects,this.projects=e.data.projects,this.products=e.data.products,console.log(this.projects)}catch(e){console.error("Error fetching projects:",e)}},async submitForm(){this.$store.commit("setIsLoading",!0);const e=new FormData;e.append("project_id",this.selectedProject),e.append("product_id",this.selectedProduct),e.append("bom_type",this.bomType),e.append("bom_rev_no",this.bomRevNo),e.append("issue_date",this.issueDate),e.append("bom_file",this.uploadedFile),e.append("bom_rev_change_note",this.bom_rev_change_note),console.log("FormData:",e);try{const t=await ye.Z.post("store/handle-bom-cases/",e,{headers:{"Content-Type":"multipart/form-data"}});if(console.log("Response from handle-bom-cases API:",t.data),200===t.status)console.log("hiiiiiiii",t.data.message),this.$notify({title:`BOM Already Exists With Rev No: ${t.data.bom_rev_number}`,type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1);else if(201===t.status)console.log("inside case two block"),console.log(t.data.message),this.$store.commit("setIsLoading",!1),console.log("Before setting isCustomModalVisible:",this.isCustomModalVisible),this.isCustomModalVisible=!0,console.log("After setting isCustomModalVisible:",this.isCustomModalVisible);else if(204===t.status){console.log(t.data.message),this.$store.commit("setIsLoading",!0);const s=await ye.Z.post("store/upload-bom/",e,{headers:{"Content-Type":"multipart/form-data"}});console.log(s.data);const a=s.data.task_id;"IN PROGRESS"===s.data.task_status||"PENDING"===s.data.task_status?setTimeout((()=>{this.checkTaskStatus(a)}),1e4):"SUCCESS"===s.data.task_status?(this.$notify({title:"BOM Uploaded Successfully",type:"bg-success-subtle text-success",duration:"5000"}),this.$store.commit("setIsLoading",!1),this.$router.push("/bom")):(this.$notify({title:"BOM Upload Failed",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1))}}catch(t){console.log("error:",t),this.$notify({title:"An error occurred, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1)}},async uploadBom(e){this.$store.commit("setIsLoading",!0);try{const t=await ye.Z.post("store/upload-bom/",e,{headers:{"Content-Type":"multipart/form-data"}});console.log(t.data);const s=t.data.task_id;"IN PROGRESS"===t.data.task_status||"PENDING"===t.data.task_status?setTimeout((()=>{this.checkTaskStatus(s)}),1e4):"SUCCESS"===t.data.task_status?(this.$notify({title:"BOM Uploaded Successfully",type:"bg-success-subtle text-success",duration:"5000"}),this.$store.commit("setIsLoading",!1),this.$router.push("/bom")):(this.$notify({title:"BOM Upload Failed",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1))}catch(t){console.log("error:",t),this.$notify({title:"An error occurred, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1)}},async checkTaskStatus(e){try{const t=await ye.Z.get(`store/check-task-status/${e}/`);"IN PROGRESS"===t.data.task_status||"PENDING"===t.data.task_status?setTimeout((()=>{this.checkTaskStatus(e)}),5e3):"SUCCESS"===t.data.task_status?(this.$notify({title:"BOM Uploaded Successfully",type:"bg-success-subtle text-success",duration:"5000"}),this.$router.push("/bom"),this.$store.commit("setIsLoading",!1)):(this.$notify({title:"BOM Upload Failed",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1))}catch(t){console.log("error:",t),this.$notify({title:"An error occurred, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1)}},handleFileUpload(e){const t=e.target.files[0];t&&(console.log("Uploaded file:",t),this.uploadedFileName=t.name,this.uploadedFile=t)},async handleModalSubmission(e){console.log("inside handleModal Submisison which will revece CHANGE NOTE IN ARFUMENT"),console.log("this is the change note ",e);const t=new FormData;t.append("project_id",this.selectedProject),t.append("product_id",this.selectedProduct),t.append("bom_type",this.bomType),t.append("bom_rev_no",this.bomRevNo),t.append("issue_date",this.issueDate),t.append("bom_file",this.uploadedFile),t.append("bom_rev_change_note",e),console.log("FormData:",t),await this.uploadBom(t)},saveChanges(){this.bom_rev_change_note=this.bom_rev_change_note.trim(),""!==this.bom_rev_change_note?(console.log("BOM Revision Change Note:",this.bom_rev_change_note),this.formData.append(this.bom_rev_change_note),this.bom_rev_change_note=""):console.log("Error: BOM Revision Change Note is empty")}}};const ts=(0,$e.Z)(es,[["render",Et],["__scopeId","data-v-55266bd6"]]);var ss=ts;const as={key:0,class:"container text-center"},is=(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1),ls=(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1),os=[is,ls],rs={key:1,class:"container"},cs={class:"row align-items-center"},ds=(0,i.uE)('<div class="col-md-6 mt-4"><div class="d-flex align-items-center"><h2 class="mb-0">Bill Of Materials</h2><span class="ms-3 fs-4 text-muted">|</span><nav aria-label="breadcrumb" class="d-inline-block ms-3"><ol class="breadcrumb bg-transparent m-0 p-0"><li class="breadcrumb-item"><a href="/"><i class="fas fa-home me-1"></i>Home</a></li><li class="breadcrumb-item active" aria-current="page"><i class="fas fa-clipboard-list me-1"></i> Bill Of Materials </li></ol></nav></div></div>',1),ns={class:"col-md-6 d-flex justify-content-end mt-4"};function us(e,t,s,a,l,o){const r=(0,i.up)("router-link"),c=(0,i.up)("BomDetailsTable");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",as,os)):((0,i.wg)(),(0,i.iD)("div",rs,[(0,i._)("div",cs,[ds,(0,i._)("div",ns,[(0,i.Wm)(r,{to:"/bom/upload",class:"btn btn-primary btn-sm ms-2"},{default:(0,i.w5)((()=>[(0,i.Uk)(" Upload BOM ")])),_:1})])]),(0,i.Wm)(c,{style:{"margin-top":"20px"},boms:l.boms,onRowClicked:o.handleRowClicked,onRowSelected:o.handleRowSelected},null,8,["boms","onRowClicked","onRowSelected"])]))}const ms=e=>((0,i.dD)("data-v-1f2a71f0"),e=e(),(0,i.Cn)(),e),hs={class:"modal fade",id:"bomRevisionNoteModal",tabindex:"-1","aria-labelledby":"bomRevisionNoteModalLabel","aria-hidden":"true"},ps={class:"modal-dialog"},bs={class:"modal-content"},fs=ms((()=>(0,i._)("div",{class:"modal-header"},[(0,i._)("h5",{class:"modal-title",id:"bomRevisionNoteModalLabel"}," BOM Revision Note "),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),gs={class:"modal-body"};function _s(e,t,s,a,l,o){const r=(0,i.up)("ag-grid-vue");return(0,i.wg)(),(0,i.iD)("div",null,[s.boms.length>0?((0,i.wg)(),(0,i.j4)(r,{key:0,style:{height:"500px"},class:"ag-theme-quartz",rowData:s.boms,defaultColDef:l.defaultColDef,columnDefs:l.colDefs,pagination:!0,onRowClicked:o.onRowClicked,onRowSelected:o.onRowSelected},null,8,["rowData","defaultColDef","columnDefs","onRowClicked","onRowSelected"])):(0,i.kq)("",!0),(0,i._)("div",hs,[(0,i._)("div",ps,[(0,i._)("div",bs,[fs,(0,i._)("div",gs,[(0,i._)("p",null,(0,Oe.zw)(l.selectedBomRevisionNote),1)])])])])])}var ys=s(6732),vs={name:"BombDetailsTable",components:{AgGridVue:ys.n},props:{boms:{type:Array,required:!0}},data(){return{colDefs:[{field:"id",hide:!0},{field:"product.project.name",headerCheckboxSelection:!0,checkboxSelection:!0,headerName:"Project Name"},{field:"product.name",headerName:"Product Name"},{field:"product.product_code",headerName:"Product Code"},{field:"bom_type.name",headerName:"BOM Type"},{field:"issue_date",headerName:"Issue Date"},{field:"product.product_rev_number",headerName:"Product Rev No"},{field:"bom_rev_number",headerName:"BOM Rev No"},{headerName:"BOM Revision Note",cellRenderer:this.bomRevisionNoteRenderer},{headerName:"Actions",cellRenderer:this.editButtonRenderer}],defaultColDef:{filter:!0,sortable:!0,resizable:!0,autoSize:!0},selectedRows:[],selectedBomRevisionNote:""}},methods:{onRowClicked(e){this.$emit("rowClicked",e.data),this.$router.push(`/bom/edit/${e.data.id}`)},onRowSelected(e){e.node.isSelected()&&this.$emit("rowSelected",e.node.data)},onSelectionChanged(){this.$refs.agGrid&&this.$refs.agGrid.api&&(this.selectedRows=this.$refs.agGrid.api.getSelectedRows())},editButtonRenderer(e){console.log(e);const t=document.createElement("button");return t.innerHTML='<i class="fas fa-edit"></i>',t.classList.add("btn","btn-primary"),t.addEventListener("click",(()=>this.onEditClick(e.data.id))),t},onEditClick(e){this.$router.push(`/bom/edit/${e}`)},bomRevisionNoteRenderer(e){const t=document.createElement("div");if(e.data.change_note){const s=document.createElement("button");s.innerHTML='<i class="fas fa-eye"></i>',s.classList.add("btn","btn-secondary"),s.dataset.bsToggle="modal",s.dataset.bsTarget="#bomRevisionNoteModal",s.addEventListener("click",(t=>{t.stopPropagation(),this.loadBomRevisionChangeNoteInModal(e.data)})),t.appendChild(s)}else{const e=document.createElement("span");e.innerText="No Change",e.classList.add("text-muted"),t.appendChild(e)}return t},loadBomRevisionChangeNoteInModal(e){console.log("to set the data in the modal",e),console.log("revision note",e.change_note),this.selectedBomRevisionNote=e.change_note}}};const ks=(0,$e.Z)(vs,[["render",_s],["__scopeId","data-v-1f2a71f0"]]);var ws=ks,Cs={components:{BomDetailsTable:ws},data(){return{boms:[]}},methods:{async fetchData(){try{this.$store.commit("setIsLoading",!0);const e=await ye.Z.get("store/get-boms/");console.log("response.data",e.data),this.boms=e.data.boms,console.log("boms",this.boms),this.$store.commit("setIsLoading",!1)}catch(e){console.error("Error fetching BOM data:",e),this.$store.commit("setIsLoading",!1)}},handleRowClicked(e){console.log("Clicked Row:",e)},handleRowSelected(e){console.log("Row Selected:",e),this.selectedRow=e}},mounted(){this.fetchData()}};const Ss=(0,$e.Z)(Cs,[["render",us]]);var Ds=Ss;const Ps=e=>((0,i.dD)("data-v-09c82d64"),e=e(),(0,i.Cn)(),e),Is={key:0,class:"container text-center"},Rs=Ps((()=>(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1))),xs=Ps((()=>(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1))),$s=[Rs,xs],Ls={key:1,class:"container"},Bs={class:"row align-items-center"},Us={class:"d-flex align-items-center mt-4"},Ns=Ps((()=>(0,i._)("h2",{class:"mb-0"},"BOM Details",-1))),Ms=Ps((()=>(0,i._)("span",{class:"ms-3 fs-4 text-muted"},"|",-1))),Os={"aria-label":"breadcrumb",class:"d-inline-block ms-3"},js={class:"breadcrumb bg-transparent m-0 p-0"},Es=Ps((()=>(0,i._)("li",{class:"breadcrumb-item"},[(0,i._)("a",{href:"/"},[(0,i._)("i",{class:"fas fa-home me-1"}),(0,i.Uk)("Home")])],-1))),Ts={class:"breadcrumb-item"},qs=Ps((()=>(0,i._)("i",{class:"fas fa-clipboard-list me-1"},null,-1))),As=Ps((()=>(0,i._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,i._)("i",{class:"fas fa-list-alt me-1"}),(0,i.Uk)(" Bom Details ")],-1))),Fs={class:"card",style:{"margin-top":"20px",padding:"10px"}},Ws={class:"card-body"},Vs={class:"row"},Zs={class:"col-md-4 mb-2"},zs=Ps((()=>(0,i._)("label",{class:"fw-bold"},"Project Name:",-1))),Gs={key:0},Qs={class:"col-md-4 mb-2"},Hs=Ps((()=>(0,i._)("label",{class:"fw-bold"},"BOM Type:",-1))),Ys={key:0},Ks={class:"col-md-4 mb-2"},Js=Ps((()=>(0,i._)("label",{class:"fw-bold"},"Issue Date:",-1))),Xs={key:0},ea={class:"col-md-4 mb-2"},ta=Ps((()=>(0,i._)("label",{class:"fw-bold"},"Product Name:",-1))),sa={key:0},aa={class:"col-md-4 mb-2"},ia=Ps((()=>(0,i._)("label",{class:"fw-bold"},"BOM Rev No:",-1))),la={key:0},oa={class:"col-md-4 mb-2"},ra=Ps((()=>(0,i._)("label",{class:"fw-bold"},"Product Rev No:",-1))),ca={key:0},da=Ps((()=>(0,i._)("div",{class:"mt-4"},null,-1)));function na(e,t,s,a,l,o){const r=(0,i.up)("router-link"),c=(0,i.up)("BomItemsTable");return(0,i.wg)(),(0,i.iD)("div",null,[e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",Is,$s)):((0,i.wg)(),(0,i.iD)("div",Ls,[(0,i._)("div",Bs,[(0,i._)("div",Us,[Ns,Ms,(0,i._)("nav",Os,[(0,i._)("ol",js,[Es,(0,i._)("li",Ts,[(0,i.Wm)(r,{to:"/bom"},{default:(0,i.w5)((()=>[qs,(0,i.Uk)("Bill of Materials")])),_:1})]),As])]),(0,i._)("button",{class:"btn btn-primary ml-auto",onClick:t[0]||(t[0]=(...e)=>o.downloadBOM&&o.downloadBOM(...e))}," Download BOM ")])]),(0,i._)("div",Fs,[(0,i._)("div",Ws,[(0,i._)("div",Vs,[(0,i._)("div",Zs,[zs,l.bom.product?((0,i.wg)(),(0,i.iD)("div",Gs,(0,Oe.zw)(l.bom.product.project.name),1)):(0,i.kq)("",!0)]),(0,i._)("div",Qs,[Hs,l.bom.bom_type?((0,i.wg)(),(0,i.iD)("div",Ys,(0,Oe.zw)(l.bom.bom_type.name),1)):(0,i.kq)("",!0)]),(0,i._)("div",Ks,[Js,l.bom.issue_date?((0,i.wg)(),(0,i.iD)("div",Xs,(0,Oe.zw)(l.bom.issue_date),1)):(0,i.kq)("",!0)]),(0,i._)("div",ea,[ta,l.bom.product?((0,i.wg)(),(0,i.iD)("div",sa,(0,Oe.zw)(l.bom.product.name),1)):(0,i.kq)("",!0)]),(0,i._)("div",aa,[ia,l.bom.bom_rev_number?((0,i.wg)(),(0,i.iD)("div",la,(0,Oe.zw)(l.bom.bom_rev_number),1)):(0,i.kq)("",!0)]),(0,i._)("div",oa,[ra,l.bom.product?((0,i.wg)(),(0,i.iD)("div",ca,(0,Oe.zw)(l.bom.product.product_rev_number),1)):(0,i.kq)("",!0)])])])]),da,(0,i.Wm)(c,{bom:l.bom.bom_line_items,onRowClicked:o.handleRowClicked,onRowSelected:o.handleRowSelected},null,8,["bom","onRowClicked","onRowSelected"])]))])}function ua(e,t,s,a,l,o){const r=(0,i.up)("ag-grid-vue");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(r,{style:{height:"500px"},class:"ag-theme-quartz",rowData:s.bom,defaultColDef:l.defaultColDef,columnDefs:l.colDefs,pagination:!0,onRowClicked:o.onRowClicked,frameworkComponents:{editButtonRenderer:o.editButtonRenderer}},null,8,["rowData","defaultColDef","columnDefs","onRowClicked","frameworkComponents"])])}var ma={name:"BomItemDetails",components:{AgGridVue:ys.n},props:{bom:{type:Array,required:!0}},data(){return{colDefs:[{headerName:"ID",field:"id",hide:!0},{headerName:" Level",field:"level"},{headerName:"VEPL Part Number",field:"part_number"},{headerName:"Priority Level",field:"priority_level"},{headerName:"Value",field:"value"},{headerName:"PCB Footprint",field:"pcb_footprint"},{headerName:"Type",field:"line_item_type.name"},{headerName:"Description",field:"description"},{headerName:"References",valueGetter:function(e){const t=e.data.references;if(t&&t.length>0){const e=t.map((e=>e.name));return e.join(", ")}return""}},{headerName:"Manufacturer Parts",valueGetter:function(e){const t=e.data.manufacturer_parts;if(t&&t.length>0){const e=t.map((e=>{const t=e.manufacturer;return t?`${e.part_number} - ${t.name}`:""}));return e.join(", ")}return""}},{headerName:"Customer Part Number",field:"customer_part_number"},{headerName:"Quantity",field:"quantity"},{headerName:"UOM",field:"uom"},{headerName:"Assembly Stage",field:"assembly_stage.name"},{headerName:"ECN",field:"ecn"},{headerName:"MSL",field:"msl"},{headerName:"Remarks",field:"remarks"}],defaultColDef:{filter:!0,sortable:!0,resizable:!0,autoSize:!0},selectedRows:[]}},mounted(){},methods:{onRowClicked(e){this.$emit("rowClicked",e.data)},onRowSelected(e){e.node.isSelected()&&this.$emit("rowSelected",e.node.data)},editButtonRenderer(e){const t=document.createElement("button");return t.innerHTML='<i class="fas fa-edit"></i>',t.classList.add("btn","btn-primary"),t.addEventListener("click",(()=>this.onEditClick(e.data.id))),t},onEditClick(e){this.$router.push({name:"BomLineItemEdit",params:{id:e}})}}};const ha=(0,$e.Z)(ma,[["render",ua]]);var pa=ha,ba={components:{BomItemsTable:pa},data(){return{bom:""}},methods:{handleRowClicked(e){console.log("Row clicked:",e)},handleRowSelected(e){console.log("Row selected:",e)},async fetchData(){this.$store.commit("setIsLoading",!0),await ye.Z.get(`store/get-boms/${this.$route.params.id}/`).then((e=>{console.log(e.data),this.bom=e.data.bom,this.$store.commit("setIsLoading",!1)})).catch((e=>{console.error("Error fetching data:",e),this.$store.commit("setIsLoading",!1)}))},downloadBOM(){try{const e=this.bom.bom_file_url,t=document.createElement("a");t.href=e,t.download=this.bom.bom_file_name,document.body.appendChild(t),t.click(),document.body.removeChild(t)}catch(e){console.error("Error downloading BOM:",e)}}},mounted(){this.fetchData()}};const fa=(0,$e.Z)(ba,[["render",na],["__scopeId","data-v-09c82d64"]]);var ga=fa;const _a={key:0,class:"container text-center"},ya=(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1),va=(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1),ka=[ya,va],wa={key:1,class:"container"},Ca={class:"row align-items-center"},Sa=(0,i.uE)('<div class="col-md-6 mt-4"><div class="d-flex align-items-center"><h2 class="mb-0">Checklist</h2><span class="ms-3 fs-4 text-muted">|</span><nav aria-label="breadcrumb" class="d-inline-block ms-3"><ol class="breadcrumb bg-transparent m-0 p-0"><li class="breadcrumb-item"><a href="/"><i class="fas fa-home me-1"></i>Home</a></li><li class="breadcrumb-item active" aria-current="page"><i class="fas fa-list-alt me-1"></i> Checklist </li></ol></nav></div></div>',1),Da={class:"col-md-6 mt-4 text-end"},Pa={class:"container has-text-centered"},Ia={class:"d-flex"},Ra=["disabled"],xa=["disabled"],$a=["disabled"],La={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Ba={class:"modal-dialog"},Ua={class:"modal-content"},Na=(0,i._)("div",{class:"modal-header"},[(0,i._)("h1",{class:"modal-title fs-5",id:"exampleModalLabel"}," Fill the Required Batch Quantity "),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Ma={class:"modal-body"},Oa={class:"modal-footer"},ja=(0,i._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1);function Ea(e,t,s,l,o,r){const c=(0,i.up)("BomDetailsTableWithoutEdit");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",_a,ka)):((0,i.wg)(),(0,i.iD)("div",wa,[(0,i._)("div",Ca,[Sa,(0,i._)("div",Da,[(0,i._)("div",Pa,[(0,i._)("div",Ia,[(0,i._)("button",{type:"button",disabled:!o.isButtonEnabled,class:"btn btn-primary btn-sm","data-bs-toggle":"modal","data-bs-target":"#exampleModal"}," Generate New Checklist ",8,Ra),(0,i._)("button",{onClick:t[0]||(t[0]=(...e)=>r.checkExistingChecklist&&r.checkExistingChecklist(...e)),disabled:!o.isButtonEnabled,class:"btn btn-warning btn-sm ms-2"}," View Ongoing Checklist ",8,xa),(0,i._)("button",{onClick:t[1]||(t[1]=(...e)=>r.viewGeneratedChecklists&&r.viewGeneratedChecklists(...e)),disabled:!o.isButtonEnabled,class:"btn btn-success btn-sm ms-2"}," View Generated Checklists ",8,$a)])])])]),(0,i.Wm)(c,{style:{"margin-top":"20px"},rowData:o.rowData,onRowClicked:r.handleRowClicked,onRowSelected:r.handleRowSelected,onRowDeselected:r.handleRowDeselected},null,8,["rowData","onRowClicked","onRowSelected","onRowDeselected"]),(0,i._)("div",La,[(0,i._)("div",Ba,[(0,i._)("div",Ua,[Na,(0,i._)("div",Ma,[(0,i.wy)((0,i._)("input",{type:"number",class:"form-control",id:"requiredBatchQuantity","onUpdate:modelValue":t[2]||(t[2]=e=>o.batch_quantity=e),placeholder:"Enter Batch Quantity",min:"1"},null,512),[[a.nr,o.batch_quantity]])]),(0,i._)("div",Oa,[ja,(0,i._)("button",{onClick:t[3]||(t[3]=(...e)=>r.checkAndGenerateChecklist&&r.checkAndGenerateChecklist(...e)),type:"button",class:"btn btn-primary","data-bs-dismiss":"modal"}," Generate Checklist ")])])])])]))}function Ta(e,t,s,a,l,o){const r=(0,i.up)("ag-grid-vue");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(r,{style:{height:"500px"},class:"ag-theme-quartz",rowData:s.rowData,defaultColDef:l.defaultColDef,columnDefs:l.colDefs,pagination:!0,rowSelection:"single",onRowClicked:o.onRowClicked,onSelectionChanged:o.onSelectionChanged},null,8,["rowData","defaultColDef","columnDefs","onRowClicked","onSelectionChanged"])])}var qa={name:"App",components:{AgGridVue:ys.n},props:{rowData:{type:Array,required:!0}},data(){return{colDefs:[{field:"id",hide:!0},{field:"product.name",headerCheckboxSelection:!0,checkboxSelection:!0,headerName:"Product Name"},{field:"product.product_code",headerName:"Product Code"},{field:"bom_type.name",headerName:"BOM Type"},{field:"bom_rev_number",headerName:"BOM Rev No"},{field:"issue_date",headerName:"Issue Date"},{field:"product.product_rev_number",headerName:"Product Rev No"}],defaultColDef:{filter:!0,sortable:!0,resizable:!0,autoSize:!0},selectedRows:[]}},methods:{onRowClicked(e){this.$emit("rowClicked",e.data)},onSelectionChanged(e){const t=e.api.getSelectedRows(),s=t.length>0?t[0]:null;s?this.$emit("rowSelected",s):this.$emit("rowDeselected")},onEditClick(e){this.$router.push(`/bom/edit/${e}`)}}};const Aa=(0,$e.Z)(qa,[["render",Ta]]);var Fa=Aa,Wa={components:{BomDetailsTableWithoutEdit:Fa},data(){return{rowData:[],selectedRow:null,clickedRowId:null,isButtonEnabled:!1,isExisting:!1,isActive:!1,batch_quantity:1}},methods:{async fetchData(){try{this.$store.commit("setIsLoading",!0);const e=await ye.Z.get("store/get-boms/");this.rowData=e.data.boms,console.log(e.data.boms),this.$store.commit("setIsLoading",!1)}catch(e){console.error("Error fetching BOM data:",e),this.$store.commit("setIsLoading",!1)}},handleRowClicked(e){console.log("Clicked Row:",e)},handleRowSelected(e){console.log("Row Selected:",e),e&&e.id&&(this.selectedRow=e,this.clickedRowId=e.id,this.isButtonEnabled=!0)},handleRowDeselected(){console.log("Row Deselected:"),this.isButtonEnabled=!1},async checkAndGenerateChecklist(){this.$store.commit("setIsLoading",!0),await ye.Z.post(`store/check-existing-checklist/${this.clickedRowId}/`).then((e=>{console.log(e.data),this.isActive=e.data.is_active,this.isExisting=e.data.is_existing,this.isExisting?this.$notify({title:"There is already an active ongoing checklist for this bom, please end that checklist by viewing the ongoing checklist to generate a new one.",type:"bg-danger-subtle text-danger",duration:"5000"}):this.generateChecklist()})).catch((e=>{console.log("error:",e),this.$notify({title:"An error occured, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"})})).finally((()=>{this.$store.commit("setIsLoading",!1)}))},async generateChecklist(){this.$store.commit("setIsLoading",!0);const e={batch_quantity:this.batch_quantity};await ye.Z.post(`store/generate-new-checklist/${this.clickedRowId}/`,e).then((e=>{console.log(e.data),this.$router.push(`/begin-checklist/${this.clickedRowId}`)})).catch((e=>{console.log("error:",e),this.$notify({title:"An error occured, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"})})).finally((()=>{this.$store.commit("setIsLoading",!1)}))},async checkExistingChecklist(){this.$store.commit("setIsLoading",!0),await ye.Z.post(`store/check-existing-checklist/${this.clickedRowId}/`).then((e=>{console.log(e.data),this.isActive=e.data.is_active,this.isExisting=e.data.is_existing,this.isExisting?this.isActive?this.$router.push(`/begin-checklist/${this.clickedRowId}`):this.$notify({title:"No active checklist found for this bom, please generate a new checklist",type:"bg-danger-subtle text-danger",duration:"5000"}):this.$notify({title:"No ongoing checklist found for this bom, please generate a new checklist",type:"bg-danger-subtle text-danger",duration:"5000"})})).catch((e=>{console.log("error:",e),this.$notify({title:"An error occured, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"})})).finally((()=>{this.$store.commit("setIsLoading",!1)}))},viewOngoingChecklists(){this.clickedRowId&&this.$router.push(`/begin-checklist/${this.clickedRowId}`)},viewGeneratedChecklists(){this.clickedRowId&&this.$router.push(`/generated-checklists/${this.clickedRowId}`)}},mounted(){this.fetchData()}};const Va=(0,$e.Z)(Wa,[["render",Ea]]);var Za=Va;const za=e=>((0,i.dD)("data-v-cfa9c45e"),e=e(),(0,i.Cn)(),e),Ga={key:0,class:"container text-center"},Qa=za((()=>(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1))),Ha=za((()=>(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1))),Ya=[Qa,Ha],Ka={key:1,class:"container"},Ja={class:"row align-items-center"},Xa={class:"col-md-6 mt-4"},ei={class:"d-flex align-items-center"},ti=za((()=>(0,i._)("h2",{class:"mb-0"},"Checklist",-1))),si=za((()=>(0,i._)("span",{class:"ms-3 fs-4 text-muted me-3"},"|",-1))),ai={"aria-label":"breadcrumb"},ii={class:"breadcrumb bg-transparent m-0 p-0 justify-content-end"},li=za((()=>(0,i._)("li",{class:"breadcrumb-item"},[(0,i._)("a",{href:"/"},[(0,i._)("i",{class:"fas fa-home me-1"}),(0,i.Uk)("Home")])],-1))),oi={class:"breadcrumb-item active","aria-current":"page"},ri=za((()=>(0,i._)("i",{class:"fas fa-list-alt me-1"},null,-1))),ci=za((()=>(0,i._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,i._)("i",{class:"fas fa-spinner me-1"}),(0,i.Uk)(" Ongoing Checklist ")],-1))),di={class:"col-md-6 mt-4"},ni={class:"container"},ui={class:"d-flex justify-content-end"},mi={key:0,type:"button","data-bs-toggle":"modal","data-bs-target":"#generateLabelModal",class:"btn btn-success me-2"},hi={key:1,type:"button","data-bs-toggle":"modal","data-bs-target":"#generateLabelModal",class:"btn btn-success me-2"},pi=za((()=>(0,i._)("button",{type:"button","data-bs-toggle":"modal","data-bs-target":"#endChecklistModal",class:"btn btn-danger"}," End Checklist ",-1))),bi={class:"modal fade",id:"generateLabelModal",tabindex:"-1","aria-labelledby":"generateLabelModalLabel","aria-hidden":"true"},fi={class:"modal-dialog"},gi={class:"modal-content"},_i=za((()=>(0,i._)("div",{class:"modal-header"},[(0,i._)("h1",{class:"modal-title fs-5",id:"generateLabelModalLabel"}," Generate Label "),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),yi={class:"modal-body"},vi={key:0},ki={key:0,id:"printable-content"},wi=["src"],Ci={key:1},Si={key:1},Di={class:"modal-footer"},Pi=za((()=>(0,i._)("button",{type:"button",class:"btn btn-dark","data-bs-dismiss":"modal"}," Cancel ",-1))),Ii={key:0},Ri={class:"modal fade",id:"endChecklistModal",tabindex:"-1","aria-labelledby":"endChecklistModalLabel","aria-hidden":"true"},xi={class:"modal-dialog"},$i={class:"modal-content"},Li=za((()=>(0,i._)("div",{class:"modal-header"},[(0,i._)("h1",{class:"modal-title fs-5",id:"endChecklistModalLabel"}," End Checklist "),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),Bi=za((()=>(0,i._)("div",{class:"modal-body"}," Are you sure you want to end this checklist? ",-1))),Ui={class:"modal-footer"},Ni=za((()=>(0,i._)("button",{type:"button",class:"btn btn-dark","data-bs-dismiss":"modal"}," Cancel ",-1))),Mi={class:"card border-primary mb-4 mt-4"},Oi=za((()=>(0,i._)("div",{class:"card-header bg-primary text-white"},[(0,i._)("h4",{class:"mb-0"},"Active Bom Details")],-1))),ji={class:"card-body"},Ei={class:"row"},Ti={key:0,class:"col"},qi=za((()=>(0,i._)("strong",null,"Project Name:",-1))),Ai={key:1,class:"col"},Fi=za((()=>(0,i._)("strong",null,"Product Name:",-1))),Wi={class:"col"},Vi=za((()=>(0,i._)("strong",null,"BOM Rev No:",-1))),Zi={class:"col"},zi=za((()=>(0,i._)("strong",null,"Issue Date:",-1))),Gi={class:"col"},Qi=za((()=>(0,i._)("strong",null,"Batch Quantity:",-1))),Hi={class:"accordion",id:"accordionPanelsStayOpenExample"},Yi={class:"accordion-item"},Ki={class:"accordion-header",id:"panelsStayOpen-headingOne"},Ji={class:"accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseOne","aria-expanded":"true","aria-controls":"panelsStayOpen-collapseOne"},Xi={key:0,class:"spinner-border ms-2",role:"status"},el=za((()=>(0,i._)("span",{class:"visually-hidden"},"Loading...",-1))),tl=[el],sl={key:1},al=za((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),il=[al],ll={id:"panelsStayOpen-collapseOne",class:"accordion-collapse collapse show","aria-labelledby":"panelsStayOpen-headingOne"},ol={class:"accordion-body"},rl={class:"accordion-item"},cl={class:"accordion-header",id:"panelsStayOpen-headingTwo"},dl={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseTwo","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseTwo"},nl={key:0,class:"spinner-border ms-2",role:"status"},ul=za((()=>(0,i._)("span",{class:"visually-hidden"},"Loading...",-1))),ml=[ul],hl={key:1},pl=za((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),bl=[pl],fl={id:"panelsStayOpen-collapseTwo",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingTwo"},gl={class:"accordion-body"},_l={class:"accordion-item"},yl={class:"accordion-header",id:"panelsStayOpen-headingThree"},vl={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseThree","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseThree"},kl={key:0,class:"spinner-border ms-2",role:"status"},wl=za((()=>(0,i._)("span",{class:"visually-hidden"},"Loading...",-1))),Cl=[wl],Sl={key:1},Dl=za((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),Pl=[Dl],Il={id:"panelsStayOpen-collapseThree",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingThree"},Rl={class:"accordion-body"},xl={class:"accordion-item"},$l={class:"accordion-header",id:"panelsStayOpen-headingFour"},Ll={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseFour","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseFour"},Bl={key:0,class:"spinner-border ms-2",role:"status"},Ul=za((()=>(0,i._)("span",{class:"visually-hidden"},"Loading...",-1))),Nl=[Ul],Ml={key:1},Ol=za((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),jl=[Ol],El={id:"panelsStayOpen-collapseFour",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingFour"},Tl={class:"accordion-body"},ql={class:"accordion-item"},Al={class:"accordion-header",id:"panelsStayOpen-headingFive"},Fl={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseFive","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseFive"},Wl={key:0,class:"spinner-border ms-2",role:"status"},Vl=za((()=>(0,i._)("span",{class:"visually-hidden"},"Loading...",-1))),Zl=[Vl],zl={key:1},Gl=za((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),Ql=[Gl],Hl={id:"panelsStayOpen-collapseFive",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingFive"},Yl={class:"accordion-body"},Kl={class:"accordion-item"},Jl={class:"accordion-header",id:"panelsStayOpen-headingSix"},Xl={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseSix","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseSix"},eo={key:0,class:"spinner-border ms-2",role:"status"},to=za((()=>(0,i._)("span",{class:"visually-hidden"},"Loading...",-1))),so=[to],ao={key:1},io=za((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),lo=[io],oo={id:"panelsStayOpen-collapseSix",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingSix"},ro={class:"accordion-body"},co={class:"accordion-item"},no={class:"accordion-header",id:"panelsStayOpen-headingSeven"},uo={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseSeven","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseSeven"},mo={key:0,class:"spinner-border ms-2",role:"status"},ho=za((()=>(0,i._)("span",{class:"visually-hidden"},"Loading...",-1))),po=[ho],bo={key:1},fo=za((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),go=[fo],_o={id:"panelsStayOpen-collapseSeven",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingSeven"},yo={class:"accordion-body"},vo={class:"accordion-item"},ko={class:"accordion-header",id:"panelsStayOpen-headingEight"},wo={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseEight","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseEight"},Co={key:0,class:"spinner-border ms-2",role:"status"},So=za((()=>(0,i._)("span",{class:"visually-hidden"},"Loading...",-1))),Do=[So],Po={key:1},Io=za((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),Ro=[Io],xo={id:"panelsStayOpen-collapseEight",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingEight"},$o={class:"accordion-body"},Lo={class:"accordion-item"},Bo={class:"accordion-header",id:"panelsStayOpen-headingNine"},Uo={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseNine","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseNine"},No={key:0,class:"spinner-border ms-2",role:"status"},Mo=za((()=>(0,i._)("span",{class:"visually-hidden"},"Loading...",-1))),Oo=[Mo],jo={key:1},Eo=za((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),To=[Eo],qo={id:"panelsStayOpen-collapseNine",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingNine"},Ao={class:"accordion-body"},Fo={class:"accordion-item"},Wo={class:"accordion-header",id:"panelsStayOpen-headingTen"},Vo={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseTen","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseTen"},Zo={key:0,class:"spinner-border ms-2",role:"status"},zo=za((()=>(0,i._)("span",{class:"visually-hidden"},"Loading...",-1))),Go=[zo],Qo={key:1},Ho=za((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),Yo=[Ho],Ko={id:"panelsStayOpen-collapseTen",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingTen"},Jo={class:"accordion-body"};function Xo(e,t,s,a,l,o){const r=(0,i.up)("router-link"),c=(0,i.up)("CheckListTable");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",Ga,Ya)):((0,i.wg)(),(0,i.iD)("div",Ka,[(0,i._)("div",Ja,[(0,i._)("div",Xa,[(0,i._)("div",ei,[ti,si,(0,i._)("nav",ai,[(0,i._)("ol",ii,[li,(0,i._)("li",oi,[(0,i.Wm)(r,{to:"/checklist"},{default:(0,i.w5)((()=>[ri,(0,i.Uk)(" Checklist")])),_:1})]),ci])])])]),(0,i._)("div",di,[(0,i._)("div",ni,[(0,i._)("div",ui,[l.generatedQRCode?((0,i.wg)(),(0,i.iD)("button",mi," View Generated Label ")):((0,i.wg)(),(0,i.iD)("button",hi," Generate Label ")),(0,i._)("button",{class:"btn btn-primary me-2",onClick:t[0]||(t[0]=(...e)=>o.downloadBOM&&o.downloadBOM(...e))}," Download BOM "),pi])])])]),(0,i._)("div",bi,[(0,i._)("div",fi,[(0,i._)("div",gi,[_i,(0,i._)("div",yi,[l.isChecklistPassed?((0,i.wg)(),(0,i.iD)("div",vi,[l.generatedQRCode?((0,i.wg)(),(0,i.iD)("div",ki,[(0,i._)("img",{src:l.generatedQRCode,alt:"QR Code"},null,8,wi)])):((0,i.wg)(),(0,i.iD)("p",Ci," All Checks passed successfully, generate a label by pressing the generate button. "))])):((0,i.wg)(),(0,i.iD)("div",Si," You can only generate a label if all checks are passed "))]),(0,i._)("div",Di,[Pi,l.isChecklistPassed?((0,i.wg)(),(0,i.iD)("div",Ii,[l.generatedQRCode?((0,i.wg)(),(0,i.iD)("button",{key:0,type:"button",class:"btn btn-success",onClick:t[1]||(t[1]=(...e)=>o.printQRCode&&o.printQRCode(...e))}," Print ")):((0,i.wg)(),(0,i.iD)("button",{key:1,type:"button",class:"btn btn-success",onClick:t[2]||(t[2]=(...e)=>o.generateQRCode&&o.generateQRCode(...e))}," Generate "))])):(0,i.kq)("",!0)])])])]),(0,i._)("div",Ri,[(0,i._)("div",xi,[(0,i._)("div",$i,[Li,Bi,(0,i._)("div",Ui,[Ni,(0,i._)("button",{type:"button",class:"btn btn-danger",onClick:t[3]||(t[3]=(...e)=>o.endChecklist&&o.endChecklist(...e)),"data-bs-dismiss":"modal"}," End ")])])])]),(0,i._)("div",Mi,[Oi,(0,i._)("div",ji,[(0,i._)("div",Ei,[l.activeBom.product?((0,i.wg)(),(0,i.iD)("div",Ti,[qi,(0,i.Uk)(" "+(0,Oe.zw)(l.activeBom.product.project.name),1)])):(0,i.kq)("",!0),l.activeBom.product?((0,i.wg)(),(0,i.iD)("div",Ai,[Fi,(0,i.Uk)(" "+(0,Oe.zw)(l.activeBom.product.name),1)])):(0,i.kq)("",!0),(0,i._)("div",Wi,[Vi,(0,i.Uk)(" "+(0,Oe.zw)(l.activeBom.bom_rev_number),1)]),(0,i._)("div",Zi,[zi,(0,i.Uk)(" "+(0,Oe.zw)(l.activeBom.issue_date),1)]),(0,i._)("div",Gi,[Qi,(0,i.Uk)(" "+(0,Oe.zw)(l.checklist.batch_quantity),1)])])])]),(0,i._)("div",Hi,[(0,i._)("div",Yi,[(0,i._)("h2",Ki,[(0,i._)("button",Ji,[(0,i.Uk)(" Raw Material Check "),!1===l.isRawMaterialSufficient?((0,i.wg)(),(0,i.iD)("div",Xi,tl)):((0,i.wg)(),(0,i.iD)("div",sl,il))])]),(0,i._)("div",ll,[(0,i._)("div",ol,[(0,i.Wm)(c,{checklistItems:l.filteredChecklistItems["Raw Material"]},null,8,["checklistItems"])])])]),(0,i._)("div",rl,[(0,i._)("h2",cl,[(0,i._)("button",dl,[(0,i.Uk)(" PCB Check "),!1===l.isPcbSufficient?((0,i.wg)(),(0,i.iD)("div",nl,ml)):((0,i.wg)(),(0,i.iD)("div",hl,bl))])]),(0,i._)("div",fl,[(0,i._)("div",gl,[(0,i.Wm)(c,{checklistItems:l.filteredChecklistItems["PCB"]},null,8,["checklistItems"])])])]),(0,i._)("div",_l,[(0,i._)("h2",yl,[(0,i._)("button",vl,[(0,i.Uk)(" Solder Paste Check "),!1===l.isSolderPasteSufficient?((0,i.wg)(),(0,i.iD)("div",kl,Cl)):((0,i.wg)(),(0,i.iD)("div",Sl,Pl))])]),(0,i._)("div",Il,[(0,i._)("div",Rl,[(0,i.Wm)(c,{checklistItems:l.filteredChecklistItems["Solder Paste"]},null,8,["checklistItems"])])])]),(0,i._)("div",xl,[(0,i._)("h2",$l,[(0,i._)("button",Ll,[(0,i.Uk)(" Solder Bar Check "),!1===l.isSolderBarSufficient?((0,i.wg)(),(0,i.iD)("div",Bl,Nl)):((0,i.wg)(),(0,i.iD)("div",Ml,jl))])]),(0,i._)("div",El,[(0,i._)("div",Tl,[(0,i.Wm)(c,{checklistItems:l.filteredChecklistItems["Solder Bar"]},null,8,["checklistItems"]),(0,i.Uk)("> ")])])]),(0,i._)("div",ql,[(0,i._)("h2",Al,[(0,i._)("button",Fl,[(0,i.Uk)(" Solder Flux Check "),!1===l.isSolderFluxSufficient?((0,i.wg)(),(0,i.iD)("div",Wl,Zl)):((0,i.wg)(),(0,i.iD)("div",zl,Ql))])]),(0,i._)("div",Hl,[(0,i._)("div",Yl,[(0,i.Wm)(c,{checklistItems:l.filteredChecklistItems["Solder Flux"]},null,8,["checklistItems"])])])]),(0,i._)("div",Kl,[(0,i._)("h2",Jl,[(0,i._)("button",Xl,[(0,i.Uk)(" IPA Check "),!1===l.isIpaSufficient?((0,i.wg)(),(0,i.iD)("div",eo,so)):((0,i.wg)(),(0,i.iD)("div",ao,lo))])]),(0,i._)("div",oo,[(0,i._)("div",ro,[(0,i.Wm)(c,{checklistItems:l.filteredChecklistItems["IPA"]},null,8,["checklistItems"])])])]),(0,i._)("div",co,[(0,i._)("h2",no,[(0,i._)("button",uo,[(0,i.Uk)(" Solder Wire Check "),!1===l.isSolderWireSufficient?((0,i.wg)(),(0,i.iD)("div",mo,po)):((0,i.wg)(),(0,i.iD)("div",bo,go))])]),(0,i._)("div",_o,[(0,i._)("div",yo,[(0,i.Wm)(c,{checklistItems:l.filteredChecklistItems["Solder Wire"]},null,8,["checklistItems"])])])]),(0,i._)("div",vo,[(0,i._)("h2",ko,[(0,i._)("button",wo,[(0,i.Uk)(" SMT Pallet Check "),!1===l.isSMTPalletSufficient?((0,i.wg)(),(0,i.iD)("div",Co,Do)):((0,i.wg)(),(0,i.iD)("div",Po,Ro))])]),(0,i._)("div",xo,[(0,i._)("div",$o,[(0,i.Wm)(c,{checklistItems:l.filteredChecklistItems["SMT Pallet"]},null,8,["checklistItems"])])])]),(0,i._)("div",Lo,[(0,i._)("h2",Bo,[(0,i._)("button",Uo,[(0,i.Uk)(" Wave Pallet Check "),!1===l.isWavePalletSufficient?((0,i.wg)(),(0,i.iD)("div",No,Oo)):((0,i.wg)(),(0,i.iD)("div",jo,To))])]),(0,i._)("div",qo,[(0,i._)("div",Ao,[(0,i.Wm)(c,{checklistItems:l.filteredChecklistItems["Wave Pallet"]},null,8,["checklistItems"])])])]),(0,i._)("div",Fo,[(0,i._)("h2",Wo,[(0,i._)("button",Vo,[(0,i.Uk)(" PCB Serial Number Label Check "),!1===l.isLabelSufficient?((0,i.wg)(),(0,i.iD)("div",Zo,Go)):((0,i.wg)(),(0,i.iD)("div",Qo,Yo))])]),(0,i._)("div",Ko,[(0,i._)("div",Jo,[(0,i.Wm)(c,{checklistItems:l.filteredChecklistItems["PCB Serial Number Label"]},null,8,["checklistItems"])])])])])]))}function er(e,t,s,a,l,o){const r=(0,i.up)("ag-grid-vue");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(r,{ref:"agGrid",style:{height:"550px"},class:"ag-theme-quartz",rowData:s.checklistItems,defaultColDef:l.defaultColDef,columnDefs:l.colDefs,pagination:!0,onFirstDataRendered:o.onFirstDataRendered,onRowClicked:o.onRowClicked,onRowSelected:o.onRowSelected,onRowDeselected:o.onRowDeselected,onGridReady:o.onGridReady},null,8,["rowData","defaultColDef","columnDefs","onFirstDataRendered","onRowClicked","onRowSelected","onRowDeselected","onGridReady"])])}var tr={props:{checklistItems:{type:Array,required:!0}},components:{AgGridVue:ys.n},data(){return{gridApi:null,isGridReady:!1,colDefs:[{headerName:"VEPL Part No",field:"bom_line_item.part_number"},{headerName:"UID",field:"checklist_item_uids",valueFormatter:function(e){if(!e.value||0===e.value.length)return null;const t=e.value.map((e=>e.uid));return t.join(", ")}},{headerName:"Present Quantity",field:"present_quantity"},{headerName:"Required Quantity",field:"required_quantity"},{headerName:"Delta",valueGetter:function(e){const t=e.data.present_quantity,s=e.data.required_quantity,a=t-s;return a>=0?`+${a}`:`-${Math.abs(a)}`}},{headerName:"Is Present",field:"is_present"},{headerName:"Is Quantity Sufficient",field:"is_quantity_sufficient"},{headerName:"Updated At",field:"updated_at"}],defaultColDef:{filter:!0,sortable:!0,resizable:!0,autoSize:!0,domLayout:"autoHeight"},selectedRows:[]}},mounted(){},methods:{statusCellRenderer(e){return e.value?"":""},onRowClicked(e){this.$emit("rowClicked",e.data)},onRowSelected(e){e.node.isSelected()&&this.$emit("rowSelected",e.node.data),this.onSelectionChanged()},onRowDeselected(){this.onSelectionChanged()},onSelectionChanged(){this.selectedRows=this.gridApi.getSelectedRows()},onFirstDataRendered(e){e.api&&(this.gridApi=e.api,this.isGridReady=!0)},onGridReady(e){this.gridApi=e.api,this.isGridReady=!0}}};const sr=(0,$e.Z)(tr,[["render",er],["__scopeId","data-v-68eea027"]]);var ar=sr,ir=s(8385),lr={components:{CheckListTable:ar},data(){return{activeBom:"",checklist:"",checklistItems:[],isChecklistPassed:!1,isChecklistEnded:!1,isRawMaterialSufficient:!1,isPcbSufficient:!1,isSolderPasteSufficient:!1,isSolderBarSufficient:!1,isSolderFluxSufficient:!1,isIpaSufficient:!1,isSolderWireSufficient:!1,isSMTPalletSufficient:!1,isWavePalletSufficient:!1,isLabelSufficient:!1,pollingInterval:"",generatedQRCode:"",filteredChecklistItems:{"Raw Material":[],PCB:[],"Solder Paste":[],"Solder Bar":[],"Solder Flux":[],Ipa:[],"Solder Wire":[],"SMT Pallet":[],"Wave Pallet":[],"PCB Serial Number Label":[]},scannedEntries:[]}},mounted(){this.getChecklistBeginning(),this.pollingInterval=setInterval((()=>{this.isChecklistPassed?(clearInterval(this.pollingInterval),this.$notify({title:"BOM Check Passed",type:"bg-success-subtle text-success",duration:"5000"})):this.getChecklist()}),5e3)},beforeUnmount(){clearInterval(this.pollingInterval)},methods:{async getChecklistBeginning(){this.$store.commit("setIsLoading",!0),await ye.Z.get(`store/get-active-checklist/${this.$route.params.id}/`).then((e=>{console.log(e.data),this.checklist=e.data.checklist,this.checklistItems=this.checklist.checklist_items,console.log("checklists items hereeeeee",this.checklistItems);const t=this.filterChecklistItemsByType("Raw Material"),s=this.filterChecklistItemsByType("PCB"),a=this.filterChecklistItemsByType("Solder Paste"),i=this.filterChecklistItemsByType("Solder Bar"),l=this.filterChecklistItemsByType("Solder Flux"),o=this.filterChecklistItemsByType("IPA"),r=this.filterChecklistItemsByType("Solder Wire"),c=this.filterChecklistItemsByType("SMT Pallet"),d=this.filterChecklistItemsByType("Wave Pallet"),n=this.filterChecklistItemsByType("PCB Serial Number Label");this.isChecklistPassed=this.checklist.is_passed,this.activeBom=this.checklist.bom,this.filteredChecklistItems={"Raw Material":t,PCB:s,"Solder Paste":a,"Solder Bar":i,"Solder Flux":l,IPA:o,"Solder Wire":r,"SMT Pallet":c,"Wave Pallet":d,"PCB Serial Number Label":n},console.log("filered checklsit items",this.filteredChecklistItems),this.isRawMaterialSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Raw Material"),this.isPcbSufficient=this.isItemsSufficient(this.filteredChecklistItems,"PCB"),this.isSolderPasteSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Paste"),console.log("checking solder paste",this.isSolderPasteSufficient),this.isSolderBarSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Bar"),console.log("checkinsssg solder bar",this.isSolderBarSufficient),this.isSolderFluxSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Flux"),this.isIpaSufficient=this.isItemsSufficient(this.filteredChecklistItems,"IPA"),this.isSolderWireSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Wire"),this.isSMTPalletSufficient=this.isItemsSufficient(this.filteredChecklistItems,"SMT Pallet"),this.isWavePalletSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Wave Pallet"),this.isLabelSufficient=this.isItemsSufficient(this.filteredChecklistItems,"PCB Serial Number Label"),"Completed"!=this.checklist.status&&"Failed"!=this.checklist.status||(this.isChecklistEnded=!0),this.checklist.qr_code_link&&(this.generatedQRCode=this.checklist.qr_code_link),this.$store.commit("setIsLoading",!1)})).catch((e=>{console.log("error:",e),this.$notify({title:"An error occured, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1)}))},async getChecklist(){await ye.Z.get(`store/get-active-checklist/${this.$route.params.id}/`).then((e=>{console.log(e.data),this.checklist=e.data.checklist,this.checklistItems=this.checklist.checklist_items,console.log("chehcklist items hereeeeee",this.checklistItems);const t=this.filterChecklistItemsByType("Raw Material"),s=this.filterChecklistItemsByType("PCB"),a=this.filterChecklistItemsByType("Solder Paste"),i=this.filterChecklistItemsByType("Solder Bar"),l=this.filterChecklistItemsByType("Solder Flux"),o=this.filterChecklistItemsByType("IPA"),r=this.filterChecklistItemsByType("Solder Wire"),c=this.filterChecklistItemsByType("SMT Pallet"),d=this.filterChecklistItemsByType("Wave Pallet"),n=this.filterChecklistItemsByType("PCB Serial Number Label");this.isChecklistPassed=this.checklist.is_passed,this.activeBom=this.checklist.bom,this.filteredChecklistItems={"Raw Material":t,PCB:s,"Solder Paste":a,"Solder Bar":i,"Solder Flux":l,IPA:o,"Solder Wire":r,"SMT Pallet":c,"Wave Pallet":d,"PCB Serial Number Label":n},console.log("filered checklsit items",this.filteredChecklistItems),this.isRawMaterialSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Raw Material"),this.isPcbSufficient=this.isItemsSufficient(this.filteredChecklistItems,"PCB"),this.isSolderPasteSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Paste"),this.isSolderBarSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Bar"),console.log("checking solder bar",this.isSolderBarSufficient),this.isSolderFluxSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Flux"),this.isIpaSufficient=this.isItemsSufficient(this.filteredChecklistItems,"IPA"),this.isSolderWireSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Wire"),this.isSMTPalletSufficient=this.isItemsSufficient(this.filteredChecklistItems,"SMT Pallet"),this.isWavePalletSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Wave Pallet"),this.isLabelSufficient=this.isItemsSufficient(this.filteredChecklistItems,"PCB Serial Number Label"),"Completed"!=this.checklist.status&&"Failed"!=this.checklist.status||(this.isChecklistEnded=!0),this.checklist.qr_code_link&&(this.generatedQRCode=this.checklist.qr_code_link)})).catch((e=>{console.log("error:",e),this.$notify({title:"An error occured, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"})}))},async endChecklist(){this.$store.commit("setIsLoading",!0),clearInterval(this.pollingInterval),await ye.Z.get(`store/end-checklist/${this.checklist.id}/`).then((e=>{console.log(e.data),this.$notify({title:"Checklist ended",type:"bg-danger-subtle text-danger",duration:"5000"}),this.checklist=e.data.checklist,this.checklistItems=this.checklist.checklist_items,this.isChecklistPassed=this.checklist.is_passed,this.activeBom=this.checklist.bom,"Completed"!=this.checklist.status&&"Failed"!=this.checklist.status||(this.isChecklistEnded=!0),this.$router.push(`/generated-checklists/${this.$route.params.id}`),this.$store.commit("setIsLoading",!1)})).catch((e=>{console.log("error:",e),this.$notify({title:"An error occured, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"}),clearInterval(this.pollingInterval),this.$store.commit("setIsLoading",!1)}))},async generateQRCode(){const e=this.generateUniqueCode();console.log(e);const t=await ir.toDataURL(e),s={uniqueCode:e,qrCodeDataURL:t};this.saveQRCode(s)},generateUniqueCode(){const e=Date.now().toString(),t=Math.random().toString(36).substring(7);return`${e}-${t}`},async saveQRCode(e){await ye.Z.post(`store/save-qr-code/${this.checklist.id}/`,e).then((t=>{console.log(t.data),this.generatedQRCode=e.qrCodeDataURL,this.$notify({title:"QR Code generated and saved successfully",type:"bg-success-subtle text-success",duration:"5000"})})).catch((e=>{console.log("error:",e),this.$notify({title:"An error occured, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"})}))},printQRCode(){if(this.generatedQRCode){const e=document.getElementById("printable-content"),t=window.open("","","height=1000,width=1000");t.document.write(e.innerHTML),t.print()}},filterChecklistItemsByType(e){return this.checklistItems.filter((t=>{const s=t.checklist_item_type;return!(!s||!s.name)&&s.name.toUpperCase()===e.toUpperCase()}))},isItemsSufficient(e,t){const s=this.filteredChecklistItems[t];if(s){if(0===s.length)return!0;const e=s.filter((e=>!0===e.is_quantity_sufficient));return e.length===s.length}return!1},downloadBOM(){try{const e=this.checklist.bom.bom_file_url;console.log("file url",e);const t=document.createElement("a");t.href=e,t.download=this.checklist.bom.bom_file_name,document.body.appendChild(t),t.click(),document.body.removeChild(t)}catch(e){console.error("Error downloading BOM:",e)}}}};const or=(0,$e.Z)(lr,[["render",Xo],["__scopeId","data-v-cfa9c45e"]]);var rr=or;const cr={key:0,class:"container text-center"},dr=(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1),nr=(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1),ur=[dr,nr],mr={key:1,class:"container"},hr={class:"row align-items-center"},pr={class:"col-md-12 mt-4"},br={class:"d-flex align-items-center"},fr=(0,i._)("h2",{class:"mb-0 me-3"},"Generated Checklists",-1),gr=(0,i._)("span",{class:"fs-4 text-muted"},"|",-1),_r={"aria-label":"breadcrumb",class:"d-inline-block ms-3"},yr={class:"breadcrumb bg-transparent m-0 p-0"},vr=(0,i._)("li",{class:"breadcrumb-item"},[(0,i._)("a",{href:"/"},[(0,i._)("i",{class:"fas fa-home me-1"}),(0,i.Uk)("Home")])],-1),kr={class:"breadcrumb-item"},wr=(0,i._)("i",{class:"fas fa-list-alt me-1"},null,-1),Cr=(0,i._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,i._)("i",{class:"fa-solid fa-list-check me-1"}),(0,i.Uk)(" Generated Checklists ")],-1);function Sr(e,t,s,a,l,o){const r=(0,i.up)("router-link"),c=(0,i.up)("CheckListsTable");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",cr,ur)):((0,i.wg)(),(0,i.iD)("div",mr,[(0,i._)("div",hr,[(0,i._)("div",pr,[(0,i._)("div",br,[fr,gr,(0,i._)("nav",_r,[(0,i._)("ol",yr,[vr,(0,i._)("li",kr,[(0,i.Wm)(r,{to:"/checklist"},{default:(0,i.w5)((()=>[wr,(0,i.Uk)(" Checklist")])),_:1})]),Cr])])])])]),(0,i.Wm)(c,{style:{"margin-top":"20px"},rowData:l.rowData},null,8,["rowData"])]))}function Dr(e,t,s,a,l,o){const r=(0,i.up)("ag-grid-vue");return(0,i.wg)(),(0,i.iD)("div",null,[s.rowData.length>0?((0,i.wg)(),(0,i.j4)(r,{key:0,style:{height:"500px"},class:"ag-theme-quartz",rowData:s.rowData,defaultColDef:l.defaultColDef,columnDefs:l.colDefs,pagination:!0,onRowClicked:o.onRowClicked,onRowSelected:o.onRowSelected},null,8,["rowData","defaultColDef","columnDefs","onRowClicked","onRowSelected"])):(0,i.kq)("",!0)])}var Pr={components:{AgGridVue:ys.n},props:{rowData:{type:Array}},data(){return{colDefs:[{field:"id",hide:!0},{headerName:"Checklist ID",field:"id",headerCheckboxSelection:!0,checkboxSelection:!0},{headerName:"Unique Code",field:"unique_code",valueFormatter:function(e){return null===e.value?"null":e.value}},{headerName:"Project Name",field:"bom.product.project.name"},{headerName:"Product Name",field:"bom.product.name"},{headerName:"Product Code",field:"bom.product.product_code"},{headerName:"Batch Quantity",field:"batch_quantity"},{headerName:"Updated At",field:"updated_at"},{headerName:"Status",field:"status"},{headerName:"Actions",cellRenderer:this.editButtonRenderer}],defaultColDef:{filter:!0,sortable:!0,resizable:!0,autoSize:!0},selectedRows:[]}},methods:{onRowClicked(e){this.$emit("rowClicked",e.data)},onRowSelected(e){e.node.isSelected()&&this.$emit("rowSelected",e.node.data)},onSelectionChanged(){this.$refs.agGrid&&this.$refs.agGrid.api&&(this.selectedRows=this.$refs.agGrid.api.getSelectedRows())},editButtonRenderer(e){const t=document.createElement("button");return t.innerHTML='<i class="fas fa-eye"></i>',t.classList.add("btn","btn-success"),t.addEventListener("click",(()=>this.onViewClick(e.data))),t},onViewClick(e){"In Progress"===e.status?this.$router.push(`/begin-checklist/${e.bom.id}`):this.$router.push(`/checklist-details/${e.id}`)}}};const Ir=(0,$e.Z)(Pr,[["render",Dr],["__scopeId","data-v-4d2eec7a"]]);var Rr=Ir,xr={components:{CheckListsTable:Rr},data(){return{rowData:[]}},mounted(){this.fetchData()},methods:{async fetchData(){try{this.$store.commit("setIsLoading",!0);const e=await ye.Z.get(`store/generated-checklists/${this.$route.params.id}`);this.rowData=e.data,console.log("checklists",e.data),this.$store.commit("setIsLoading",!1)}catch(e){console.error("Error fetching CheckLists data:",e),this.$store.commit("setIsLoading",!1)}}}};const $r=(0,$e.Z)(xr,[["render",Sr]]);var Lr=$r;const Br=e=>((0,i.dD)("data-v-d53e0868"),e=e(),(0,i.Cn)(),e),Ur={key:0,class:"container text-center"},Nr=Br((()=>(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1))),Mr=Br((()=>(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1))),Or=[Nr,Mr],jr={key:1,class:"container"},Er={class:"row align-items-center"},Tr=(0,i.uE)('<div class="col-md-6 mt-4" data-v-d53e0868><div class="d-flex align-items-center" data-v-d53e0868><h2 class="mb-0" data-v-d53e0868>Checklist Details</h2><span class="ms-3 fs-4 text-muted me-3" data-v-d53e0868>|</span><nav aria-label="breadcrumb" data-v-d53e0868><ol class="breadcrumb bg-transparent m-0 p-0 justify-content-end" data-v-d53e0868><li class="breadcrumb-item" data-v-d53e0868><a href="/" data-v-d53e0868>Home</a></li><li class="breadcrumb-item active" aria-current="page" data-v-d53e0868> Checklist </li></ol></nav></div></div>',1),qr={class:"col-md-6 mt-4 d-flex justify-content-end"},Ar={class:"container"},Fr={class:"d-flex justify-content-end"},Wr={key:0,type:"button","data-bs-toggle":"modal","data-bs-target":"#generateLabelModal",class:"btn btn-success me-2"},Vr={key:1,type:"button","data-bs-toggle":"modal","data-bs-target":"#generateLabelModal",class:"btn btn-success me-2"},Zr={class:"modal fade",id:"generateLabelModal",tabindex:"-1","aria-labelledby":"generateLabelModalLabel","aria-hidden":"true"},zr={class:"modal-dialog"},Gr={class:"modal-content"},Qr=Br((()=>(0,i._)("div",{class:"modal-header"},[(0,i._)("h1",{class:"modal-title fs-5",id:"generateLabelModalLabel"}," Generate Label "),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),Hr={class:"modal-body"},Yr={key:0},Kr={key:0,id:"printable-content"},Jr=["src"],Xr={key:1},ec={key:1},tc={class:"modal-footer"},sc=Br((()=>(0,i._)("button",{type:"button",class:"btn btn-dark","data-bs-dismiss":"modal"}," Cancel ",-1))),ac={key:0},ic={class:"card border-primary mb-4 mt-4"},lc=Br((()=>(0,i._)("div",{class:"card-header bg-primary text-white"},[(0,i._)("h4",{class:"mb-0"},"BOM Details")],-1))),oc={class:"card-body"},rc={class:"row"},cc={key:0,class:"col"},dc=Br((()=>(0,i._)("strong",null,"Project Name:",-1))),nc={key:1,class:"col"},uc=Br((()=>(0,i._)("strong",null,"Product Name:",-1))),mc={class:"col"},hc=Br((()=>(0,i._)("strong",null,"BOM Rev No:",-1))),pc={class:"col"},bc=Br((()=>(0,i._)("strong",null,"Issue Date:",-1))),fc={class:"accordion",id:"accordionPanelsStayOpenExample"},gc={class:"accordion-item"},_c={class:"accordion-header",id:"panelsStayOpen-headingOne"},yc={class:"accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseOne","aria-expanded":"true","aria-controls":"panelsStayOpen-collapseOne"},vc={key:0},kc=Br((()=>(0,i._)("i",{class:"bi bi-x-circle-fill fs-4 ms-2"},null,-1))),wc=[kc],Cc={key:1},Sc=Br((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),Dc=[Sc],Pc={id:"panelsStayOpen-collapseOne",class:"accordion-collapse collapse show","aria-labelledby":"panelsStayOpen-headingOne"},Ic={class:"accordion-body"},Rc={class:"accordion-item"},xc={class:"accordion-header",id:"panelsStayOpen-headingTwo"},$c={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseTwo","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseTwo"},Lc={key:0},Bc=Br((()=>(0,i._)("i",{class:"bi bi-x-circle-fill fs-4 ms-2"},null,-1))),Uc=[Bc],Nc={key:1},Mc=Br((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),Oc=[Mc],jc={id:"panelsStayOpen-collapseTwo",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingTwo"},Ec={class:"accordion-body"},Tc={class:"accordion-item"},qc={class:"accordion-header",id:"panelsStayOpen-headingThree"},Ac={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseThree","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseThree"},Fc={key:0},Wc=Br((()=>(0,i._)("i",{class:"bi bi-x-circle-fill fs-4 ms-2"},null,-1))),Vc=[Wc],Zc={key:1},zc=Br((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),Gc=[zc],Qc={id:"panelsStayOpen-collapseThree",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingThree"},Hc={class:"accordion-body"},Yc={class:"accordion-item"},Kc={class:"accordion-header",id:"panelsStayOpen-headingFour"},Jc={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseFour","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseFour"},Xc={key:0},ed=Br((()=>(0,i._)("i",{class:"bi bi-x-circle-fill fs-4 ms-2"},null,-1))),td=[ed],sd={key:1},ad=Br((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),id=[ad],ld={id:"panelsStayOpen-collapseFour",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingFour"},od={class:"accordion-body"},rd={class:"accordion-item"},cd={class:"accordion-header",id:"panelsStayOpen-headingFive"},dd={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseFive","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseFive"},nd={key:0},ud=Br((()=>(0,i._)("i",{class:"bi bi-x-circle-fill fs-4 ms-2"},null,-1))),md=[ud],hd={key:1},pd=Br((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),bd=[pd],fd={id:"panelsStayOpen-collapseFive",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingFive"},gd={class:"accordion-body"},_d={class:"accordion-item"},yd={class:"accordion-header",id:"panelsStayOpen-headingSix"},vd={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseSix","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseSix"},kd={key:0},wd=Br((()=>(0,i._)("i",{class:"bi bi-x-circle-fill fs-4 ms-2"},null,-1))),Cd=[wd],Sd={key:1},Dd=Br((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),Pd=[Dd],Id={id:"panelsStayOpen-collapseSix",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingSix"},Rd={class:"accordion-body"},xd={class:"accordion-item"},$d={class:"accordion-header",id:"panelsStayOpen-headingSeven"},Ld={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseSeven","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseSeven"},Bd={key:0},Ud=Br((()=>(0,i._)("i",{class:"bi bi-x-circle-fill fs-4 ms-2"},null,-1))),Nd=[Ud],Md={key:1},Od=Br((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),jd=[Od],Ed={id:"panelsStayOpen-collapseSeven",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingSeven"},Td={class:"accordion-body"},qd={class:"accordion-item"},Ad={class:"accordion-header",id:"panelsStayOpen-headingEight"},Fd={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseEight","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseEight"},Wd={key:0},Vd=Br((()=>(0,i._)("i",{class:"bi bi-x-circle-fill fs-4 ms-2"},null,-1))),Zd=[Vd],zd={key:1},Gd=Br((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),Qd=[Gd],Hd={id:"panelsStayOpen-collapseEight",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingEight"},Yd={class:"accordion-body"},Kd={class:"accordion-item"},Jd={class:"accordion-header",id:"panelsStayOpen-headingNine"},Xd={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseNine","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseNine"},en={key:0},tn=Br((()=>(0,i._)("i",{class:"bi bi-x-circle-fill fs-4 ms-2"},null,-1))),sn=[tn],an={key:1},ln=Br((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),on=[ln],rn={id:"panelsStayOpen-collapseNine",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingNine"},cn={class:"accordion-body"},dn={class:"accordion-item"},nn={class:"accordion-header",id:"panelsStayOpen-headingTen"},un={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseTen","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseTen"},mn={key:0},hn=Br((()=>(0,i._)("i",{class:"bi bi-x-circle-fill fs-4 ms-2"},null,-1))),pn=[hn],bn={key:1},fn=Br((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),gn=[fn],_n={id:"panelsStayOpen-collapseTen",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingTen"},yn={class:"accordion-body"};function vn(e,t,s,a,l,o){const r=(0,i.up)("CheckListTable");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",Ur,Or)):((0,i.wg)(),(0,i.iD)("div",jr,[(0,i._)("div",Er,[Tr,(0,i._)("div",qr,[(0,i._)("div",Ar,[(0,i._)("div",Fr,[l.generatedQRCode?((0,i.wg)(),(0,i.iD)("button",Wr," View Generated Label ")):((0,i.wg)(),(0,i.iD)("button",Vr," Generate Label "))])])])]),(0,i._)("div",Zr,[(0,i._)("div",zr,[(0,i._)("div",Gr,[Qr,(0,i._)("div",Hr,[l.isChecklistPassed?((0,i.wg)(),(0,i.iD)("div",Yr,[l.generatedQRCode?((0,i.wg)(),(0,i.iD)("div",Kr,[(0,i._)("img",{src:l.generatedQRCode,alt:"QR Code"},null,8,Jr)])):((0,i.wg)(),(0,i.iD)("p",Xr," All Checks passed successfully, generate a label by pressing the generate button. "))])):((0,i.wg)(),(0,i.iD)("div",ec," You can only generate a label if all checks are passed "))]),(0,i._)("div",tc,[sc,l.isChecklistPassed?((0,i.wg)(),(0,i.iD)("div",ac,[l.generatedQRCode?((0,i.wg)(),(0,i.iD)("button",{key:0,type:"button",class:"btn btn-success",onClick:t[0]||(t[0]=(...e)=>o.printQRCode&&o.printQRCode(...e))}," Print ")):((0,i.wg)(),(0,i.iD)("button",{key:1,type:"button",class:"btn btn-success",onClick:t[1]||(t[1]=(...e)=>o.generateQRCode&&o.generateQRCode(...e))}," Generate "))])):(0,i.kq)("",!0)])])])]),(0,i._)("div",ic,[lc,(0,i._)("div",oc,[(0,i._)("div",rc,[l.activeBom.product?((0,i.wg)(),(0,i.iD)("div",cc,[dc,(0,i.Uk)(" "+(0,Oe.zw)(l.activeBom.product.project.name),1)])):(0,i.kq)("",!0),l.activeBom.product?((0,i.wg)(),(0,i.iD)("div",nc,[uc,(0,i.Uk)(" "+(0,Oe.zw)(l.activeBom.product.name),1)])):(0,i.kq)("",!0),(0,i._)("div",mc,[hc,(0,i.Uk)(" "+(0,Oe.zw)(l.activeBom.bom_rev_number),1)]),(0,i._)("div",pc,[bc,(0,i.Uk)(" "+(0,Oe.zw)(l.activeBom.issue_date),1)])])])]),(0,i._)("div",fc,[(0,i._)("div",gc,[(0,i._)("h2",_c,[(0,i._)("button",yc,[(0,i.Uk)(" Raw Material Check "),0==l.isRawMaterialSufficient?((0,i.wg)(),(0,i.iD)("div",vc,wc)):((0,i.wg)(),(0,i.iD)("div",Cc,Dc))])]),(0,i._)("div",Pc,[(0,i._)("div",Ic,[(0,i.Wm)(r,{checklistItems:l.filteredChecklistItems["Raw Material"]},null,8,["checklistItems"])])])]),(0,i._)("div",Rc,[(0,i._)("h2",xc,[(0,i._)("button",$c,[(0,i.Uk)(" PCB Check "),0==l.isPcbSufficient?((0,i.wg)(),(0,i.iD)("div",Lc,Uc)):((0,i.wg)(),(0,i.iD)("div",Nc,Oc))])]),(0,i._)("div",jc,[(0,i._)("div",Ec,[(0,i.Wm)(r,{checklistItems:l.filteredChecklistItems["PCB"]},null,8,["checklistItems"])])])]),(0,i._)("div",Tc,[(0,i._)("h2",qc,[(0,i._)("button",Ac,[(0,i.Uk)(" Solder Paste "),0==l.isSolderPasteSufficient?((0,i.wg)(),(0,i.iD)("div",Fc,Vc)):((0,i.wg)(),(0,i.iD)("div",Zc,Gc))])]),(0,i._)("div",Qc,[(0,i._)("div",Hc,[(0,i.Wm)(r,{checklistItems:l.filteredChecklistItems["Solder Paste"]},null,8,["checklistItems"])])])]),(0,i._)("div",Yc,[(0,i._)("h2",Kc,[(0,i._)("button",Jc,[(0,i.Uk)(" Solder Bar "),0==l.isSolderBarSufficient?((0,i.wg)(),(0,i.iD)("div",Xc,td)):((0,i.wg)(),(0,i.iD)("div",sd,id))])]),(0,i._)("div",ld,[(0,i._)("div",od,[(0,i.Wm)(r,{checklistItems:l.filteredChecklistItems["Solder Bar"]},null,8,["checklistItems"]),(0,i.Uk)("> ")])])]),(0,i._)("div",rd,[(0,i._)("h2",cd,[(0,i._)("button",dd,[(0,i.Uk)(" Solder Flux "),0==l.isSolderFluxSufficient?((0,i.wg)(),(0,i.iD)("div",nd,md)):((0,i.wg)(),(0,i.iD)("div",hd,bd))])]),(0,i._)("div",fd,[(0,i._)("div",gd,[(0,i.Wm)(r,{checklistItems:l.filteredChecklistItems["Solder Flux"]},null,8,["checklistItems"])])])]),(0,i._)("div",_d,[(0,i._)("h2",yd,[(0,i._)("button",vd,[(0,i.Uk)(" IPA "),0==l.isIpaSufficient?((0,i.wg)(),(0,i.iD)("div",kd,Cd)):((0,i.wg)(),(0,i.iD)("div",Sd,Pd))])]),(0,i._)("div",Id,[(0,i._)("div",Rd,[(0,i.Wm)(r,{checklistItems:l.filteredChecklistItems["IPA"]},null,8,["checklistItems"])])])]),(0,i._)("div",xd,[(0,i._)("h2",$d,[(0,i._)("button",Ld,[(0,i.Uk)(" Solder Wire "),0==l.isSolderWireSufficient?((0,i.wg)(),(0,i.iD)("div",Bd,Nd)):((0,i.wg)(),(0,i.iD)("div",Md,jd))])]),(0,i._)("div",Ed,[(0,i._)("div",Td,[(0,i.Wm)(r,{checklistItems:l.filteredChecklistItems["Solder Wire"]},null,8,["checklistItems"])])])]),(0,i._)("div",qd,[(0,i._)("h2",Ad,[(0,i._)("button",Fd,[(0,i.Uk)(" SMT Pallet "),0==l.isSMTPalletSufficient?((0,i.wg)(),(0,i.iD)("div",Wd,Zd)):((0,i.wg)(),(0,i.iD)("div",zd,Qd))])]),(0,i._)("div",Hd,[(0,i._)("div",Yd,[(0,i.Wm)(r,{checklistItems:l.filteredChecklistItems["SMT Pallet"]},null,8,["checklistItems"])])])]),(0,i._)("div",Kd,[(0,i._)("h2",Jd,[(0,i._)("button",Xd,[(0,i.Uk)(" Wave Pallet "),0==l.isWavePalletSufficient?((0,i.wg)(),(0,i.iD)("div",en,sn)):((0,i.wg)(),(0,i.iD)("div",an,on))])]),(0,i._)("div",rn,[(0,i._)("div",cn,[(0,i.Wm)(r,{checklistItems:l.filteredChecklistItems["Wave Pallet"]},null,8,["checklistItems"])])])]),(0,i._)("div",dn,[(0,i._)("h2",nn,[(0,i._)("button",un,[(0,i.Uk)(" PCB Serial Number Label "),0==l.isLabelSufficient?((0,i.wg)(),(0,i.iD)("div",mn,pn)):((0,i.wg)(),(0,i.iD)("div",bn,gn))])]),(0,i._)("div",_n,[(0,i._)("div",yn,[(0,i.Wm)(r,{checklistItems:l.filteredChecklistItems["PCB Serial Number Label"]},null,8,["checklistItems"])])])])])]))}var kn={components:{CheckListTable:ar},data(){return{activeBom:"",checklist:"",checklistItems:[],isRawMaterialSufficient:!1,isPcbSufficient:!1,isSolderPasteSufficient:!1,isSolderBarSufficient:!1,isSolderFluxSufficient:!1,isIpaSufficient:!1,isSolderWireSufficient:!1,isSMTPalletSufficient:!1,isWavePalletSufficient:!1,isLabelSufficient:!1,isChecklistPassed:!1,isChecklistEnded:!1,pollingInterval:"",filteredChecklistItems:{"Raw Material":[],PCB:[],"Solder Paste":[],"Solder Bar":[],"Solder Flux":[],IPA:[],"Solder Wire":[],"SMT Pallet":[],"Wave Pallet":[],"PCB Serial Number Label":[]},generatedQRCode:""}},mounted(){this.getChecklist()},methods:{async getChecklist(){this.$store.commit("setIsLoading",!0),await ye.Z.get(`store/get-checklist-details/${this.$route.params.id}/`).then((e=>{console.log("yehh",e.data),this.checklist=e.data.checklist,this.checklistItems=this.checklist.checklist_items,console.log("chehcklist items hereeeeee",this.checklistItems),console.log("chehcklist items hereeeeee",this.checklistItems);const t=this.filterChecklistItemsByType("Raw Material");console.log(t);const s=this.filterChecklistItemsByType("PCB"),a=this.filterChecklistItemsByType("Solder Paste"),i=this.filterChecklistItemsByType("Solder Bar"),l=this.filterChecklistItemsByType("Solder Flux"),o=this.filterChecklistItemsByType("IPA"),r=this.filterChecklistItemsByType("Solder Wire"),c=this.filterChecklistItemsByType("SMT Pallet"),d=this.filterChecklistItemsByType("Wave Pallet"),n=this.filterChecklistItemsByType("PCB Serial Number Label");this.isChecklistPassed=this.checklist.is_passed,this.activeBom=this.checklist.bom,this.filteredChecklistItems={"Raw Material":t,PCB:s,"Solder Paste":a,"Solder Bar":i,"Solder Flux":l,IPA:o,"Solder Wire":r,"SMT Pallet":c,"Wave Pallet":d,"PCB Serial Number Label":n},console.log("filered checklsit items",this.filteredChecklistItems),this.isRawMaterialSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Raw Material"),this.isPcbSufficient=this.isItemsSufficient(this.filteredChecklistItems,"PCB"),this.isSolderPasteSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Paste"),this.isSolderBarSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Bar"),console.log("checking solder bar",this.isSolderBarSufficient),this.isSolderFluxSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Flux"),this.isIpaSufficient=this.isItemsSufficient(this.filteredChecklistItems,"IPA"),this.isSolderWireSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Wire"),this.isSMTPalletSufficient=this.isItemsSufficient(this.filteredChecklistItems,"SMT Pallet"),this.isWavePalletSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Wave Pallet"),this.isLabelSufficient=this.isItemsSufficient(this.filteredChecklistItems,"PCB Serial Number Label"),this.isChecklistPassed=this.checklist.is_passed,this.activeBom=this.checklist.bom,"Completed"!=this.checklist.status&&"Failed"!=this.checklist.status||(this.isChecklistEnded=!0),this.checklist.qr_code_link&&(this.generatedQRCode=this.checklist.qr_code_link),this.$store.commit("setIsLoading",!1)})).catch((e=>{console.log("error:",e),this.$notify({title:"An error occured, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1)}))},filterChecklistItemsByType(e){return this.checklistItems.filter((t=>{const s=t.checklist_item_type;return!(!s||!s.name)&&s.name.toLowerCase()===e.toLowerCase()}))},isItemsSufficient(e,t){const s=this.filteredChecklistItems[t];if(0===s.length)return!0;const a=s.filter((e=>!0===e.is_quantity_sufficient));return a.length===s.length},async generateQRCode(){const e=this.generateUniqueCode();console.log(e);const t=await ir.toDataURL(e),s={uniqueCode:e,qrCodeDataURL:t};this.saveQRCode(s)},generateUniqueCode(){const e=Date.now().toString(),t=Math.random().toString(36).substring(7);return`${e}-${t}`},async saveQRCode(e){await ye.Z.post(`store/save-qr-code/${this.checklist.id}/`,e).then((t=>{console.log(t.data),this.generatedQRCode=e.qrCodeDataURL,this.$notify({title:"QR Code generated and saved successfully",type:"bg-success-subtle text-success",duration:"5000"})})).catch((e=>{console.log("error:",e),this.$notify({title:"An error occured, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"})}))},printQRCode(){if(this.generatedQRCode){const e=document.getElementById("printable-content"),t=window.open("","","height=1000,width=1000");t.document.write(e.innerHTML),t.print()}}}};const wn=(0,$e.Z)(kn,[["render",vn],["__scopeId","data-v-d53e0868"]]);var Cn=wn;const Sn={class:"container"},Dn=(0,i.uE)('<div class="row align-items-center"><div class="col-md-6 mt-4"><div class="d-flex align-items-center"><h2 class="mb-0">Reports</h2><span class="ms-3 fs-4 text-muted">|</span><nav aria-label="breadcrumb" class="d-inline-block ms-3"><ol class="breadcrumb bg-transparent m-0 p-0"><li class="breadcrumb-item"><a href="/"><i class="fas fa-home me-1"></i>Home</a></li><li class="breadcrumb-item active" aria-current="page"><i class="fas fa-chart-bar me-1"></i> Reports </li></ol></nav></div></div></div>',1),Pn={class:"conatiner"},In={class:"list-group pt-4"};function Rn(e,t){const s=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",Sn,[Dn,(0,i._)("div",Pn,[(0,i._)("ul",In,[(0,i.Wm)(s,{class:"list-group-item list-group-item-action text-left",to:"/checklist-report"},{default:(0,i.w5)((()=>[(0,i.Uk)(" Checklist Report ")])),_:1})])])])}const xn={},$n=(0,$e.Z)(xn,[["render",Rn]]);var Ln=$n;const Bn=e=>((0,i.dD)("data-v-bbcef4d6"),e=e(),(0,i.Cn)(),e),Un={key:0,class:"container text-center"},Nn=Bn((()=>(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1))),Mn=Bn((()=>(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1))),On=[Nn,Mn],jn={key:1,class:"container"},En={class:"row align-items-center"},Tn=(0,i.uE)('<div class="col-md-6 mt-4" data-v-bbcef4d6><div class="d-flex align-items-center" data-v-bbcef4d6><h2 class="mb-0" data-v-bbcef4d6>Dashboard</h2><span class="ms-3 fs-4 text-muted" data-v-bbcef4d6>|</span><nav aria-label="breadcrumb" class="d-inline-block ms-3" data-v-bbcef4d6><ol class="breadcrumb bg-transparent m-0 p-0" data-v-bbcef4d6><li class="breadcrumb-item" data-v-bbcef4d6><a href="/" data-v-bbcef4d6><i class="fas fa-home me-1" data-v-bbcef4d6></i>Home</a></li><li class="breadcrumb-item active" aria-current="page" data-v-bbcef4d6><i class="fa fa-tachometer me-1" aria-hidden="true" data-v-bbcef4d6></i> Dashboard </li></ol></nav></div></div>',1),qn={class:"col-md-6 mt-4 text-end"},An={class:"container"},Fn={class:"dropdown"},Wn={class:"btn btn-secondary dropdown-toggle",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"},Vn={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton1"},Zn=Bn((()=>(0,i._)("a",{class:"dropdown-item",href:"#"},"Today",-1))),zn=[Zn],Gn=Bn((()=>(0,i._)("a",{class:"dropdown-item",href:"#"},"Previous Week",-1))),Qn=[Gn],Hn=Bn((()=>(0,i._)("a",{class:"dropdown-item",href:"#"},"Previous Month",-1))),Yn=[Hn],Kn=Bn((()=>(0,i._)("li",null,[(0,i._)("button",{type:"button",class:"btn","data-bs-toggle":"modal","data-bs-target":"#exampleModal"}," Custom Date Range ")],-1))),Jn={class:"row mt-4",style:{display:"flex",gap:"30px","justify-content":"space-between"}},Xn={class:"small-box bg-gradient-success",style:{flex:"1"}},eu={class:"inner"},tu=Bn((()=>(0,i._)("p",null,"Completed",-1))),su=Bn((()=>(0,i._)("div",{class:"icon"},[(0,i._)("i",{class:"fa-solid fa-check"})],-1))),au={class:"small-box bg-gradient-primary",style:{flex:"1"}},iu={class:"inner"},lu=Bn((()=>(0,i._)("p",null,"In Progress",-1))),ou=Bn((()=>(0,i._)("div",{class:"icon"},[(0,i._)("i",{class:"fa-solid fa-spinner"})],-1))),ru={class:"small-box bg-gradient-danger",style:{flex:"1"}},cu={class:"inner"},du=Bn((()=>(0,i._)("p",null,"Failed",-1))),nu=Bn((()=>(0,i._)("div",{class:"icon"},[(0,i._)("i",{class:"fa-solid fa-xmark"})],-1))),uu={class:"row mt-4 d-flex"},mu={class:"col-6"},hu={class:"card card-primary"},pu={class:"card-header"},bu=Bn((()=>(0,i._)("h3",{class:"card-title"},"In Progress Checklists",-1))),fu={class:"card-tools"},gu={class:"card-body"},_u={class:"row"},yu={key:0},vu={class:"list-group list-group-flush"},ku={key:1},wu={class:"col-6"},Cu={class:"card card-success"},Su={class:"card-header"},Du=Bn((()=>(0,i._)("h3",{class:"card-title"},"Completed Checklists",-1))),Pu={class:"card-tools"},Iu={class:"card-body"},Ru={class:"row"},xu={key:0},$u={class:"list-group list-group-flush"},Lu=["onClick"],Bu={key:1},Uu={class:"row mt-4 d-flex"},Nu={class:"col-6"},Mu={class:"card card-danger"},Ou={class:"card-header"},ju=Bn((()=>(0,i._)("h3",{class:"card-title"},"Failed Checklists",-1))),Eu={class:"card-tools"},Tu={class:"card-body"},qu={class:"row"},Au={key:0},Fu={class:"list-group list-group-flush"},Wu=["onClick"],Vu=Bn((()=>(0,i._)("i",{class:"fas fa-eye"},null,-1))),Zu={key:1},zu=Bn((()=>(0,i._)("div",{class:"col-6"},null,-1))),Gu={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Qu={class:"modal-dialog"},Hu={class:"modal-content"},Yu=Bn((()=>(0,i._)("div",{class:"modal-header"},[(0,i._)("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},[(0,i._)("strong",null,"Custom Date Range")]),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),Ku={class:"modal-body"},Ju={class:"mb-3"},Xu=Bn((()=>(0,i._)("label",{for:"startDate",class:"form-label"},"Start Date:",-1))),em={class:"mb-3"},tm=Bn((()=>(0,i._)("label",{for:"endDate",class:"form-label"},"End Date:",-1))),sm={key:0,class:"alert alert-danger mt-3 p-2"},am=Bn((()=>(0,i._)("i",{class:"fas fa-exclamation-triangle"},null,-1))),im={class:"modal-footer"},lm=Bn((()=>(0,i._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1))),om=["disabled"];function rm(e,t,s,l,o,r){return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",Un,On)):((0,i.wg)(),(0,i.iD)("div",jn,[(0,i._)("div",En,[Tn,(0,i._)("div",qn,[(0,i._)("div",An,[(0,i._)("div",Fn,[(0,i._)("button",Wn,(0,Oe.zw)("Previous_Week"===o.selectedOption?"Previous Week":"Previous_Month"===o.selectedOption?"Previous Month":o.selectedOption),1),(0,i._)("ul",Vn,[(0,i._)("li",{onClick:t[0]||(t[0]=e=>r.selectOption("Today")),class:(0,Oe.C_)({active:"Today"===o.selectedOption})},zn,2),(0,i._)("li",{onClick:t[1]||(t[1]=e=>r.selectOption("Previous_Week")),class:(0,Oe.C_)({active:"Previous_Week"===o.selectedOption})},Qn,2),(0,i._)("li",{onClick:t[2]||(t[2]=e=>r.selectOption("Previous_Month")),class:(0,Oe.C_)({active:"Previous_Month"===o.selectedOption})},Yn,2),Kn])])])])]),(0,i._)("div",Jn,[(0,i._)("div",Xn,[(0,i._)("div",eu,[(0,i._)("h3",null,(0,Oe.zw)(o.result.completed_checklists?o.result.completed_checklists.length:"Loading"),1),tu]),su]),(0,i._)("div",au,[(0,i._)("div",iu,[(0,i._)("h3",null,(0,Oe.zw)(o.result.in_progress?o.result.in_progress.length:"Loading"),1),lu]),ou]),(0,i._)("div",ru,[(0,i._)("div",cu,[(0,i._)("h3",null,(0,Oe.zw)(o.result.failed_checklists?o.result.failed_checklists.length:"Loading"),1),du]),nu])]),(0,i._)("div",uu,[(0,i._)("div",mu,[(0,i._)("div",hu,[(0,i._)("div",pu,[bu,(0,i._)("div",fu,[(0,i._)("button",{class:"btn btn-primary btn-sm",onClick:t[3]||(t[3]=(...e)=>r.redirectToGeneratedChecklistPage&&r.redirectToGeneratedChecklistPage(...e))}," View All ")])]),(0,i._)("div",gu,[(0,i._)("div",_u,[o.result&&o.result.in_progress&&o.result.in_progress.length>0?((0,i.wg)(),(0,i.iD)("div",yu,[(0,i._)("ul",vu,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.result.in_progress,((e,s)=>((0,i.wg)(),(0,i.iD)("li",{key:s,class:"list-group-item d-flex justify-content-between align-items-center",style:{cursor:"pointer"}},[(0,i.Uk)((0,Oe.zw)(e.bom.product.name)+" - "+(0,Oe.zw)(e.updated_at)+" ",1),(0,i._)("i",{class:"fas fa-eye",onClick:t[4]||(t[4]=e=>r.InProgressRedirectToChecklist())})])))),128))])])):((0,i.wg)(),(0,i.iD)("div",ku,"None"))])])])]),(0,i._)("div",wu,[(0,i._)("div",Cu,[(0,i._)("div",Su,[Du,(0,i._)("div",Pu,[(0,i._)("button",{class:"btn btn-success btn-sm",onClick:t[5]||(t[5]=e=>r.redirectToGeneratedChecklistPage())}," View All ")])]),(0,i._)("div",Iu,[(0,i._)("div",Ru,[o.result&&o.result.completed_checklists&&o.result.completed_checklists.length>0?((0,i.wg)(),(0,i.iD)("div",xu,[(0,i._)("ul",$u,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.result.completed_checklists,((e,t)=>((0,i.wg)(),(0,i.iD)("li",{key:t,class:"list-group-item d-flex justify-content-between align-items-center",style:{cursor:"pointer"}},[(0,i.Uk)((0,Oe.zw)(e.bom.product.name)+" - "+(0,Oe.zw)(e.updated_at)+" ",1),(0,i._)("i",{class:"fas fa-eye",onClick:t=>r.CompletedRedirectToDetailsChecklist(e.id)},null,8,Lu)])))),128))])])):((0,i.wg)(),(0,i.iD)("div",Bu,"None"))])])])])]),(0,i._)("div",Uu,[(0,i._)("div",Nu,[(0,i._)("div",Mu,[(0,i._)("div",Ou,[ju,(0,i._)("div",Eu,[(0,i._)("button",{class:"btn btn-danger btn-sm",onClick:t[6]||(t[6]=(...e)=>r.redirectToGeneratedChecklistPage&&r.redirectToGeneratedChecklistPage(...e))}," View All ")])]),(0,i._)("div",Tu,[(0,i._)("div",qu,[o.result&&o.result.failed_checklists&&o.result.failed_checklists.length>0?((0,i.wg)(),(0,i.iD)("div",Au,[(0,i._)("ul",Fu,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.result.failed_checklists,((e,t)=>((0,i.wg)(),(0,i.iD)("li",{key:t,class:"list-group-item d-flex justify-content-between align-items-center",onClick:t=>r.FailedRedirectToDetailsChecklist(e.id),style:{cursor:"pointer"}},[(0,i.Uk)((0,Oe.zw)(e.bom.product.name)+" - "+(0,Oe.zw)(e.updated_at)+" ",1),Vu],8,Wu)))),128))])])):((0,i.wg)(),(0,i.iD)("div",Zu,"None"))])])])]),zu]),(0,i._)("div",Gu,[(0,i._)("div",Qu,[(0,i._)("div",Hu,[Yu,(0,i._)("div",Ku,[(0,i._)("div",Ju,[Xu,(0,i.wy)((0,i._)("input",{id:"startDate",type:"date","onUpdate:modelValue":t[7]||(t[7]=e=>o.selectedStartDate=e),class:"form-control",placeholder:"Select start date",onInput:t[8]||(t[8]=(...e)=>r.validateDates&&r.validateDates(...e))},null,544),[[a.nr,o.selectedStartDate]])]),(0,i._)("div",em,[tm,(0,i.wy)((0,i._)("input",{id:"endDate",type:"date","onUpdate:modelValue":t[9]||(t[9]=e=>o.selectedEndDate=e),class:"form-control",placeholder:"Select end date",onInput:t[10]||(t[10]=(...e)=>r.validateDates&&r.validateDates(...e))},null,544),[[a.nr,o.selectedEndDate]])]),o.errorMessage?((0,i.wg)(),(0,i.iD)("div",sm,[am,(0,i.Uk)(" "+(0,Oe.zw)(o.errorMessage),1)])):(0,i.kq)("",!0)]),(0,i._)("div",im,[lm,(0,i._)("button",{type:"button",class:"btn btn-success",onClick:t[11]||(t[11]=(...e)=>r.setSelectedOptionAndFetchData&&r.setSelectedOptionAndFetchData(...e)),disabled:r.isFetchButtonDisabled,"data-bs-dismiss":"modal"}," Fetch Checklists ",8,om)])])])])]))}var cm={components:{},data(){return{selectedOption:"Today",result:{},selectedCustomDate:null,selectedStartDate:"",selectedEndDate:"",errorMessage:""}},computed:{isFetchButtonDisabled(){return!this.selectedStartDate||!this.selectedEndDate||new Date(this.selectedStartDate)>new Date(this.selectedEndDate)||new Date(this.selectedStartDate)>new Date||new Date(this.selectedEndDate)>new Date}},mounted(){this.fetchData()},methods:{validateDates(){if(!this.selectedStartDate)return void(this.errorMessage="Please select a start date.");const e=new Date(this.selectedStartDate),t=new Date;if(e>t)return void(this.errorMessage="Start date cannot be in the future.");if(!this.selectedEndDate)return void(this.errorMessage="");const s=new Date(this.selectedEndDate);this.errorMessage=e>s?"Start date cannot be greater than end date.":s>t?"End date cannot be in the future.":""},selectOption(e){this.selectedOption=e,"Custom"!==this.selectOption&&this.fetchData()},async fetchData(){const e={selected_option:this.selectedOption,start_date:this.selectedStartDate,end_date:this.selectedEndDate};console.log(e.selected_option),console.log(e.start_date),console.log(e.end_date),this.$store.commit("setIsLoading",!0),await ye.Z.post("store/get-checklist-count/",e).then((e=>{this.result=e.data,console.log("backend data",this.result),this.$store.commit("setIsLoading",!1)})).catch((e=>{console.error(e),this.$store.commit("setIsLoading",!1)}))},setSelectedOptionAndFetchData(){this.selectedOption="Custom",this.validateDates(),""===this.errorMessage&&this.fetchData()},redirectToGeneratedChecklistPage(){const e=[...this.result.in_progress,...this.result.completed_checklists,...this.result.failed_checklists],t=e.find((e=>void 0!==e.bom?.id&&null!==e.bom?.id));if(t){const e=t.bom.id;console.log(e),this.$router.push(`/generated-checklists/${e}`)}else console.error("No valid id found in the checklists")},InProgressRedirectToChecklist(){const e=this.result?.in_progress?.[0]?.bom?.id;console.log(e),void 0!==e&&null!==e?this.$router.push(`/begin-checklist/${e}`):console.error("id is not available")},FailedRedirectToDetailsChecklist(e){void 0!==e&&null!==e?this.$router.push(`/checklist-details/${e}`):console.error("checklistId is not available")},CompletedRedirectToDetailsChecklist(e){void 0!==e&&null!==e?this.$router.push(`/checklist-details/${e}`):console.error("checklistId is not available")}}};const dm=(0,$e.Z)(cm,[["render",rm],["__scopeId","data-v-bbcef4d6"]]);var nm=dm;const um={key:0,class:"container text-center"},mm=(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1),hm=(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1),pm=[mm,hm],bm={key:1,class:"container"},fm={class:"row align-items-center"},gm={class:"d-flex align-items-center mt-4"},_m=(0,i._)("h2",{class:"mb-0"},"Checklist Report",-1),ym=(0,i._)("span",{class:"ms-3 fs-4 text-muted"},"|",-1),vm={"aria-label":"breadcrumb",class:"d-inline-block ms-3"},km={class:"breadcrumb bg-transparent m-0 p-0"},wm=(0,i._)("li",{class:"breadcrumb-item"},[(0,i._)("a",{href:"/"},[(0,i._)("i",{class:"fas fa-home me-1"}),(0,i.Uk)("Home")])],-1),Cm={class:"breadcrumb-item active"},Sm=(0,i._)("i",{class:"fas fa-chart-bar me-1"},null,-1),Dm=(0,i._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,i._)("i",{class:"fas fa-file-alt me-1"}),(0,i.Uk)(" Reports Checklist ")],-1);function Pm(e,t,s,a,l,o){const r=(0,i.up)("router-link"),c=(0,i.up)("ChecklistReportTable");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",um,pm)):((0,i.wg)(),(0,i.iD)("div",bm,[(0,i._)("div",fm,[(0,i._)("div",gm,[_m,ym,(0,i._)("nav",vm,[(0,i._)("ol",km,[wm,(0,i._)("li",Cm,[(0,i.Wm)(r,{to:"/reports"},{default:(0,i.w5)((()=>[Sm,(0,i.Uk)("Reports")])),_:1})]),Dm])])])]),(0,i.Wm)(c,{checklists:l.checklists,style:{"margin-top":"20px"}},null,8,["checklists"])]))}const Im=e=>((0,i.dD)("data-v-4216ffe3"),e=e(),(0,i.Cn)(),e),Rm={class:"card card-outline card-primary mt-3"},xm={class:"card-body"},$m={class:"row"},Lm={class:"col-md-3 text-center"},Bm=Im((()=>(0,i._)("h6",{class:"lead"},"Total Completed",-1))),Um={class:"display-6"},Nm={class:"col-md-3 text-center"},Mm=Im((()=>(0,i._)("h6",{class:"lead"},"Total In Progress",-1))),Om={class:"display-6"},jm={class:"col-md-3 text-center"},Em=Im((()=>(0,i._)("h6",{class:"lead"},"Total Failed",-1))),Tm={class:"display-6"},qm={class:"col-md-3 text-center"},Am=Im((()=>(0,i._)("h6",{class:"lead"},"Total Checklists",-1))),Fm={class:"display-6"};function Wm(e,t,s,a,l,o){const r=(0,i.up)("ag-grid-vue");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",Rm,[(0,i._)("div",xm,[(0,i._)("div",$m,[(0,i._)("div",Lm,[Bm,(0,i._)("p",Um,(0,Oe.zw)(l.total_completed),1)]),(0,i._)("div",Nm,[Mm,(0,i._)("p",Om,(0,Oe.zw)(l.total_in_progress),1)]),(0,i._)("div",jm,[Em,(0,i._)("p",Tm,(0,Oe.zw)(l.total_failed),1)]),(0,i._)("div",qm,[Am,(0,i._)("p",Fm,(0,Oe.zw)(l.total_checklists),1)])])])]),(0,i._)("div",null,[(0,i.Wm)(r,{style:{height:"500px"},class:"ag-theme-quartz",rowData:s.checklists,defaultColDef:l.defaultColDef,columnDefs:l.colDefs,pagination:!0,onFirstDataRendered:o.onFirstDataRendered,onGridReady:o.onGridReady},null,8,["rowData","defaultColDef","columnDefs","onFirstDataRendered","onGridReady"])])])}var Vm={components:{AgGridVue:ys.n},props:{checklists:{type:Array,required:!0}},data(){return{colDefs:[{headerName:"Checklist ID",field:"id"},{headerName:"Unique Code",field:"unique_code",valueFormatter:function(e){return null===e.value?"null":e.value}},{headerName:"Project Name",field:"bom.product.project.name"},{headerName:"Product Name",field:"bom.product.name"},{headerName:"Product Code",field:"bom.product.product_code"},{headerName:"Updated At",field:"updated_at"},{headerName:"Updated By",valueGetter:function(e){if(console.log(e.data.updated_by),null!=e.data.updated_by){const t=e.data.updated_by.first_name||"",s=e.data.updated_by.last_name||"";return t||s?`${t} ${s}`:""}return""}},{headerName:"Created At",field:"created_at"},{headerName:"Created By",valueGetter:function(e){const t=e.data.created_by.first_name||"",s=e.data.created_by.last_name||"";return t||s?`${t} ${s}`:""}},{headerName:"Status",field:"status"},{headerName:"View",cellRenderer:this.viewButtonRenderer}],defaultColDef:{filter:!0,sortable:!0,resizable:!0,autoSize:!0},gridApi:null,total_completed:0,total_in_progress:0,total_failed:0,total_checklists:0}},mounted(){},methods:{onFirstDataRendered(){this.calculateTotalSum(),this.gridApi.addEventListener("filterChanged",this.calculateTotalSum)},onGridReady(e){this.gridApi=e.api},calculateTotalSum(){let e=0,t=0,s=0;this.gridApi.forEachNodeAfterFilter((a=>{"Completed"==a.data.status?e+=1:"In Progress"==a.data.status?t+=1:s+=1})),this.total_completed=e,this.total_failed=s,this.total_in_progress=t,this.total_checklists=this.gridApi.getDisplayedRowCount()},viewButtonRenderer(e){const t=document.createElement("button");return t.innerHTML='<i class="fas fa-eye"></i>',t.classList.add("btn","btn-outline-secondary"),t.addEventListener("click",(()=>this.onViewClick(e.data))),t},onViewClick(e){"In Progress"===e.status?this.$router.push(`/begin-checklist/${e.bom.id}`):this.$router.push(`/checklist-details/${e.id}`)}}};const Zm=(0,$e.Z)(Vm,[["render",Wm],["__scopeId","data-v-4216ffe3"]]);var zm=Zm,Gm={components:{ChecklistReportTable:zm},data(){return{checklists:[]}},mounted(){this.getChecklistReport()},methods:{async getChecklistReport(){console.log("run"),this.$store.commit("setIsLoading",!0),this.$store.commit("setIsLoading",!1),await ye.Z.get("store/get-checklist-report/").then((e=>{console.log(e.data),this.checklists=e.data.checklists,this.$store.commit("setIsLoading",!1)})).catch((e=>{console.log("error:",e),this.$notify({title:"An error occured, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1)}))}}};const Qm=(0,$e.Z)(Gm,[["render",Pm]]);var Hm=Qm;const Ym=e=>((0,i.dD)("data-v-4239cd5f"),e=e(),(0,i.Cn)(),e),Km={key:0,class:"container text-center"},Jm=Ym((()=>(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1))),Xm=Ym((()=>(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1))),eh=[Jm,Xm],th={key:1,class:"container"},sh={class:"row align-items-center"},ah={class:"col-md-6 mt-4"},ih={class:"d-flex align-items-center"},lh=Ym((()=>(0,i._)("h2",{class:"mb-0"},"Users",-1))),oh=Ym((()=>(0,i._)("span",{class:"ms-3 fs-4 text-muted"},"|",-1))),rh={"aria-label":"breadcrumb",class:"d-inline-block ms-3"},ch={class:"breadcrumb bg-transparent m-0 p-0"},dh={class:"breadcrumb-item"},nh=Ym((()=>(0,i._)("i",{class:"fas fa-home me-1"},null,-1))),uh=Ym((()=>(0,i._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,i._)("i",{class:"fas fa-users me-1"}),(0,i.Uk)("Users ")],-1))),mh={class:"col-md-6 mt-4 text-end"},hh=Ym((()=>(0,i._)("i",{class:"fas fa-user-plus me-1"},null,-1))),ph={class:"container mt-5"},bh={class:"table table-hover"},fh=Ym((()=>(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",null,"Email"),(0,i._)("th",null,"Actions")])],-1))),gh=["onClick"],_h=Ym((()=>(0,i._)("i",{class:"fas fa-edit me-1"},null,-1))),yh=["onClick"],vh=Ym((()=>(0,i._)("i",{class:"fas fa-trash-alt me-1"},null,-1)));function kh(e,t,s,a,l,o){const r=(0,i.up)("router-link");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",Km,eh)):((0,i.wg)(),(0,i.iD)("div",th,[(0,i._)("div",sh,[(0,i._)("div",ah,[(0,i._)("div",ih,[lh,oh,(0,i._)("nav",rh,[(0,i._)("ol",ch,[(0,i._)("li",dh,[(0,i.Wm)(r,{to:"/"},{default:(0,i.w5)((()=>[nh,(0,i.Uk)(" Home")])),_:1})]),uh])])])]),(0,i._)("div",mh,[(0,i.Wm)(r,{to:"/users/create-user",class:"btn btn-primary btn-sm ms-2"},{default:(0,i.w5)((()=>[hh,(0,i.Uk)(" Create New User ")])),_:1})])]),(0,i._)("div",ph,[(0,i._)("table",bh,[fh,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.userList,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e.id,onClick:t=>o.redirectToEditPage(e.id)},[(0,i._)("td",null,(0,Oe.zw)(e.email),1),(0,i._)("td",null,[(0,i.Wm)(r,{to:{name:"EditUser",params:{id:e.id}},class:"btn btn-primary btn-sm"},{default:(0,i.w5)((()=>[_h,(0,i.Uk)(" Edit ")])),_:2},1032,["to"]),(0,i._)("button",{onClick:t=>o.deleteUser(t,e.id),class:"btn btn-danger btn-sm ml-3"},[vh,(0,i.Uk)(" Delete ")],8,yh)])],8,gh)))),128))])])])]))}var wh={name:"UserManagement",data(){return{userList:[]}},mounted(){this.fetchUsers()},methods:{fetchUsers(){this.$store.commit("setIsLoading",!0),ye.Z.get("/accounts/users/").then((e=>{console.log("response.data",e.data),this.userList=e.data,this.$store.commit("setIsLoading",!1)})).catch((e=>{console.error("Error fetching users:",e),this.$store.commit("setIsLoading",!1)}))},redirectToEditPage(e){this.$router.push({name:"EditUser",params:{id:e}})},deleteUser(e,t){e.stopPropagation(),confirm("Are you sure you want to delete this user?")&&ye.Z.delete(`/accounts/users/delete/${t}/`).then((()=>{console.log("User deleted successfully."),alert("User Deleted successfully!"),this.fetchUsers(),this.$router.push("/users")})).catch((e=>{alert("error deleting!"),console.error("Error deleting user:",e)}))}}};const Ch=(0,$e.Z)(wh,[["render",kh],["__scopeId","data-v-4239cd5f"]]);var Sh=Ch;const Dh=e=>((0,i.dD)("data-v-fbd71b8a"),e=e(),(0,i.Cn)(),e),Ph={key:0,class:"container text-center"},Ih=Dh((()=>(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1))),Rh=Dh((()=>(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1))),xh=[Ih,Rh],$h={key:1,class:"container mt-4"},Lh={class:"row align-items-center"},Bh={class:"col-md-8 mt-4"},Uh={class:"d-flex align-items-center"},Nh=Dh((()=>(0,i._)("h2",{class:"mb-0"},"Edit Line Item |",-1))),Mh={"aria-label":"breadcrumb",class:"ms-3"},Oh={class:"breadcrumb bg-transparent m-0 p-0 justify-content-end"},jh=Dh((()=>(0,i._)("li",{class:"breadcrumb-item"},[(0,i._)("a",{href:"/"},[(0,i._)("i",{class:"fas fa-home me-1"}),(0,i.Uk)("Home")])],-1))),Eh={class:"breadcrumb-item active","aria-current":"page"},Th=Dh((()=>(0,i._)("i",{class:"fas fa-clipboard-list me-1"},null,-1))),qh={class:"breadcrumb-item","aria-current":"page"},Ah=Dh((()=>(0,i._)("i",{class:"fas fa-list-alt me-1"},null,-1))),Fh=Dh((()=>(0,i._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,i._)("i",{class:"fa fa-bars me-1","aria-hidden":"true"}),(0,i.Uk)("BOM Line Item ")],-1))),Wh={class:"col-md-4 mt-4 d-flex justify-content-end"},Vh={class:"row mt-5"},Zh={class:"row"},zh={class:"col-md-4"},Gh={class:"form-group"},Qh=Dh((()=>(0,i._)("label",{for:"veplPartNumber"},"VEPL Part Number",-1))),Hh={class:"col-md-4"},Yh={class:"form-group"},Kh=Dh((()=>(0,i._)("label",{for:"level"},"Level",-1))),Jh={class:"col-md-4"},Xh={class:"form-group"},ep=Dh((()=>(0,i._)("label",{for:"priorityLevel"},"Priority Level",-1))),tp={class:"row"},sp={class:"col-md-4"},ap={class:"form-group"},ip=Dh((()=>(0,i._)("label",{for:"value"},"Value",-1))),lp={class:"col-md-4"},op={class:"form-group"},rp=Dh((()=>(0,i._)("label",{for:"pcbFootprint"},"PCB Footprint",-1))),cp={class:"col-md-4"},dp={class:"form-group"},np=Dh((()=>(0,i._)("label",{for:"lineItemType"},"Type",-1))),up=["value"],mp={class:"form-group"},hp=Dh((()=>(0,i._)("label",{for:"description"},"Description",-1))),pp={class:"form-group"},bp={for:"references"},fp=["onClick"],gp={class:"d-flex align-items-center mt-2"},_p={class:"form-group"},yp=Dh((()=>(0,i._)("label",{for:"manufacturerParts"},"Manufacturer Parts",-1))),vp=Dh((()=>(0,i._)("br",null,null,-1))),kp=Dh((()=>(0,i._)("button",{type:"button",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#exampleModal"}," Change Manufacturer Parts ",-1))),wp={class:"form-group"},Cp=Dh((()=>(0,i._)("label",{for:"customerPartNumber"},"Customer Part Number",-1))),Sp={class:"row"},Dp={class:"col-md-6"},Pp={class:"form-group"},Ip=Dh((()=>(0,i._)("label",{for:"quantity"},"Quantity",-1))),Rp={class:"col-md-6"},xp={class:"form-group"},$p=Dh((()=>(0,i._)("label",{for:"uom"},"UOM",-1))),Lp={class:"form-group"},Bp=Dh((()=>(0,i._)("label",{for:"assemblyStage"},"Assembly Stage",-1))),Up=["value"],Np={class:"form-group"},Mp=Dh((()=>(0,i._)("label",{for:"ecn"},"ECN",-1))),Op={class:"form-group"},jp=Dh((()=>(0,i._)("label",{for:"msl"},"MSL",-1))),Ep={class:"form-group"},Tp=Dh((()=>(0,i._)("label",{for:"remarks"},"Remarks",-1))),qp={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Ap={class:"modal-dialog modal-lg"},Fp={class:"modal-content"},Wp=Dh((()=>(0,i._)("div",{class:"modal-header"},[(0,i._)("h1",{class:"modal-title fs-5",id:"exampleModalLabel"}," Select the Manufacturer Parts "),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),Vp={class:"modal-body"},Zp=Dh((()=>(0,i._)("div",{class:"modal-footer"},[(0,i._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close "),(0,i._)("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal"}," Save changes ")],-1)));function zp(e,t,s,l,o,r){const c=(0,i.up)("router-link"),d=(0,i.up)("manufacturer-parts-grid");return(0,i.wg)(),(0,i.iD)("div",null,[e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",Ph,xh)):((0,i.wg)(),(0,i.iD)("div",$h,[(0,i._)("div",Lh,[(0,i._)("div",Bh,[(0,i._)("div",Uh,[Nh,(0,i._)("nav",Mh,[(0,i._)("ol",Oh,[jh,(0,i._)("li",Eh,[(0,i.Wm)(c,{to:"/bom"},{default:(0,i.w5)((()=>[Th,(0,i.Uk)("Bill Of Materials ")])),_:1})]),(0,i._)("li",qh,[(0,i.Wm)(c,{to:`/bom/edit/${o.bom_id}`},{default:(0,i.w5)((()=>[Ah,(0,i.Uk)(" BOM Details ")])),_:1},8,["to"])]),Fh])])])]),(0,i._)("div",Wh,[(0,i._)("button",{type:"button",class:"btn btn-primary me-2",onClick:t[0]||(t[0]=(...e)=>r.saveChanges&&r.saveChanges(...e))}," Update Changes "),(0,i._)("button",{type:"button",class:"btn btn-danger",onClick:t[1]||(t[1]=(...e)=>r.confirmDelete&&r.confirmDelete(...e))}," Delete Line Item ")])]),(0,i._)("div",Vh,[(0,i._)("section",null,[(0,i._)("div",Zh,[(0,i._)("div",zh,[(0,i._)("div",Gh,[Qh,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>o.editedBom.part_number=e),type:"text",class:"form-control"},null,512),[[a.nr,o.editedBom.part_number]])])]),(0,i._)("div",Hh,[(0,i._)("div",Yh,[Kh,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>o.editedBom.level=e),type:"text",class:"form-control"},null,512),[[a.nr,o.editedBom.level]])])]),(0,i._)("div",Jh,[(0,i._)("div",Xh,[ep,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>o.editedBom.priority_level=e),type:"text",class:"form-control"},null,512),[[a.nr,o.editedBom.priority_level]])])])]),(0,i._)("div",tp,[(0,i._)("div",sp,[(0,i._)("div",ap,[ip,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>o.editedBom.value=e),type:"text",class:"form-control"},null,512),[[a.nr,o.editedBom.value]])])]),(0,i._)("div",lp,[(0,i._)("div",op,[rp,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>o.editedBom.pcb_footprint=e),type:"text",class:"form-control"},null,512),[[a.nr,o.editedBom.pcb_footprint]])])]),(0,i._)("div",cp,[(0,i._)("div",dp,[np,(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[7]||(t[7]=e=>o.editedBom.line_item_type=e),class:"form-control"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.line_item_types,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e.id,value:e.id},(0,Oe.zw)(e.name),9,up)))),128))],512),[[a.bM,o.editedBom.line_item_type]])])])]),(0,i._)("div",mp,[hp,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>o.editedBom.description=e),type:"text",class:"form-control"},null,512),[[a.nr,o.editedBom.description]])]),(0,i._)("div",pp,[(0,i._)("label",bp,[(0,i.Uk)(" References "),(0,i._)("div",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.editedBom.references,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e.id,class:"tag"},[(0,i.Uk)((0,Oe.zw)(e.name)+" ",1),(0,i._)("span",{onClick:t=>r.removeReference(e),class:"remove-tag"},"X",8,fp)])))),128))]),(0,i._)("div",gp,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>o.newReference=e),onKeyup:t[10]||(t[10]=(0,a.D2)(((...e)=>r.addNewReference&&r.addNewReference(...e)),["enter"])),type:"text",placeholder:"Type to add a new reference",class:"form-control input-large"},null,544),[[a.nr,o.newReference]]),(0,i._)("button",{onClick:t[11]||(t[11]=(...e)=>r.addNewReference&&r.addNewReference(...e)),class:"btn btn-primary ms-2"}," Add ")])])]),(0,i._)("div",_p,[yp,vp,(0,i._)("div",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.editedBom.manufacturer_parts,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e.id,class:"tag"},(0,Oe.zw)(e.part_number)+" - "+(0,Oe.zw)(e.manufacturer.name),1)))),128))]),kp]),(0,i._)("div",wp,[Cp,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[12]||(t[12]=e=>o.editedBom.customer_part_number=e),type:"text",class:"form-control"},null,512),[[a.nr,o.editedBom.customer_part_number]])]),(0,i._)("div",Sp,[(0,i._)("div",Dp,[(0,i._)("div",Pp,[Ip,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[13]||(t[13]=e=>o.editedBom.quantity=e),type:"text",class:"form-control"},null,512),[[a.nr,o.editedBom.quantity]])])]),(0,i._)("div",Rp,[(0,i._)("div",xp,[$p,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[14]||(t[14]=e=>o.editedBom.uom=e),type:"text",class:"form-control"},null,512),[[a.nr,o.editedBom.uom]])])])]),(0,i._)("div",Lp,[Bp,(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[15]||(t[15]=e=>o.editedBom.assembly_stage=e),class:"form-control"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.assembly_stages,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e.id,value:e.id},(0,Oe.zw)(e.name),9,Up)))),128))],512),[[a.bM,o.editedBom.assembly_stage]])]),(0,i._)("div",Np,[Mp,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[16]||(t[16]=e=>o.editedBom.ecn=e),type:"text",class:"form-control"},null,512),[[a.nr,o.editedBom.ecn]])]),(0,i._)("div",Op,[jp,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[17]||(t[17]=e=>o.editedBom.msl=e),type:"text",class:"form-control"},null,512),[[a.nr,o.editedBom.msl]])]),(0,i._)("div",Ep,[Tp,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[18]||(t[18]=e=>o.editedBom.remarks=e),type:"text",class:"form-control"},null,512),[[a.nr,o.editedBom.remarks]])])])]),(0,i._)("div",qp,[(0,i._)("div",Ap,[(0,i._)("div",Fp,[Wp,(0,i._)("div",Vp,[(0,i.Wm)(d,{manufacturerParts:o.manufacturerParts,selectedManufacturerParts:o.editedBom.manufacturer_parts,"onUpdate:selectedManufacturerParts":r.updateManufacturerParts},null,8,["manufacturerParts","selectedManufacturerParts","onUpdate:selectedManufacturerParts"])]),Zp])])])]))])}const Gp={class:"ag-theme-quartz",style:{height:"600px"}};function Qp(e,t,s,a,l,o){const r=(0,i.up)("ag-grid-vue");return(0,i.wg)(),(0,i.iD)("div",Gp,[(0,i.Wm)(r,{ref:"agGrid",gridOptions:l.gridOptions,columnDefs:l.columnDefs,rowData:s.manufacturerParts,onFirstDataRendered:o.onFirstDataRendered,onSelectionChanged:o.onSelectionChanged},null,8,["gridOptions","columnDefs","rowData","onFirstDataRendered","onSelectionChanged"])])}var Hp={components:{"ag-grid-vue":ys.n},props:{manufacturerParts:{type:Array,default:()=>[]},selectedManufacturerParts:{type:Array,default:()=>[]}},data(){return{gridOptions:{domLayout:"autoHeight",rowSelection:"multiple",rowMultiSelectWithClick:!0,pagination:!0,paginationPageSize:20},columnDefs:[{headerCheckboxSelection:!0,checkboxSelection:!0,headerName:"Part Number",field:"part_number"},{headerName:"Manufacturer Name",field:"manufacturer.name"}]}},methods:{onFirstDataRendered(e){const t=e.api;t.forEachNode((e=>{const t=e.data,s=this.selectedManufacturerParts.some((e=>e.id===t.id));e.setSelected(s)}))},onSelectionChanged(){const e=this.$refs.agGrid.api.getSelectedRows();this.$emit("update:selectedManufacturerParts",e)}}};const Yp=(0,$e.Z)(Hp,[["render",Qp],["__scopeId","data-v-e9409d6a"]]);var Kp=Yp,Jp={data(){return{editedBom:{part_number:"",level:"",priority_level:"",value:"",pcb_footprint:"",line_item_type:"",description:"",references:[],manufacturer_parts:[],customer_part_number:"",quantity:"",uom:"",assembly_stage:"",ecn:"",msl:"",remarks:""},line_item_types:[],newReference:"",message:"",manufacturerParts:[],assembly_stages:[],bom_id:"",bom_line_item_id:""}},components:{"manufacturer-parts-grid":Kp},methods:{async fetchDataFromAPI(){try{this.$store.commit("setIsLoading",!0);const e=await ye.Z.get(`store/edit-bom-line-item/${this.$route.params.id}/`);console.log(" Main API response for line items",e.data),this.editedBom=e.data.bom_line_item,this.bom_id=e.data.bom_line_item.bom.id,this.bom_line_item_id=e.data.bom_line_item.id,console.log("bom-id=",this.bom_id),console.log("bom-line-item-id=",this.bom_line_item_id),this.line_item_types=e.data.line_item_types,this.manufacturerParts=e.data.manufacturers_parts,this.assembly_stages=e.data.assembly_stages,console.log("line_item_types",this.line_item_types),this.line_item_types.length>0&&(this.editedBom.line_item_type=e.data.bom_line_item.line_item_type.id),this.assembly_stages.length>0&&(this.editedBom.assembly_stage=e.data.bom_line_item.assembly_stage.id),console.log("this is edit bom",this.editedBom),this.$store.commit("setIsLoading",!1)}catch(e){console.error("Error fetching data from the API:",e),this.$store.commit("setIsLoading",!1)}},addNewReference(){if(""!==this.newReference.trim()){if(!this.isReferenceExists(this.newReference.trim())){const e={name:this.newReference.trim()};this.editedBom.references.push(e)}this.newReference=""}},isReferenceExists(e){return this.editedBom.references.some((t=>t.name.toLowerCase()===e.toLowerCase()))},removeReference(e){this.editedBom.references=this.editedBom.references.filter((t=>t!==e))},submit(){console.log(this.editedBom)},async saveChanges(){if(confirm("Are you sure you want to update this line item")){this.$store.commit("setIsLoading",!0);try{const e=await ye.Z.put(`store/edit-bom-line-item/${this.$route.params.id}/`,this.editedBom);console.log(e.data),this.$store.commit("setIsLoading",!1),this.$notify({title:"Bom Line Item Updated Successfully",type:"bg-success-subtle text-success",duration:"5000"}),this.$router.push(`/bom/edit/${this.bom_id}`)}catch(e){console.error("Error updating BOM line item:",e),this.$store.commit("setIsLoading",!1),this.$notify({title:"Error Updating Bom Line Item",type:"bg-danger-subtle text-danger",duration:"5000"})}}},async confirmDelete(){if(confirm("Are you sure you want to delete this BOM Line Item?"))try{const e=await ye.Z.delete(`store/delete-bom-line-item/${this.$route.params.id}`);204===e.status?(this.$notify({title:"Bom Line Item Deleted Successfully",type:"bg-success-subtle text-success",duration:5e3}),this.$router.push(`/bom/edit/${this.bom_id}`)):this.$notify({title:"An error occurred while deleting BOM Line Item",type:"alert-danger",duration:5e3})}catch(e){console.error("Error deleting BOM Line Item:",e),this.$notify({title:"An error occurred while deleting BOM Line Item",type:"alert-danger",duration:5e3})}},updateManufacturerParts(e){this.editedBom.manufacturer_parts=e},getReferences(e){return e&&e.length>0?e.map((e=>e.name)).join(", "):""},getManufacturerParts(e){return e&&e.length>0?e.map((e=>`${e.part_number} - ${e.manufacturer.name}`)).join(", "):""}},updateManufacturerParts(e){this.editedBom.manufacturer_parts=e},mounted(){this.fetchDataFromAPI()}};const Xp=(0,$e.Z)(Jp,[["render",zp],["__scopeId","data-v-fbd71b8a"]]);var eb=Xp;const tb=e=>((0,i.dD)("data-v-9455daf4"),e=e(),(0,i.Cn)(),e),sb={key:0,class:"container text-center"},ab=tb((()=>(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1))),ib=tb((()=>(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1))),lb=[ab,ib],ob={key:1,class:"container"},rb={class:"row align-items-center"},cb={class:"col-md-6 mt-4"},db={class:"d-flex align-items-center"},nb=tb((()=>(0,i._)("h2",{class:"mb-0"},"Users",-1))),ub=tb((()=>(0,i._)("span",{class:"ms-3 fs-4 text-muted"},"|",-1))),mb={"aria-label":"breadcrumb",class:"d-inline-block ms-3"},hb={class:"breadcrumb bg-transparent m-0 p-0"},pb={class:"breadcrumb-item"},bb=tb((()=>(0,i._)("i",{class:"fas fa-home me-1"},null,-1))),fb={class:"breadcrumb-item"},gb=tb((()=>(0,i._)("i",{class:"fas fa-users me-1"},null,-1))),_b=tb((()=>(0,i._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,i._)("i",{class:"fas fa-edit me-1"}),(0,i.Uk)(" Edit User ")],-1))),yb={class:"col-md-6 mt-4 text-end"},vb=tb((()=>(0,i._)("i",{class:"fas fa-save me-1"},null,-1))),kb=tb((()=>(0,i._)("i",{class:"fas fa-trash me-1"},null,-1))),wb={class:"card animate__animated animate__fadeIn mt-5"},Cb=tb((()=>(0,i._)("div",{class:"card-header bg-primary text-white"},[(0,i._)("h4",{class:"card-title"},[(0,i._)("i",{class:"fas fa-user me-1"}),(0,i.Uk)(" User Information ")])],-1))),Sb={class:"card-body"},Db={class:"mb-3"},Pb=tb((()=>(0,i._)("label",{for:"email",class:"form-label"},"Email:",-1))),Ib={class:"input-group"},Rb=tb((()=>(0,i._)("span",{class:"input-group-text"},[(0,i._)("i",{class:"fas fa-envelope"})],-1))),xb={key:0,class:"text-danger"},$b={class:"mb-3 row"},Lb={class:"col"},Bb=tb((()=>(0,i._)("label",{for:"first_name",class:"form-label"},"First Name:",-1))),Ub={class:"input-group"},Nb=tb((()=>(0,i._)("span",{class:"input-group-text"},[(0,i._)("i",{class:"fas fa-user"})],-1))),Mb={key:0,class:"text-danger"},Ob={class:"col"},jb=tb((()=>(0,i._)("label",{for:"last_name",class:"form-label"},"Last Name:",-1))),Eb={class:"input-group"},Tb=tb((()=>(0,i._)("span",{class:"input-group-text"},[(0,i._)("i",{class:"fas fa-user"})],-1))),qb={class:"mb-3"},Ab=tb((()=>(0,i._)("label",{for:"phone_number",class:"form-label"},"Phone Number:",-1))),Fb={class:"input-group"},Wb=tb((()=>(0,i._)("span",{class:"input-group-text"},[(0,i._)("i",{class:"fas fa-phone"})],-1))),Vb={class:"mb-3 row"},Zb={class:"col"},zb={class:"form-check"},Gb=tb((()=>(0,i._)("label",{class:"form-check-label",for:"is_superuser"},[(0,i._)("i",{class:"fas fa-user-shield me-1"}),(0,i.Uk)(" Is Admin")],-1))),Qb={class:"col"},Hb={class:"form-check"},Yb=["disabled"],Kb=tb((()=>(0,i._)("label",{class:"form-check-label",for:"is_staff"},[(0,i._)("i",{class:"fas fa-user-cog me-1"}),(0,i.Uk)(" Is Staff")],-1))),Jb={class:"mb-3 row"},Xb={class:"col"},ef={class:"form-check"},tf=["disabled"],sf=tb((()=>(0,i._)("label",{class:"form-check-label",for:"is_store_team"},[(0,i._)("i",{class:"fas fa-user-shield me-1"}),(0,i.Uk)(" Is Store Team")],-1))),af={class:"col"},lf={class:"form-check"},of=["disabled"],rf=tb((()=>(0,i._)("label",{class:"form-check-label",for:"is_design_team"},[(0,i._)("i",{class:"fas fa-user-cog me-1"}),(0,i.Uk)(" Is Design Team")],-1)));function cf(e,t,s,l,o,r){const c=(0,i.up)("router-link");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",sb,lb)):((0,i.wg)(),(0,i.iD)("div",ob,[(0,i._)("div",rb,[(0,i._)("div",cb,[(0,i._)("div",db,[nb,ub,(0,i._)("nav",mb,[(0,i._)("ol",hb,[(0,i._)("li",pb,[(0,i.Wm)(c,{to:"/"},{default:(0,i.w5)((()=>[bb,(0,i.Uk)(" Home")])),_:1})]),(0,i._)("li",fb,[(0,i.Wm)(c,{to:"/users"},{default:(0,i.w5)((()=>[gb,(0,i.Uk)(" Users")])),_:1})]),_b])])])]),(0,i._)("div",yb,[(0,i._)("button",{type:"submit",class:"btn btn-primary btn-sm",onClick:t[0]||(t[0]=(...e)=>r.updateUser&&r.updateUser(...e))},[vb,(0,i.Uk)(" Update User ")]),(0,i._)("button",{type:"button",class:"btn btn-danger ms-2 btn-sm",onClick:t[1]||(t[1]=(...e)=>r.deleteUser&&r.deleteUser(...e))},[kb,(0,i.Uk)(" Delete User ")])])]),(0,i._)("div",wb,[Cb,(0,i._)("div",Sb,[(0,i._)("div",Db,[Pb,(0,i._)("div",Ib,[Rb,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>o.editedUser.email=e),type:"email",class:"form-control",id:"email",required:""},null,512),[[a.nr,o.editedUser.email]])]),o.editedUser.email?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("small",xb,"Email is required."))]),(0,i._)("div",$b,[(0,i._)("div",Lb,[Bb,(0,i._)("div",Ub,[Nb,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>o.editedUser.first_name=e),type:"text",class:"form-control",id:"first_name",required:""},null,512),[[a.nr,o.editedUser.first_name]])]),o.editedUser.first_name?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("small",Mb,"First Name is required."))]),(0,i._)("div",Ob,[jb,(0,i._)("div",Eb,[Tb,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>o.editedUser.last_name=e),type:"text",class:"form-control",id:"last_name"},null,512),[[a.nr,o.editedUser.last_name]])])])]),(0,i._)("div",qb,[Ab,(0,i._)("div",Fb,[Wb,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>o.editedUser.phone_number=e),type:"tel",class:"form-control",id:"phone_number"},null,512),[[a.nr,o.editedUser.phone_number]])])]),(0,i._)("div",Vb,[(0,i._)("div",Zb,[(0,i._)("div",zb,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>o.editedUser.is_superuser=e),onChange:t[7]||(t[7]=(...e)=>r.updateOthers&&r.updateOthers(...e)),type:"checkbox",class:"form-check-input",id:"is_superuser"},null,544),[[a.e8,o.editedUser.is_superuser]]),Gb])]),(0,i._)("div",Qb,[(0,i._)("div",Hb,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>o.editedUser.is_staff=e),disabled:o.editedUser.is_superuser,type:"checkbox",class:"form-check-input",id:"is_staff"},null,8,Yb),[[a.e8,o.editedUser.is_staff]]),Kb])])]),(0,i._)("div",Jb,[(0,i._)("div",Xb,[(0,i._)("div",ef,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>o.editedUser.is_store_team=e),disabled:o.editedUser.is_superuser,type:"checkbox",class:"form-check-input",id:"is_store_team"},null,8,tf),[[a.e8,o.editedUser.is_store_team]]),sf])]),(0,i._)("div",af,[(0,i._)("div",lf,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>o.editedUser.is_design_team=e),disabled:o.editedUser.is_superuser,type:"checkbox",class:"form-check-input",id:"is_design_team"},null,8,of),[[a.e8,o.editedUser.is_design_team]]),rf])])])])])]))}var df={name:"EditUser",data(){return{userId:null,editedUser:{email:"",first_name:"",last_name:"",phone_number:"",is_superuser:!1,is_staff:!1,is_store_team:!1,is_design_team:!1}}},mounted(){this.userId=this.$route.params.id,this.fetchUserData()},methods:{fetchUserData(){this.$store.commit("setIsLoading",!0),ye.Z.get(`/accounts/users/${this.userId}/`).then((e=>{console.log("edit user response data",e.data),this.editedUser=e.data,this.$store.commit("setIsLoading",!1)})).catch((e=>{this.$store.commit("setIsLoading",!1),console.error("Error fetching user data:",e)}))},updateOthers(){this.editedUser.is_superuser&&(this.editedUser.is_staff=!0,this.editedUser.is_store_team=!0,this.editedUser.is_design_team=!0)},updateUser(){confirm("Are you sure you want to update this user?")&&(this.$store.commit("setIsLoading",!0),ye.Z.put(`/accounts/users/update/${this.userId}/`,this.editedUser).then((e=>{console.log("User updated successfully:",e.data),this.$store.commit("setIsLoading",!1),alert("User Updated successfully!")})).catch((e=>{console.error("Error updating user:",e),this.$store.commit("setIsLoading",!1)})))},deleteUser(){confirm("Are you sure you want to delete this user?")&&(this.$store.commit("setIsLoading",!0),ye.Z.delete(`/accounts/users/delete/${this.userId}/`).then((()=>{console.log("User deleted successfully."),this.$store.commit("setIsLoading",!1),alert("User Deleted successfully!"),this.$router.push("/users")})).catch((e=>{alert("error deleting!"),console.error("Error deleting user:",e)})))}}};const nf=(0,$e.Z)(df,[["render",cf],["__scopeId","data-v-9455daf4"]]);var uf=nf;const mf=e=>((0,i.dD)("data-v-7b78d019"),e=e(),(0,i.Cn)(),e),hf={class:"container"},pf={class:"row align-items-center"},bf={class:"col-md-6 mt-4"},ff={class:"d-flex align-items-center"},gf=mf((()=>(0,i._)("h2",{class:"mb-0"},"Users",-1))),_f=mf((()=>(0,i._)("span",{class:"ms-3 fs-4 text-muted"},"|",-1))),yf={"aria-label":"breadcrumb",class:"d-inline-block ms-3"},vf={class:"breadcrumb bg-transparent m-0 p-0"},kf={class:"breadcrumb-item"},wf=mf((()=>(0,i._)("i",{class:"fas fa-home me-1"},null,-1))),Cf={class:"breadcrumb-item"},Sf=mf((()=>(0,i._)("i",{class:"fas fa-users me-1"},null,-1))),Df=mf((()=>(0,i._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,i._)("i",{class:"fa fa-user-plus"}),(0,i.Uk)(" Create User ")],-1))),Pf={class:"col-md-6 mt-4 text-end"},If=mf((()=>(0,i._)("i",{class:"fas fa-save me-1"},null,-1))),Rf={class:"card animate__animated animate__fadeIn mt-5"},xf=mf((()=>(0,i._)("div",{class:"card-header bg-primary text-white"},[(0,i._)("h4",{class:"card-title"},[(0,i._)("i",{class:"fas fa-user"}),(0,i.Uk)(" User Information")])],-1))),$f={class:"card-body"},Lf={class:"mb-3"},Bf=mf((()=>(0,i._)("label",{for:"email",class:"form-label"},"Email:",-1))),Uf={class:"input-group"},Nf=mf((()=>(0,i._)("span",{class:"input-group-text"},[(0,i._)("i",{class:"fas fa-envelope"})],-1))),Mf={key:0,class:"text-danger"},Of={class:"mb-3"},jf=mf((()=>(0,i._)("label",{for:"password",class:"form-label"},"Password:",-1))),Ef={class:"input-group"},Tf=mf((()=>(0,i._)("span",{class:"input-group-text"},[(0,i._)("i",{class:"fas fa-lock"})],-1))),qf=["type"],Af={key:0,class:"text-danger"},Ff={key:1,class:"text-danger"},Wf=mf((()=>(0,i._)("i",{class:"fas fa-exclamation-triangle"},null,-1))),Vf={class:"mb-3 row"},Zf={class:"col"},zf=mf((()=>(0,i._)("label",{for:"first_name",class:"form-label"},"First Name:",-1))),Gf={class:"input-group"},Qf=mf((()=>(0,i._)("span",{class:"input-group-text"},[(0,i._)("i",{class:"fas fa-user"})],-1))),Hf={key:0,class:"text-danger"},Yf={class:"col"},Kf=mf((()=>(0,i._)("label",{for:"last_name",class:"form-label"},"Last Name:",-1))),Jf={class:"input-group"},Xf=mf((()=>(0,i._)("span",{class:"input-group-text"},[(0,i._)("i",{class:"fas fa-user"})],-1))),eg={class:"mb-3"},tg=mf((()=>(0,i._)("label",{for:"phone_number",class:"form-label"},"Phone Number:",-1))),sg={class:"input-group"},ag=mf((()=>(0,i._)("span",{class:"input-group-text"},[(0,i._)("i",{class:"fas fa-phone"})],-1))),ig={class:"mb-3 row"},lg={class:"col"},og={class:"form-check"},rg=mf((()=>(0,i._)("label",{class:"form-check-label",for:"is_superuser"},"Is Admin",-1))),cg={class:"col"},dg={class:"form-check"},ng=["disabled"],ug=mf((()=>(0,i._)("label",{class:"form-check-label",for:"is_staff"},"Is Staff",-1))),mg={class:"mb-3 row"},hg={class:"col"},pg={class:"form-check"},bg=["disabled"],fg=mf((()=>(0,i._)("label",{class:"form-check-label",for:"is_store_team"}," Is Store Team",-1))),gg={class:"col"},_g={class:"form-check"},yg=["disabled"],vg=mf((()=>(0,i._)("label",{class:"form-check-label",for:"is_design_team"}," Is Design Team",-1)));function kg(e,t,s,l,o,r){const c=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",hf,[(0,i._)("div",pf,[(0,i._)("div",bf,[(0,i._)("div",ff,[gf,_f,(0,i._)("nav",yf,[(0,i._)("ol",vf,[(0,i._)("li",kf,[(0,i.Wm)(c,{to:"/"},{default:(0,i.w5)((()=>[wf,(0,i.Uk)("Home")])),_:1})]),(0,i._)("li",Cf,[(0,i.Wm)(c,{to:"/users"},{default:(0,i.w5)((()=>[Sf,(0,i.Uk)("Users")])),_:1})]),Df])])])]),(0,i._)("div",Pf,[(0,i._)("button",{type:"submit",class:"btn btn-primary btn-sm",onClick:t[0]||(t[0]=(...e)=>r.createUser&&r.createUser(...e))},[If,(0,i.Uk)(" Create User ")])])]),(0,i._)("div",Rf,[xf,(0,i._)("div",$f,[(0,i._)("div",Lf,[Bf,(0,i._)("div",Uf,[Nf,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>o.newUser.email=e),type:"email",class:"form-control",id:"email",required:""},null,512),[[a.nr,o.newUser.email]])]),!o.newUser.email&&o.formSubmitted?((0,i.wg)(),(0,i.iD)("small",Mf," Email is required. ")):(0,i.kq)("",!0)]),(0,i._)("div",Of,[jf,(0,i._)("div",Ef,[Tf,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>o.newUser.password=e),type:o.showPassword?"text":"password",class:"form-control",id:"password",required:"",onFocus:t[3]||(t[3]=(...e)=>r.clearPasswordError&&r.clearPasswordError(...e))},null,40,qf),[[a.YZ,o.newUser.password]]),(0,i._)("span",{class:"input-group-text",onClick:t[4]||(t[4]=(...e)=>r.togglePasswordVisibility&&r.togglePasswordVisibility(...e))},[(0,i._)("i",{class:(0,Oe.C_)(["fas",o.showPassword?"fa-eye-slash":"fa-eye"])},null,2)])]),!o.newUser.password&&o.formSubmitted?((0,i.wg)(),(0,i.iD)("small",Af," Password is required. ")):(0,i.kq)("",!0),o.passwordAuthenticationError?((0,i.wg)(),(0,i.iD)("div",Ff,[(0,i._)("strong",null,[Wf,(0,i.Uk)(" "+(0,Oe.zw)(o.passwordAuthenticationError),1)])])):(0,i.kq)("",!0)]),(0,i._)("div",Vf,[(0,i._)("div",Zf,[zf,(0,i._)("div",Gf,[Qf,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>o.newUser.first_name=e),type:"text",class:"form-control",id:"first_name",required:""},null,512),[[a.nr,o.newUser.first_name]])]),!o.newUser.first_name&&o.formSubmitted?((0,i.wg)(),(0,i.iD)("small",Hf," First Name is required. ")):(0,i.kq)("",!0)]),(0,i._)("div",Yf,[Kf,(0,i._)("div",Jf,[Xf,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>o.newUser.last_name=e),type:"text",class:"form-control",id:"last_name",required:""},null,512),[[a.nr,o.newUser.last_name]])])])]),(0,i._)("div",eg,[tg,(0,i._)("div",sg,[ag,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>o.newUser.phone_number=e),type:"tel",class:"form-control",id:"phone_number"},null,512),[[a.nr,o.newUser.phone_number]])])]),(0,i._)("div",ig,[(0,i._)("div",lg,[(0,i._)("div",og,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>o.newUser.is_superuser=e),onChange:t[9]||(t[9]=(...e)=>r.updateOthers&&r.updateOthers(...e)),type:"checkbox",class:"form-check-input",id:"is_superuser"},null,544),[[a.e8,o.newUser.is_superuser]]),rg])]),(0,i._)("div",cg,[(0,i._)("div",dg,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>o.newUser.is_staff=e),disabled:o.newUser.is_superuser,type:"checkbox",class:"form-check-input",id:"is_staff"},null,8,ng),[[a.e8,o.newUser.is_staff]]),ug])])])]),(0,i._)("div",mg,[(0,i._)("div",hg,[(0,i._)("div",pg,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>o.newUser.is_store_team=e),disabled:o.newUser.is_superuser,type:"checkbox",class:"form-check-input",id:"is_store_team"},null,8,bg),[[a.e8,o.newUser.is_store_team]]),fg])]),(0,i._)("div",gg,[(0,i._)("div",_g,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[12]||(t[12]=e=>o.newUser.is_design_team=e),disabled:o.newUser.is_superuser,type:"checkbox",class:"form-check-input",id:"is_design_team"},null,8,yg),[[a.e8,o.newUser.is_design_team]]),vg])])])])])}var wg={name:"CreateUser",data(){return{newUser:{email:"",password:"",first_name:"",last_name:"",phone_number:"",is_superuser:!1,is_staff:!1,is_store_team:!1,is_design_team:!1},formSubmitted:!1,passwordAuthenticationError:null,showPassword:!1}},methods:{updateOthers(){this.newUser.is_superuser&&(this.newUser.is_staff=!0,this.newUser.is_store_team=!0,this.newUser.is_design_team=!0)},createUser(){console.log("form data",this.newUser),this.formSubmitted=!0,this.passwordAuthenticationError=null,this.newUser.email&&this.newUser.password&&this.newUser.first_name&&ye.Z.post("accounts/users/create/",this.newUser).then((e=>{console.log("User created successfully:",e.data),alert("User created successfully!"),this.$router.push("/users")})).catch((e=>{e.response&&e.response.data.password?this.passwordAuthenticationError=e.response.data.password[0]:console.error("Error creating user:",e)}))},clearPasswordError(){this.passwordAuthenticationError=null},togglePasswordVisibility(){this.showPassword=!this.showPassword}}};const Cg=(0,$e.Z)(wg,[["render",kg],["__scopeId","data-v-7b78d019"]]);var Sg=Cg;const Dg={key:0,class:"container text-center"},Pg=(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1),Ig=(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1),Rg=[Pg,Ig],xg={key:1,class:"container"},$g={class:"row align-items-center"},Lg=(0,i.uE)('<div class="col-md-6 mt-4"><div class="d-flex align-items-center"><h2 class="mb-0">Orders</h2><span class="ms-3 fs-4 text-muted">|</span><nav aria-label="breadcrumb" class="d-inline-block ms-3"><ol class="breadcrumb bg-transparent m-0 p-0"><li class="breadcrumb-item"><a href="/"><i class="fas fa-home me-1"></i>Home</a></li><li class="breadcrumb-item active" aria-current="page"><i class="fas fa-shopping-cart me-1"></i> Orders </li></ol></nav></div></div>',1),Bg={class:"col-md-6 d-flex justify-content-end mt-4"};function Ug(e,t,s,a,l,o){const r=(0,i.up)("router-link"),c=(0,i.up)("OrderDetailsTableWithDelete");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",Dg,Rg)):((0,i.wg)(),(0,i.iD)("div",xg,[(0,i._)("div",$g,[Lg,(0,i._)("div",Bg,[(0,i.Wm)(r,{to:"/orders/create",class:"btn btn-primary btn-sm ms-2"},{default:(0,i.w5)((()=>[(0,i.Uk)(" Create Order ")])),_:1})])]),(0,i.Wm)(c,{style:{"margin-top":"20px"},orders:l.orders,onRowClicked:o.handleRowClicked,onRowSelected:o.handleRowSelected},null,8,["orders","onRowClicked","onRowSelected"])]))}function Ng(e,t,s,a,l,o){const r=(0,i.up)("ag-grid-vue");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(r,{style:{height:"500px"},class:"ag-theme-quartz",rowData:s.orders,defaultColDef:l.defaultColDef,columnDefs:l.colDefs,pagination:!0,rowSelection:"multiple",onRowClicked:o.onRowClicked,onSelectionChanged:o.onSelectionChanged},null,8,["rowData","defaultColDef","columnDefs","onRowClicked","onSelectionChanged"])])}var Mg={name:"App",components:{AgGridVue:ys.n},props:{orders:{type:Array,required:!0}},data(){return{colDefs:[{field:"id",headerName:"Order ID",hide:!0},{field:"bom.id",headerName:"BOM ID ",hide:!0},{field:"bom.product.project.name",checkboxSelection:!0,headerName:"Project Name"},{field:"bom.product.name",headerName:"Product"},{field:"batch_quantity",headerName:"Batch Quantity"},{field:"bom.bom_file_name",headerName:"File Name"},{headerName:"Download",cellRenderer:this.editButtonRenderer},{headerName:"Actions",field:"actions",cellRenderer:this.actionsCellRenderer,sortable:!1,filter:!1}],defaultColDef:{filter:!0,sortable:!0,resizable:!0,autoSize:!0},selectedRows:[]}},methods:{onRowClicked(e){this.$emit("rowClicked",e.data)},onSelectionChanged(e){const t=e.api.getSelectedRows(),s=t.length>0?t[0]:null;s?this.$emit("rowSelected",s):this.$emit("rowDeselected")},editButtonRenderer(e){console.log(e);const t=document.createElement("button");return t.innerHTML='<i class="fas fa-download"></i>',t.classList.add("btn-sm","btn-primary"),t.addEventListener("click",(()=>this.downloadFile(e.data.bom.bom_file_url))),t},actionsCellRenderer(e){const t=document.createElement("button");t.innerHTML='<i class="fas fa-trash-alt"></i>',t.classList.add("btn-sm","btn-danger","ms-2"),t.addEventListener("click",(()=>this.deleteProduct(e.data.id)));const s=document.createElement("div");return s.appendChild(t),s},onEditClick(e){this.$router.push(`/product/edit/${e}`)},async deleteProduct(e){if(console.log("order id",e),confirm("Are you sure you want to delete this Order?")){this.$store.commit("setIsLoading",!0);try{const t=await ye.Z.delete(`/store/delete-order/${e}/`);console.log("Response:",t),204===t.status?(console.log("Order deleted successfully."),this.$store.commit("setIsLoading",!1),this.$notify({title:"Order Deleted Successfully",type:"bg-success-subtle text-success",duration:"5000"}),window.location.reload()):(console.error("Error deleting Order. Unexpected status:",t.status),this.$notify({title:"Order Deletion Unsuccessful",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1))}catch(t){console.error("Error deleting Order:",t),this.$notify({title:"Order Deletion Unsuccessful",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1)}}},downloadFile(e){const t=document.createElement("a");t.href=e,t.target="_blank",t.download="BOM_File",document.body.appendChild(t),t.click(),document.body.removeChild(t)}}};const Og=(0,$e.Z)(Mg,[["render",Ng]]);var jg=Og,Eg={components:{OrderDetailsTableWithDelete:jg},data(){return{orders:[]}},methods:{async fetchData(){try{this.$store.commit("setIsLoading",!0);const e=await ye.Z.get("store/get-orders/");console.log("response.data",e.data),this.orders=e.data.orders,console.log("orders",this.orders),this.$store.commit("setIsLoading",!1)}catch(e){console.error("Error fetching BOM data:",e),this.$store.commit("setIsLoading",!1)}},handleRowClicked(e){console.log("Clicked Row:",e)},handleRowSelected(e){console.log("Row Selected:",e),this.selectedRow=e}},mounted(){this.fetchData()}};const Tg=(0,$e.Z)(Eg,[["render",Ug]]);var qg=Tg;const Ag=e=>((0,i.dD)("data-v-3fe6c58e"),e=e(),(0,i.Cn)(),e),Fg={key:0,class:"container text-center"},Wg=Ag((()=>(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1))),Vg=Ag((()=>(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1))),Zg=[Wg,Vg],zg={key:1,class:"container"},Gg={class:"row align-items-center"},Qg={class:"col-md-6 mt-4"},Hg={class:"d-flex align-items-center"},Yg=Ag((()=>(0,i._)("h2",{class:"mb-0"},"Orders",-1))),Kg=Ag((()=>(0,i._)("span",{class:"ms-3 fs-4 text-muted"},"|",-1))),Jg={"aria-label":"breadcrumb",class:"d-inline-block ms-3"},Xg={class:"breadcrumb bg-transparent m-0 p-0"},e_=Ag((()=>(0,i._)("li",{class:"breadcrumb-item"},[(0,i._)("a",{href:"/"},[(0,i._)("i",{class:"fas fa-home me-1"}),(0,i.Uk)("Home")])],-1))),t_={class:"breadcrumb-item active"},s_=Ag((()=>(0,i._)("i",{class:"fas fa-shopping-cart me-1"},null,-1))),a_=Ag((()=>(0,i._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,i._)("i",{class:"fa-solid fa-receipt me-1"}),(0,i.Uk)(" Create Order ")],-1))),i_={class:"col-md-6 d-flex justify-content-end mt-4"},l_={class:"card p-3 mb-4 mt-4"},o_={class:"row mb-3"},r_={class:"col-md-6"},c_=Ag((()=>(0,i._)("label",{for:"projectDropdown",class:"form-label"},"Select Project",-1))),d_=["value"],n_={class:"col-md-6"},u_=Ag((()=>(0,i._)("label",{for:"productCode",class:"form-label"},"Product ",-1))),m_=["value"],h_={key:0,class:"row mb-3"},p_={class:"col-md-6"},b_=Ag((()=>(0,i._)("label",{for:"bomType",class:"form-label"},"BOM Type",-1))),f_={class:"col-md-6"},g_=Ag((()=>(0,i._)("label",{for:"bomRevNo",class:"form-label"},"BOM REV No",-1))),__={key:0,class:"text-danger"},y_={class:"row mb-3 justify-content-center"},v_={class:"col-md-6"},k_=Ag((()=>(0,i._)("label",{for:"batchQuantity",class:"form-label"},[(0,i._)("i",{class:"fas fa-flask me-2"}),(0,i.Uk)("Batch Quantity ")],-1))),w_={key:0,class:"col-md-6"},C_=Ag((()=>(0,i._)("label",{for:"issueDate",class:"form-label"},"Issue Date",-1))),S_={key:1,class:"card p-3 mb-4"},D_=Ag((()=>(0,i._)("label",{for:"fileInput",class:"form-label"},[(0,i._)("i",{class:"fas fa-cloud-upload-alt mr-2"}),(0,i.Uk)(" Choose BOM Excel file ")],-1))),P_={class:"custom-file"},I_={class:"custom-file-label",for:"fileInput"},R_={class:"radio-button"},x_={class:"form-check form-check-inline"},$_=Ag((()=>(0,i._)("label",{class:"form-check-label",for:"flexRadioDefault1"}," Upload a new BOM ",-1))),L_={class:"form-check form-check-inline"},B_=Ag((()=>(0,i._)("label",{class:"form-check-label",for:"flexRadioDefault2"}," Select BOM ",-1))),U_={key:2},N_={type:"button",class:"btn btn-primary mt-4","data-bs-toggle":"modal","data-bs-target":"#exampleModal"},M_={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},O_={class:"modal-dialog modal-xl"},j_={class:"modal-content"},E_=Ag((()=>(0,i._)("div",{class:"modal-header"},[(0,i._)("h5",{class:"modal-title",id:"exampleModalLabel"},"Details"),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),T_={class:"modal-body"},q_={class:"modal-footer"},A_=Ag((()=>(0,i._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1)));function F_(e,t,s,l,o,r){const c=(0,i.up)("router-link"),d=(0,i.up)("OrderBomDetailsVue"),n=(0,i.up)("CustomModal");return o.isLoading?((0,i.wg)(),(0,i.iD)("div",Fg,Zg)):((0,i.wg)(),(0,i.iD)("div",zg,[(0,i._)("div",Gg,[(0,i._)("div",Qg,[(0,i._)("div",Hg,[Yg,Kg,(0,i._)("nav",Jg,[(0,i._)("ol",Xg,[e_,(0,i._)("li",t_,[(0,i.Wm)(c,{to:"/orders"},{default:(0,i.w5)((()=>[s_,(0,i.Uk)(" Orders ")])),_:1})]),a_])])])]),(0,i._)("div",i_,[(0,i._)("button",{type:"button",class:"btn-sm btn-primary",onClick:t[0]||(t[0]=(...e)=>r.createOrder&&r.createOrder(...e))}," Create Order ")])]),(0,i._)("section",l_,[(0,i._)("div",o_,[(0,i._)("div",r_,[c_,(0,i.wy)((0,i._)("select",{class:"form-select",id:"projectDropdown","onUpdate:modelValue":t[1]||(t[1]=e=>o.selectedProject=e),required:""},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.projects,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e.id,value:e.id},(0,Oe.zw)(e.name),9,d_)))),128))],512),[[a.bM,o.selectedProject]])]),(0,i._)("div",n_,[u_,(0,i.wy)((0,i._)("select",{class:"form-select",id:"productCode","onUpdate:modelValue":t[2]||(t[2]=e=>o.selectedProduct=e),onChange:t[3]||(t[3]=(...e)=>r.filteredBoms&&r.filteredBoms(...e)),required:""},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.filteredProducts,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e.id,value:e.id},(0,Oe.zw)(e.name),9,m_)))),128))],544),[[a.bM,o.selectedProduct]])])]),"uploadNewBom"===o.selectedRadio?((0,i.wg)(),(0,i.iD)("div",h_,[(0,i._)("div",p_,[b_,(0,i.wy)((0,i._)("input",{type:"text",class:"form-control",id:"bomType","onUpdate:modelValue":t[4]||(t[4]=e=>o.bomType=e)},null,512),[[a.nr,o.bomType]])]),(0,i._)("div",f_,[g_,(0,i.wy)((0,i._)("input",{type:"text",class:"form-control",id:"bomRevNo","onUpdate:modelValue":t[5]||(t[5]=e=>o.bomRevNo=e),onInput:t[6]||(t[6]=(...e)=>r.validateBomRevNo&&r.validateBomRevNo(...e)),required:""},null,544),[[a.nr,o.bomRevNo]]),""===o.bomRevNo||o.isValidBomRevNo?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("p",__," BOM REV No should be a decimal type with a minimum of 1.0. "))])])):(0,i.kq)("",!0),(0,i._)("div",y_,[(0,i._)("div",v_,[k_,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>o.order.batchQuantity=e),type:"number",class:"form-control",placeholder:"Enter Batch Quantity",min:"1",required:""},null,512),[[a.nr,o.order.batchQuantity]])]),"uploadNewBom"===o.selectedRadio?((0,i.wg)(),(0,i.iD)("div",w_,[C_,(0,i.wy)((0,i._)("input",{type:"date",class:"form-control",id:"issueDate","onUpdate:modelValue":t[8]||(t[8]=e=>o.issueDate=e),required:""},null,512),[[a.nr,o.issueDate]])])):(0,i.kq)("",!0)]),"uploadNewBom"===o.selectedRadio?((0,i.wg)(),(0,i.iD)("div",S_,[D_,(0,i._)("div",P_,[(0,i._)("input",{type:"file",class:"custom-file-input",id:"fileInput",onChange:t[9]||(t[9]=(...e)=>r.handleFileUpload&&r.handleFileUpload(...e)),accept:".xls, .xlsx",required:""},null,32),(0,i._)("label",I_,(0,Oe.zw)(o.uploadedFileName||"Select file"),1)])])):(0,i.kq)("",!0),(0,i._)("div",R_,[(0,i._)("div",x_,[(0,i.wy)((0,i._)("input",{class:"form-check-input",type:"radio",name:"flexRadioDefault",id:"flexRadioDefault1","onUpdate:modelValue":t[10]||(t[10]=e=>o.selectedRadio=e),value:"uploadNewBom"},null,512),[[a.G2,o.selectedRadio]]),$_]),(0,i._)("div",L_,[(0,i.wy)((0,i._)("input",{class:"form-check-input",type:"radio",name:"flexRadioDefault",id:"flexRadioDefault2","onUpdate:modelValue":t[11]||(t[11]=e=>o.selectedRadio=e),value:"selectBom"},null,512),[[a.G2,o.selectedRadio]]),B_])]),"selectBom"===o.selectedRadio?((0,i.wg)(),(0,i.iD)("div",U_,[(0,i._)("button",N_,(0,Oe.zw)(o.selectBomButtonText),1)])):(0,i.kq)("",!0)]),(0,i._)("div",M_,[(0,i._)("div",O_,[(0,i._)("div",j_,[E_,(0,i._)("div",T_,[(0,i.Wm)(d,{bomByProducts:o.bomByProducts,onRowClicked:r.handleRowClicked,onRowSelected:r.handleRowSelected,onRowDeselected:r.handleRowDeselected},null,8,["bomByProducts","onRowClicked","onRowSelected","onRowDeselected"])]),(0,i._)("div",q_,[A_,(0,i._)("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal",onClick:t[12]||(t[12]=(...e)=>r.saveChanges&&r.saveChanges(...e))}," Save changes ")])])])]),(0,i.Wm)(n,{show:o.isCustomModalVisible,onCloseModal:r.handleCloseModal,onHandleModalSubmitted:r.handleModalSubmission,onDismissModal:r.handleCloseModal},null,8,["show","onCloseModal","onHandleModalSubmitted","onDismissModal"])]))}function W_(e,t,s,a,l,o){const r=(0,i.up)("ag-grid-vue");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(r,{style:{height:"500px"},class:"ag-theme-quartz",rowData:s.bomByProducts,defaultColDef:l.defaultColDef,columnDefs:l.colDefs,pagination:!0,onRowClicked:o.onRowClicked,onSelectionChanged:o.onSelectionChanged,rowSelection:"single"},null,8,["rowData","defaultColDef","columnDefs","onRowClicked","onSelectionChanged"])])}var V_={name:"OrderBomDetails",components:{AgGridVue:ys.n},props:{bomByProducts:{type:Array,required:!0}},data(){return{colDefs:[{field:"id",checkboxSelection:!0,headerName:"BOM ID"},{field:"product.project.name",headerName:"Project Name"},{field:"product.name",headerName:"Product Name"},{field:"product.product_code",headerName:"Product Code"},{field:"bom_type.name",headerName:"BOM Type"},{field:"issue_date",headerName:"Issue Date"},{field:"product.product_rev_number",headerName:"Product Rev No"},{headerName:"Download",cellRenderer:this.editButtonRenderer}],defaultColDef:{filter:!0,sortable:!0,resizable:!0,autoSize:!0},selectedRows:[]}},methods:{onRowClicked(e){this.$emit("rowClicked",e.data)},onSelectionChanged(e){const t=e.api.getSelectedRows(),s=t.length>0?t[0]:null;s?this.$emit("rowSelected",s):this.$emit("rowDeselected")},editButtonRenderer(e){console.log(e);const t=document.createElement("button");return t.innerHTML=`<i class="fas fa-download"></i> ${e.data.bom_file_name} `,t.classList.add("btn-sm","btn-primary"),t.addEventListener("click",(()=>this.downloadFile(e.data.bom_file_url))),t},downloadFile(e){const t=document.createElement("a");t.href=e,t.target="_blank",t.download="BOM_File",document.body.appendChild(t),t.click(),document.body.removeChild(t)},onEditClick(e){this.$router.push(`/bom/edit/${e}`)}}};const Z_=(0,$e.Z)(V_,[["render",W_]]);var z_=Z_,G_={components:{OrderBomDetailsVue:z_,CustomModal:Xt},data(){return{selectedRadio:null,issueDate:"",order:{selectedBomId:null,batchQuantity:1},boms:[],projects:[],products:[],orders:[],selectedProduct:null,selectedProject:null,bomByProducts:[],selectedBomFileName:"",selectedBomId:null,selectBomButtonText:"Select BOM",bomRevNo:null,isValidBomRevNo:!0,bomType:null,uploadedFileName:null,uploadedFile:null,isLoading:!1,bom_rev_change_note:"",isCustomModalVisible:!1}},computed:{filteredProducts(){if(this.products&&this.projects&&this.products.length&&this.projects.length){if(console.log("selectedProject",this.selectedProject),null!==this.selectedProject){const e=this.products.filter((e=>{const t=e.project;return t===this.selectedProject}));return console.log("Filtered Products:",e),e}return console.log("All Products:",this.products),[]}return console.log("No Products or Projects available."),[]},prepopulatedIssueDate(){return this.bomByProducts.length>0?this.bomByProducts[0].issue_date:null},formattedIssueDate(){if(this.prepopulatedIssueDate){const[e,t,s]=this.prepopulatedIssueDate.split("/");return`${s}-${e.padStart(2,"0")}-${t.padStart(2,"0")}`}return null}},mounted(){this.getData()},methods:{openCustomModal(){this.isCustomModalVisible=!0},handleCloseModal(){this.isCustomModalVisible=!1},validateBomRevNo(){const e=/^(1\.[0-9]|1[0-9]|2\.0)$/;e.test(this.bomRevNo)?this.isValidBomRevNo=!0:this.isValidBomRevNo=!1},setIsLoading(e){this.isLoading=e,this.$store.commit("setIsLoading",e)},notifySuccess(e){this.$notify({title:e,type:"bg-success-subtle text-success",duration:"5000"})},notifyError(e){this.$notify({title:e,type:"bg-danger-subtle text-danger",duration:"5000"})},handleError(e){this.notifyError(e),this.setIsLoading(!1)},handleFileUpload(e){const t=e.target.files[0];t&&(console.log("Uploaded file:",t),this.uploadedFileName=t.name,this.uploadedFile=t)},async getData(){try{this.setIsLoading(!0);const e=await ye.Z.get("store/create-order/");console.log("boms + products + projects",e.data),this.setIsLoading(!1),this.boms=e.data.boms,this.projects=e.data.projects,this.products=e.data.products,this.orders=e.data.orders}catch(e){console.error("Error fetching projects:",e),this.setIsLoading(!1)}},filteredBoms(){console.log(this.selectedProduct),this.boms&&null!==this.selectedProduct?(this.bomByProducts=this.boms.filter((e=>e.product.id===this.selectedProduct)),console.log("Filtered Boms i.e bomByProducts=:",this.bomByProducts)):(console.log("No Boms or Selected Product available."),this.bomByProducts=[])},handleRowClicked(e){console.log("Row Clicked:",e),this.selectedBomFileName=e.bom_file_name,this.selectedBomId=e.id},handleRowSelected(e){console.log("Row Selected:",e),this.selectedBomFileName=e.bom_file_name,this.selectedBomId=e.id},handleRowDeselected(){console.log("Row Deselected")},saveChanges(){this.selectedBomFileName&&null!==this.selectedBomId?(this.selectBomButtonText=this.selectedBomFileName,this.order.selectedBomId=this.selectedBomId,console.log("Selected BOM File Name:",this.selectedBomFileName),console.log("Selected BOM ID:",this.selectedBomId)):(console.warn("No BOM selected."),this.selectBomButtonText="Select BOM"),this.selectedBomFileName="",this.selectedBomId=null},async createSelectedBOMOrder(){this.setIsLoading(!0),await ye.Z.post("store/create-order/",this.order).then((e=>{console.log("Order Created:",e.data),this.notifySuccess("Order Created Successfully"),this.setIsLoading(!1),this.$router.push("/orders")})).catch((e=>{console.error("Error creating order:",e),this.handleError("Order Creation Failed")}))},createOrder(){this.setIsLoading(!0),"selectBom"===this.selectedRadio?this.createSelectedBOMOrder():"uploadNewBom"===this.selectedRadio&&this.createBomTask()},async createBomTask(){this.setIsLoading(!0);const e=new FormData;e.append("project_id",this.selectedProject),e.append("product_id",this.selectedProduct),e.append("bom_type",this.bomType),e.append("bom_rev_no",this.bomRevNo),e.append("issue_date",this.issueDate),e.append("batch_quantity",this.order.batchQuantity),e.append("bom_file",this.uploadedFile);try{const t=await ye.Z.post("store/handle-bom-cases/",e,{headers:{"Content-Type":"multipart/form-data"}});if(console.log("Response from handle-bom-cases API:",t.data),200===t.status)this.setIsLoading(!1),console.log("hi",t.data.message),this.$notify({title:`BOM Already Exists With Rev No: ${t.data.bom_rev_number}`,type:"bg-danger-subtle text-danger",duration:"5000"});else if(201===t.status)this.setIsLoading(!1),console.log("inside case two block"),console.log(t.data.message),console.log("Before setting isCustomModalVisible:",this.isCustomModalVisible),this.isCustomModalVisible=!0,console.log("After setting isCustomModalVisible:",this.isCustomModalVisible);else if(204===t.status){console.log(t.data.message),this.setIsLoading(!0);const s=await ye.Z.post("store/create-order-task/",e,{headers:{"Content-Type":"multipart/form-data"}});console.log(s.data);const a=s.data.task_id;"IN PROGRESS"===s.data.task_status||"PENDING"===s.data.task_status?setTimeout((()=>{this.checkTaskStatus(a)}),1e4):"SUCCESS"===s.data.task_status?(this.$notify({title:"BOM Uploaded Successfully adn Order Created",type:"bg-success-subtle text-success",duration:"5000"}),this.setIsLoading(!1),this.$router.push("/orders")):(this.$notify({title:"BOM Upload Failed",type:"bg-danger-subtle text-danger",duration:"5000"}),this.setIsLoading(!1))}}catch(t){console.log("error:",t),this.$notify({title:"An error occurred, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"}),this.setIsLoading(!1)}},async createOrderAndUploadBom(e){this.setIsLoading(!0);try{const t=await ye.Z.post("store/create-order-task/",e,{headers:{"Content-Type":"multipart/form-data"}});console.log(t.data);const s=t.data.task_id;"IN PROGRESS"===t.data.task_status||"PENDING"===t.data.task_status?setTimeout((()=>{this.checkTaskStatus(s)}),1e4):"SUCCESS"===t.data.task_status?(this.$notify({title:"BOM Uploaded Successfully",type:"bg-success-subtle text-success",duration:"5000"}),this.setIsLoading(!1),this.$router.push("/bom")):(this.$notify({title:"BOM Upload Failed",type:"bg-danger-subtle text-danger",duration:"5000"}),this.setIsLoading(!1))}catch(t){console.log("error:",t),this.$notify({title:"An error occurred, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"}),this.setIsLoading(!1)}},async handleModalSubmission(e){console.log("inside handleModal Submisison which will revece CHANGE NOTE IN ARFUMENT"),console.log("this is the change note ",e);const t=new FormData;t.append("project_id",this.selectedProject),t.append("product_id",this.selectedProduct),t.append("bom_type",this.bomType),t.append("bom_rev_no",this.bomRevNo),t.append("issue_date",this.issueDate),t.append("bom_file",this.uploadedFile),t.append("bom_rev_change_note",e),t.append("batch_quantity",this.order.batchQuantity),console.log("FormData:",t),await this.createOrderAndUploadBom(t)},async checkTaskStatus(e){try{const t=await ye.Z.get(`store/check-task-status/${e}/`);"IN PROGRESS"===t.data.task_status||"PENDING"===t.data.task_status?setTimeout((()=>{this.checkTaskStatus(e)}),5e3):"SUCCESS"===t.data.task_status?(this.notifySuccess("BOM Uploaded and Order Created Successfully"),this.setIsLoading(!1),this.$router.push("/orders")):(this.notifyError("BOM Upload Failed"),this.setIsLoading(!1))}catch(t){console.log("error:",t),this.handleError("An error occurred, please try again later")}}}};const Q_=(0,$e.Z)(G_,[["render",F_],["__scopeId","data-v-3fe6c58e"]]);var H_=Q_;const Y_={key:0,class:"container text-center"},K_=(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1),J_=(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1),X_=[K_,J_],ey={key:1,class:"container"},ty={class:"row align-items-center"},sy={class:"col-md-6 mt-4"},ay={class:"d-flex align-items-center"},iy=(0,i._)("h2",{class:"mb-0"},"Project",-1),ly=(0,i._)("span",{class:"ms-3 fs-4 text-muted"},"|",-1),oy={"aria-label":"breadcrumb",class:"d-inline-block ms-3"},ry={class:"breadcrumb bg-transparent m-0 p-0"},cy={class:"breadcrumb-item"},dy=(0,i._)("i",{class:"fas fa-home me-1"},null,-1),ny=(0,i._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,i._)("i",{class:"fas fa-project-diagram me-1"}),(0,i.Uk)(" Project ")],-1),uy={class:"col-md-6 mt-4 text-end"};function my(e,t,s,a,l,o){const r=(0,i.up)("router-link"),c=(0,i.up)("ProjectsLandingTable");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",Y_,X_)):((0,i.wg)(),(0,i.iD)("div",ey,[(0,i._)("div",ty,[(0,i._)("div",sy,[(0,i._)("div",ay,[iy,ly,(0,i._)("nav",oy,[(0,i._)("ol",ry,[(0,i._)("li",cy,[(0,i.Wm)(r,{to:"/"},{default:(0,i.w5)((()=>[dy,(0,i.Uk)(" Home")])),_:1})]),ny])])])]),(0,i._)("div",uy,[(0,i.Wm)(r,{to:"/projects/create-project",class:"btn btn-primary btn-sm ms-2"},{default:(0,i.w5)((()=>[(0,i.Uk)(" Create New Project ")])),_:1})])]),(0,i.Wm)(c,{style:{"margin-top":"20px"},projectList:l.projectList},null,8,["projectList"])]))}function hy(e,t,s,a,l,o){const r=(0,i.up)("ag-grid-vue");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(r,{style:{height:"500px"},class:"ag-theme-quartz",rowData:s.projectList,defaultColDef:l.defaultColDef,columnDefs:l.colDefs,pagination:!0,onRowClicked:o.onRowClicked,onSelectionChanged:o.onSelectionChanged},null,8,["rowData","defaultColDef","columnDefs","onRowClicked","onSelectionChanged"])])}var py={name:"App",components:{AgGridVue:ys.n},props:{projectList:{type:Array,required:!0}},data(){return{colDefs:[{field:"id",hide:!0},{field:"name",headerName:"Project Name",width:300},{field:"project_code",headerName:"Project Code",width:300},{field:"project_rev_number",headerName:"Project Rev No",width:300},{headerName:"Actions",cellRenderer:this.editButtonRenderer,width:250}],defaultColDef:{filter:!0,sortable:!0,resizable:!0,autoSize:!0},selectedRows:[]}},methods:{onRowClicked(e){this.$emit("rowClicked",e.data),this.$router.push(`/project-edit/${e.data.id}`)},onRowSelected(e){e.node.isSelected()&&this.$emit("rowSelected",e.node.data)},onSelectionChanged(e){const t=e.api.getSelectedRows(),s=t.length>0?t[0]:null;s?this.$emit("rowSelected",s):this.$emit("rowDeselected")},editButtonRenderer(e){console.log(e);const t=document.createElement("button");return t.innerHTML='<i class="fas fa-edit"></i>',t.classList.add("btn","btn-primary"),t.addEventListener("click",(()=>this.onEditClick(e.data.id))),t},onEditClick(e){this.$router.push(`/project-edit/${e}`)}}};const by=(0,$e.Z)(py,[["render",hy]]);var fy=by,gy={components:{ProjectsLandingTable:fy},data(){return{projectList:[]}},mounted(){this.getData()},methods:{getData(){this.$store.commit("setIsLoading",!0),ye.Z.get("/store/edit-project").then((e=>{console.log("response.data",e.data),this.projectList=e.data.projects,this.$store.commit("setIsLoading",!1)})).catch((e=>{console.error("Error fetching products:",e),this.$store.commit("setIsLoading",!1)}))}}};const _y=(0,$e.Z)(gy,[["render",my]]);var yy=_y;const vy=e=>((0,i.dD)("data-v-1745b83a"),e=e(),(0,i.Cn)(),e),ky={key:0,class:"container text-center"},wy=vy((()=>(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1))),Cy=vy((()=>(0,i._)("div",null,[(0,i._)("b",null," Loading...")],-1))),Sy=[wy,Cy],Dy={key:1,class:"container"},Py={class:"row align-items-center"},Iy={class:"col-md-8 mt-4"},Ry={class:"d-flex align-items-center"},xy=vy((()=>(0,i._)("h2",{class:"mb-0"},"Edit Project |",-1))),$y={"aria-label":"breadcrumb",class:"ms-3"},Ly={class:"breadcrumb bg-transparent m-0 p-0 justify-content-end"},By=vy((()=>(0,i._)("li",{class:"breadcrumb-item"},[(0,i._)("a",{href:"/"},[(0,i._)("i",{class:"fas fa-home me-1"}),(0,i.Uk)("Home")])],-1))),Uy={class:"breadcrumb-item active","aria-current":"page"},Ny=vy((()=>(0,i._)("i",{class:"fas fa-project-diagram me-1"},null,-1))),My=vy((()=>(0,i._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,i._)("i",{class:"fa fa-bars me-1","aria-hidden":"true"}),(0,i.Uk)("Project Details ")],-1))),Oy={class:"col-md-4 mt-4 d-flex justify-content-end"},jy={class:"mt-5"},Ey={class:"row"},Ty={class:"col-md-4"},qy={class:"form-group"},Ay=vy((()=>(0,i._)("label",{for:"veplPartNumber"},"Project Name",-1))),Fy={class:"col-md-4"},Wy={class:"form-group"},Vy=vy((()=>(0,i._)("label",{for:"level"},"Project Code",-1))),Zy={class:"col-md-4"},zy={class:"form-group"},Gy=vy((()=>(0,i._)("label",{for:"priorityLevel"},"Project Rev No",-1))),Qy={class:"form-group"},Hy=vy((()=>(0,i._)("label",{for:"products"},"Products:",-1))),Yy=vy((()=>(0,i._)("br",null,null,-1))),Ky=vy((()=>(0,i._)("button",{type:"button",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#exampleModal"}," Add Product ",-1))),Jy={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Xy={class:"modal-dialog modal-xl"},ev={class:"modal-content"},tv=vy((()=>(0,i._)("div",{class:"modal-header"},[(0,i._)("h1",{class:"modal-title fs-5",id:"exampleModalLabel"}," Create New Product "),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),sv={class:"modal-body"},av={class:"card mt-4"},iv=vy((()=>(0,i._)("div",{class:"card-header bg-primary text-white"},[(0,i._)("h4",{class:"card-title"},[(0,i._)("i",{class:"fas fa-Product-diagram me-2"}),(0,i.Uk)(" Product Information ")])],-1))),lv={class:"card-body"},ov={class:"mb-3"},rv=vy((()=>(0,i._)("label",{for:"productName",class:"form-label"},"Product Name:",-1))),cv={key:0,class:"text-danger"},dv={class:"mb-3"},nv=vy((()=>(0,i._)("label",{for:"productCode",class:"form-label"},"Product Code:",-1))),uv={key:0,class:"text-danger"},mv={class:"mb-3"},hv=vy((()=>(0,i._)("label",{for:"ProductRevNo",class:"form-label"},"Product Rev No:",-1))),pv={key:0,class:"text-danger"},bv={class:"modal-footer"},fv=vy((()=>(0,i._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1))),gv=vy((()=>(0,i._)("i",{class:"fas fa-save me-1"},null,-1)));function _v(e,t,s,l,o,r){const c=(0,i.up)("router-link"),d=(0,i.up)("products-for-project-grid");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",ky,Sy)):((0,i.wg)(),(0,i.iD)("div",Dy,[(0,i._)("div",Py,[(0,i._)("div",Iy,[(0,i._)("div",Ry,[xy,(0,i._)("nav",$y,[(0,i._)("ol",Ly,[By,(0,i._)("li",Uy,[(0,i.Wm)(c,{to:"/projects"},{default:(0,i.w5)((()=>[Ny,(0,i.Uk)("Projects ")])),_:1})]),My])])])]),(0,i._)("div",Oy,[(0,i._)("button",{type:"button",class:"btn btn-primary me-2",onClick:t[0]||(t[0]=(...e)=>r.updateProject&&r.updateProject(...e))}," Update Project "),(0,i._)("button",{type:"button",class:"btn btn-danger",onClick:t[1]||(t[1]=(...e)=>r.deleteProject&&r.deleteProject(...e))}," Delete Project ")])]),(0,i._)("section",jy,[(0,i._)("div",Ey,[(0,i._)("div",Ty,[(0,i._)("div",qy,[Ay,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>o.editedProject.name=e),type:"text",class:"form-control"},null,512),[[a.nr,o.editedProject.name]])])]),(0,i._)("div",Fy,[(0,i._)("div",Wy,[Vy,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>o.editedProject.project_code=e),type:"text",class:"form-control"},null,512),[[a.nr,o.editedProject.project_code]])])]),(0,i._)("div",Zy,[(0,i._)("div",zy,[Gy,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>o.editedProject.project_rev_number=e),type:"text",class:"form-control"},null,512),[[a.nr,o.editedProject.project_rev_number]])])])]),(0,i._)("div",Qy,[Hy,Yy,Ky,(0,i.Wm)(d,{style:{"margin-top":"20px"},products:o.project.products,onRowSelected:e.handleRowSelected},null,8,["products","onRowSelected"])])]),(0,i._)("div",Jy,[(0,i._)("div",Xy,[(0,i._)("div",ev,[tv,(0,i._)("div",sv,[(0,i._)("div",av,[iv,(0,i._)("div",lv,[(0,i._)("div",ov,[rv,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>o.newProduct.name=e),type:"text",class:"form-control",id:"productName",required:""},null,512),[[a.nr,o.newProduct.name]]),o.newProduct.name?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("small",cv,"Product Name is required."))]),(0,i._)("div",dv,[nv,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>o.newProduct.product_code=e),class:"form-control",id:"productCode",required:""},null,512),[[a.nr,o.newProduct.product_code]]),o.newProduct.product_code?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("small",uv,"Product Code is required."))]),(0,i._)("div",mv,[hv,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>o.newProduct.product_rev_number=e),type:"text",class:"form-control",id:"productRevNo",required:""},null,512),[[a.nr,o.newProduct.product_rev_number]]),o.newProduct.product_rev_number?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("small",pv,"Product Rev No is required."))])])])]),(0,i._)("div",bv,[fv,(0,i._)("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal",onClick:t[8]||(t[8]=(...e)=>r.createProduct&&r.createProduct(...e))},[gv,(0,i.Uk)(" Create New Product ")])])])])])]))}const yv={class:"ag-theme-quartz",style:{height:"600px"}};function vv(e,t,s,a,l,o){const r=(0,i.up)("ag-grid-vue");return(0,i.wg)(),(0,i.iD)("div",yv,[(0,i.Wm)(r,{ref:"agGrid",gridOptions:l.gridOptions,columnDefs:l.columnDefs,rowData:s.products,onRowClicked:o.onRowClicked,onRowSelected:o.onRowSelected},null,8,["gridOptions","columnDefs","rowData","onRowClicked","onRowSelected"])])}var kv={components:{"ag-grid-vue":ys.n},props:{products:{type:Array,default:()=>[]},selectedProducts:{type:Array,default:()=>[]}},data(){return{gridOptions:{domLayout:"autoHeight",rowSelection:"multiple",pagination:!0,paginationPageSize:20},columnDefs:[{headerCheckboxSelection:!0,checkboxSelection:!0,headerName:"Product name",field:"name",width:300},{headerName:"Product Code",field:"product_code",width:300},{headerName:"Product Rev No",field:"product_rev_number",width:300},{headerName:"Actions",field:"actions",cellRenderer:this.actionsCellRenderer,sortable:!1,filter:!1}]}},methods:{onRowClicked(e){this.$emit("rowClicked",e.data),this.$router.push(`/product/edit/${e.data.id}`)},onRowSelected(e){e.node.isSelected()&&this.$emit("rowSelected",e.data)},onSelectionChanged(){this.$refs.agGrid&&this.$refs.agGrid.api&&(this.selectedRows=this.$refs.agGrid.api.getSelectedRows())},actionsCellRenderer(e){const t=document.createElement("button");t.innerHTML='<i class="fas fa-edit"></i>',t.classList.add("btn","btn-primary","ms-2"),t.addEventListener("click",(()=>this.onEditClick(e.data.id)));const s=document.createElement("button");s.innerHTML='<i class="fas fa-trash-alt"></i>',s.classList.add("btn","btn-danger","ms-4"),s.addEventListener("click",(t=>this.deleteProduct(e.data.id,t)));const a=document.createElement("div");return a.appendChild(t),a.appendChild(s),a},onEditClick(e){this.$router.push(`/product/edit/${e}`)},async deleteProduct(e,t){t.stopPropagation(),confirm("Are you sure you want to delete this product?")&&(this.$store.commit("setIsLoading",!0),ye.Z.delete(`/store/delete-product/${e}/`).then((e=>{console.log(e.data),console.log("Product deleted successfully."),this.$store.commit("setIsLoading",!1),this.$notify({title:"Product Deleted Successfully",type:"bg-success-subtle text-success",duration:"5000"}),window.location.reload()})).catch((e=>{console.error("Error deleting user:",e),this.$notify({title:"Product Deletion Unsuccessful",type:"bg-danger-subtle text-danger",duration:"5000"})})))}}};const wv=(0,$e.Z)(kv,[["render",vv],["__scopeId","data-v-cbc677c0"]]);var Cv=wv,Sv={components:{"products-for-project-grid":Cv},data(){return{editedProject:{name:"",project_code:"",project_rev_number:"",products:[]},newProduct:{name:"",product_code:"",product_rev_number:""},project:[],products:[]}},mounted(){this.fetchData()},methods:{async fetchData(){this.$store.commit("setIsLoading",!0),ye.Z.get(`/store/edit-project/${this.$route.params.id}`).then((e=>{console.log("response.data",e.data),this.project=e.data.project,this.project&&(this.editedProject.name=this.project.name,this.editedProject.project_code=this.project.project_code,this.editedProject.project_rev_number=this.project.project_rev_number),this.$store.commit("setIsLoading",!1)})).catch((e=>{console.error("Error fetching products:",e),this.$store.commit("setIsLoading",!1)}))},updateProject(){console.log("Edited Project:",this.editedProject),confirm("Are you sure you want to update this project?")&&(this.$store.commit("setIsLoading",!0),ye.Z.put(`/store/edit-project/${this.$route.params.id}/`,this.editedProject).then((e=>{console.log("Project updated successfully:",e.data),this.$store.commit("setIsLoading",!1),this.$notify({title:"Project Updated Successfully",type:"bg-success-subtle text-success",duration:"5000"}),this.$router.push("/projects")})).catch((e=>{console.error("Error updating Project:",e),this.$notify({title:"Project Creation Unsuccessful",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1)})))},createProduct(){this.$store.commit("setIsLoading",!0),console.log("form data",this.newProduct),this.newProduct.name&&this.newProduct.product_code&&this.newProduct.product_rev_number&&ye.Z.post(`/store/create-product/${this.$route.params.id}/`,this.newProduct).then((e=>{console.log("Product created successfully:",e.data),this.$store.commit("setIsLoading",!1);const t=e.data.product;this.project.products.push(t),this.$notify({title:"Product Created Successfully",type:"bg-success-subtle text-success",duration:"5000"}),this.newProduct={};const s=this.$route.params.id;this.$router.push(`/project-edit/${s}`)})).catch((e=>{console.error("Error creating Product:",e),this.$store.commit("setIsLoading",!1),this.$notify({title:"Product Creation Unsuccessful",type:"bg-danger-subtle text-danger",duration:"5000"})}))},deleteProject(){confirm("Are you sure you want to delete this project?")&&(this.$store.commit("setIsLoading",!0),ye.Z.delete(`/store/delete-project/${this.$route.params.id}/`).then((e=>{console.log(e.data),console.log("Project deleted successfully."),this.$store.commit("setIsLoading",!1),this.$notify({title:"Project Deleted Successfully",type:"bg-success-subtle text-success",duration:"5000"}),this.$router.push("/projects")})).catch((e=>{console.error("Error deleting user:",e),this.$notify({title:"Project Deletion Unsuccessful",type:"bg-danger-subtle text-danger",duration:"5000"})})))}}};const Dv=(0,$e.Z)(Sv,[["render",_v],["__scopeId","data-v-1745b83a"]]);var Pv=Dv;const Iv=e=>((0,i.dD)("data-v-ce8ba2da"),e=e(),(0,i.Cn)(),e),Rv={class:"container"},xv={class:"row align-items-center"},$v={class:"col-md-6 mt-4"},Lv={class:"d-flex align-items-center"},Bv=Iv((()=>(0,i._)("h2",{class:"mb-0"},"Projects",-1))),Uv=Iv((()=>(0,i._)("span",{class:"ms-3 fs-4 text-muted"},"|",-1))),Nv={"aria-label":"breadcrumb",class:"d-inline-block ms-3"},Mv={class:"breadcrumb bg-transparent m-0 p-0"},Ov={class:"breadcrumb-item"},jv=Iv((()=>(0,i._)("i",{class:"fas fa-home me-1"},null,-1))),Ev={class:"breadcrumb-item"},Tv=Iv((()=>(0,i._)("i",{class:"fas fa-project-diagram me-1"},null,-1))),qv=Iv((()=>(0,i._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,i._)("i",{class:"fa fa-plus"}),(0,i.Uk)(" Create Project ")],-1))),Av={class:"col-md-6 mt-4 text-end"},Fv=Iv((()=>(0,i._)("i",{class:"fas fa-save me-1"},null,-1))),Wv={class:"card mt-4"},Vv=Iv((()=>(0,i._)("div",{class:"card-header bg-primary text-white"},[(0,i._)("h4",{class:"card-title"},[(0,i._)("i",{class:"fas fa-project-diagram me-2"}),(0,i.Uk)(" Project Information ")])],-1))),Zv={class:"card-body"},zv={class:"mb-3"},Gv=Iv((()=>(0,i._)("label",{for:"projectName",class:"form-label"},"Project Name:",-1))),Qv={key:0,class:"text-danger"},Hv={class:"mb-3"},Yv=Iv((()=>(0,i._)("label",{for:"projectCode",class:"form-label"},"Project Code:",-1))),Kv={key:0,class:"text-danger"};function Jv(e,t,s,l,o,r){const c=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",Rv,[(0,i._)("div",xv,[(0,i._)("div",$v,[(0,i._)("div",Lv,[Bv,Uv,(0,i._)("nav",Nv,[(0,i._)("ol",Mv,[(0,i._)("li",Ov,[(0,i.Wm)(c,{to:"/"},{default:(0,i.w5)((()=>[jv,(0,i.Uk)("Home")])),_:1})]),(0,i._)("li",Ev,[(0,i.Wm)(c,{to:"/projects"},{default:(0,i.w5)((()=>[Tv,(0,i.Uk)("Projects")])),_:1})]),qv])])])]),(0,i._)("div",Av,[(0,i._)("button",{type:"submit",class:"btn btn-success btn-sm",onClick:t[0]||(t[0]=(...e)=>r.createProject&&r.createProject(...e))},[Fv,(0,i.Uk)(" Create Project ")])])]),(0,i._)("div",Wv,[Vv,(0,i._)("div",Zv,[(0,i._)("div",zv,[Gv,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>o.newProject.name=e),type:"text",class:"form-control",id:"projectName",required:""},null,512),[[a.nr,o.newProject.name]]),o.newProject.name?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("small",Qv,"Project Name is required."))]),(0,i._)("div",Hv,[Yv,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>o.newProject.project_code=e),type:"text",class:"form-control",id:"projectCode",required:""},null,512),[[a.nr,o.newProject.project_code]]),o.newProject.project_code?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("small",Kv,"Project Code is required."))])])])])}var Xv={name:"CreateProject",data(){return{newProject:{name:"",project_code:"",project_rev_number:""}}},methods:{createProject(){this.$store.commit("setIsLoading",!0),this.newProject.name&&this.newProject.project_code&&ye.Z.post("/store/create-project/",this.newProject).then((e=>{console.log("Project created successfully:",e.data),this.$store.commit("setIsLoading",!1),this.$notify({title:"Project Created Successfully",type:"bg-success-subtle text-success",duration:"5000"}),this.$router.push("/projects")})).catch((e=>{console.error("Error creating project:",e),this.$store.commit("setIsLoading",!1),this.$notify({title:"Project Creation Unsuccessful",type:"bg-danger-subtle text-danger",duration:"5000"})}))}}};const ek=(0,$e.Z)(Xv,[["render",Jv],["__scopeId","data-v-ce8ba2da"]]);var tk=ek;const sk=e=>((0,i.dD)("data-v-b198b0c4"),e=e(),(0,i.Cn)(),e),ak={key:0,class:"container text-center"},ik=sk((()=>(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1))),lk=sk((()=>(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1))),ok=[ik,lk],rk={key:1,class:"container"},ck={class:"row align-items-center"},dk={class:"col-md-6 mt-4"},nk={class:"d-flex align-items-center"},uk=sk((()=>(0,i._)("h2",{class:"mb-0"},"Edit Product",-1))),mk=sk((()=>(0,i._)("span",{class:"ms-3 fs-4 text-muted"},"|",-1))),hk={"aria-label":"breadcrumb",class:"d-inline-block ms-3"},pk={class:"breadcrumb bg-transparent m-0 p-0"},bk={class:"breadcrumb-item"},fk=sk((()=>(0,i._)("i",{class:"fas fa-home me-1"},null,-1))),gk={class:"breadcrumb-item"},_k=sk((()=>(0,i._)("i",{class:"fas fa-project-diagram me-1"},null,-1))),yk={class:"breadcrumb-item"},vk=sk((()=>(0,i._)("i",{class:"fas fa-bars me-1"},null,-1))),kk=sk((()=>(0,i._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,i._)("i",{class:"fas fa-edit me-1"}),(0,i.Uk)(" Edit Product ")],-1))),wk={class:"col-md-6 mt-4 text-end"},Ck=sk((()=>(0,i._)("i",{class:"fas fa-save me-1"},null,-1))),Sk=sk((()=>(0,i._)("i",{class:"fas fa-trash me-1"},null,-1))),Dk={class:"card animate__animated animate__fadeIn mt-5"},Pk=sk((()=>(0,i._)("div",{class:"card-header bg-primary text-white"},[(0,i._)("h4",{class:"card-title"},[(0,i._)("i",{class:"fas fa-user me-1"}),(0,i.Uk)(" Product Information ")])],-1))),Ik={class:"card-body"},Rk={class:"mb-3"},xk=sk((()=>(0,i._)("label",{for:"email",class:"form-label"},"Product Name:",-1))),$k={class:"input-group"},Lk=sk((()=>(0,i._)("span",{class:"input-group-text"},[(0,i._)("i",{class:"fas fa-envelope"})],-1))),Bk={key:0,class:"text-danger"},Uk={class:"mb-3 row"},Nk={class:"col"},Mk=sk((()=>(0,i._)("label",{for:"first_name",class:"form-label"},"Product Code:",-1))),Ok={class:"input-group"},jk=sk((()=>(0,i._)("span",{class:"input-group-text"},[(0,i._)("i",{class:"fas fa-user"})],-1))),Ek={key:0,class:"text-danger"},Tk={class:"col"},qk=sk((()=>(0,i._)("label",{for:"first_name",class:"form-label"},"Product Rev No:",-1))),Ak={class:"input-group"},Fk=sk((()=>(0,i._)("span",{class:"input-group-text"},[(0,i._)("i",{class:"fas fa-user"})],-1))),Wk={key:0,class:"text-danger"};function Vk(e,t,s,l,o,r){const c=(0,i.up)("router-link");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",ak,ok)):((0,i.wg)(),(0,i.iD)("div",rk,[(0,i._)("div",ck,[(0,i._)("div",dk,[(0,i._)("div",nk,[uk,mk,(0,i._)("nav",hk,[(0,i._)("ol",pk,[(0,i._)("li",bk,[(0,i.Wm)(c,{to:"/"},{default:(0,i.w5)((()=>[fk,(0,i.Uk)(" Home")])),_:1})]),(0,i._)("li",gk,[(0,i.Wm)(c,{to:"/projects"},{default:(0,i.w5)((()=>[_k,(0,i.Uk)(" Projects")])),_:1})]),(0,i._)("li",yk,[(0,i.Wm)(c,{to:`/project-edit/${this.product.project}`},{default:(0,i.w5)((()=>[vk,(0,i.Uk)(" Products Details")])),_:1},8,["to"])]),kk])])])]),(0,i._)("div",wk,[(0,i._)("button",{type:"submit",class:"btn btn-primary btn-sm",onClick:t[0]||(t[0]=(...e)=>r.updateProduct&&r.updateProduct(...e))},[Ck,(0,i.Uk)(" Update Product ")]),(0,i._)("button",{type:"button",class:"btn btn-danger ms-2 btn-sm",onClick:t[1]||(t[1]=(...e)=>r.deleteProduct&&r.deleteProduct(...e))},[Sk,(0,i.Uk)(" Delete Product ")])])]),(0,i._)("div",Dk,[Pk,(0,i._)("div",Ik,[(0,i._)("div",Rk,[xk,(0,i._)("div",$k,[Lk,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>o.editedProduct.name=e),type:"text",class:"form-control",id:"project_name",required:""},null,512),[[a.nr,o.editedProduct.name]])]),o.editedProduct.name?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("small",Bk,"Project Name is required."))]),(0,i._)("div",Uk,[(0,i._)("div",Nk,[Mk,(0,i._)("div",Ok,[jk,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>o.editedProduct.product_code=e),type:"text",class:"form-control",id:"product_code",required:""},null,512),[[a.nr,o.editedProduct.product_code]])]),o.editedProduct.product_code?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("small",Ek,"First Name is required."))]),(0,i._)("div",Tk,[qk,(0,i._)("div",Ak,[Fk,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>o.editedProduct.product_rev_number=e),type:"text",class:"form-control",id:"product_rev_number",required:""},null,512),[[a.nr,o.editedProduct.product_rev_number]])]),o.editedProduct.product_rev_number?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("small",Wk,"Product Rev Number is required."))])])])])]))}var Zk={name:"EditProduct",data(){return{editedProduct:{name:"",product_code:"",product_rev_number:""},product:[]}},mounted(){this.fetchData()},methods:{async fetchData(){this.$store.commit("setIsLoading",!0),console.log("id",this.$route.params.id),ye.Z.get(`/store/edit-product/${this.$route.params.id}`).then((e=>{console.log("response.data ",e.data),this.product=e.data.product,this.product&&(this.editedProduct.name=this.product.name,this.editedProduct.product_code=this.product.product_code,this.editedProduct.product_rev_number=this.product.product_rev_number),this.$store.commit("setIsLoading",!1)})).catch((e=>{console.error("Error fetching products:",e),this.$store.commit("setIsLoading",!1)}))},updateProduct(){confirm("Are you sure you want to update this product?")&&(this.$store.commit("setIsLoading",!0),ye.Z.put(`/store/edit-product/${this.$route.params.id}/`,this.editedProduct).then((e=>{console.log("Product updated successfully:",e.data),this.$store.commit("setIsLoading",!1),this.$notify({title:"Product Updated Successfully",type:"bg-success-subtle text-success",duration:"5000"});const t=this.product.project;this.$router.push(`/project-edit/${t}`)})).catch((e=>{console.error("Error updating Product:",e),this.$notify({title:"Product Creation Unsuccessful",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1)})))},deleteProduct(){confirm("Are you sure you want to delete this product?")&&(this.$store.commit("setIsLoading",!0),ye.Z.delete(`/store/delete-product/${this.$route.params.id}/`).then((()=>{console.log("Product  deleted successfully."),this.$store.commit("setIsLoading",!1),this.$notify({title:"Product Deleted Successfully",type:"bg-success-subtle text-success",duration:"5000"});const e=this.product.project;this.$router.push(`/project-edit/${e}`)})).catch((e=>{console.error("Error deleting user:",e),this.$notify({title:"Product Deletion Unsuccessful",type:"bg-danger-subtle text-danger",duration:"5000"})})))}}};const zk=(0,$e.Z)(Zk,[["render",Vk],["__scopeId","data-v-b198b0c4"]]);var Gk=zk;const Qk={key:0,class:"container text-center"},Hk=(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1),Yk=(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1),Kk=[Hk,Yk],Jk={key:1,class:"container"},Xk={class:"row align-items-center"},ew=(0,i.uE)('<div class="col-md-6 mt-4"><div class="d-flex align-items-center"><h2 class="mb-0">Checklist</h2><span class="ms-3 fs-4 text-muted">|</span><nav aria-label="breadcrumb" class="d-inline-block ms-3"><ol class="breadcrumb bg-transparent m-0 p-0"><li class="breadcrumb-item"><a href="/"><i class="fas fa-home me-1"></i>Home</a></li><li class="breadcrumb-item active" aria-current="page"><i class="fas fa-list-alt me-1"></i> Checklist </li></ol></nav></div></div>',1),tw={class:"col-md-6 mt-4 text-end"},sw={class:"container has-text-centered"},aw={class:"d-flex"},iw=["disabled"],lw=["disabled"],ow=["disabled"],rw={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},cw={class:"modal-dialog"},dw={class:"modal-content"},nw=(0,i._)("div",{class:"modal-header"},[(0,i._)("h1",{class:"modal-title fs-5",id:"exampleModalLabel"}," Fill the Required Batch Quantity "),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),uw={class:"modal-body"},mw={class:"modal-footer"},hw=(0,i._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1);function pw(e,t,s,l,o,r){const c=(0,i.up)("OrderDetailsTable");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",Qk,Kk)):((0,i.wg)(),(0,i.iD)("div",Jk,[(0,i._)("div",Xk,[ew,(0,i._)("div",tw,[(0,i._)("div",sw,[(0,i._)("div",aw,[(0,i._)("button",{type:"button",disabled:!o.isButtonEnabled,class:"btn btn-primary btn-sm",onClick:t[0]||(t[0]=(...e)=>r.checkAndGenerateChecklist&&r.checkAndGenerateChecklist(...e))}," Generate New Checklist ",8,iw),(0,i._)("button",{onClick:t[1]||(t[1]=(...e)=>r.checkExistingChecklist&&r.checkExistingChecklist(...e)),disabled:!o.isButtonEnabled,class:"btn btn-warning btn-sm ms-2"}," View Ongoing Checklist ",8,lw),(0,i._)("button",{onClick:t[2]||(t[2]=(...e)=>r.viewGeneratedChecklists&&r.viewGeneratedChecklists(...e)),disabled:!o.isButtonEnabled,class:"btn btn-success btn-sm ms-2"}," View Generated Checklists ",8,ow)])])])]),(0,i.Wm)(c,{style:{"margin-top":"20px"},orders:e.orders,onRowClicked:r.handleRowClicked,onRowSelected:r.handleRowSelected,onRowDeselected:r.handleRowDeselected},null,8,["orders","onRowClicked","onRowSelected","onRowDeselected"]),(0,i._)("div",rw,[(0,i._)("div",cw,[(0,i._)("div",dw,[nw,(0,i._)("div",uw,[(0,i.wy)((0,i._)("input",{type:"number",class:"form-control",id:"requiredBatchQuantity","onUpdate:modelValue":t[3]||(t[3]=e=>o.batch_quantity=e),placeholder:"Enter Batch Quantity",min:"1"},null,512),[[a.nr,o.batch_quantity]])]),(0,i._)("div",mw,[hw,(0,i._)("button",{onClick:t[4]||(t[4]=(...e)=>r.checkAndGenerateChecklist&&r.checkAndGenerateChecklist(...e)),type:"button",class:"btn btn-primary","data-bs-dismiss":"modal"}," Generate Checklist ")])])])])]))}function bw(e,t,s,a,l,o){const r=(0,i.up)("ag-grid-vue");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(r,{style:{height:"500px"},class:"ag-theme-quartz",rowData:s.orders,defaultColDef:l.defaultColDef,columnDefs:l.colDefs,pagination:!0,rowSelection:"multiple",onRowClicked:o.onRowClicked,onSelectionChanged:o.onSelectionChanged},null,8,["rowData","defaultColDef","columnDefs","onRowClicked","onSelectionChanged"])])}var fw={name:"App",components:{AgGridVue:ys.n},props:{orders:{type:Array,required:!0}},data(){return{colDefs:[{field:"id",headerName:"Order ID",checkboxSelection:!0},{field:"bom.id",headerName:"BOM ID ",hide:!0},{field:"bom.product.project.name",headerName:"Project Name"},{field:"bom.product.name",headerName:"Product"},{field:"batch_quantity",headerName:"Batch Quantity"},{field:"bom.bom_file_name",headerName:"BOM File Name"},{headerName:"Download",cellRenderer:this.editButtonRenderer,flex:1}],defaultColDef:{filter:!0,sortable:!0,resizable:!0,autoSize:!0,autoSizeColumns:!0},selectedRows:[]}},methods:{onRowClicked(e){this.$emit("rowClicked",e.data)},onSelectionChanged(e){const t=e.api.getSelectedRows(),s=t.length>0?t[0]:null;s?this.$emit("rowSelected",s):this.$emit("rowDeselected")},editButtonRenderer(e){console.log(e);const t=document.createElement("button");return t.innerHTML='<i class="fas fa-download"></i>',t.classList.add("btn-sm","btn-primary"),t.addEventListener("click",(()=>this.downloadFile(e.data.bom.bom_file_url))),t},downloadFile(e){const t=document.createElement("a");t.href=e,t.target="_blank",t.download="BOM_File",document.body.appendChild(t),t.click(),document.body.removeChild(t)},onEditClick(e){this.$router.push(`/bom/edit/${e}`)}}};const gw=(0,$e.Z)(fw,[["render",bw]]);var _w=gw,yw={components:{OrderDetailsTable:_w},data(){return{rowData:[],selectedRow:null,clickedRowId:null,orderId:null,isButtonEnabled:!1,isExisting:!1,isActive:!1,batch_quantity:1}},methods:{async fetchData(){try{this.$store.commit("setIsLoading",!0);const e=await ye.Z.get("store/get-orders/");this.orders=e.data.orders,console.log(e.data.orders),this.$store.commit("setIsLoading",!1)}catch(e){console.error("Error fetching BOM data:",e),this.$store.commit("setIsLoading",!1)}},handleRowClicked(e){console.log("Clicked Row:",e)},handleRowSelected(e){console.log("Row Selected:",e),e&&e.id&&(this.selectedRow=e,this.clickedRowId=e.bom.id,this.orderId=e.id,console.log("clicked row id +BOM ID =",this.clickedRowId),console.log("Order ID =",this.orderId),this.isButtonEnabled=!0)},handleRowDeselected(){console.log("Row Deselected:"),this.isButtonEnabled=!1},async checkAndGenerateChecklist(){console.log("generate checklist clicked"),this.$store.commit("setIsLoading",!0);try{const e=await ye.Z.post(`store/check-existing-checklist/${this.clickedRowId}/`);console.log(e.data),this.isActive=e.data.is_active,this.isExisting=e.data.is_existing,this.isExisting?(this.$notify({title:"There is already an active ongoing checklist for this order...",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1)):await this.generateChecklist()}catch(e){console.log("error:",e),this.$notify({title:"An error occurred, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"})}finally{this.$store.commit("setIsLoading",!1)}},async generateChecklist(){try{const e=await ye.Z.post(`store/generate-new-checklist/${this.orderId}/`);console.log(e.data),this.$router.push(`/begin-checklist/${this.clickedRowId}`)}catch(e){console.log("error:",e),this.$notify({title:"An error occurred, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"})}finally{this.$store.commit("setIsLoading",!1)}},async checkExistingChecklist(){this.$store.commit("setIsLoading",!0),await ye.Z.post(`store/check-existing-checklist/${this.clickedRowId}/`).then((e=>{console.log(e.data),this.isActive=e.data.is_active,this.isExisting=e.data.is_existing,this.isExisting?this.isActive?this.$router.push(`/begin-checklist/${this.clickedRowId}`):this.$notify({title:"No active checklist found for this bom, please generate a new checklist",type:"bg-danger-subtle text-danger",duration:"5000"}):this.$notify({title:"No ongoing checklist found for this order, please generate a new checklist",type:"bg-danger-subtle text-danger",duration:"5000"})})).catch((e=>{console.log("error:",e),this.$notify({title:"An error occured, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"})})).finally((()=>{this.$store.commit("setIsLoading",!1)}))},viewOngoingChecklists(){this.clickedRowId&&this.$router.push(`/begin-checklist/${this.clickedRowId}`)},viewGeneratedChecklists(){this.clickedRowId&&this.$router.push(`/generated-checklists/${this.clickedRowId}`)}},mounted(){this.fetchData()}};const vw=(0,$e.Z)(yw,[["render",pw]]);var kw=vw;const ww={key:0,class:"container text-center"},Cw=(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1),Sw=(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1),Dw=[Cw,Sw],Pw={key:1,class:"container"},Iw={class:"row align-items-center"},Rw=(0,i.uE)('<div class="col-md-6 mt-4"><div class="d-flex align-items-center"><h2 class="mb-0">IQC for Checklist</h2><span class="ms-3 fs-4 text-muted">|</span><nav aria-label="breadcrumb" class="d-inline-block ms-3"><ol class="breadcrumb bg-transparent m-0 p-0"><li class="breadcrumb-item"><a href="/"><i class="fas fa-home me-1"></i>Home</a></li><li class="breadcrumb-item active" aria-current="page"><i class="fas fa-list-alt me-1"></i> Checklist </li></ol></nav></div></div>',1),xw={class:"col-md-6 mt-4 text-end"},$w={class:"container has-text-centered"},Lw={class:"d-flex justify-content-end"},Bw=["disabled"];function Uw(e,t,s,a,l,o){const r=(0,i.up)("PassedChecklistsTable");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",ww,Dw)):((0,i.wg)(),(0,i.iD)("div",Pw,[(0,i._)("div",Iw,[Rw,(0,i._)("div",xw,[(0,i._)("div",$w,[(0,i._)("div",Lw,[(0,i._)("button",{onClick:t[0]||(t[0]=(...e)=>o.startIqc&&o.startIqc(...e)),disabled:!l.isButtonEnabled,class:"btn btn-success btn-sm ms-2"}," Start IQC ",8,Bw)])])])]),(0,i.Wm)(r,{style:{"margin-top":"20px"},passed_checklists:l.passed_checklists,onRowClicked:o.handleRowClicked,onRowSelected:o.handleRowSelected,onRowDeselected:o.handleRowDeselected},null,8,["passed_checklists","onRowClicked","onRowSelected","onRowDeselected"])]))}function Nw(e,t,s,a,l,o){const r=(0,i.up)("ag-grid-vue");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(r,{style:{height:"500px"},class:"ag-theme-quartz",rowData:s.passed_checklists,defaultColDef:l.defaultColDef,columnDefs:l.colDefs,pagination:!0,onRowClicked:o.onRowClicked,onSelectionChanged:o.onSelectionChanged},null,8,["rowData","defaultColDef","columnDefs","onRowClicked","onSelectionChanged"])])}var Mw={components:{AgGridVue:ys.n},props:{passed_checklists:{type:Array,required:!0}},data(){return{colDefs:[{headerName:"Checklist ID",field:"id",checkboxSelection:!0},{headerName:"Unique Code",field:"unique_code",valueFormatter:function(e){return null===e.value?"null":e.value}},{headerName:"Project Name",field:"bom.product.project.name"},{headerName:"Product Name",field:"bom.product.name"},{headerName:"Product Code",field:"bom.product.product_code"},{headerName:"Updated At",field:"updated_at"},{headerName:"Updated By",valueGetter:function(e){if(console.log(e.data.updated_by),null!=e.data.updated_by){const t=e.data.updated_by.first_name||"",s=e.data.updated_by.last_name||"";return t||s?`${t} ${s}`:""}return""}},{headerName:"Created At",field:"created_at"},{headerName:"Created By",valueGetter:function(e){const t=e.data.created_by.first_name||"",s=e.data.created_by.last_name||"";return t||s?`${t} ${s}`:""}},{headerName:"Status",field:"status"},{headerName:"View",cellRenderer:this.viewButtonRenderer}],defaultColDef:{filter:!0,sortable:!0,resizable:!0,autoSize:!0},gridApi:null}},mounted(){},methods:{onRowClicked(e){this.$emit("rowClicked",e.data)},onSelectionChanged(e){const t=e.api.getSelectedRows(),s=t.length>0?t[0]:null;s?this.$emit("rowSelected",s):this.$emit("rowDeselected")},onGridReady(e){this.gridApi=e.api},viewButtonRenderer(e){const t=document.createElement("button");return t.innerHTML='<i class="fas fa-eye"></i>',t.classList.add("btn","btn-outline-secondary"),t.addEventListener("click",(()=>this.onViewClick(e.data))),t},onViewClick(e){"In Progress"===e.status?this.$router.push(`/begin-checklist/${e.bom.id}`):this.$router.push(`/checklist-details/${e.id}`)}}};const Ow=(0,$e.Z)(Mw,[["render",Nw],["__scopeId","data-v-b7ef300c"]]);var jw=Ow,Ew={components:{PassedChecklistsTable:jw},data(){return{selectedRow:null,clickedRowId:null,isButtonEnabled:!1,isExisting:!1,isActive:!1,passed_checklists:[]}},methods:{async fetchData(){try{this.$store.commit("setIsLoading",!0);const e=await ye.Z.get("store/get-passed-checklists/");this.passed_checklists=e.data.passed_checklists,console.log(e.data),this.$store.commit("setIsLoading",!1)}catch(e){console.error("Error fetching passed checklists:",e),this.$store.commit("setIsLoading",!1)}},handleRowClicked(e){console.log("Clicked Row:",e)},handleRowSelected(e){console.log("Row Selected:",e),e&&e.id&&(this.selectedRow=e,this.clickedRowId=e.id,this.isButtonEnabled=!0)},handleRowDeselected(){console.log("Row Deselected:"),this.isButtonEnabled=!1},startIqc(){this.clickedRowId&&this.$router.push(`/iqc-for-checklist/${this.clickedRowId}`)}},mounted(){this.fetchData()}};const Tw=(0,$e.Z)(Ew,[["render",Uw]]);var qw=Tw;const Aw=e=>((0,i.dD)("data-v-9b363590"),e=e(),(0,i.Cn)(),e),Fw={key:0,class:"container text-center"},Ww=Aw((()=>(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1))),Vw=Aw((()=>(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1))),Zw=[Ww,Vw],zw={key:1,class:"container"},Gw={class:"row align-items-center"},Qw={class:"col-md-6 mt-4"},Hw={class:"d-flex align-items-center"},Yw=Aw((()=>(0,i._)("h2",{class:"mb-0"},"Checklist",-1))),Kw=Aw((()=>(0,i._)("span",{class:"ms-3 fs-4 text-muted me-3"},"|",-1))),Jw={"aria-label":"breadcrumb"},Xw={class:"breadcrumb bg-transparent m-0 p-0 justify-content-end"},eC=Aw((()=>(0,i._)("li",{class:"breadcrumb-item"},[(0,i._)("a",{href:"/"},[(0,i._)("i",{class:"fas fa-home me-1"}),(0,i.Uk)("Home")])],-1))),tC={class:"breadcrumb-item active","aria-current":"page"},sC=Aw((()=>(0,i._)("i",{class:"fas fa-list-alt me-1"},null,-1))),aC=Aw((()=>(0,i._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,i._)("i",{class:"fas fa-spinner me-1"}),(0,i.Uk)(" Ongoing Checklist ")],-1))),iC={class:"modal fade",id:"generateLabelModal",tabindex:"-1","aria-labelledby":"generateLabelModalLabel","aria-hidden":"true"},lC={class:"modal-dialog"},oC={class:"modal-content"},rC=Aw((()=>(0,i._)("div",{class:"modal-header"},[(0,i._)("h1",{class:"modal-title fs-5",id:"generateLabelModalLabel"}," Generate Label "),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),cC={class:"modal-body"},dC={key:0},nC={key:0,id:"printable-content"},uC=["src"],mC={key:1},hC={key:1},pC={class:"modal-footer"},bC=Aw((()=>(0,i._)("button",{type:"button",class:"btn btn-dark","data-bs-dismiss":"modal"}," Cancel ",-1))),fC={key:0},gC={class:"modal fade",id:"endChecklistModal",tabindex:"-1","aria-labelledby":"endChecklistModalLabel","aria-hidden":"true"},_C={class:"modal-dialog"},yC={class:"modal-content"},vC=Aw((()=>(0,i._)("div",{class:"modal-header"},[(0,i._)("h1",{class:"modal-title fs-5",id:"endChecklistModalLabel"}," End Checklist "),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),kC=Aw((()=>(0,i._)("div",{class:"modal-body"}," Are you sure you want to end this checklist? ",-1))),wC={class:"modal-footer"},CC=Aw((()=>(0,i._)("button",{type:"button",class:"btn btn-dark","data-bs-dismiss":"modal"}," Cancel ",-1))),SC={class:"card border-primary mb-4 mt-4"},DC=Aw((()=>(0,i._)("div",{class:"card-header bg-primary text-white"},[(0,i._)("h4",{class:"mb-0"},"Bom Details")],-1))),PC={class:"card-body"},IC={class:"row"},RC={key:0,class:"col"},xC=Aw((()=>(0,i._)("strong",null,"Project Name:",-1))),$C={key:1,class:"col"},LC=Aw((()=>(0,i._)("strong",null,"Product Name:",-1))),BC={key:2,class:"col"},UC=Aw((()=>(0,i._)("strong",null,"BOM Rev No:",-1))),NC={key:3,class:"col"},MC=Aw((()=>(0,i._)("strong",null,"Issue Date:",-1))),OC={class:"accordion",id:"accordionPanelsStayOpenExample"},jC={class:"accordion-item"},EC={class:"accordion-header",id:"panelsStayOpen-headingOne"},TC={class:"accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseOne","aria-expanded":"true","aria-controls":"panelsStayOpen-collapseOne"},qC={key:0,class:"spinner-border ms-2",role:"status"},AC=Aw((()=>(0,i._)("span",{class:"visually-hidden"},"Loading...",-1))),FC=[AC],WC={key:1},VC=Aw((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),ZC=[VC],zC={id:"panelsStayOpen-collapseOne",class:"accordion-collapse collapse show","aria-labelledby":"panelsStayOpen-headingOne"},GC={class:"accordion-body"};function QC(e,t,s,a,l,o){const r=(0,i.up)("router-link"),c=(0,i.up)("IqcChecklistTable");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",Fw,Zw)):((0,i.wg)(),(0,i.iD)("div",zw,[(0,i._)("div",Gw,[(0,i._)("div",Qw,[(0,i._)("div",Hw,[Yw,Kw,(0,i._)("nav",Jw,[(0,i._)("ol",Xw,[eC,(0,i._)("li",tC,[(0,i.Wm)(r,{to:"/checklist"},{default:(0,i.w5)((()=>[sC,(0,i.Uk)(" IQC Checklist")])),_:1})]),aC])])])])]),(0,i._)("div",iC,[(0,i._)("div",lC,[(0,i._)("div",oC,[rC,(0,i._)("div",cC,[e.isChecklistPassed?((0,i.wg)(),(0,i.iD)("div",dC,[e.generatedQRCode?((0,i.wg)(),(0,i.iD)("div",nC,[(0,i._)("img",{src:e.generatedQRCode,alt:"QR Code"},null,8,uC)])):((0,i.wg)(),(0,i.iD)("p",mC," All Checks passed successfully, generate a label by pressing the generate button. "))])):((0,i.wg)(),(0,i.iD)("div",hC," You can only generate a label if all checks are passed "))]),(0,i._)("div",pC,[bC,e.isChecklistPassed?((0,i.wg)(),(0,i.iD)("div",fC,[e.generatedQRCode?((0,i.wg)(),(0,i.iD)("button",{key:0,type:"button",class:"btn btn-success",onClick:t[0]||(t[0]=(...t)=>e.printQRCode&&e.printQRCode(...t))}," Print ")):((0,i.wg)(),(0,i.iD)("button",{key:1,type:"button",class:"btn btn-success",onClick:t[1]||(t[1]=(...t)=>e.generateQRCode&&e.generateQRCode(...t))}," Generate "))])):(0,i.kq)("",!0)])])])]),(0,i._)("div",gC,[(0,i._)("div",_C,[(0,i._)("div",yC,[vC,kC,(0,i._)("div",wC,[CC,(0,i._)("button",{type:"button",class:"btn btn-danger",onClick:t[2]||(t[2]=(...t)=>e.endChecklist&&e.endChecklist(...t)),"data-bs-dismiss":"modal"}," End ")])])])]),(0,i._)("div",SC,[DC,(0,i._)("div",PC,[(0,i._)("div",IC,[l.checklist.bom?((0,i.wg)(),(0,i.iD)("div",RC,[xC,(0,i.Uk)(" "+(0,Oe.zw)(l.checklist.bom.product.project.name),1)])):(0,i.kq)("",!0),l.checklist.bom?((0,i.wg)(),(0,i.iD)("div",$C,[LC,(0,i.Uk)(" "+(0,Oe.zw)(l.checklist.bom.product.name),1)])):(0,i.kq)("",!0),l.checklist.bom?((0,i.wg)(),(0,i.iD)("div",BC,[UC,(0,i.Uk)(" "+(0,Oe.zw)(l.checklist.bom.bom_rev_number),1)])):(0,i.kq)("",!0),l.checklist.bom?((0,i.wg)(),(0,i.iD)("div",NC,[MC,(0,i.Uk)(" "+(0,Oe.zw)(l.checklist.bom.issue_date),1)])):(0,i.kq)("",!0)])])]),(0,i._)("div",OC,[(0,i._)("div",jC,[(0,i._)("h2",EC,[(0,i._)("button",TC,[(0,i.Uk)(" IQC Check "),!1===l.isIqcPassed?((0,i.wg)(),(0,i.iD)("div",qC,FC)):((0,i.wg)(),(0,i.iD)("div",WC,ZC))])]),(0,i._)("div",zC,[(0,i._)("div",GC,[(0,i.Wm)(c,{checklist_uids:l.checklist_uids,onRowClicked:o.handleRowClicked,onRowSelected:o.handleRowSelected},null,8,["checklist_uids","onRowClicked","onRowSelected"])])])])])]))}const HC=e=>((0,i.dD)("data-v-99fa986e"),e=e(),(0,i.Cn)(),e),YC={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},KC={class:"modal-dialog modal-lg"},JC={class:"modal-content"},XC=HC((()=>(0,i._)("div",{class:"modal-header"},[(0,i._)("h1",{class:"modal-title fs-5",id:"exampleModalLabel"}," Upload IQC File "),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),eS={class:"modal-body"},tS={class:"mb-3"},sS={class:"modal-footer"},aS=HC((()=>(0,i._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1)));function iS(e,t,s,a,l,o){const r=(0,i.up)("ag-grid-vue");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(r,{ref:"agGrid",style:{height:"550px"},class:"ag-theme-quartz",rowData:s.checklist_uids,defaultColDef:l.defaultColDef,columnDefs:l.colDefs,pagination:!0,onRowClicked:o.onRowClicked,onSelectionChanged:o.onSelectionChanged},null,8,["rowData","defaultColDef","columnDefs","onRowClicked","onSelectionChanged"]),(0,i._)("div",YC,[(0,i._)("div",KC,[(0,i._)("div",JC,[XC,(0,i._)("div",eS,[(0,i._)("div",tS,[(0,i._)("input",{type:"file",class:"form-control",id:"modalFileInput",onChange:t[0]||(t[0]=(...e)=>o.handleModalFileUpload&&o.handleModalFileUpload(...e))},null,32)])]),(0,i._)("div",sS,[aS,(0,i._)("button",{type:"button",class:"btn btn-primary",onClick:t[1]||(t[1]=(...e)=>o.uploadFileModal&&o.uploadFileModal(...e)),"data-bs-dismiss":"modal"}," Upload File ")])])])])])}var lS={props:{checklist_uids:{type:Array,required:!0}},components:{AgGridVue:ys.n},data(){return{gridApi:null,isGridReady:!1,colDefs:[{headerName:"UID",field:"uid",checkboxSelection:!0},{headerName:"VEPL Part No",field:"checklist_item.bom_line_item.part_number"},{headerName:"Updated At",field:"updated_at"},{headerName:"File",cellRenderer:this.fileCellRenderer}],defaultColDef:{filter:!0,sortable:!0,resizable:!0,autoSize:!0,domLayout:"autoHeight"},selectedRows:[],selectedFile:null,activeChecklistItemUidId:""}},methods:{fileCellRenderer(e){const t=e.data&&e.data.iqc_file_url;if(t){const s=t.split("/").pop(),a=document.createElement("a");return a.href=e.data.iqc_file_url,a.textContent=s,a.style.color="blue",a.download=!0,a}{const t=document.createElement("button");t.innerHTML='<i class="fas fa-upload me-1"></i> Upload IQC File',t.classList.add("btn-sm","btn-primary");const s=e.data.id;return t.addEventListener("click",(()=>this.triggerModal(s))),t.setAttribute("data-bs-toggle","modal"),t.setAttribute("data-bs-target","#exampleModal"),t}},triggerModal(e){this.activeChecklistItemUidId=e},uploadFileModal(){if(console.log("Upload file functionality"),console.log("this is the file=",this.selectedFile),this.$store.commit("setIsLoading",!0),this.activeChecklistItemUidId&&this.selectedFile){const e=new FormData;e.append("iqc_file",this.selectedFile),e.append("checklist_item_uid_id",this.activeChecklistItemUidId),ye.Z.post("store/upload-iqc-file/",e).then((e=>{this.$store.commit("setIsLoading",!1),console.log("File uploaded successfully",e.data),this.$notify({title:"File Uploaded Successfully",type:"bg-success-subtle text-success",duration:"5000"});const t=this.checklist_uids.every((e=>e.iqc_file_url));t&&this.$emit("iqcCheckPassed"),setTimeout((()=>{window.location.reload()}),1e3),this.$store.commit("setIsLoading",!1)})).catch((e=>{console.error("Error uploading file",e),this.$notify({title:"File Upload Unsuccessful",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1)})),this.activeChecklistItemUidId=""}else console.warn("No file selected or active checklist item UID."),this.$notify({title:"Please Select A File to Upload",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1)},onRowClicked(e){this.$emit("rowClicked",e.data)},onSelectionChanged(e){const t=e.api.getSelectedRows(),s=t.length>0?t[0]:null;s?this.$emit("rowSelected",s):this.$emit("rowDeselected")},handleModalFileUpload(e){this.selectedFile=e.target.files[0]}}};const oS=(0,$e.Z)(lS,[["render",iS],["__scopeId","data-v-99fa986e"]]);var rS=oS,cS={components:{IqcChecklistTable:rS},data(){return{activeBom:"",checklistItems:[],isIqcPassed:!1,checklist:[],checklist_uids:[],selectedRow:[]}},mounted(){this.getData()},methods:{getData(){this.$store.commit("setIsLoading",!0),ye.Z.get(`store/get-iqc-data/${this.$route.params.id}`).then((e=>{this.checklist=e.data.checklist,this.checklist_uids=e.data.checklist_uids,console.log(e.data),this.$store.commit("setIsLoading",!1)})).catch((e=>{console.error("Error fetching checklist details:",e),this.$store.commit("setIsLoading",!1)}))},downloadBOM(){try{const e=this.checklist.bom.bom_file_url;console.log("file url",e);const t=document.createElement("a");t.href=e,t.download=this.checklist.bom.bom_file_name,document.body.appendChild(t),t.click(),document.body.removeChild(t)}catch(e){console.error("Error downloading BOM:",e)}},handleRowClicked(e){console.log("Clicked Row:",e)},handleRowSelected(e){console.log("Row Selected:",e),this.selectedRow=e}},watch:{checklist_uids:{handler(e){this.isIqcPassed=e.every((e=>e.iqc_file_url))},deep:!0,immediate:!0}}};const dS=(0,$e.Z)(cS,[["render",QC],["__scopeId","data-v-9b363590"]]);var nS=dS;const uS={key:0,class:"container text-center"},mS=(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1),hS=(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1),pS=[mS,hS],bS={key:1,class:"container"},fS={class:"row align-items-center"},gS={class:"col-md-6 mt-4"},_S={class:"d-flex align-items-center"},yS=(0,i._)("h2",{class:"mb-0"},"Project Pricing",-1),vS=(0,i._)("span",{class:"ms-3 fs-4 text-muted"},"|",-1),kS={"aria-label":"breadcrumb",class:"d-inline-block ms-3"},wS={class:"breadcrumb bg-transparent m-0 p-0"},CS={class:"breadcrumb-item"},SS=(0,i._)("i",{class:"fas fa-home me-1"},null,-1),DS=(0,i._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,i._)("i",{class:"fas fa-project-diagram me-1"}),(0,i.Uk)(" Project Pricing ")],-1),PS={class:"card p-3 mb-4 mt-4"},IS={class:"row mb-3"},RS={class:"col-md-6"},xS=(0,i._)("label",{for:"projectDropdown",class:"form-label"},"Project",-1),$S=["value"],LS={class:"col-md-6"},BS=(0,i._)("label",{for:"productCode",class:"form-label"},"Product",-1),US=["value"],NS={class:"col"},MS=["disabled"],OS={key:0,class:"spinner-border spinner-border-sm me-1",role:"status","aria-hidden":"true"},jS={class:"text-muted"},ES={class:"modal fade",id:"pricingTableModal",tabindex:"-1","aria-labelledby":"pricingTableModalLabel","aria-hidden":"true"},TS={class:"modal-dialog modal-xl"},qS={class:"modal-content"},AS={class:"modal-header"},FS={class:"modal-title fs-5",id:"pricingTableModalLabel"},WS=(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),VS={class:"modal-body"},ZS=(0,i._)("div",{class:"modal-footer"},[(0,i._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ")],-1);function zS(e,t,s,l,o,r){const c=(0,i.up)("router-link"),d=(0,i.up)("PartNumberPricingTable");return(0,i.wg)(),(0,i.iD)(i.HY,null,[e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",uS,pS)):((0,i.wg)(),(0,i.iD)("div",bS,[(0,i._)("div",fS,[(0,i._)("div",gS,[(0,i._)("div",_S,[yS,vS,(0,i._)("nav",kS,[(0,i._)("ol",wS,[(0,i._)("li",CS,[(0,i.Wm)(c,{to:"/"},{default:(0,i.w5)((()=>[SS,(0,i.Uk)(" Home")])),_:1})]),DS])])])])]),(0,i._)("section",PS,[(0,i._)("div",IS,[(0,i._)("div",RS,[xS,(0,i.wy)((0,i._)("select",{class:"form-select",id:"projectDropdown","onUpdate:modelValue":t[0]||(t[0]=e=>o.form.selectedProject=e),required:""},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.projects,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e.id,value:e},(0,Oe.zw)(e.name),9,$S)))),128))],512),[[a.bM,o.form.selectedProject]])]),(0,i._)("div",LS,[BS,(0,i.wy)((0,i._)("select",{class:"form-select",id:"productCode","onUpdate:modelValue":t[1]||(t[1]=e=>o.form.selectedProduct=e),required:""},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.filteredProducts,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e.id,value:e},(0,Oe.zw)(e.name),9,US)))),128))],512),[[a.bM,o.form.selectedProduct]])])]),(0,i._)("div",NS,[(0,i._)("button",{class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#pricingTableModal",onClick:t[2]||(t[2]=(...e)=>r.fetchProductPrices&&r.fetchProductPrices(...e))}," Fetch Prices "),(0,i._)("button",{class:"btn btn-secondary ms-2",onClick:t[3]||(t[3]=(...e)=>r.refreshProductPrices&&r.refreshProductPrices(...e)),disabled:o.isRefreshing},[o.isRefreshing?((0,i.wg)(),(0,i.iD)("span",OS)):(0,i.kq)("",!0),(0,i.Uk)(" "+(0,Oe.zw)(o.isRefreshing?"Refreshing Prices...":"Refresh Prices"),1)],8,MS)]),(0,i._)("span",jS," Last Refreshed At: "+(0,Oe.zw)(o.lastUpdatedAt),1)])])),(0,i._)("div",ES,[(0,i._)("div",TS,[(0,i._)("div",qS,[(0,i._)("div",AS,[(0,i._)("h1",FS," Pricing Details - "+(0,Oe.zw)(o.form.selectedProject.name)+" ("+(0,Oe.zw)(o.form.selectedProduct.name)+") ",1),WS]),(0,i._)("div",VS,[(0,i.Wm)(d,{prices:o.partPrices},null,8,["prices"])]),ZS])])])],64)}const GS={key:0,class:"container text-center"},QS=(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1),HS=(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1),YS=[QS,HS],KS={key:1};function JS(e,t,s,a,l,o){const r=(0,i.up)("ag-grid-vue");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",GS,YS)):((0,i.wg)(),(0,i.iD)("div",KS,[(0,i.Wm)(r,{style:{height:"500px"},class:"ag-theme-quartz",rowData:s.prices,defaultColDef:l.defaultColDef,columnDefs:l.colDefs,pagination:!0},null,8,["rowData","defaultColDef","columnDefs"])]))}var XS={components:{AgGridVue:ys.n},props:{prices:{type:Array,required:!0}},data(){return{colDefs:[{field:"part_number",headerName:"VEPL Part Number"},{field:"part_name",headerName:"Name"},{field:"description",headerName:"Description"},{field:"rate",headerName:"Rate",cellRenderer:e=>{if(e.data.po_json){const t=e.data.po_json.currency_symbol,s=e.data.rate,a=this.$parsePriceToString(s);return`${t} ${a}`}return e.data.rate}},{field:"quantity",headerName:"Quantity"},{field:"total",headerName:"Total",cellRenderer:e=>{if(e.data.po_json){const t=e.data.po_json.currency_symbol,s=e.data.total,a=this.$parsePriceToString(s);return`${t} ${a}`}return e.data.total}}],defaultColDef:{filter:!0,sortable:!0,resizable:!0,autoSize:!0,autoSizeColumns:!0}}},methods:{}};const eD=(0,$e.Z)(XS,[["render",JS]]);var tD=eD,sD={components:{PartNumberPricingTable:tD},data(){return{projects:[],products:[],form:{selectedProject:"",selectedProduct:""},partPrices:[],lastUpdatedAt:"",isRefreshing:"1"===this.$route.query.is_refreshing}},mounted(){this.getProjectPricingPage();const e="1"===this.$route.query.is_refreshing;this.isRefreshing=e;const t=sessionStorage.getItem("refresh_prices_task_id");e&&t&&this.checkTaskStatus(t)},watch:{"$route.query.is_refreshing":function(e){this.isRefreshing="1"===e}},computed:{filteredProducts(){if(this.products&&this.projects){if(null!==this.form.selectedProject){const e=this.products.filter((e=>{const t=e.project;return t===this.form.selectedProject.id}));return e}return[]}return[]}},methods:{async getProjectPricingPage(){this.$store.commit("setIsLoading",!0),await ye.Z.get("/pricing/get-project-pricing-page").then((e=>{console.log(e.data),this.projects=e.data.projects,this.products=e.data.products,this.lastUpdatedAt=e.data.last_updated_at,this.$store.commit("setIsLoading",!1)})).catch((e=>{console.error("Error:",e),this.$store.commit("setIsLoading",!1)}))},async fetchProductPrices(){this.form.selectedProduct?(this.$store.commit("setIsLoading",!0),await ye.Z.get(`/pricing/get-product-pricing/${this.form.selectedProduct.id}/`).then((e=>{console.log(e.data),this.partPrices=e.data.part_prices,this.$store.commit("setIsLoading",!1)})).catch((e=>{console.error("Error:",e),this.$store.commit("setIsLoading",!1)}))):this.form.selectedProject?(this.$store.commit("setIsLoading",!0),await ye.Z.get(`/pricing/get-project-pricing/${this.form.selectedProject.id}/`).then((e=>{console.log(e.data),this.partPrices=e.data.part_prices,this.$store.commit("setIsLoading",!1)})).catch((e=>{console.error("Error:",e),this.$store.commit("setIsLoading",!1),this.$notify({title:"An error occured,please try again",type:"bg-danger-subtle text-danger",duration:"5000"})}))):this.$notify({title:"Please select the project or product to fetch prices",type:"bg-danger-subtle text-danger",duration:"5000"})},async refreshProductPrices(){await ye.Z.get("/pricing/refresh-product-pricing").then((e=>{if(console.log(e.data),this.$notify({title:"Pricing Refresh Started",type:"bg-success-subtle text-success",text:e.data.message,duration:"5000"}),"IN PROGRESS"===e.data.task_status||"PENDING"===e.data.task_status){const t=this.$route,s={is_refreshing:1};this.$router.replace({...t,query:{...t.query,...s}}),sessionStorage.setItem("refresh_prices_task_id",e.data.task_id),this.checkTaskStatus(e.data.task_id)}else"SUCCESS"===e.data.task_status?(this.$notify({title:"Prices Refreshed Successfully",type:"bg-success-subtle text-success",duration:"5000"}),this.$router.push("/project-pricing")):this.$notify({title:"Failed to Refresh Prices",type:"bg-danger-subtle text-danger",duration:"5000"})})).catch((e=>{console.error("Error:",e)}))},async checkTaskStatus(e){try{const t=await ye.Z.get(`store/check-task-status/${e}/`);if("IN PROGRESS"===t.data.task_status||"PENDING"===t.data.task_status){const t=this.$route,s={is_refreshing:1};this.$router.replace({...t,query:{...t.query,...s}}),setTimeout((()=>{this.checkTaskStatus(e)}),1e4)}else"SUCCESS"===t.data.task_status?(this.$notify({title:"Prices Refreshed Successfully",type:"bg-success-subtle text-success",duration:"5000"}),sessionStorage.removeItem("refresh_prices_task_id"),this.getProjectPricingPage(),this.$router.push("/project-pricing")):(this.$notify({title:"Failed to Refresh Prices",type:"bg-danger-subtle text-danger",duration:"5000"}),sessionStorage.removeItem("refresh_prices_task_id"),this.getProjectPricingPage(),this.$router.push("/project-pricing"))}catch(t){console.log("error:",t),this.$notify({title:"Failed to Refresh Prices",type:"bg-danger-subtle text-danger",duration:"5000"}),this.getProjectPricingPage(),sessionStorage.removeItem("refresh_prices_task_id"),this.$router.push("/project-pricing")}}}};const aD=(0,$e.Z)(sD,[["render",zS]]);var iD=aD;const lD=[{path:"/",name:"Home",component:nm},{path:"/login",name:"LoginForm",component:He},{path:"/bom",name:"BomLanding",component:Ds},{path:"/bom/upload",name:"UploadBom",component:ss},{path:"/CheckList",name:"CheckListOrderBased",component:kw,props:!0},{path:"/reports",name:"ReportsList",component:Ln},{path:"/dashboard",name:"CheckListsDashboard",component:nm},{path:"/checklist-report",name:"ChecklistReport",component:Hm},{path:"/bom/edit/:id",name:"BomLineLevel",component:ga,props:!0},{path:"/begin-checklist/:id",name:"begin-checklist",component:rr,props:!0},{path:"/generated-checklists/:id",name:"generated-checklist",component:Lr,props:!0},{path:"/checklist-details/:id",name:"checklist-details",component:Cn,props:!0},{path:"/users",name:"users",component:Sh},{path:"/users/edit-user/:id",name:"EditUser",component:uf},{path:"/users/create-user",name:"CreateUser",component:Sg},{path:"/bom-line-item/edit/:id",name:"BomLineItemEdit",component:eb,props:e=>({bom_id:e.params.id})},{path:"/orders",name:"OrdersLanding",component:qg},{path:"/orders/create",name:"OrderCreation",component:H_},{path:"/projects",name:"ProjectsLanding",component:yy},{path:"/projects/create-project",name:"CreateProject",component:tk},{path:"/project-edit/:id",name:"ProjectEdit",component:Pv,props:!0},{path:"/product/edit/:id",name:"ProductEdit",component:Gk,props:!0},{path:"/new",name:"CheckList",component:Za,props:!0},{path:"/iqc",name:"IqcLanding",component:qw,props:!0},{path:"/iqc-for-checklist/:id",name:"IqcForChecklist",component:nS,props:!0},{path:"/project-pricing",name:"ProjectPricing",component:iD}],oD=(0,Xe.p7)({history:(0,Xe.PO)("/"),routes:lD});var rD=oD,cD=s(65);const dD=(0,cD.MT)({state:{user:{token:"",isAuthenticated:!1,username:"",password:"",first_name:"",last_name:"",is_staff:!1,is_superuser:!1,is_store_team:!1,is_design_team:!1},isLoading:!1},mutations:{initializeStore(e){if(localStorage.getItem("token")){e.user.token=localStorage.getItem("token"),ye.Z.defaults.headers.common["Authorization"]="Token "+e.user.token,e.user.isAuthenticated=!0;const t=localStorage.getItem("userDetails");if(t){const s=JSON.parse(t);e.user.first_name=s.first_name,e.user.last_name=s.last_name,e.user.is_staff=s.is_staff,e.user.is_superuser=s.is_superuser,e.user.is_store_team=s.is_store_team,e.user.is_design_team=s.is_design_team}}else e.user.token="",e.user.isAuthenticated=!1;e.isLoading=!1},setToken(e,t){e.user.token=t,ye.Z.defaults.headers.common["Authorization"]="Token "+e.user.token,e.user.isAuthenticated=!0},setUserDetails(e,t){e.user.first_name=t.first_name,e.user.last_name=t.last_name,e.user.is_staff=t.is_staff,e.user.is_superuser=t.is_superuser,e.user.is_store_team=t.is_store_team,e.user.is_design_team=t.is_design_team},setIsLoading(e,t){e.isLoading=t},removeToken(e){e.user.token="",e.user.first_name="",e.user.last_name="",e.user.is_staff=!1,e.user.is_superuser=!1,e.user.is_store_team=!1,e.user.is_design_team=!1,e.user.isAuthenticated=!1,localStorage.removeItem("token"),localStorage.removeItem("userDetails"),ye.Z.defaults.headers.common["Authorization"]=""},setAuthentication(e,t){e.user.isAuthenticated=t}},actions:{},modules:{}});dD.commit("initializeStore");var nD=dD,uD=s(1037);s(8830),s(5572);const mD=e=>{const t=e.replace(/,/g,""),s=parseFloat(t);return s},hD=e=>{const t=parseFloat(e);return isNaN(t)?e:t.toLocaleString("en-IN")};ye.Z.defaults.baseURL="https://sfcsdev.xtractautomation.com/api/v1/";const pD=(0,a.ri)(Je);pD.config.globalProperties.$parsePriceToFloat=mD,pD.config.globalProperties.$parsePriceToString=hD,pD.use(nD).use(rD).use(uD.ZP),pD.mount("#app")}},t={};function s(a){var i=t[a];if(void 0!==i)return i.exports;var l=t[a]={exports:{}};return e[a].call(l.exports,l,l.exports,s),l.exports}s.m=e,function(){var e=[];s.O=function(t,a,i,l){if(!a){var o=1/0;for(n=0;n<e.length;n++){a=e[n][0],i=e[n][1],l=e[n][2];for(var r=!0,c=0;c<a.length;c++)(!1&l||o>=l)&&Object.keys(s.O).every((function(e){return s.O[e](a[c])}))?a.splice(c--,1):(r=!1,l<o&&(o=l));if(r){e.splice(n--,1);var d=i();void 0!==d&&(t=d)}}return t}l=l||0;for(var n=e.length;n>0&&e[n-1][2]>l;n--)e[n]=e[n-1];e[n]=[a,i,l]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,a){var i,l,o=a[0],r=a[1],c=a[2],d=0;if(o.some((function(t){return 0!==e[t]}))){for(i in r)s.o(r,i)&&(s.m[i]=r[i]);if(c)var n=c(s)}for(t&&t(a);d<o.length;d++)l=o[d],s.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return s.O(n)},a=self["webpackChunksfcs_checklist"]=self["webpackChunksfcs_checklist"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=s.O(void 0,[998],(function(){return s(8677)}));a=s.O(a)})();
//# sourceMappingURL=app.aafc245c.js.map