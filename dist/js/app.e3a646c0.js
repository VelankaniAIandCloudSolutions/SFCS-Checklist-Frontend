(function(){"use strict";var e={3271:function(e,t,a){var s=a(9242),i=a(3396);const l={id:"app"},o={key:0},n={key:1};function d(e,t,a,s,d,c){const r=(0,i.up)("LoginForm"),m=(0,i.up)("AdminLte"),u=(0,i.up)("notifications");return(0,i.wg)(),(0,i.iD)("div",l,["/login"==c.activeRoute?((0,i.wg)(),(0,i.iD)("div",o,[(0,i.Wm)(r)])):((0,i.wg)(),(0,i.iD)("div",n,[(0,i._)("div",null,[(0,i.Wm)(m)])])),(0,i.Wm)(u,{position:"bottom right",classes:"alert"})])}const c=e=>((0,i.dD)("data-v-1927805c"),e=e(),(0,i.Cn)(),e),r={class:"wrapper"},m={class:"main-header navbar navbar-expand navbar-white navbar-light"},u={class:"navbar-nav"},h=c((()=>(0,i._)("li",{class:"nav-item"},[(0,i._)("a",{class:"nav-link","data-widget":"pushmenu",href:"#",role:"button"},[(0,i._)("i",{class:"fas fa-bars"})])],-1))),p={class:"nav-item"},b=c((()=>(0,i._)("i",{class:"fas fa-home"},null,-1))),g={class:"navbar-nav ml-auto"},f={class:"nav-item"},_=c((()=>(0,i._)("i",{class:"fas fa-sign-out-alt"},null,-1))),v=[_],y={class:"main-sidebar sidebar-dark-primary elevation-4"},k=c((()=>(0,i._)("a",{href:"/",class:"brand-link"},[(0,i._)("img",{src:"https://content.jdmagicbox.com/comp/bangalore/73/080ppe03673/catalogue/velankani-software-pvt-ltd-electronic-city-bangalore-computer-software-developers-2rgz2h5-250.jpg",alt:"AdminLTE Logo",class:"brand-image img-circle elevation-3",style:{opacity:"0.8"}}),(0,i._)("span",{class:"brand-text font-weight-light"},"Velankani SFCS")],-1))),w={class:"sidebar"},C={class:"mt-2"},D={class:"nav nav-pills nav-sidebar flex-column","data-widget":"treeview",role:"menu","data-accordion":"false"},S={key:0,class:"nav-item text-left"},M=c((()=>(0,i._)("a",{href:"#",class:"nav-link"},[(0,i._)("i",{class:"nav-icon fas fa-users"}),(0,i._)("p",null,[(0,i.Uk)(" Accounts "),(0,i._)("i",{class:"right fas fa-angle-left"})])],-1))),P={class:"nav nav-treeview"},I={class:"nav-item"},x=c((()=>(0,i._)("i",{class:"fas fa-user-plus nav-icon"},null,-1))),R=c((()=>(0,i._)("p",null,"Users",-1))),$={key:1,class:"nav-item text-left"},L=c((()=>(0,i._)("a",{href:"#",class:"nav-link"},[(0,i._)("i",{class:"nav-icon fas fa-store"}),(0,i._)("p",null,[(0,i.Uk)(" Store "),(0,i._)("i",{class:"right fas fa-angle-left"})])],-1))),B={class:"nav nav-treeview"},U={class:"nav-item"},E=c((()=>(0,i._)("i",{class:"fas fa-chart-line nav-icon"},null,-1))),N=c((()=>(0,i._)("p",null,"Dashboard",-1))),O={class:"nav-item"},T=c((()=>(0,i._)("i",{class:"fas fa-list-ul nav-icon"},null,-1))),A=c((()=>(0,i._)("p",null,"Checklist",-1))),j={class:"nav-item"},F=c((()=>(0,i._)("i",{class:"fas fa-chart-bar nav-icon"},null,-1))),q=c((()=>(0,i._)("p",null,"Reports",-1))),W={key:2,class:"nav-item text-left"},V=c((()=>(0,i._)("a",{href:"#",class:"nav-link"},[(0,i._)("i",{class:"nav-icon fas fa-shopping-cart"}),(0,i._)("p",null,[(0,i.Uk)(" Orders "),(0,i._)("i",{class:"right fas fa-angle-left"})])],-1))),Z={class:"nav nav-treeview"},z={class:"nav-item"},G=c((()=>(0,i._)("i",{class:"fas fa-receipt nav-icon"},null,-1))),H=c((()=>(0,i._)("p",null,"Orders",-1))),Q={key:3,class:"nav-item text-left"},Y=c((()=>(0,i._)("a",{href:"#",class:"nav-link"},[(0,i._)("i",{class:"nav-icon fas fa-industry"}),(0,i._)("p",null,[(0,i.Uk)(" Material Management "),(0,i._)("i",{class:"right fas fa-angle-left"})])],-1))),K={class:"nav nav-treeview"},J={class:"nav-item"},X=c((()=>(0,i._)("i",{class:"fas fa-clipboard-list nav-icon"},null,-1))),ee=c((()=>(0,i._)("p",null,"Bill Of Materials",-1))),te={class:"nav-item"},ae=c((()=>(0,i._)("i",{class:"fas fa-project-diagram nav-icon"},null,-1))),se=c((()=>(0,i._)("p",null,"Projects",-1))),ie={key:4,class:"nav-item text-left"},le=c((()=>(0,i._)("a",{href:"#",class:"nav-link"},[(0,i._)("i",{class:"nav-icon fas fa-clipboard-check"}),(0,i._)("p",null,[(0,i.Uk)(" IQC "),(0,i._)("i",{class:"right fas fa-angle-left"})])],-1))),oe={class:"nav nav-treeview"},ne={class:"nav-item"},de=c((()=>(0,i._)("i",{class:"fas fa-tasks nav-icon"},null,-1))),ce=c((()=>(0,i._)("p",null,"IQC Checklist",-1))),re={key:5,class:"nav-item text-left"},me=c((()=>(0,i._)("a",{href:"#",class:"nav-link"},[(0,i._)("i",{class:"nav-icon fas fa-tag"}),(0,i._)("p",null,[(0,i.Uk)(" Pricing "),(0,i._)("i",{class:"right fas fa-angle-left"})])],-1))),ue={class:"nav nav-treeview"},he={class:"nav-item"},pe=c((()=>(0,i._)("i",{class:"fas fa-money-bill nav-icon"},null,-1))),be=c((()=>(0,i._)("p",null,"Project Pricing Details",-1))),ge={key:6,class:"nav-item text-left"},fe=c((()=>(0,i._)("a",{href:"#",class:"nav-link"},[(0,i._)("i",{class:"nav-icon fas fa-cogs"}),(0,i._)("p",null,[(0,i.Uk)(" Machine Management "),(0,i._)("i",{class:"right fas fa-angle-left"})])],-1))),_e={class:"nav nav-treeview"},ve={class:"nav-item"},ye=c((()=>(0,i._)("i",{class:"fas fa-calendar-alt nav-icon"},null,-1))),ke=c((()=>(0,i._)("p",null,"Maintenance Plan",-1))),we={class:"nav-item"},Ce=c((()=>(0,i._)("i",{class:"fas fa-calendar-xmark nav-icon"},null,-1))),De=c((()=>(0,i._)("p",null,"Mark Maintenance",-1))),Se={key:0,class:"content-wrapper"},Me={key:1,class:"content-wrapper"};function Pe(e,t,a,s,l,o){const n=(0,i.up)("router-link"),d=(0,i.up)("RestrictedAccess"),c=(0,i.up)("router-view");return(0,i.wg)(),(0,i.iD)("div",r,[(0,i._)("nav",m,[(0,i._)("ul",u,[h,(0,i._)("li",p,[(0,i.Wm)(n,{to:"/",class:"nav-link"},{default:(0,i.w5)((()=>[b])),_:1})])]),(0,i._)("ul",g,[(0,i._)("li",f,[(0,i._)("a",{href:"#",class:"nav-link",onClick:t[0]||(t[0]=(...e)=>o.logout&&o.logout(...e))},v)])])]),(0,i._)("aside",y,[k,(0,i._)("div",w,[(0,i._)("nav",C,[(0,i._)("ul",D,[e.$store.state.user.is_superuser?((0,i.wg)(),(0,i.iD)("li",S,[M,(0,i._)("ul",P,[(0,i._)("li",I,[(0,i.Wm)(n,{to:"/users",class:"nav-link"},{default:(0,i.w5)((()=>[x,R])),_:1})])])])):(0,i.kq)("",!0),e.$store.state.user.is_superuser||e.$store.state.user.is_store_team?((0,i.wg)(),(0,i.iD)("li",$,[L,(0,i._)("ul",B,[(0,i._)("li",U,[(0,i.Wm)(n,{to:"/dashboard",class:"nav-link"},{default:(0,i.w5)((()=>[E,N])),_:1})]),(0,i._)("li",O,[(0,i.Wm)(n,{to:"/checklist",class:"nav-link"},{default:(0,i.w5)((()=>[T,A])),_:1})]),(0,i._)("li",j,[(0,i.Wm)(n,{to:"/reports",class:"nav-link"},{default:(0,i.w5)((()=>[F,q])),_:1})])])])):(0,i.kq)("",!0),e.$store.state.user.is_superuser||e.$store.state.user.is_design_team?((0,i.wg)(),(0,i.iD)("li",W,[V,(0,i._)("ul",Z,[(0,i._)("li",z,[(0,i.Wm)(n,{to:"/orders",class:"nav-link"},{default:(0,i.w5)((()=>[G,H])),_:1})])])])):(0,i.kq)("",!0),e.$store.state.user.is_superuser||e.$store.state.user.is_design_team?((0,i.wg)(),(0,i.iD)("li",Q,[Y,(0,i._)("ul",K,[(0,i._)("li",J,[(0,i.Wm)(n,{to:"/bom",class:"nav-link"},{default:(0,i.w5)((()=>[X,ee])),_:1})]),(0,i._)("li",te,[(0,i.Wm)(n,{to:"/projects",class:"nav-link"},{default:(0,i.w5)((()=>[ae,se])),_:1})])])])):(0,i.kq)("",!0),e.$store.state.user.is_superuser||e.$store.state.user.is_design_team?((0,i.wg)(),(0,i.iD)("li",ie,[le,(0,i._)("ul",oe,[(0,i._)("li",ne,[(0,i.Wm)(n,{to:"/iqc",class:"nav-link"},{default:(0,i.w5)((()=>[de,ce])),_:1})])])])):(0,i.kq)("",!0),e.$store.state.user.is_superuser?((0,i.wg)(),(0,i.iD)("li",re,[me,(0,i._)("ul",ue,[(0,i._)("li",he,[(0,i.Wm)(n,{to:"/project-pricing",class:"nav-link"},{default:(0,i.w5)((()=>[pe,be])),_:1})])])])):(0,i.kq)("",!0),e.$store.state.user.is_superuser?((0,i.wg)(),(0,i.iD)("li",ge,[fe,(0,i._)("ul",_e,[(0,i._)("li",ve,[(0,i.Wm)(n,{to:"/machine/calendar-yearly-view",class:"nav-link"},{default:(0,i.w5)((()=>[ye,ke])),_:1})]),(0,i._)("li",we,[(0,i.Wm)(n,{to:"/machine/mark-maintenance-plan",class:"nav-link"},{default:(0,i.w5)((()=>[Ce,De])),_:1})])])])):(0,i.kq)("",!0)])])])]),l.showLogInModal?((0,i.wg)(),(0,i.iD)("div",Se,[(0,i.Wm)(d,{onCloseLogInModal:o.handleCloseLogInModal,show:l.showLogInModal},null,8,["onCloseLogInModal","show"])])):((0,i.wg)(),(0,i.iD)("div",Me,[(0,i.Wm)(c)]))])}a(560);var Ie=a(1076);const xe={key:0,class:"modal fade show",id:"customRestrictedAccessModal",tabindex:"-1","aria-labelledby":"customRestrictedAccessLabel","aria-modal":"true",role:"dialog",style:{display:"block"}},Re={class:"modal-dialog"},$e={class:"modal-content"},Le=(0,i._)("div",{class:"modal-header"},[(0,i._)("h4",{class:"modal-title",id:"customRestrictedAccessLabel"},[(0,i._)("strong",{style:{color:"#333"}},"Restriced Access")])],-1),Be={class:"modal-body"},Ue={class:"row justify-content-center"},Ee=(0,i._)("h6",null,"Please Log In to Continue",-1),Ne={class:"button mb-2"};function Oe(e,t,a,s,l,o){return(0,i.wg)(),(0,i.iD)("div",null,[a.show?((0,i.wg)(),(0,i.iD)("div",xe,[(0,i._)("div",Re,[(0,i._)("div",$e,[Le,(0,i._)("div",Be,[(0,i._)("div",Ue,[Ee,(0,i._)("div",Ne,[(0,i._)("button",{onClick:t[0]||(t[0]=t=>e.$emit("closeLogInModal")),class:"btn btn-outline-success btn-block",type:"button"}," Log In ")])])])])])])):(0,i.kq)("",!0),a.show?((0,i.wg)(),(0,i.iD)("div",{key:1,class:"modal-backdrop fade show",id:"customRestrictedAccessBackdrop",style:{display:"block"},onClick:t[1]||(t[1]=(...e)=>o.closeModal&&o.closeModal(...e))})):(0,i.kq)("",!0)])}var Te={data(){return{}},props:{show:{type:Boolean,required:!0,default:!1}},methods:{closeModal(){document.getElementById("customRestrictedAccessBackdrop").style.display="none",document.getElementById("customRestrictedAccessModal").style.display="none",document.getElementById("customRestrictedAccessModal").classList.remove("show")}}},Ae=a(89);const je=(0,Ae.Z)(Te,[["render",Oe]]);var Fe=je,qe={data(){return{showLogInModal:!1}},mounted(){this.checkLogin()},components:{RestrictedAccess:Fe},methods:{async logout(){await Ie.Z.post("token/logout/").then((e=>{console.log("Logged out",e.data),this.$store.commit("removeToken"),window.location.href="/login"})).catch((e=>{console.log(e)}))},async checkLogin(){await Ie.Z.get("accounts/check-login").then((e=>{200===e.status?this.showLogInModal=!1:this.showLogInModal=!0})).catch((e=>{console.error("Error in API call:",e),this.showLogInModal=!0,localStorage.removeItem("token"),this.$store.commit("removeToken")}))},handleCloseLogInModal(){this.showLogInModal=!1,this.$router.push("/login")}}};const We=(0,Ae.Z)(qe,[["render",Pe],["__scopeId","data-v-1927805c"]]);var Ve=We,Ze=a(7139);const ze=e=>((0,i.dD)("data-v-4bfce1ef"),e=e(),(0,i.Cn)(),e),Ge={class:"container"},He={class:"login"},Qe=ze((()=>(0,i._)("h1",null,"Velankani SFCS",-1))),Ye={class:"input-box"},Ke=ze((()=>(0,i._)("i",{class:"fa fa-envelope"},null,-1))),Je={class:"input-box"},Xe=["type"],et=ze((()=>(0,i._)("button",{type:"submit"},"Login",-1)));function tt(e,t,a,l,o,n){return(0,i.wg)(),(0,i.iD)("div",Ge,[(0,i._)("div",He,[Qe,(0,i._)("form",{onSubmit:t[3]||(t[3]=(0,s.iM)(((...e)=>n.handleSubmit&&n.handleSubmit(...e)),["prevent"]))},[(0,i._)("div",Ye,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>o.email=e),type:"email",placeholder:"Email"},null,512),[[s.nr,o.email]]),Ke]),(0,i._)("div",Je,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>o.password=e),type:o.showPassword?"text":"password",placeholder:"Password"},null,8,Xe),[[s.YZ,o.password]]),(0,i._)("i",{onClick:t[2]||(t[2]=(...e)=>n.togglePasswordVisibility&&n.togglePasswordVisibility(...e)),class:(0,Ze.C_)(o.showPassword?"fa fa-eye-slash":"fa fa-eye")},null,2)]),et],32)])])}var at={data(){return{email:"",password:"",errors:[],showPassword:!1}},methods:{togglePasswordVisibility(){this.showPassword=!this.showPassword},async handleSubmit(){if(this.$store.commit("setIsLoading",!0),this.errors=[],""===this.email&&this.errors.push("The email is missing!"),""===this.password&&this.errors.push("The password is missing!"),this.errors.length)this.$store.commit("setIsLoading",!1);else{const e={email:this.email,password:this.password};await Ie.Z.post("token/login/",e).then((e=>{this.$notify({title:"Login successful",type:"bg-success-subtle text-success",duration:5e3}),setTimeout((async()=>{const t=e.data.auth_token;this.$store.commit("setToken",t),Ie.Z.defaults.headers.common["Authorization"]="Token "+t,localStorage.setItem("token",t),console.log("Received Token:",t);const a=await Ie.Z.get("accounts/user/authenticated/"),s=a.data;console.log("User Details:",s),localStorage.setItem("userDetails",JSON.stringify(s)),this.$store.commit("setUserDetails",s),window.location.href="/dashboard"}),1e3)})).catch((e=>{this.$notify({title:"Login failed. Please check your credentials.",type:"alert-danger",duration:5e3}),console.error("Login failed:",e.response.data),this.errors.push("Login failed. Please check your credentials.")})).finally((()=>{this.$store.commit("setIsLoading",!1)}))}}}};const st=(0,Ae.Z)(at,[["render",tt],["__scopeId","data-v-4bfce1ef"]]);var it=st,lt={name:"App",components:{LoginForm:it,AdminLte:Ve},data(){return{}},computed:{activeRoute(){return this.$route.path}},methods:{}};const ot=(0,Ae.Z)(lt,[["render",d]]);var nt=ot,dt=(a(8052),a(2483));const ct=e=>((0,i.dD)("data-v-02bacf85"),e=e(),(0,i.Cn)(),e),rt={key:0,class:"container text-center"},mt=ct((()=>(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1))),ut=ct((()=>(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1))),ht=[mt,ut],pt={key:1,class:"container"},bt={class:"row align-items-center"},gt={class:"d-flex align-items-center mt-4"},ft=ct((()=>(0,i._)("h2",{class:"mb-0"},"Upload Bill Of Materials",-1))),_t=ct((()=>(0,i._)("span",{class:"ms-3 fs-4 text-muted"},"|",-1))),vt={"aria-label":"breadcrumb",class:"d-inline-block ms-3"},yt={class:"breadcrumb bg-transparent m-0 p-0"},kt=ct((()=>(0,i._)("li",{class:"breadcrumb-item"},[(0,i._)("a",{href:"/"},[(0,i._)("i",{class:"fas fa-home me-1"}),(0,i.Uk)("Home")])],-1))),wt={class:"breadcrumb-item"},Ct=ct((()=>(0,i._)("i",{class:"fas fa-clipboard-list me-1"},null,-1))),Dt=ct((()=>(0,i._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,i._)("i",{class:"fas fa-upload me-1"}),(0,i.Uk)(" Upload the bom ")],-1))),St={class:"card p-3 mb-4 mt-4"},Mt={class:"row mb-3"},Pt={class:"col-md-6"},It=ct((()=>(0,i._)("label",{for:"projectDropdown",class:"form-label"},[(0,i.Uk)("Select Project "),(0,i._)("span",{class:"text-danger"},"*")],-1))),xt=["value"],Rt={class:"col-md-6"},$t=ct((()=>(0,i._)("label",{for:"productCode",class:"form-label"},[(0,i.Uk)("Product "),(0,i._)("span",{class:"text-danger"},"*")],-1))),Lt=["value"],Bt={class:"row mb-3"},Ut={class:"col-md-6"},Et=ct((()=>(0,i._)("label",{for:"bomType",class:"form-label"},"BOM Type",-1))),Nt={class:"col-md-6"},Ot=ct((()=>(0,i._)("label",{for:"bomRevNo",class:"form-label"},[(0,i.Uk)("BOM REV No "),(0,i._)("span",{class:"text-danger"},"*")],-1))),Tt={key:0,class:"text-danger"},At={class:"row mb-3 justify-content-center"},jt={class:"col-md-6"},Ft=ct((()=>(0,i._)("label",{for:"issueDate",class:"form-label"},[(0,i.Uk)("Issue Date "),(0,i._)("span",{class:"text-danger"},"*")],-1))),qt={class:"card p-3 mb-4"},Wt=ct((()=>(0,i._)("label",{for:"bomFileInput",class:"form-label"},[(0,i._)("i",{class:"fas fa-cloud-upload-alt mr-2"}),(0,i.Uk)(" Choose BOM Excel file "),(0,i._)("span",{class:"text-danger"},"*")],-1))),Vt={class:"custom-file"},Zt={class:"custom-file-label",for:"bomFileInput"},zt=ct((()=>(0,i._)("div",{style:{"margin-bottom":"10px"}},null,-1))),Gt=ct((()=>(0,i._)("label",{for:"pcbFileInput",class:"form-label"},[(0,i._)("i",{class:"fas fa-cloud-upload-alt mr-2"}),(0,i.Uk)(" Choose PCB BBT Test Report ")],-1))),Ht={class:"custom-file"},Qt={class:"custom-file-label",for:"pcbFileInput"},Yt=ct((()=>(0,i._)("div",{style:{"margin-bottom":"10px"}},null,-1))),Kt={class:"card p-3"};function Jt(e,t,a,l,o,n){const d=(0,i.up)("router-link"),c=(0,i.up)("CustomModal");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",rt,ht)):((0,i.wg)(),(0,i.iD)("div",pt,[(0,i._)("div",bt,[(0,i._)("div",gt,[ft,_t,(0,i._)("nav",vt,[(0,i._)("ol",yt,[kt,(0,i._)("li",wt,[(0,i.Wm)(d,{to:"/bom"},{default:(0,i.w5)((()=>[Ct,(0,i.Uk)(" Bill Of Materials ")])),_:1})]),Dt])])])]),(0,i._)("section",St,[(0,i._)("div",Mt,[(0,i._)("div",Pt,[It,(0,i.wy)((0,i._)("select",{class:"form-select",id:"projectDropdown","onUpdate:modelValue":t[0]||(t[0]=e=>o.selectedProject=e),onChange:t[1]||(t[1]=(...t)=>e.loadProducts&&e.loadProducts(...t)),required:""},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.projects,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e.id,value:e.id},(0,Ze.zw)(e.name),9,xt)))),128))],544),[[s.bM,o.selectedProject]])]),(0,i._)("div",Rt,[$t,(0,i.wy)((0,i._)("select",{class:"form-select",id:"productCode","onUpdate:modelValue":t[2]||(t[2]=e=>o.selectedProduct=e),required:""},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.filteredProducts,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e.id,value:e.id},(0,Ze.zw)(e.name),9,Lt)))),128))],512),[[s.bM,o.selectedProduct]])])]),(0,i._)("div",Bt,[(0,i._)("div",Ut,[Et,(0,i.wy)((0,i._)("input",{type:"text",class:"form-control",id:"bomType","onUpdate:modelValue":t[3]||(t[3]=e=>o.bomType=e),required:""},null,512),[[s.nr,o.bomType]])]),(0,i._)("div",Nt,[Ot,(0,i.wy)((0,i._)("input",{type:"text",class:"form-control",id:"bomRevNo","onUpdate:modelValue":t[4]||(t[4]=e=>o.bomRevNo=e),onInput:t[5]||(t[5]=(...e)=>n.validateBomRevNo&&n.validateBomRevNo(...e)),required:""},null,544),[[s.nr,o.bomRevNo]]),""===o.bomRevNo||o.isValidBomRevNo?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("p",Tt," BOM REV No should be a decimal type with a minimum of 1.0. "))])]),(0,i._)("div",At,[(0,i._)("div",jt,[Ft,(0,i.wy)((0,i._)("input",{type:"date",class:"form-control",id:"issueDate","onUpdate:modelValue":t[6]||(t[6]=e=>o.issueDate=e),required:""},null,512),[[s.nr,o.issueDate]])])])]),(0,i._)("div",qt,[Wt,(0,i._)("div",Vt,[(0,i._)("input",{type:"file",class:"custom-file-input",id:"bomFileInput",onChange:t[7]||(t[7]=e=>n.handleFileUpload(e,"bom")),accept:".xls, .xlsx",required:""},null,32),(0,i._)("label",Zt,(0,Ze.zw)(o.uploadedFileNameBOM||"Select file"),1)]),zt,Gt,(0,i._)("div",Ht,[(0,i._)("input",{type:"file",class:"custom-file-input",id:"pcbFileInput",onChange:t[8]||(t[8]=e=>n.handleFileUpload(e,"pcb")),accept:".xls, .xlsx,.pdf",required:""},null,32),(0,i._)("label",Qt,(0,Ze.zw)(o.uploadedFileNamePCB||"Select file"),1)])]),Yt,(0,i._)("div",Kt,[(0,i._)("button",{type:"button",class:"btn btn-primary",onClick:t[9]||(t[9]=(...e)=>n.submitForm&&n.submitForm(...e))}," Upload BOM ")]),(0,i.Wm)(c,{show:o.isCustomModalVisible,onCloseModal:n.handleCloseModal,onHandleModalSubmitted:n.handleModalSubmission,onDismissModal:n.handleCloseModal},null,8,["show","onCloseModal","onHandleModalSubmitted","onDismissModal"])]))}const Xt={key:0,class:"modal fade show",id:"customBomRevisionModal",tabindex:"-1","aria-labelledby":"customBomRevisionLabel","aria-modal":"true",role:"dialog",style:{display:"block"}},ea={class:"modal-dialog",role:"document"},ta={class:"modal-content"},aa={class:"modal-header"},sa=(0,i._)("h4",{class:"modal-title",id:"customBomRevisionLabel"},[(0,i._)("strong",{style:{color:"#333"}}," Reason for BOM Revision")],-1),ia={class:"modal-body"},la={class:"row justify-content-center"},oa={class:"needs-validation",novalidate:""},na={class:"mb-4"},da=(0,i._)("div",{class:"invalid-feedback"},"Reason is required.",-1),ca={class:"button mb-2"};function ra(e,t,a,l,o,n){return(0,i.wg)(),(0,i.iD)("div",null,[a.show?((0,i.wg)(),(0,i.iD)("div",Xt,[(0,i._)("div",ea,[(0,i._)("div",ta,[(0,i._)("div",aa,[sa,(0,i._)("button",{type:"button",class:"btn-close","aria-label":"Close",onClick:t[0]||(t[0]=(...e)=>n.closeModal&&n.closeModal(...e))})]),(0,i._)("div",ia,[(0,i._)("div",la,[(0,i._)("form",oa,[(0,i._)("div",na,[(0,i.wy)((0,i._)("textarea",{"onUpdate:modelValue":t[1]||(t[1]=e=>o.bom_rev_change_note=e),class:"form-control",id:"revisionReason",required:"",placeholder:"Please provide the reason for the change...",style:{height:"150px"}},null,512),[[s.nr,o.bom_rev_change_note]]),da]),(0,i._)("div",ca,[(0,i._)("button",{class:"btn btn-outline-success btn-block",type:"button",onClick:t[2]||(t[2]=(...e)=>n.submitCustomBomRevision&&n.submitCustomBomRevision(...e))}," Submit ")])])])])])])])):(0,i.kq)("",!0),a.show?((0,i.wg)(),(0,i.iD)("div",{key:1,class:"modal-backdrop fade show",id:"customBomRevisionBackdrop",style:{display:"block"},onClick:t[3]||(t[3]=(...e)=>n.closeModal&&n.closeModal(...e))})):(0,i.kq)("",!0)])}var ma={data(){return{bom_rev_change_note:""}},props:{show:{type:Boolean,required:!0,default:!1}},methods:{closeModal(){document.getElementById("customBomRevisionBackdrop").style.display="none",document.getElementById("customBomRevisionModal").style.display="none",document.getElementById("customBomRevisionModal").classList.remove("show")},submitCustomBomRevision(){this.$emit("handle-modal-submitted",this.bom_rev_change_note),this.closeModal()}}};const ua=(0,Ae.Z)(ma,[["render",ra]]);var ha=ua,pa={components:{CustomModal:ha},data(){return{productName:"",productCode:"",bomType:"",bomRevNo:"",isValidBomRevNo:!0,issueDate:"",batchQuantity:1,productRevNo:"",uploadedFileName:null,uploadedFile:null,uploadedFileNameBOM:"",uploadedFileNamePCB:"",uploadedFileBOM:null,uploadedFilePCB:null,selectedProject:null,selectedProduct:null,projects:[],products:[],bom_rev_change_note:"",isCustomModalVisible:!1}},computed:{filteredProducts(){if(this.products&&this.projects&&this.products.length&&this.projects.length){if(console.log("selectedProject",this.selectedProject),null!==this.selectedProject){const e=this.products.filter((e=>{const t=e.project;return t===this.selectedProject}));return console.log("Filtered Products:",e),e}return console.log("All Products:",this.products),[]}return console.log("No Products or Projects available."),[]}},mounted(){this.getData()},methods:{openCustomModal(){this.isCustomModalVisible=!0},handleCloseModal(){this.isCustomModalVisible=!1},validateBomRevNo(){const e=/^\d+\.\d+$/;e.test(this.bomRevNo)?this.isValidBomRevNo=!0:this.isValidBomRevNo=!1},async getData(){try{const e=await Ie.Z.get("store/create-order/");console.log(e.data),this.projects=e.data.projects,this.projects=e.data.projects,this.products=e.data.products,console.log(this.projects)}catch(e){console.error("Error fetching projects:",e)}},async submitForm(){this.$store.commit("setIsLoading",!0);const e=new FormData;e.append("project_id",this.selectedProject),e.append("product_id",this.selectedProduct),e.append("bom_type",this.bomType),e.append("bom_rev_no",this.bomRevNo),e.append("issue_date",this.issueDate),e.append("bom_file",this.uploadedFileBOM),e.append("bom_rev_change_note",this.bom_rev_change_note),e.append("pcb_file",this.uploadedFilePCB),console.log("FormData:",e);try{const t=await Ie.Z.post("store/handle-bom-cases/",e,{headers:{"Content-Type":"multipart/form-data"}});if(console.log("Response from handle-bom-cases API:",t.data),200===t.status)console.log("hiiiiiiii",t.data.message),this.$notify({title:`BOM Already Exists With Rev No: ${t.data.bom_rev_number}`,type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1);else if(201===t.status)console.log("inside case two block"),console.log(t.data.message),this.$store.commit("setIsLoading",!1),console.log("Before setting isCustomModalVisible:",this.isCustomModalVisible),this.isCustomModalVisible=!0,console.log("After setting isCustomModalVisible:",this.isCustomModalVisible);else if(204===t.status){console.log(t.data.message),this.$store.commit("setIsLoading",!0);const a=await Ie.Z.post("store/upload-bom/",e,{headers:{"Content-Type":"multipart/form-data"}});console.log(a.data);const s=a.data.task_id;"IN PROGRESS"===a.data.task_status||"PENDING"===a.data.task_status?setTimeout((()=>{this.checkTaskStatus(s)}),1e4):"SUCCESS"===a.data.task_status?(this.$notify({title:"BOM Uploaded Successfully",type:"bg-success-subtle text-success",duration:"5000"}),this.$store.commit("setIsLoading",!1),this.$router.push("/bom")):(this.$notify({title:"BOM Upload Failed",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1))}}catch(t){console.log("error:",t),this.$notify({title:"An error occurred, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1)}},async uploadBom(e){this.$store.commit("setIsLoading",!0);try{const t=await Ie.Z.post("store/upload-bom/",e,{headers:{"Content-Type":"multipart/form-data"}});console.log(t.data);const a=t.data.task_id;"IN PROGRESS"===t.data.task_status||"PENDING"===t.data.task_status?setTimeout((()=>{this.checkTaskStatus(a)}),1e4):"SUCCESS"===t.data.task_status?(this.$notify({title:"BOM Uploaded Successfully",type:"bg-success-subtle text-success",duration:"5000"}),this.$store.commit("setIsLoading",!1),this.$router.push("/bom")):(this.$notify({title:"BOM Upload Failed",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1))}catch(t){console.log("error:",t),this.$notify({title:"An error occurred, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1)}},async checkTaskStatus(e){try{const t=await Ie.Z.get(`store/check-task-status/${e}/`);"IN PROGRESS"===t.data.task_status||"PENDING"===t.data.task_status?setTimeout((()=>{this.checkTaskStatus(e)}),5e3):"SUCCESS"===t.data.task_status?(this.$notify({title:"BOM Uploaded Successfully",type:"bg-success-subtle text-success",duration:"5000"}),this.$router.push("/bom"),this.$store.commit("setIsLoading",!1)):(this.$notify({title:"BOM Upload Failed",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1))}catch(t){console.log("error:",t),this.$notify({title:"An error occurred, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1)}},handleFileUpload(e,t){const a=e.target.files[0];a&&(console.log("Uploaded file:",a),"bom"===t?(console.log("BOM file uploaded:",a.name),this.uploadedFileNameBOM=a.name,this.uploadedFileBOM=a):"pcb"===t&&(console.log("PCB file uploaded:",a.name),this.uploadedFileNamePCB=a.name,this.uploadedFilePCB=a),this.uploadedFileBOM&&console.log("Uploaded BOM file:",this.uploadedFileBOM),this.uploadedFilePCB&&console.log("Uploaded PCB file:",this.uploadedFilePCB))},async handleModalSubmission(e){console.log("inside handleModal Submisison which will revece CHANGE NOTE IN ARFUMENT"),console.log("this is the change note ",e);const t=new FormData;t.append("project_id",this.selectedProject),t.append("product_id",this.selectedProduct),t.append("bom_type",this.bomType),t.append("bom_rev_no",this.bomRevNo),t.append("issue_date",this.issueDate),t.append("bom_file",this.uploadedFileBOM),t.append("pcb_file",this.uploadedFilePCB),t.append("bom_rev_change_note",e),console.log("FormData:",t),await this.uploadBom(t)},saveChanges(){this.bom_rev_change_note=this.bom_rev_change_note.trim(),""!==this.bom_rev_change_note?(console.log("BOM Revision Change Note:",this.bom_rev_change_note),this.formData.append(this.bom_rev_change_note),this.bom_rev_change_note=""):console.log("Error: BOM Revision Change Note is empty")}}};const ba=(0,Ae.Z)(pa,[["render",Jt],["__scopeId","data-v-02bacf85"]]);var ga=ba;const fa={key:0,class:"container text-center"},_a=(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1),va=(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1),ya=[_a,va],ka={key:1,class:"container"},wa={class:"row align-items-center"},Ca=(0,i.uE)('<div class="col-md-6 mt-4"><div class="d-flex align-items-center"><h2 class="mb-0">Bill Of Materials</h2><span class="ms-3 fs-4 text-muted">|</span><nav aria-label="breadcrumb" class="d-inline-block ms-3"><ol class="breadcrumb bg-transparent m-0 p-0"><li class="breadcrumb-item"><a href="/"><i class="fas fa-home me-1"></i>Home</a></li><li class="breadcrumb-item active" aria-current="page"><i class="fas fa-clipboard-list me-1"></i> Bill Of Materials </li></ol></nav></div></div>',1),Da={class:"col-md-6 d-flex justify-content-end mt-4"};function Sa(e,t,a,s,l,o){const n=(0,i.up)("router-link"),d=(0,i.up)("BomDetailsTable");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",fa,ya)):((0,i.wg)(),(0,i.iD)("div",ka,[(0,i._)("div",wa,[Ca,(0,i._)("div",Da,[(0,i.Wm)(n,{to:"/bom/upload",class:"btn btn-primary btn-sm ms-2"},{default:(0,i.w5)((()=>[(0,i.Uk)(" Upload BOM ")])),_:1})])]),(0,i.Wm)(d,{style:{"margin-top":"20px"},boms:l.boms,onRowClicked:o.handleRowClicked,onRowSelected:o.handleRowSelected},null,8,["boms","onRowClicked","onRowSelected"])]))}const Ma=e=>((0,i.dD)("data-v-1f2a71f0"),e=e(),(0,i.Cn)(),e),Pa={class:"modal fade",id:"bomRevisionNoteModal",tabindex:"-1","aria-labelledby":"bomRevisionNoteModalLabel","aria-hidden":"true"},Ia={class:"modal-dialog"},xa={class:"modal-content"},Ra=Ma((()=>(0,i._)("div",{class:"modal-header"},[(0,i._)("h5",{class:"modal-title",id:"bomRevisionNoteModalLabel"}," BOM Revision Note "),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),$a={class:"modal-body"};function La(e,t,a,s,l,o){const n=(0,i.up)("ag-grid-vue");return(0,i.wg)(),(0,i.iD)("div",null,[a.boms.length>0?((0,i.wg)(),(0,i.j4)(n,{key:0,style:{height:"500px"},class:"ag-theme-quartz",rowData:a.boms,defaultColDef:l.defaultColDef,columnDefs:l.colDefs,pagination:!0,onRowClicked:o.onRowClicked,onRowSelected:o.onRowSelected},null,8,["rowData","defaultColDef","columnDefs","onRowClicked","onRowSelected"])):(0,i.kq)("",!0),(0,i._)("div",Pa,[(0,i._)("div",Ia,[(0,i._)("div",xa,[Ra,(0,i._)("div",$a,[(0,i._)("p",null,(0,Ze.zw)(l.selectedBomRevisionNote),1)])])])])])}var Ba=a(6732),Ua={name:"BombDetailsTable",components:{AgGridVue:Ba.n},props:{boms:{type:Array,required:!0}},data(){return{colDefs:[{field:"id",hide:!0},{field:"product.project.name",headerCheckboxSelection:!0,checkboxSelection:!0,headerName:"Project Name"},{field:"product.name",headerName:"Product Name"},{field:"product.product_code",headerName:"Product Code"},{field:"bom_type.name",headerName:"BOM Type"},{field:"issue_date",headerName:"Issue Date"},{field:"product.product_rev_number",headerName:"Product Rev No"},{field:"bom_rev_number",headerName:"BOM Rev No"},{headerName:"BOM Revision Note",cellRenderer:this.bomRevisionNoteRenderer},{headerName:"Actions",cellRenderer:this.editButtonRenderer}],defaultColDef:{filter:!0,sortable:!0,resizable:!0,autoSize:!0},selectedRows:[],selectedBomRevisionNote:""}},methods:{onRowClicked(e){this.$emit("rowClicked",e.data),this.$router.push(`/bom/edit/${e.data.id}`)},onRowSelected(e){e.node.isSelected()&&this.$emit("rowSelected",e.node.data)},onSelectionChanged(){this.$refs.agGrid&&this.$refs.agGrid.api&&(this.selectedRows=this.$refs.agGrid.api.getSelectedRows())},editButtonRenderer(e){console.log(e);const t=document.createElement("button");return t.innerHTML='<i class="fas fa-edit"></i>',t.classList.add("btn","btn-primary"),t.addEventListener("click",(()=>this.onEditClick(e.data.id))),t},onEditClick(e){this.$router.push(`/bom/edit/${e}`)},bomRevisionNoteRenderer(e){const t=document.createElement("div");if(e.data.change_note){const a=document.createElement("button");a.innerHTML='<i class="fas fa-eye"></i>',a.classList.add("btn","btn-secondary"),a.dataset.bsToggle="modal",a.dataset.bsTarget="#bomRevisionNoteModal",a.addEventListener("click",(t=>{t.stopPropagation(),this.loadBomRevisionChangeNoteInModal(e.data)})),t.appendChild(a)}else{const e=document.createElement("span");e.innerText="No Change",e.classList.add("text-muted"),t.appendChild(e)}return t},loadBomRevisionChangeNoteInModal(e){console.log("to set the data in the modal",e),console.log("revision note",e.change_note),this.selectedBomRevisionNote=e.change_note}}};const Ea=(0,Ae.Z)(Ua,[["render",La],["__scopeId","data-v-1f2a71f0"]]);var Na=Ea,Oa={components:{BomDetailsTable:Na},data(){return{boms:[]}},methods:{async fetchData(){try{this.$store.commit("setIsLoading",!0);const e=await Ie.Z.get("store/get-boms/");console.log("response.data",e.data),this.boms=e.data.boms,console.log("boms",this.boms),this.$store.commit("setIsLoading",!1)}catch(e){console.error("Error fetching BOM data:",e),this.$store.commit("setIsLoading",!1)}},handleRowClicked(e){console.log("Clicked Row:",e)},handleRowSelected(e){console.log("Row Selected:",e),this.selectedRow=e}},mounted(){this.fetchData()}};const Ta=(0,Ae.Z)(Oa,[["render",Sa]]);var Aa=Ta;const ja=e=>((0,i.dD)("data-v-0fd0776e"),e=e(),(0,i.Cn)(),e),Fa={key:0,class:"container text-center"},qa=ja((()=>(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1))),Wa=ja((()=>(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1))),Va=[qa,Wa],Za={key:1,class:"container"},za={class:"row align-items-center"},Ga={class:"d-flex align-items-center mt-4"},Ha=ja((()=>(0,i._)("h2",{class:"mb-0"},"BOM Details",-1))),Qa=ja((()=>(0,i._)("span",{class:"ms-3 fs-4 text-muted"},"|",-1))),Ya={"aria-label":"breadcrumb",class:"d-inline-block ms-3"},Ka={class:"breadcrumb bg-transparent m-0 p-0"},Ja=ja((()=>(0,i._)("li",{class:"breadcrumb-item"},[(0,i._)("a",{href:"/"},[(0,i._)("i",{class:"fas fa-home me-1"}),(0,i.Uk)("Home")])],-1))),Xa={class:"breadcrumb-item"},es=ja((()=>(0,i._)("i",{class:"fas fa-clipboard-list me-1"},null,-1))),ts=ja((()=>(0,i._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,i._)("i",{class:"fas fa-list-alt me-1"}),(0,i.Uk)(" Bom Details ")],-1))),as={class:"card",style:{"margin-top":"20px",padding:"10px"}},ss={class:"card-body"},is={class:"row"},ls={class:"col-md-4 mb-2"},os=ja((()=>(0,i._)("label",{class:"fw-bold"},"Project Name:",-1))),ns={key:0},ds={class:"col-md-4 mb-2"},cs=ja((()=>(0,i._)("label",{class:"fw-bold"},"BOM Type:",-1))),rs={key:0},ms={class:"col-md-4 mb-2"},us=ja((()=>(0,i._)("label",{class:"fw-bold"},"Issue Date:",-1))),hs={key:0},ps={class:"col-md-4 mb-2"},bs=ja((()=>(0,i._)("label",{class:"fw-bold"},"Product Name:",-1))),gs={key:0},fs={class:"col-md-4 mb-2"},_s=ja((()=>(0,i._)("label",{class:"fw-bold"},"BOM Rev No:",-1))),vs={key:0},ys={class:"col-md-4 mb-2"},ks=ja((()=>(0,i._)("label",{class:"fw-bold"},"Product Rev No:",-1))),ws={key:0},Cs=ja((()=>(0,i._)("div",{class:"mt-4"},null,-1)));function Ds(e,t,a,s,l,o){const n=(0,i.up)("router-link"),d=(0,i.up)("BomItemsTable");return(0,i.wg)(),(0,i.iD)("div",null,[e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",Fa,Va)):((0,i.wg)(),(0,i.iD)("div",Za,[(0,i._)("div",za,[(0,i._)("div",Ga,[Ha,Qa,(0,i._)("nav",Ya,[(0,i._)("ol",Ka,[Ja,(0,i._)("li",Xa,[(0,i.Wm)(n,{to:"/bom"},{default:(0,i.w5)((()=>[es,(0,i.Uk)("Bill of Materials")])),_:1})]),ts])]),(0,i._)("button",{class:"btn-sm btn-warning ml-auto",onClick:t[0]||(t[0]=(...e)=>o.downloadPCBReport&&o.downloadPCBReport(...e))}," Open PCB Report "),(0,i._)("button",{class:"btn-sm btn-primary ml-3",onClick:t[1]||(t[1]=(...e)=>o.downloadBOM&&o.downloadBOM(...e))}," Download BOM ")])]),(0,i._)("div",as,[(0,i._)("div",ss,[(0,i._)("div",is,[(0,i._)("div",ls,[os,l.bom.product?((0,i.wg)(),(0,i.iD)("div",ns,(0,Ze.zw)(l.bom.product.project.name),1)):(0,i.kq)("",!0)]),(0,i._)("div",ds,[cs,l.bom.bom_type?((0,i.wg)(),(0,i.iD)("div",rs,(0,Ze.zw)(l.bom.bom_type.name),1)):(0,i.kq)("",!0)]),(0,i._)("div",ms,[us,l.bom.issue_date?((0,i.wg)(),(0,i.iD)("div",hs,(0,Ze.zw)(l.bom.issue_date),1)):(0,i.kq)("",!0)]),(0,i._)("div",ps,[bs,l.bom.product?((0,i.wg)(),(0,i.iD)("div",gs,(0,Ze.zw)(l.bom.product.name),1)):(0,i.kq)("",!0)]),(0,i._)("div",fs,[_s,l.bom.bom_rev_number?((0,i.wg)(),(0,i.iD)("div",vs,(0,Ze.zw)(l.bom.bom_rev_number),1)):(0,i.kq)("",!0)]),(0,i._)("div",ys,[ks,l.bom.product?((0,i.wg)(),(0,i.iD)("div",ws,(0,Ze.zw)(l.bom.product.product_rev_number),1)):(0,i.kq)("",!0)])])])]),Cs,(0,i.Wm)(d,{bom:l.bom.bom_line_items,onRowClicked:o.handleRowClicked,onRowSelected:o.handleRowSelected},null,8,["bom","onRowClicked","onRowSelected"])]))])}function Ss(e,t,a,s,l,o){const n=(0,i.up)("ag-grid-vue");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(n,{style:{height:"500px"},class:"ag-theme-quartz",rowData:a.bom,defaultColDef:l.defaultColDef,columnDefs:l.colDefs,pagination:!0,onRowClicked:o.onRowClicked,frameworkComponents:{editButtonRenderer:o.editButtonRenderer}},null,8,["rowData","defaultColDef","columnDefs","onRowClicked","frameworkComponents"])])}var Ms={name:"BomItemDetails",components:{AgGridVue:Ba.n},props:{bom:{type:Array,required:!0}},data(){return{colDefs:[{headerName:"ID",field:"id",hide:!0},{headerName:" Level",field:"level"},{headerName:"VEPL Part Number",field:"part_number"},{headerName:"Priority Level",field:"priority_level"},{headerName:"Value",field:"value"},{headerName:"PCB Footprint",field:"pcb_footprint"},{headerName:"Type",field:"line_item_type.name"},{headerName:"Description",field:"description"},{headerName:"References",valueGetter:function(e){const t=e.data.references;if(t&&t.length>0){const e=t.map((e=>e.name));return e.join(", ")}return""}},{headerName:"Manufacturer Parts",valueGetter:function(e){const t=e.data.manufacturer_parts;if(t&&t.length>0){const e=t.map((e=>{const t=e.manufacturer;return t?`${e.part_number} - ${t.name}`:""}));return e.join(", ")}return""}},{headerName:"Customer Part Number",field:"customer_part_number"},{headerName:"Quantity",field:"quantity"},{headerName:"UOM",field:"uom"},{headerName:"Assembly Stage",field:"assembly_stage.name"},{headerName:"ECN",field:"ecn"},{headerName:"MSL",field:"msl"},{headerName:"Remarks",field:"remarks"}],defaultColDef:{filter:!0,sortable:!0,resizable:!0,autoSize:!0},selectedRows:[]}},mounted(){},methods:{onRowClicked(e){this.$emit("rowClicked",e.data)},onRowSelected(e){e.node.isSelected()&&this.$emit("rowSelected",e.node.data)},editButtonRenderer(e){const t=document.createElement("button");return t.innerHTML='<i class="fas fa-edit"></i>',t.classList.add("btn","btn-primary"),t.addEventListener("click",(()=>this.onEditClick(e.data.id))),t},onEditClick(e){this.$router.push({name:"BomLineItemEdit",params:{id:e}})}}};const Ps=(0,Ae.Z)(Ms,[["render",Ss]]);var Is=Ps,xs={components:{BomItemsTable:Is},data(){return{bom:""}},methods:{handleRowClicked(e){console.log("Row clicked:",e)},handleRowSelected(e){console.log("Row selected:",e)},async fetchData(){this.$store.commit("setIsLoading",!0),await Ie.Z.get(`store/get-boms/${this.$route.params.id}/`).then((e=>{console.log(e.data),this.bom=e.data.bom,this.$store.commit("setIsLoading",!1)})).catch((e=>{console.error("Error fetching data:",e),this.$store.commit("setIsLoading",!1)}))},downloadBOM(){try{const e=this.bom.bom_file_url,t=document.createElement("a");t.href=e,t.download=this.bom.bom_file_name,document.body.appendChild(t),t.click(),document.body.removeChild(t)}catch(e){console.error("Error downloading BOM:",e)}},downloadPCBReport(){try{const e=this.bom.pcb_file_url;if(!e)return void alert("PCB report is not available, as it was not attached.");const t=document.createElement("a");t.href=e,t.target="_blank",document.body.appendChild(t),t.click(),document.body.removeChild(t)}catch(e){console.error("Error opening PCB report in a new tab:",e)}}},mounted(){this.fetchData()}};const Rs=(0,Ae.Z)(xs,[["render",Ds],["__scopeId","data-v-0fd0776e"]]);var $s=Rs;const Ls={key:0,class:"container text-center"},Bs=(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1),Us=(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1),Es=[Bs,Us],Ns={key:1,class:"container"},Os={class:"row align-items-center"},Ts=(0,i.uE)('<div class="col-md-6 mt-4"><div class="d-flex align-items-center"><h2 class="mb-0">Checklist</h2><span class="ms-3 fs-4 text-muted">|</span><nav aria-label="breadcrumb" class="d-inline-block ms-3"><ol class="breadcrumb bg-transparent m-0 p-0"><li class="breadcrumb-item"><a href="/"><i class="fas fa-home me-1"></i>Home</a></li><li class="breadcrumb-item active" aria-current="page"><i class="fas fa-list-alt me-1"></i> Checklist </li></ol></nav></div></div>',1),As={class:"col-md-6 mt-4 text-end"},js={class:"container has-text-centered"},Fs={class:"d-flex"},qs=["disabled"],Ws=["disabled"],Vs=["disabled"],Zs={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},zs={class:"modal-dialog"},Gs={class:"modal-content"},Hs=(0,i._)("div",{class:"modal-header"},[(0,i._)("h1",{class:"modal-title fs-5",id:"exampleModalLabel"}," Fill the Required Batch Quantity "),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Qs={class:"modal-body"},Ys={class:"modal-footer"},Ks=(0,i._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1);function Js(e,t,a,l,o,n){const d=(0,i.up)("BomDetailsTableWithoutEdit");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",Ls,Es)):((0,i.wg)(),(0,i.iD)("div",Ns,[(0,i._)("div",Os,[Ts,(0,i._)("div",As,[(0,i._)("div",js,[(0,i._)("div",Fs,[(0,i._)("button",{type:"button",disabled:!o.isButtonEnabled,class:"btn btn-primary btn-sm","data-bs-toggle":"modal","data-bs-target":"#exampleModal"}," Generate New Checklist ",8,qs),(0,i._)("button",{onClick:t[0]||(t[0]=(...e)=>n.checkExistingChecklist&&n.checkExistingChecklist(...e)),disabled:!o.isButtonEnabled,class:"btn btn-warning btn-sm ms-2"}," View Ongoing Checklist ",8,Ws),(0,i._)("button",{onClick:t[1]||(t[1]=(...e)=>n.viewGeneratedChecklists&&n.viewGeneratedChecklists(...e)),disabled:!o.isButtonEnabled,class:"btn btn-success btn-sm ms-2"}," View Generated Checklists ",8,Vs)])])])]),(0,i.Wm)(d,{style:{"margin-top":"20px"},rowData:o.rowData,onRowClicked:n.handleRowClicked,onRowSelected:n.handleRowSelected,onRowDeselected:n.handleRowDeselected},null,8,["rowData","onRowClicked","onRowSelected","onRowDeselected"]),(0,i._)("div",Zs,[(0,i._)("div",zs,[(0,i._)("div",Gs,[Hs,(0,i._)("div",Qs,[(0,i.wy)((0,i._)("input",{type:"number",class:"form-control",id:"requiredBatchQuantity","onUpdate:modelValue":t[2]||(t[2]=e=>o.batch_quantity=e),placeholder:"Enter Batch Quantity",min:"1"},null,512),[[s.nr,o.batch_quantity]])]),(0,i._)("div",Ys,[Ks,(0,i._)("button",{onClick:t[3]||(t[3]=(...e)=>n.checkAndGenerateChecklist&&n.checkAndGenerateChecklist(...e)),type:"button",class:"btn btn-primary","data-bs-dismiss":"modal"}," Generate Checklist ")])])])])]))}function Xs(e,t,a,s,l,o){const n=(0,i.up)("ag-grid-vue");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(n,{style:{height:"500px"},class:"ag-theme-quartz",rowData:a.rowData,defaultColDef:l.defaultColDef,columnDefs:l.colDefs,pagination:!0,rowSelection:"single",onRowClicked:o.onRowClicked,onSelectionChanged:o.onSelectionChanged},null,8,["rowData","defaultColDef","columnDefs","onRowClicked","onSelectionChanged"])])}var ei={name:"App",components:{AgGridVue:Ba.n},props:{rowData:{type:Array,required:!0}},data(){return{colDefs:[{field:"id",hide:!0},{field:"product.name",headerCheckboxSelection:!0,checkboxSelection:!0,headerName:"Product Name"},{field:"product.product_code",headerName:"Product Code"},{field:"bom_type.name",headerName:"BOM Type"},{field:"bom_rev_number",headerName:"BOM Rev No"},{field:"issue_date",headerName:"Issue Date"},{field:"product.product_rev_number",headerName:"Product Rev No"}],defaultColDef:{filter:!0,sortable:!0,resizable:!0,autoSize:!0},selectedRows:[]}},methods:{onRowClicked(e){this.$emit("rowClicked",e.data)},onSelectionChanged(e){const t=e.api.getSelectedRows(),a=t.length>0?t[0]:null;a?this.$emit("rowSelected",a):this.$emit("rowDeselected")},onEditClick(e){this.$router.push(`/bom/edit/${e}`)}}};const ti=(0,Ae.Z)(ei,[["render",Xs]]);var ai=ti,si={components:{BomDetailsTableWithoutEdit:ai},data(){return{rowData:[],selectedRow:null,clickedRowId:null,isButtonEnabled:!1,isExisting:!1,isActive:!1,batch_quantity:1}},methods:{async fetchData(){try{this.$store.commit("setIsLoading",!0);const e=await Ie.Z.get("store/get-boms/");this.rowData=e.data.boms,console.log(e.data.boms),this.$store.commit("setIsLoading",!1)}catch(e){console.error("Error fetching BOM data:",e),this.$store.commit("setIsLoading",!1)}},handleRowClicked(e){console.log("Clicked Row:",e)},handleRowSelected(e){console.log("Row Selected:",e),e&&e.id&&(this.selectedRow=e,this.clickedRowId=e.id,this.isButtonEnabled=!0)},handleRowDeselected(){console.log("Row Deselected:"),this.isButtonEnabled=!1},async checkAndGenerateChecklist(){this.$store.commit("setIsLoading",!0),await Ie.Z.post(`store/check-existing-checklist/${this.clickedRowId}/`).then((e=>{console.log(e.data),this.isActive=e.data.is_active,this.isExisting=e.data.is_existing,this.isExisting?this.$notify({title:"There is already an active ongoing checklist for this bom, please end that checklist by viewing the ongoing checklist to generate a new one.",type:"bg-danger-subtle text-danger",duration:"5000"}):this.generateChecklist()})).catch((e=>{console.log("error:",e),this.$notify({title:"An error occured, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"})})).finally((()=>{this.$store.commit("setIsLoading",!1)}))},async generateChecklist(){this.$store.commit("setIsLoading",!0);const e={batch_quantity:this.batch_quantity};await Ie.Z.post(`store/generate-new-checklist/${this.clickedRowId}/`,e).then((e=>{console.log(e.data),this.$router.push(`/begin-checklist/${this.clickedRowId}`)})).catch((e=>{console.log("error:",e),this.$notify({title:e.response.data.error,type:"bg-danger-subtle text-danger",duration:"5000"})})).finally((()=>{this.$store.commit("setIsLoading",!1)}))},async checkExistingChecklist(){this.$store.commit("setIsLoading",!0),await Ie.Z.post(`store/check-existing-checklist/${this.clickedRowId}/`).then((e=>{console.log(e.data),this.isActive=e.data.is_active,this.isExisting=e.data.is_existing,this.isExisting?this.isActive?this.$router.push(`/begin-checklist/${this.clickedRowId}`):this.$notify({title:"No active checklist found for this bom, please generate a new checklist.",type:"bg-danger-subtle text-danger",duration:"5000"}):this.$notify({title:"No ongoing checklist found for this bom, please generate a new checklist",type:"bg-danger-subtle text-danger",duration:"5000"})})).catch((e=>{console.log("error:",e),this.$notify({title:"An error occurred, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"})})).finally((()=>{this.$store.commit("setIsLoading",!1)}))},viewOngoingChecklists(){this.clickedRowId&&this.$router.push(`/begin-checklist/${this.clickedRowId}`)},viewGeneratedChecklists(){this.clickedRowId&&this.$router.push(`/generated-checklists/${this.clickedRowId}`)}},mounted(){this.fetchData()}};const ii=(0,Ae.Z)(si,[["render",Js]]);var li=ii;const oi=e=>((0,i.dD)("data-v-cfa9c45e"),e=e(),(0,i.Cn)(),e),ni={key:0,class:"container text-center"},di=oi((()=>(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1))),ci=oi((()=>(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1))),ri=[di,ci],mi={key:1,class:"container"},ui={class:"row align-items-center"},hi={class:"col-md-6 mt-4"},pi={class:"d-flex align-items-center"},bi=oi((()=>(0,i._)("h2",{class:"mb-0"},"Checklist",-1))),gi=oi((()=>(0,i._)("span",{class:"ms-3 fs-4 text-muted me-3"},"|",-1))),fi={"aria-label":"breadcrumb"},_i={class:"breadcrumb bg-transparent m-0 p-0 justify-content-end"},vi=oi((()=>(0,i._)("li",{class:"breadcrumb-item"},[(0,i._)("a",{href:"/"},[(0,i._)("i",{class:"fas fa-home me-1"}),(0,i.Uk)("Home")])],-1))),yi={class:"breadcrumb-item active","aria-current":"page"},ki=oi((()=>(0,i._)("i",{class:"fas fa-list-alt me-1"},null,-1))),wi=oi((()=>(0,i._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,i._)("i",{class:"fas fa-spinner me-1"}),(0,i.Uk)(" Ongoing Checklist ")],-1))),Ci={class:"col-md-6 mt-4"},Di={class:"container"},Si={class:"d-flex justify-content-end"},Mi={key:0,type:"button","data-bs-toggle":"modal","data-bs-target":"#generateLabelModal",class:"btn btn-success me-2"},Pi={key:1,type:"button","data-bs-toggle":"modal","data-bs-target":"#generateLabelModal",class:"btn btn-success me-2"},Ii=oi((()=>(0,i._)("button",{type:"button","data-bs-toggle":"modal","data-bs-target":"#endChecklistModal",class:"btn btn-danger"}," End Checklist ",-1))),xi={class:"modal fade",id:"generateLabelModal",tabindex:"-1","aria-labelledby":"generateLabelModalLabel","aria-hidden":"true"},Ri={class:"modal-dialog"},$i={class:"modal-content"},Li=oi((()=>(0,i._)("div",{class:"modal-header"},[(0,i._)("h1",{class:"modal-title fs-5",id:"generateLabelModalLabel"}," Generate Label "),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),Bi={class:"modal-body"},Ui={key:0},Ei={key:0,id:"printable-content"},Ni=["src"],Oi={key:1},Ti={key:1},Ai={class:"modal-footer"},ji=oi((()=>(0,i._)("button",{type:"button",class:"btn btn-dark","data-bs-dismiss":"modal"}," Cancel ",-1))),Fi={key:0},qi={class:"modal fade",id:"endChecklistModal",tabindex:"-1","aria-labelledby":"endChecklistModalLabel","aria-hidden":"true"},Wi={class:"modal-dialog"},Vi={class:"modal-content"},Zi=oi((()=>(0,i._)("div",{class:"modal-header"},[(0,i._)("h1",{class:"modal-title fs-5",id:"endChecklistModalLabel"}," End Checklist "),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),zi=oi((()=>(0,i._)("div",{class:"modal-body"}," Are you sure you want to end this checklist? ",-1))),Gi={class:"modal-footer"},Hi=oi((()=>(0,i._)("button",{type:"button",class:"btn btn-dark","data-bs-dismiss":"modal"}," Cancel ",-1))),Qi={class:"card border-primary mb-4 mt-4"},Yi=oi((()=>(0,i._)("div",{class:"card-header bg-primary text-white"},[(0,i._)("h4",{class:"mb-0"},"Active Bom Details")],-1))),Ki={class:"card-body"},Ji={class:"row"},Xi={key:0,class:"col"},el=oi((()=>(0,i._)("strong",null,"Project Name:",-1))),tl={key:1,class:"col"},al=oi((()=>(0,i._)("strong",null,"Product Name:",-1))),sl={class:"col"},il=oi((()=>(0,i._)("strong",null,"BOM Rev No:",-1))),ll={class:"col"},ol=oi((()=>(0,i._)("strong",null,"Issue Date:",-1))),nl={class:"col"},dl=oi((()=>(0,i._)("strong",null,"Batch Quantity:",-1))),cl={class:"accordion",id:"accordionPanelsStayOpenExample"},rl={class:"accordion-item"},ml={class:"accordion-header",id:"panelsStayOpen-headingOne"},ul={class:"accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseOne","aria-expanded":"true","aria-controls":"panelsStayOpen-collapseOne"},hl={key:0,class:"spinner-border ms-2",role:"status"},pl=oi((()=>(0,i._)("span",{class:"visually-hidden"},"Loading...",-1))),bl=[pl],gl={key:1},fl=oi((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),_l=[fl],vl={id:"panelsStayOpen-collapseOne",class:"accordion-collapse collapse show","aria-labelledby":"panelsStayOpen-headingOne"},yl={class:"accordion-body"},kl={class:"accordion-item"},wl={class:"accordion-header",id:"panelsStayOpen-headingTwo"},Cl={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseTwo","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseTwo"},Dl={key:0,class:"spinner-border ms-2",role:"status"},Sl=oi((()=>(0,i._)("span",{class:"visually-hidden"},"Loading...",-1))),Ml=[Sl],Pl={key:1},Il=oi((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),xl=[Il],Rl={id:"panelsStayOpen-collapseTwo",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingTwo"},$l={class:"accordion-body"},Ll={class:"accordion-item"},Bl={class:"accordion-header",id:"panelsStayOpen-headingThree"},Ul={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseThree","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseThree"},El={key:0,class:"spinner-border ms-2",role:"status"},Nl=oi((()=>(0,i._)("span",{class:"visually-hidden"},"Loading...",-1))),Ol=[Nl],Tl={key:1},Al=oi((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),jl=[Al],Fl={id:"panelsStayOpen-collapseThree",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingThree"},ql={class:"accordion-body"},Wl={class:"accordion-item"},Vl={class:"accordion-header",id:"panelsStayOpen-headingFour"},Zl={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseFour","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseFour"},zl={key:0,class:"spinner-border ms-2",role:"status"},Gl=oi((()=>(0,i._)("span",{class:"visually-hidden"},"Loading...",-1))),Hl=[Gl],Ql={key:1},Yl=oi((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),Kl=[Yl],Jl={id:"panelsStayOpen-collapseFour",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingFour"},Xl={class:"accordion-body"},eo={class:"accordion-item"},to={class:"accordion-header",id:"panelsStayOpen-headingFive"},ao={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseFive","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseFive"},so={key:0,class:"spinner-border ms-2",role:"status"},io=oi((()=>(0,i._)("span",{class:"visually-hidden"},"Loading...",-1))),lo=[io],oo={key:1},no=oi((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),co=[no],ro={id:"panelsStayOpen-collapseFive",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingFive"},mo={class:"accordion-body"},uo={class:"accordion-item"},ho={class:"accordion-header",id:"panelsStayOpen-headingSix"},po={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseSix","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseSix"},bo={key:0,class:"spinner-border ms-2",role:"status"},go=oi((()=>(0,i._)("span",{class:"visually-hidden"},"Loading...",-1))),fo=[go],_o={key:1},vo=oi((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),yo=[vo],ko={id:"panelsStayOpen-collapseSix",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingSix"},wo={class:"accordion-body"},Co={class:"accordion-item"},Do={class:"accordion-header",id:"panelsStayOpen-headingSeven"},So={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseSeven","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseSeven"},Mo={key:0,class:"spinner-border ms-2",role:"status"},Po=oi((()=>(0,i._)("span",{class:"visually-hidden"},"Loading...",-1))),Io=[Po],xo={key:1},Ro=oi((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),$o=[Ro],Lo={id:"panelsStayOpen-collapseSeven",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingSeven"},Bo={class:"accordion-body"},Uo={class:"accordion-item"},Eo={class:"accordion-header",id:"panelsStayOpen-headingEight"},No={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseEight","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseEight"},Oo={key:0,class:"spinner-border ms-2",role:"status"},To=oi((()=>(0,i._)("span",{class:"visually-hidden"},"Loading...",-1))),Ao=[To],jo={key:1},Fo=oi((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),qo=[Fo],Wo={id:"panelsStayOpen-collapseEight",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingEight"},Vo={class:"accordion-body"},Zo={class:"accordion-item"},zo={class:"accordion-header",id:"panelsStayOpen-headingNine"},Go={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseNine","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseNine"},Ho={key:0,class:"spinner-border ms-2",role:"status"},Qo=oi((()=>(0,i._)("span",{class:"visually-hidden"},"Loading...",-1))),Yo=[Qo],Ko={key:1},Jo=oi((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),Xo=[Jo],en={id:"panelsStayOpen-collapseNine",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingNine"},tn={class:"accordion-body"},an={class:"accordion-item"},sn={class:"accordion-header",id:"panelsStayOpen-headingTen"},ln={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseTen","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseTen"},on={key:0,class:"spinner-border ms-2",role:"status"},nn=oi((()=>(0,i._)("span",{class:"visually-hidden"},"Loading...",-1))),dn=[nn],cn={key:1},rn=oi((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),mn=[rn],un={id:"panelsStayOpen-collapseTen",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingTen"},hn={class:"accordion-body"};function pn(e,t,a,s,l,o){const n=(0,i.up)("router-link"),d=(0,i.up)("CheckListTable");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",ni,ri)):((0,i.wg)(),(0,i.iD)("div",mi,[(0,i._)("div",ui,[(0,i._)("div",hi,[(0,i._)("div",pi,[bi,gi,(0,i._)("nav",fi,[(0,i._)("ol",_i,[vi,(0,i._)("li",yi,[(0,i.Wm)(n,{to:"/checklist"},{default:(0,i.w5)((()=>[ki,(0,i.Uk)(" Checklist")])),_:1})]),wi])])])]),(0,i._)("div",Ci,[(0,i._)("div",Di,[(0,i._)("div",Si,[l.generatedQRCode?((0,i.wg)(),(0,i.iD)("button",Mi," View Generated Label ")):((0,i.wg)(),(0,i.iD)("button",Pi," Generate Label ")),(0,i._)("button",{class:"btn btn-primary me-2",onClick:t[0]||(t[0]=(...e)=>o.downloadBOM&&o.downloadBOM(...e))}," Download BOM "),Ii])])])]),(0,i._)("div",xi,[(0,i._)("div",Ri,[(0,i._)("div",$i,[Li,(0,i._)("div",Bi,[l.isChecklistPassed?((0,i.wg)(),(0,i.iD)("div",Ui,[l.generatedQRCode?((0,i.wg)(),(0,i.iD)("div",Ei,[(0,i._)("img",{src:l.generatedQRCode,alt:"QR Code"},null,8,Ni)])):((0,i.wg)(),(0,i.iD)("p",Oi," All Checks passed successfully, generate a label by pressing the generate button. "))])):((0,i.wg)(),(0,i.iD)("div",Ti," You can only generate a label if all checks are passed "))]),(0,i._)("div",Ai,[ji,l.isChecklistPassed?((0,i.wg)(),(0,i.iD)("div",Fi,[l.generatedQRCode?((0,i.wg)(),(0,i.iD)("button",{key:0,type:"button",class:"btn btn-success",onClick:t[1]||(t[1]=(...e)=>o.printQRCode&&o.printQRCode(...e))}," Print ")):((0,i.wg)(),(0,i.iD)("button",{key:1,type:"button",class:"btn btn-success",onClick:t[2]||(t[2]=(...e)=>o.generateQRCode&&o.generateQRCode(...e))}," Generate "))])):(0,i.kq)("",!0)])])])]),(0,i._)("div",qi,[(0,i._)("div",Wi,[(0,i._)("div",Vi,[Zi,zi,(0,i._)("div",Gi,[Hi,(0,i._)("button",{type:"button",class:"btn btn-danger",onClick:t[3]||(t[3]=(...e)=>o.endChecklist&&o.endChecklist(...e)),"data-bs-dismiss":"modal"}," End ")])])])]),(0,i._)("div",Qi,[Yi,(0,i._)("div",Ki,[(0,i._)("div",Ji,[l.activeBom.product?((0,i.wg)(),(0,i.iD)("div",Xi,[el,(0,i.Uk)(" "+(0,Ze.zw)(l.activeBom.product.project.name),1)])):(0,i.kq)("",!0),l.activeBom.product?((0,i.wg)(),(0,i.iD)("div",tl,[al,(0,i.Uk)(" "+(0,Ze.zw)(l.activeBom.product.name),1)])):(0,i.kq)("",!0),(0,i._)("div",sl,[il,(0,i.Uk)(" "+(0,Ze.zw)(l.activeBom.bom_rev_number),1)]),(0,i._)("div",ll,[ol,(0,i.Uk)(" "+(0,Ze.zw)(l.activeBom.issue_date),1)]),(0,i._)("div",nl,[dl,(0,i.Uk)(" "+(0,Ze.zw)(l.checklist.batch_quantity),1)])])])]),(0,i._)("div",cl,[(0,i._)("div",rl,[(0,i._)("h2",ml,[(0,i._)("button",ul,[(0,i.Uk)(" Raw Material Check "),!1===l.isRawMaterialSufficient?((0,i.wg)(),(0,i.iD)("div",hl,bl)):((0,i.wg)(),(0,i.iD)("div",gl,_l))])]),(0,i._)("div",vl,[(0,i._)("div",yl,[(0,i.Wm)(d,{checklistItems:l.filteredChecklistItems["Raw Material"]},null,8,["checklistItems"])])])]),(0,i._)("div",kl,[(0,i._)("h2",wl,[(0,i._)("button",Cl,[(0,i.Uk)(" PCB Check "),!1===l.isPcbSufficient?((0,i.wg)(),(0,i.iD)("div",Dl,Ml)):((0,i.wg)(),(0,i.iD)("div",Pl,xl))])]),(0,i._)("div",Rl,[(0,i._)("div",$l,[(0,i.Wm)(d,{checklistItems:l.filteredChecklistItems["PCB"]},null,8,["checklistItems"])])])]),(0,i._)("div",Ll,[(0,i._)("h2",Bl,[(0,i._)("button",Ul,[(0,i.Uk)(" Solder Paste Check "),!1===l.isSolderPasteSufficient?((0,i.wg)(),(0,i.iD)("div",El,Ol)):((0,i.wg)(),(0,i.iD)("div",Tl,jl))])]),(0,i._)("div",Fl,[(0,i._)("div",ql,[(0,i.Wm)(d,{checklistItems:l.filteredChecklistItems["Solder Paste"]},null,8,["checklistItems"])])])]),(0,i._)("div",Wl,[(0,i._)("h2",Vl,[(0,i._)("button",Zl,[(0,i.Uk)(" Solder Bar Check "),!1===l.isSolderBarSufficient?((0,i.wg)(),(0,i.iD)("div",zl,Hl)):((0,i.wg)(),(0,i.iD)("div",Ql,Kl))])]),(0,i._)("div",Jl,[(0,i._)("div",Xl,[(0,i.Wm)(d,{checklistItems:l.filteredChecklistItems["Solder Bar"]},null,8,["checklistItems"]),(0,i.Uk)("> ")])])]),(0,i._)("div",eo,[(0,i._)("h2",to,[(0,i._)("button",ao,[(0,i.Uk)(" Solder Flux Check "),!1===l.isSolderFluxSufficient?((0,i.wg)(),(0,i.iD)("div",so,lo)):((0,i.wg)(),(0,i.iD)("div",oo,co))])]),(0,i._)("div",ro,[(0,i._)("div",mo,[(0,i.Wm)(d,{checklistItems:l.filteredChecklistItems["Solder Flux"]},null,8,["checklistItems"])])])]),(0,i._)("div",uo,[(0,i._)("h2",ho,[(0,i._)("button",po,[(0,i.Uk)(" IPA Check "),!1===l.isIpaSufficient?((0,i.wg)(),(0,i.iD)("div",bo,fo)):((0,i.wg)(),(0,i.iD)("div",_o,yo))])]),(0,i._)("div",ko,[(0,i._)("div",wo,[(0,i.Wm)(d,{checklistItems:l.filteredChecklistItems["IPA"]},null,8,["checklistItems"])])])]),(0,i._)("div",Co,[(0,i._)("h2",Do,[(0,i._)("button",So,[(0,i.Uk)(" Solder Wire Check "),!1===l.isSolderWireSufficient?((0,i.wg)(),(0,i.iD)("div",Mo,Io)):((0,i.wg)(),(0,i.iD)("div",xo,$o))])]),(0,i._)("div",Lo,[(0,i._)("div",Bo,[(0,i.Wm)(d,{checklistItems:l.filteredChecklistItems["Solder Wire"]},null,8,["checklistItems"])])])]),(0,i._)("div",Uo,[(0,i._)("h2",Eo,[(0,i._)("button",No,[(0,i.Uk)(" SMT Pallet Check "),!1===l.isSMTPalletSufficient?((0,i.wg)(),(0,i.iD)("div",Oo,Ao)):((0,i.wg)(),(0,i.iD)("div",jo,qo))])]),(0,i._)("div",Wo,[(0,i._)("div",Vo,[(0,i.Wm)(d,{checklistItems:l.filteredChecklistItems["SMT Pallet"]},null,8,["checklistItems"])])])]),(0,i._)("div",Zo,[(0,i._)("h2",zo,[(0,i._)("button",Go,[(0,i.Uk)(" Wave Pallet Check "),!1===l.isWavePalletSufficient?((0,i.wg)(),(0,i.iD)("div",Ho,Yo)):((0,i.wg)(),(0,i.iD)("div",Ko,Xo))])]),(0,i._)("div",en,[(0,i._)("div",tn,[(0,i.Wm)(d,{checklistItems:l.filteredChecklistItems["Wave Pallet"]},null,8,["checklistItems"])])])]),(0,i._)("div",an,[(0,i._)("h2",sn,[(0,i._)("button",ln,[(0,i.Uk)(" PCB Serial Number Label Check "),!1===l.isLabelSufficient?((0,i.wg)(),(0,i.iD)("div",on,dn)):((0,i.wg)(),(0,i.iD)("div",cn,mn))])]),(0,i._)("div",un,[(0,i._)("div",hn,[(0,i.Wm)(d,{checklistItems:l.filteredChecklistItems["PCB Serial Number Label"]},null,8,["checklistItems"])])])])])]))}function bn(e,t,a,s,l,o){const n=(0,i.up)("ag-grid-vue");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(n,{ref:"agGrid",style:{height:"550px"},class:"ag-theme-quartz",rowData:a.checklistItems,defaultColDef:l.defaultColDef,columnDefs:l.colDefs,pagination:!0,onFirstDataRendered:o.onFirstDataRendered,onRowClicked:o.onRowClicked,onRowSelected:o.onRowSelected,onRowDeselected:o.onRowDeselected,onGridReady:o.onGridReady},null,8,["rowData","defaultColDef","columnDefs","onFirstDataRendered","onRowClicked","onRowSelected","onRowDeselected","onGridReady"])])}var gn={props:{checklistItems:{type:Array,required:!0}},components:{AgGridVue:Ba.n},data(){return{gridApi:null,isGridReady:!1,colDefs:[{headerName:"VEPL Part No",field:"bom_line_item.part_number"},{headerName:"UID",field:"checklist_item_uids",valueFormatter:function(e){if(!e.value||0===e.value.length)return null;const t=e.value.map((e=>e.uid));return t.join(", ")}},{headerName:"Present Quantity",field:"present_quantity"},{headerName:"Required Quantity",field:"required_quantity"},{headerName:"Delta",valueGetter:function(e){const t=e.data.present_quantity,a=e.data.required_quantity,s=t-a;return s>=0?`+${s}`:`-${Math.abs(s)}`}},{headerName:"Is Present",field:"is_present",cellRenderer:e=>e.value?'<i class="fas fa-check-circle text-success"></i>':'<i class="fa-solid fa-circle-xmark text-danger"></i>'},{headerName:"Is Quantity Sufficient",field:"is_quantity_sufficient",cellRenderer:e=>e.value?'<i class="fas fa-check-circle text-success"></i>':'<i class="fa-solid fa-circle-xmark text-danger"></i>'},{headerName:"Updated At",field:"updated_at"}],defaultColDef:{filter:!0,sortable:!0,resizable:!0,autoSize:!0,domLayout:"autoHeight"},selectedRows:[]}},mounted(){},methods:{statusCellRenderer(e){return e.value?"✔":"✘"},onRowClicked(e){this.$emit("rowClicked",e.data)},onRowSelected(e){e.node.isSelected()&&this.$emit("rowSelected",e.node.data),this.onSelectionChanged()},onRowDeselected(){this.onSelectionChanged()},onSelectionChanged(){this.selectedRows=this.gridApi.getSelectedRows()},onFirstDataRendered(e){e.api&&(this.gridApi=e.api,this.isGridReady=!0)},onGridReady(e){this.gridApi=e.api,this.isGridReady=!0}}};const fn=(0,Ae.Z)(gn,[["render",bn],["__scopeId","data-v-2e63699c"]]);var _n=fn,vn=a(8385),yn={components:{CheckListTable:_n},data(){return{activeBom:"",checklist:"",checklistItems:[],isChecklistPassed:!1,isChecklistEnded:!1,isRawMaterialSufficient:!1,isPcbSufficient:!1,isSolderPasteSufficient:!1,isSolderBarSufficient:!1,isSolderFluxSufficient:!1,isIpaSufficient:!1,isSolderWireSufficient:!1,isSMTPalletSufficient:!1,isWavePalletSufficient:!1,isLabelSufficient:!1,pollingInterval:"",generatedQRCode:"",filteredChecklistItems:{"Raw Material":[],PCB:[],"Solder Paste":[],"Solder Bar":[],"Solder Flux":[],Ipa:[],"Solder Wire":[],"SMT Pallet":[],"Wave Pallet":[],"PCB Serial Number Label":[]},scannedEntries:[]}},mounted(){this.getChecklistBeginning(),this.pollingInterval=setInterval((()=>{this.isChecklistPassed?(clearInterval(this.pollingInterval),this.$notify({title:"BOM Check Passed",type:"bg-success-subtle text-success",duration:"5000"})):this.getChecklist()}),5e3)},beforeUnmount(){clearInterval(this.pollingInterval)},methods:{async getChecklistBeginning(){this.$store.commit("setIsLoading",!0),await Ie.Z.get(`store/get-active-checklist/${this.$route.params.id}/`).then((e=>{console.log(e.data),this.checklist=e.data.checklist,this.checklistItems=this.checklist.checklist_items,console.log("checklists items hereeeeee",this.checklistItems);const t=this.filterChecklistItemsByType("Raw Material"),a=this.filterChecklistItemsByType("PCB"),s=this.filterChecklistItemsByType("Solder Paste"),i=this.filterChecklistItemsByType("Solder Bar"),l=this.filterChecklistItemsByType("Solder Flux"),o=this.filterChecklistItemsByType("IPA"),n=this.filterChecklistItemsByType("Solder Wire"),d=this.filterChecklistItemsByType("SMT Pallet"),c=this.filterChecklistItemsByType("Wave Pallet"),r=this.filterChecklistItemsByType("PCB Serial Number Label");this.isChecklistPassed=this.checklist.is_passed,this.activeBom=this.checklist.bom,this.filteredChecklistItems={"Raw Material":t,PCB:a,"Solder Paste":s,"Solder Bar":i,"Solder Flux":l,IPA:o,"Solder Wire":n,"SMT Pallet":d,"Wave Pallet":c,"PCB Serial Number Label":r},console.log("filered checklsit items",this.filteredChecklistItems),this.isRawMaterialSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Raw Material"),this.isPcbSufficient=this.isItemsSufficient(this.filteredChecklistItems,"PCB"),this.isSolderPasteSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Paste"),console.log("checking solder paste",this.isSolderPasteSufficient),this.isSolderBarSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Bar"),console.log("checkinsssg solder bar",this.isSolderBarSufficient),this.isSolderFluxSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Flux"),this.isIpaSufficient=this.isItemsSufficient(this.filteredChecklistItems,"IPA"),this.isSolderWireSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Wire"),this.isSMTPalletSufficient=this.isItemsSufficient(this.filteredChecklistItems,"SMT Pallet"),this.isWavePalletSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Wave Pallet"),this.isLabelSufficient=this.isItemsSufficient(this.filteredChecklistItems,"PCB Serial Number Label"),"Completed"!=this.checklist.status&&"Failed"!=this.checklist.status||(this.isChecklistEnded=!0),this.checklist.qr_code_link&&(this.generatedQRCode=this.checklist.qr_code_link),this.$store.commit("setIsLoading",!1)})).catch((e=>{console.log("error:",e),this.$notify({title:"An error occured, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1)}))},async getChecklist(){await Ie.Z.get(`store/get-active-checklist/${this.$route.params.id}/`).then((e=>{console.log(e.data),this.checklist=e.data.checklist,this.checklistItems=this.checklist.checklist_items,console.log("chehcklist items hereeeeee",this.checklistItems);const t=this.filterChecklistItemsByType("Raw Material"),a=this.filterChecklistItemsByType("PCB"),s=this.filterChecklistItemsByType("Solder Paste"),i=this.filterChecklistItemsByType("Solder Bar"),l=this.filterChecklistItemsByType("Solder Flux"),o=this.filterChecklistItemsByType("IPA"),n=this.filterChecklistItemsByType("Solder Wire"),d=this.filterChecklistItemsByType("SMT Pallet"),c=this.filterChecklistItemsByType("Wave Pallet"),r=this.filterChecklistItemsByType("PCB Serial Number Label");this.isChecklistPassed=this.checklist.is_passed,this.activeBom=this.checklist.bom,this.filteredChecklistItems={"Raw Material":t,PCB:a,"Solder Paste":s,"Solder Bar":i,"Solder Flux":l,IPA:o,"Solder Wire":n,"SMT Pallet":d,"Wave Pallet":c,"PCB Serial Number Label":r},console.log("filered checklsit items",this.filteredChecklistItems),this.isRawMaterialSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Raw Material"),this.isPcbSufficient=this.isItemsSufficient(this.filteredChecklistItems,"PCB"),this.isSolderPasteSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Paste"),this.isSolderBarSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Bar"),console.log("checking solder bar",this.isSolderBarSufficient),this.isSolderFluxSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Flux"),this.isIpaSufficient=this.isItemsSufficient(this.filteredChecklistItems,"IPA"),this.isSolderWireSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Wire"),this.isSMTPalletSufficient=this.isItemsSufficient(this.filteredChecklistItems,"SMT Pallet"),this.isWavePalletSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Wave Pallet"),this.isLabelSufficient=this.isItemsSufficient(this.filteredChecklistItems,"PCB Serial Number Label"),"Completed"!=this.checklist.status&&"Failed"!=this.checklist.status||(this.isChecklistEnded=!0),this.checklist.qr_code_link&&(this.generatedQRCode=this.checklist.qr_code_link)})).catch((e=>{console.log("error:",e),this.$notify({title:"An error occured, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"})}))},async endChecklist(){this.$store.commit("setIsLoading",!0),clearInterval(this.pollingInterval),await Ie.Z.get(`store/end-checklist/${this.checklist.id}/`).then((e=>{console.log(e.data),this.$notify({title:"Checklist ended",type:"bg-danger-subtle text-danger",duration:"5000"}),this.checklist=e.data.checklist,this.checklistItems=this.checklist.checklist_items,this.isChecklistPassed=this.checklist.is_passed,this.activeBom=this.checklist.bom,"Completed"!=this.checklist.status&&"Failed"!=this.checklist.status||(this.isChecklistEnded=!0),this.$router.push(`/generated-checklists/${this.$route.params.id}`),this.$store.commit("setIsLoading",!1)})).catch((e=>{console.log("error:",e),this.$notify({title:"An error occured, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"}),clearInterval(this.pollingInterval),this.$store.commit("setIsLoading",!1)}))},async generateQRCode(){const e=this.generateUniqueCode();console.log(e);const t=await vn.toDataURL(e),a={uniqueCode:e,qrCodeDataURL:t};this.saveQRCode(a)},generateUniqueCode(){const e=Date.now().toString(),t=Math.random().toString(36).substring(7);return`${e}-${t}`},async saveQRCode(e){await Ie.Z.post(`store/save-qr-code/${this.checklist.id}/`,e).then((t=>{console.log(t.data),this.generatedQRCode=e.qrCodeDataURL,this.$notify({title:"QR Code generated and saved successfully",type:"bg-success-subtle text-success",duration:"5000"})})).catch((e=>{console.log("error:",e),this.$notify({title:"An error occured, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"})}))},printQRCode(){if(this.generatedQRCode){const e=document.getElementById("printable-content"),t=window.open("","","height=1000,width=1000");t.document.write(e.innerHTML),t.print()}},filterChecklistItemsByType(e){return this.checklistItems.filter((t=>{const a=t.checklist_item_type;return!(!a||!a.name)&&a.name.toUpperCase()===e.toUpperCase()}))},isItemsSufficient(e,t){const a=this.filteredChecklistItems[t];if(a){if(0===a.length)return!0;const e=a.filter((e=>!0===e.is_quantity_sufficient));return e.length===a.length}return!1},downloadBOM(){try{const e=this.checklist.bom.bom_file_url;console.log("file url",e);const t=document.createElement("a");t.href=e,t.download=this.checklist.bom.bom_file_name,document.body.appendChild(t),t.click(),document.body.removeChild(t)}catch(e){console.error("Error downloading BOM:",e)}}}};const kn=(0,Ae.Z)(yn,[["render",pn],["__scopeId","data-v-cfa9c45e"]]);var wn=kn;const Cn={key:0,class:"container text-center"},Dn=(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1),Sn=(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1),Mn=[Dn,Sn],Pn={key:1,class:"container"},In={class:"row align-items-center"},xn={class:"col-md-12 mt-4"},Rn={class:"d-flex align-items-center"},$n=(0,i._)("h2",{class:"mb-0 me-3"},"Generated Checklists",-1),Ln=(0,i._)("span",{class:"fs-4 text-muted"},"|",-1),Bn={"aria-label":"breadcrumb",class:"d-inline-block ms-3"},Un={class:"breadcrumb bg-transparent m-0 p-0"},En=(0,i._)("li",{class:"breadcrumb-item"},[(0,i._)("a",{href:"/"},[(0,i._)("i",{class:"fas fa-home me-1"}),(0,i.Uk)("Home")])],-1),Nn={class:"breadcrumb-item"},On=(0,i._)("i",{class:"fas fa-list-alt me-1"},null,-1),Tn=(0,i._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,i._)("i",{class:"fa-solid fa-list-check me-1"}),(0,i.Uk)(" Generated Checklists ")],-1);function An(e,t,a,s,l,o){const n=(0,i.up)("router-link"),d=(0,i.up)("CheckListsTable");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",Cn,Mn)):((0,i.wg)(),(0,i.iD)("div",Pn,[(0,i._)("div",In,[(0,i._)("div",xn,[(0,i._)("div",Rn,[$n,Ln,(0,i._)("nav",Bn,[(0,i._)("ol",Un,[En,(0,i._)("li",Nn,[(0,i.Wm)(n,{to:"/checklist"},{default:(0,i.w5)((()=>[On,(0,i.Uk)(" Checklist")])),_:1})]),Tn])])])])]),(0,i.Wm)(d,{style:{"margin-top":"20px"},rowData:l.rowData},null,8,["rowData"])]))}function jn(e,t,a,s,l,o){const n=(0,i.up)("ag-grid-vue");return(0,i.wg)(),(0,i.iD)("div",null,[a.rowData.length>0?((0,i.wg)(),(0,i.j4)(n,{key:0,style:{height:"500px"},class:"ag-theme-quartz",rowData:a.rowData,defaultColDef:l.defaultColDef,columnDefs:l.colDefs,pagination:!0,onRowClicked:o.onRowClicked,onRowSelected:o.onRowSelected},null,8,["rowData","defaultColDef","columnDefs","onRowClicked","onRowSelected"])):(0,i.kq)("",!0)])}var Fn={components:{AgGridVue:Ba.n},props:{rowData:{type:Array}},data(){return{colDefs:[{field:"id",hide:!0},{headerName:"Checklist ID",field:"id",headerCheckboxSelection:!0,checkboxSelection:!0},{headerName:"Unique Code",field:"unique_code",valueFormatter:function(e){return null===e.value?"null":e.value}},{headerName:"Project Name",field:"bom.product.project.name"},{headerName:"Product Name",field:"bom.product.name"},{headerName:"Product Code",field:"bom.product.product_code"},{headerName:"Batch Quantity",field:"batch_quantity"},{headerName:"Updated At",field:"updated_at"},{headerName:"Status",field:"status"},{headerName:"Actions",cellRenderer:this.editButtonRenderer}],defaultColDef:{filter:!0,sortable:!0,resizable:!0,autoSize:!0},selectedRows:[]}},methods:{onRowClicked(e){this.$emit("rowClicked",e.data)},onRowSelected(e){e.node.isSelected()&&this.$emit("rowSelected",e.node.data)},onSelectionChanged(){this.$refs.agGrid&&this.$refs.agGrid.api&&(this.selectedRows=this.$refs.agGrid.api.getSelectedRows())},editButtonRenderer(e){const t=document.createElement("button");return t.innerHTML='<i class="fas fa-eye"></i>',t.classList.add("btn","btn-success"),t.addEventListener("click",(()=>this.onViewClick(e.data))),t},onViewClick(e){"In Progress"===e.status?this.$router.push(`/begin-checklist/${e.bom.id}`):this.$router.push(`/checklist-details/${e.id}`)}}};const qn=(0,Ae.Z)(Fn,[["render",jn],["__scopeId","data-v-4d2eec7a"]]);var Wn=qn,Vn={components:{CheckListsTable:Wn},data(){return{rowData:[]}},mounted(){this.fetchData()},methods:{async fetchData(){try{this.$store.commit("setIsLoading",!0);const e=await Ie.Z.get(`store/generated-checklists/${this.$route.params.id}`);this.rowData=e.data,console.log("checklists",e.data),this.$store.commit("setIsLoading",!1)}catch(e){console.error("Error fetching CheckLists data:",e),this.$store.commit("setIsLoading",!1)}}}};const Zn=(0,Ae.Z)(Vn,[["render",An]]);var zn=Zn;const Gn=e=>((0,i.dD)("data-v-d53e0868"),e=e(),(0,i.Cn)(),e),Hn={key:0,class:"container text-center"},Qn=Gn((()=>(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1))),Yn=Gn((()=>(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1))),Kn=[Qn,Yn],Jn={key:1,class:"container"},Xn={class:"row align-items-center"},ed=(0,i.uE)('<div class="col-md-6 mt-4" data-v-d53e0868><div class="d-flex align-items-center" data-v-d53e0868><h2 class="mb-0" data-v-d53e0868>Checklist Details</h2><span class="ms-3 fs-4 text-muted me-3" data-v-d53e0868>|</span><nav aria-label="breadcrumb" data-v-d53e0868><ol class="breadcrumb bg-transparent m-0 p-0 justify-content-end" data-v-d53e0868><li class="breadcrumb-item" data-v-d53e0868><a href="/" data-v-d53e0868>Home</a></li><li class="breadcrumb-item active" aria-current="page" data-v-d53e0868> Checklist </li></ol></nav></div></div>',1),td={class:"col-md-6 mt-4 d-flex justify-content-end"},ad={class:"container"},sd={class:"d-flex justify-content-end"},id={key:0,type:"button","data-bs-toggle":"modal","data-bs-target":"#generateLabelModal",class:"btn btn-success me-2"},ld={key:1,type:"button","data-bs-toggle":"modal","data-bs-target":"#generateLabelModal",class:"btn btn-success me-2"},od={class:"modal fade",id:"generateLabelModal",tabindex:"-1","aria-labelledby":"generateLabelModalLabel","aria-hidden":"true"},nd={class:"modal-dialog"},dd={class:"modal-content"},cd=Gn((()=>(0,i._)("div",{class:"modal-header"},[(0,i._)("h1",{class:"modal-title fs-5",id:"generateLabelModalLabel"}," Generate Label "),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),rd={class:"modal-body"},md={key:0},ud={key:0,id:"printable-content"},hd=["src"],pd={key:1},bd={key:1},gd={class:"modal-footer"},fd=Gn((()=>(0,i._)("button",{type:"button",class:"btn btn-dark","data-bs-dismiss":"modal"}," Cancel ",-1))),_d={key:0},vd={class:"card border-primary mb-4 mt-4"},yd=Gn((()=>(0,i._)("div",{class:"card-header bg-primary text-white"},[(0,i._)("h4",{class:"mb-0"},"BOM Details")],-1))),kd={class:"card-body"},wd={class:"row"},Cd={key:0,class:"col"},Dd=Gn((()=>(0,i._)("strong",null,"Project Name:",-1))),Sd={key:1,class:"col"},Md=Gn((()=>(0,i._)("strong",null,"Product Name:",-1))),Pd={class:"col"},Id=Gn((()=>(0,i._)("strong",null,"BOM Rev No:",-1))),xd={class:"col"},Rd=Gn((()=>(0,i._)("strong",null,"Issue Date:",-1))),$d={class:"accordion",id:"accordionPanelsStayOpenExample"},Ld={class:"accordion-item"},Bd={class:"accordion-header",id:"panelsStayOpen-headingOne"},Ud={class:"accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseOne","aria-expanded":"true","aria-controls":"panelsStayOpen-collapseOne"},Ed={key:0},Nd=Gn((()=>(0,i._)("i",{class:"bi bi-x-circle-fill fs-4 ms-2"},null,-1))),Od=[Nd],Td={key:1},Ad=Gn((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),jd=[Ad],Fd={id:"panelsStayOpen-collapseOne",class:"accordion-collapse collapse show","aria-labelledby":"panelsStayOpen-headingOne"},qd={class:"accordion-body"},Wd={class:"accordion-item"},Vd={class:"accordion-header",id:"panelsStayOpen-headingTwo"},Zd={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseTwo","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseTwo"},zd={key:0},Gd=Gn((()=>(0,i._)("i",{class:"bi bi-x-circle-fill fs-4 ms-2"},null,-1))),Hd=[Gd],Qd={key:1},Yd=Gn((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),Kd=[Yd],Jd={id:"panelsStayOpen-collapseTwo",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingTwo"},Xd={class:"accordion-body"},ec={class:"accordion-item"},tc={class:"accordion-header",id:"panelsStayOpen-headingThree"},ac={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseThree","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseThree"},sc={key:0},ic=Gn((()=>(0,i._)("i",{class:"bi bi-x-circle-fill fs-4 ms-2"},null,-1))),lc=[ic],oc={key:1},nc=Gn((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),dc=[nc],cc={id:"panelsStayOpen-collapseThree",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingThree"},rc={class:"accordion-body"},mc={class:"accordion-item"},uc={class:"accordion-header",id:"panelsStayOpen-headingFour"},hc={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseFour","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseFour"},pc={key:0},bc=Gn((()=>(0,i._)("i",{class:"bi bi-x-circle-fill fs-4 ms-2"},null,-1))),gc=[bc],fc={key:1},_c=Gn((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),vc=[_c],yc={id:"panelsStayOpen-collapseFour",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingFour"},kc={class:"accordion-body"},wc={class:"accordion-item"},Cc={class:"accordion-header",id:"panelsStayOpen-headingFive"},Dc={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseFive","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseFive"},Sc={key:0},Mc=Gn((()=>(0,i._)("i",{class:"bi bi-x-circle-fill fs-4 ms-2"},null,-1))),Pc=[Mc],Ic={key:1},xc=Gn((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),Rc=[xc],$c={id:"panelsStayOpen-collapseFive",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingFive"},Lc={class:"accordion-body"},Bc={class:"accordion-item"},Uc={class:"accordion-header",id:"panelsStayOpen-headingSix"},Ec={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseSix","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseSix"},Nc={key:0},Oc=Gn((()=>(0,i._)("i",{class:"bi bi-x-circle-fill fs-4 ms-2"},null,-1))),Tc=[Oc],Ac={key:1},jc=Gn((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),Fc=[jc],qc={id:"panelsStayOpen-collapseSix",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingSix"},Wc={class:"accordion-body"},Vc={class:"accordion-item"},Zc={class:"accordion-header",id:"panelsStayOpen-headingSeven"},zc={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseSeven","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseSeven"},Gc={key:0},Hc=Gn((()=>(0,i._)("i",{class:"bi bi-x-circle-fill fs-4 ms-2"},null,-1))),Qc=[Hc],Yc={key:1},Kc=Gn((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),Jc=[Kc],Xc={id:"panelsStayOpen-collapseSeven",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingSeven"},er={class:"accordion-body"},tr={class:"accordion-item"},ar={class:"accordion-header",id:"panelsStayOpen-headingEight"},sr={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseEight","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseEight"},ir={key:0},lr=Gn((()=>(0,i._)("i",{class:"bi bi-x-circle-fill fs-4 ms-2"},null,-1))),or=[lr],nr={key:1},dr=Gn((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),cr=[dr],rr={id:"panelsStayOpen-collapseEight",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingEight"},mr={class:"accordion-body"},ur={class:"accordion-item"},hr={class:"accordion-header",id:"panelsStayOpen-headingNine"},pr={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseNine","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseNine"},br={key:0},gr=Gn((()=>(0,i._)("i",{class:"bi bi-x-circle-fill fs-4 ms-2"},null,-1))),fr=[gr],_r={key:1},vr=Gn((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),yr=[vr],kr={id:"panelsStayOpen-collapseNine",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingNine"},wr={class:"accordion-body"},Cr={class:"accordion-item"},Dr={class:"accordion-header",id:"panelsStayOpen-headingTen"},Sr={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseTen","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseTen"},Mr={key:0},Pr=Gn((()=>(0,i._)("i",{class:"bi bi-x-circle-fill fs-4 ms-2"},null,-1))),Ir=[Pr],xr={key:1},Rr=Gn((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),$r=[Rr],Lr={id:"panelsStayOpen-collapseTen",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingTen"},Br={class:"accordion-body"};function Ur(e,t,a,s,l,o){const n=(0,i.up)("CheckListTable");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",Hn,Kn)):((0,i.wg)(),(0,i.iD)("div",Jn,[(0,i._)("div",Xn,[ed,(0,i._)("div",td,[(0,i._)("div",ad,[(0,i._)("div",sd,[l.generatedQRCode?((0,i.wg)(),(0,i.iD)("button",id," View Generated Label ")):((0,i.wg)(),(0,i.iD)("button",ld," Generate Label "))])])])]),(0,i._)("div",od,[(0,i._)("div",nd,[(0,i._)("div",dd,[cd,(0,i._)("div",rd,[l.isChecklistPassed?((0,i.wg)(),(0,i.iD)("div",md,[l.generatedQRCode?((0,i.wg)(),(0,i.iD)("div",ud,[(0,i._)("img",{src:l.generatedQRCode,alt:"QR Code"},null,8,hd)])):((0,i.wg)(),(0,i.iD)("p",pd," All Checks passed successfully, generate a label by pressing the generate button. "))])):((0,i.wg)(),(0,i.iD)("div",bd," You can only generate a label if all checks are passed "))]),(0,i._)("div",gd,[fd,l.isChecklistPassed?((0,i.wg)(),(0,i.iD)("div",_d,[l.generatedQRCode?((0,i.wg)(),(0,i.iD)("button",{key:0,type:"button",class:"btn btn-success",onClick:t[0]||(t[0]=(...e)=>o.printQRCode&&o.printQRCode(...e))}," Print ")):((0,i.wg)(),(0,i.iD)("button",{key:1,type:"button",class:"btn btn-success",onClick:t[1]||(t[1]=(...e)=>o.generateQRCode&&o.generateQRCode(...e))}," Generate "))])):(0,i.kq)("",!0)])])])]),(0,i._)("div",vd,[yd,(0,i._)("div",kd,[(0,i._)("div",wd,[l.activeBom.product?((0,i.wg)(),(0,i.iD)("div",Cd,[Dd,(0,i.Uk)(" "+(0,Ze.zw)(l.activeBom.product.project.name),1)])):(0,i.kq)("",!0),l.activeBom.product?((0,i.wg)(),(0,i.iD)("div",Sd,[Md,(0,i.Uk)(" "+(0,Ze.zw)(l.activeBom.product.name),1)])):(0,i.kq)("",!0),(0,i._)("div",Pd,[Id,(0,i.Uk)(" "+(0,Ze.zw)(l.activeBom.bom_rev_number),1)]),(0,i._)("div",xd,[Rd,(0,i.Uk)(" "+(0,Ze.zw)(l.activeBom.issue_date),1)])])])]),(0,i._)("div",$d,[(0,i._)("div",Ld,[(0,i._)("h2",Bd,[(0,i._)("button",Ud,[(0,i.Uk)(" Raw Material Check "),0==l.isRawMaterialSufficient?((0,i.wg)(),(0,i.iD)("div",Ed,Od)):((0,i.wg)(),(0,i.iD)("div",Td,jd))])]),(0,i._)("div",Fd,[(0,i._)("div",qd,[(0,i.Wm)(n,{checklistItems:l.filteredChecklistItems["Raw Material"]},null,8,["checklistItems"])])])]),(0,i._)("div",Wd,[(0,i._)("h2",Vd,[(0,i._)("button",Zd,[(0,i.Uk)(" PCB Check "),0==l.isPcbSufficient?((0,i.wg)(),(0,i.iD)("div",zd,Hd)):((0,i.wg)(),(0,i.iD)("div",Qd,Kd))])]),(0,i._)("div",Jd,[(0,i._)("div",Xd,[(0,i.Wm)(n,{checklistItems:l.filteredChecklistItems["PCB"]},null,8,["checklistItems"])])])]),(0,i._)("div",ec,[(0,i._)("h2",tc,[(0,i._)("button",ac,[(0,i.Uk)(" Solder Paste "),0==l.isSolderPasteSufficient?((0,i.wg)(),(0,i.iD)("div",sc,lc)):((0,i.wg)(),(0,i.iD)("div",oc,dc))])]),(0,i._)("div",cc,[(0,i._)("div",rc,[(0,i.Wm)(n,{checklistItems:l.filteredChecklistItems["Solder Paste"]},null,8,["checklistItems"])])])]),(0,i._)("div",mc,[(0,i._)("h2",uc,[(0,i._)("button",hc,[(0,i.Uk)(" Solder Bar "),0==l.isSolderBarSufficient?((0,i.wg)(),(0,i.iD)("div",pc,gc)):((0,i.wg)(),(0,i.iD)("div",fc,vc))])]),(0,i._)("div",yc,[(0,i._)("div",kc,[(0,i.Wm)(n,{checklistItems:l.filteredChecklistItems["Solder Bar"]},null,8,["checklistItems"]),(0,i.Uk)("> ")])])]),(0,i._)("div",wc,[(0,i._)("h2",Cc,[(0,i._)("button",Dc,[(0,i.Uk)(" Solder Flux "),0==l.isSolderFluxSufficient?((0,i.wg)(),(0,i.iD)("div",Sc,Pc)):((0,i.wg)(),(0,i.iD)("div",Ic,Rc))])]),(0,i._)("div",$c,[(0,i._)("div",Lc,[(0,i.Wm)(n,{checklistItems:l.filteredChecklistItems["Solder Flux"]},null,8,["checklistItems"])])])]),(0,i._)("div",Bc,[(0,i._)("h2",Uc,[(0,i._)("button",Ec,[(0,i.Uk)(" IPA "),0==l.isIpaSufficient?((0,i.wg)(),(0,i.iD)("div",Nc,Tc)):((0,i.wg)(),(0,i.iD)("div",Ac,Fc))])]),(0,i._)("div",qc,[(0,i._)("div",Wc,[(0,i.Wm)(n,{checklistItems:l.filteredChecklistItems["IPA"]},null,8,["checklistItems"])])])]),(0,i._)("div",Vc,[(0,i._)("h2",Zc,[(0,i._)("button",zc,[(0,i.Uk)(" Solder Wire "),0==l.isSolderWireSufficient?((0,i.wg)(),(0,i.iD)("div",Gc,Qc)):((0,i.wg)(),(0,i.iD)("div",Yc,Jc))])]),(0,i._)("div",Xc,[(0,i._)("div",er,[(0,i.Wm)(n,{checklistItems:l.filteredChecklistItems["Solder Wire"]},null,8,["checklistItems"])])])]),(0,i._)("div",tr,[(0,i._)("h2",ar,[(0,i._)("button",sr,[(0,i.Uk)(" SMT Pallet "),0==l.isSMTPalletSufficient?((0,i.wg)(),(0,i.iD)("div",ir,or)):((0,i.wg)(),(0,i.iD)("div",nr,cr))])]),(0,i._)("div",rr,[(0,i._)("div",mr,[(0,i.Wm)(n,{checklistItems:l.filteredChecklistItems["SMT Pallet"]},null,8,["checklistItems"])])])]),(0,i._)("div",ur,[(0,i._)("h2",hr,[(0,i._)("button",pr,[(0,i.Uk)(" Wave Pallet "),0==l.isWavePalletSufficient?((0,i.wg)(),(0,i.iD)("div",br,fr)):((0,i.wg)(),(0,i.iD)("div",_r,yr))])]),(0,i._)("div",kr,[(0,i._)("div",wr,[(0,i.Wm)(n,{checklistItems:l.filteredChecklistItems["Wave Pallet"]},null,8,["checklistItems"])])])]),(0,i._)("div",Cr,[(0,i._)("h2",Dr,[(0,i._)("button",Sr,[(0,i.Uk)(" PCB Serial Number Label "),0==l.isLabelSufficient?((0,i.wg)(),(0,i.iD)("div",Mr,Ir)):((0,i.wg)(),(0,i.iD)("div",xr,$r))])]),(0,i._)("div",Lr,[(0,i._)("div",Br,[(0,i.Wm)(n,{checklistItems:l.filteredChecklistItems["PCB Serial Number Label"]},null,8,["checklistItems"])])])])])]))}var Er={components:{CheckListTable:_n},data(){return{activeBom:"",checklist:"",checklistItems:[],isRawMaterialSufficient:!1,isPcbSufficient:!1,isSolderPasteSufficient:!1,isSolderBarSufficient:!1,isSolderFluxSufficient:!1,isIpaSufficient:!1,isSolderWireSufficient:!1,isSMTPalletSufficient:!1,isWavePalletSufficient:!1,isLabelSufficient:!1,isChecklistPassed:!1,isChecklistEnded:!1,pollingInterval:"",filteredChecklistItems:{"Raw Material":[],PCB:[],"Solder Paste":[],"Solder Bar":[],"Solder Flux":[],IPA:[],"Solder Wire":[],"SMT Pallet":[],"Wave Pallet":[],"PCB Serial Number Label":[]},generatedQRCode:""}},mounted(){this.getChecklist()},methods:{async getChecklist(){this.$store.commit("setIsLoading",!0),await Ie.Z.get(`store/get-checklist-details/${this.$route.params.id}/`).then((e=>{console.log("yehh",e.data),this.checklist=e.data.checklist,this.checklistItems=this.checklist.checklist_items,console.log("chehcklist items hereeeeee",this.checklistItems),console.log("chehcklist items hereeeeee",this.checklistItems);const t=this.filterChecklistItemsByType("Raw Material");console.log(t);const a=this.filterChecklistItemsByType("PCB"),s=this.filterChecklistItemsByType("Solder Paste"),i=this.filterChecklistItemsByType("Solder Bar"),l=this.filterChecklistItemsByType("Solder Flux"),o=this.filterChecklistItemsByType("IPA"),n=this.filterChecklistItemsByType("Solder Wire"),d=this.filterChecklistItemsByType("SMT Pallet"),c=this.filterChecklistItemsByType("Wave Pallet"),r=this.filterChecklistItemsByType("PCB Serial Number Label");this.isChecklistPassed=this.checklist.is_passed,this.activeBom=this.checklist.bom,this.filteredChecklistItems={"Raw Material":t,PCB:a,"Solder Paste":s,"Solder Bar":i,"Solder Flux":l,IPA:o,"Solder Wire":n,"SMT Pallet":d,"Wave Pallet":c,"PCB Serial Number Label":r},console.log("filered checklsit items",this.filteredChecklistItems),this.isRawMaterialSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Raw Material"),this.isPcbSufficient=this.isItemsSufficient(this.filteredChecklistItems,"PCB"),this.isSolderPasteSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Paste"),this.isSolderBarSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Bar"),console.log("checking solder bar",this.isSolderBarSufficient),this.isSolderFluxSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Flux"),this.isIpaSufficient=this.isItemsSufficient(this.filteredChecklistItems,"IPA"),this.isSolderWireSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Wire"),this.isSMTPalletSufficient=this.isItemsSufficient(this.filteredChecklistItems,"SMT Pallet"),this.isWavePalletSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Wave Pallet"),this.isLabelSufficient=this.isItemsSufficient(this.filteredChecklistItems,"PCB Serial Number Label"),this.isChecklistPassed=this.checklist.is_passed,this.activeBom=this.checklist.bom,"Completed"!=this.checklist.status&&"Failed"!=this.checklist.status||(this.isChecklistEnded=!0),this.checklist.qr_code_link&&(this.generatedQRCode=this.checklist.qr_code_link),this.$store.commit("setIsLoading",!1)})).catch((e=>{console.log("error:",e),this.$notify({title:"An error occured, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1)}))},filterChecklistItemsByType(e){return this.checklistItems.filter((t=>{const a=t.checklist_item_type;return!(!a||!a.name)&&a.name.toLowerCase()===e.toLowerCase()}))},isItemsSufficient(e,t){const a=this.filteredChecklistItems[t];if(0===a.length)return!0;const s=a.filter((e=>!0===e.is_quantity_sufficient));return s.length===a.length},async generateQRCode(){const e=this.generateUniqueCode();console.log(e);const t=await vn.toDataURL(e),a={uniqueCode:e,qrCodeDataURL:t};this.saveQRCode(a)},generateUniqueCode(){const e=Date.now().toString(),t=Math.random().toString(36).substring(7);return`${e}-${t}`},async saveQRCode(e){await Ie.Z.post(`store/save-qr-code/${this.checklist.id}/`,e).then((t=>{console.log(t.data),this.generatedQRCode=e.qrCodeDataURL,this.$notify({title:"QR Code generated and saved successfully",type:"bg-success-subtle text-success",duration:"5000"})})).catch((e=>{console.log("error:",e),this.$notify({title:"An error occured, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"})}))},printQRCode(){if(this.generatedQRCode){const e=document.getElementById("printable-content"),t=window.open("","","height=1000,width=1000");t.document.write(e.innerHTML),t.print()}}}};const Nr=(0,Ae.Z)(Er,[["render",Ur],["__scopeId","data-v-d53e0868"]]);var Or=Nr;const Tr={class:"container"},Ar=(0,i.uE)('<div class="row align-items-center"><div class="col-md-6 mt-4"><div class="d-flex align-items-center"><h2 class="mb-0">Reports</h2><span class="ms-3 fs-4 text-muted">|</span><nav aria-label="breadcrumb" class="d-inline-block ms-3"><ol class="breadcrumb bg-transparent m-0 p-0"><li class="breadcrumb-item"><a href="/"><i class="fas fa-home me-1"></i>Home</a></li><li class="breadcrumb-item active" aria-current="page"><i class="fas fa-chart-bar me-1"></i> Reports </li></ol></nav></div></div></div>',1),jr={class:"conatiner"},Fr={class:"list-group pt-4"};function qr(e,t){const a=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",Tr,[Ar,(0,i._)("div",jr,[(0,i._)("ul",Fr,[(0,i.Wm)(a,{class:"list-group-item list-group-item-action text-left",to:"/checklist-report"},{default:(0,i.w5)((()=>[(0,i.Uk)(" Checklist Report ")])),_:1})])])])}const Wr={},Vr=(0,Ae.Z)(Wr,[["render",qr]]);var Zr=Vr;const zr=e=>((0,i.dD)("data-v-bbcef4d6"),e=e(),(0,i.Cn)(),e),Gr={key:0,class:"container text-center"},Hr=zr((()=>(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1))),Qr=zr((()=>(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1))),Yr=[Hr,Qr],Kr={key:1,class:"container"},Jr={class:"row align-items-center"},Xr=(0,i.uE)('<div class="col-md-6 mt-4" data-v-bbcef4d6><div class="d-flex align-items-center" data-v-bbcef4d6><h2 class="mb-0" data-v-bbcef4d6>Dashboard</h2><span class="ms-3 fs-4 text-muted" data-v-bbcef4d6>|</span><nav aria-label="breadcrumb" class="d-inline-block ms-3" data-v-bbcef4d6><ol class="breadcrumb bg-transparent m-0 p-0" data-v-bbcef4d6><li class="breadcrumb-item" data-v-bbcef4d6><a href="/" data-v-bbcef4d6><i class="fas fa-home me-1" data-v-bbcef4d6></i>Home</a></li><li class="breadcrumb-item active" aria-current="page" data-v-bbcef4d6><i class="fa fa-tachometer me-1" aria-hidden="true" data-v-bbcef4d6></i> Dashboard </li></ol></nav></div></div>',1),em={class:"col-md-6 mt-4 text-end"},tm={class:"container"},am={class:"dropdown"},sm={class:"btn btn-secondary dropdown-toggle",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"},im={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton1"},lm=zr((()=>(0,i._)("a",{class:"dropdown-item",href:"#"},"Today",-1))),om=[lm],nm=zr((()=>(0,i._)("a",{class:"dropdown-item",href:"#"},"Previous Week",-1))),dm=[nm],cm=zr((()=>(0,i._)("a",{class:"dropdown-item",href:"#"},"Previous Month",-1))),rm=[cm],mm=zr((()=>(0,i._)("li",null,[(0,i._)("button",{type:"button",class:"btn","data-bs-toggle":"modal","data-bs-target":"#exampleModal"}," Custom Date Range ")],-1))),um={class:"row mt-4",style:{display:"flex",gap:"30px","justify-content":"space-between"}},hm={class:"small-box bg-gradient-success",style:{flex:"1"}},pm={class:"inner"},bm=zr((()=>(0,i._)("p",null,"Completed",-1))),gm=zr((()=>(0,i._)("div",{class:"icon"},[(0,i._)("i",{class:"fa-solid fa-check"})],-1))),fm={class:"small-box bg-gradient-primary",style:{flex:"1"}},_m={class:"inner"},vm=zr((()=>(0,i._)("p",null,"In Progress",-1))),ym=zr((()=>(0,i._)("div",{class:"icon"},[(0,i._)("i",{class:"fa-solid fa-spinner"})],-1))),km={class:"small-box bg-gradient-danger",style:{flex:"1"}},wm={class:"inner"},Cm=zr((()=>(0,i._)("p",null,"Failed",-1))),Dm=zr((()=>(0,i._)("div",{class:"icon"},[(0,i._)("i",{class:"fa-solid fa-xmark"})],-1))),Sm={class:"row mt-4 d-flex"},Mm={class:"col-6"},Pm={class:"card card-primary"},Im={class:"card-header"},xm=zr((()=>(0,i._)("h3",{class:"card-title"},"In Progress Checklists",-1))),Rm={class:"card-tools"},$m={class:"card-body"},Lm={class:"row"},Bm={key:0},Um={class:"list-group list-group-flush"},Em={key:1},Nm={class:"col-6"},Om={class:"card card-success"},Tm={class:"card-header"},Am=zr((()=>(0,i._)("h3",{class:"card-title"},"Completed Checklists",-1))),jm={class:"card-tools"},Fm={class:"card-body"},qm={class:"row"},Wm={key:0},Vm={class:"list-group list-group-flush"},Zm=["onClick"],zm={key:1},Gm={class:"row mt-4 d-flex"},Hm={class:"col-6"},Qm={class:"card card-danger"},Ym={class:"card-header"},Km=zr((()=>(0,i._)("h3",{class:"card-title"},"Failed Checklists",-1))),Jm={class:"card-tools"},Xm={class:"card-body"},eu={class:"row"},tu={key:0},au={class:"list-group list-group-flush"},su=["onClick"],iu=zr((()=>(0,i._)("i",{class:"fas fa-eye"},null,-1))),lu={key:1},ou=zr((()=>(0,i._)("div",{class:"col-6"},null,-1))),nu={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},du={class:"modal-dialog"},cu={class:"modal-content"},ru=zr((()=>(0,i._)("div",{class:"modal-header"},[(0,i._)("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},[(0,i._)("strong",null,"Custom Date Range")]),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),mu={class:"modal-body"},uu={class:"mb-3"},hu=zr((()=>(0,i._)("label",{for:"startDate",class:"form-label"},"Start Date:",-1))),pu={class:"mb-3"},bu=zr((()=>(0,i._)("label",{for:"endDate",class:"form-label"},"End Date:",-1))),gu={key:0,class:"alert alert-danger mt-3 p-2"},fu=zr((()=>(0,i._)("i",{class:"fas fa-exclamation-triangle"},null,-1))),_u={class:"modal-footer"},vu=zr((()=>(0,i._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1))),yu=["disabled"];function ku(e,t,a,l,o,n){return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",Gr,Yr)):((0,i.wg)(),(0,i.iD)("div",Kr,[(0,i._)("div",Jr,[Xr,(0,i._)("div",em,[(0,i._)("div",tm,[(0,i._)("div",am,[(0,i._)("button",sm,(0,Ze.zw)("Previous_Week"===o.selectedOption?"Previous Week":"Previous_Month"===o.selectedOption?"Previous Month":o.selectedOption),1),(0,i._)("ul",im,[(0,i._)("li",{onClick:t[0]||(t[0]=e=>n.selectOption("Today")),class:(0,Ze.C_)({active:"Today"===o.selectedOption})},om,2),(0,i._)("li",{onClick:t[1]||(t[1]=e=>n.selectOption("Previous_Week")),class:(0,Ze.C_)({active:"Previous_Week"===o.selectedOption})},dm,2),(0,i._)("li",{onClick:t[2]||(t[2]=e=>n.selectOption("Previous_Month")),class:(0,Ze.C_)({active:"Previous_Month"===o.selectedOption})},rm,2),mm])])])])]),(0,i._)("div",um,[(0,i._)("div",hm,[(0,i._)("div",pm,[(0,i._)("h3",null,(0,Ze.zw)(o.result.completed_checklists?o.result.completed_checklists.length:"Loading"),1),bm]),gm]),(0,i._)("div",fm,[(0,i._)("div",_m,[(0,i._)("h3",null,(0,Ze.zw)(o.result.in_progress?o.result.in_progress.length:"Loading"),1),vm]),ym]),(0,i._)("div",km,[(0,i._)("div",wm,[(0,i._)("h3",null,(0,Ze.zw)(o.result.failed_checklists?o.result.failed_checklists.length:"Loading"),1),Cm]),Dm])]),(0,i._)("div",Sm,[(0,i._)("div",Mm,[(0,i._)("div",Pm,[(0,i._)("div",Im,[xm,(0,i._)("div",Rm,[(0,i._)("button",{class:"btn btn-primary btn-sm",onClick:t[3]||(t[3]=(...e)=>n.redirectToGeneratedChecklistPage&&n.redirectToGeneratedChecklistPage(...e))}," View All ")])]),(0,i._)("div",$m,[(0,i._)("div",Lm,[o.result&&o.result.in_progress&&o.result.in_progress.length>0?((0,i.wg)(),(0,i.iD)("div",Bm,[(0,i._)("ul",Um,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.result.in_progress,((e,a)=>((0,i.wg)(),(0,i.iD)("li",{key:a,class:"list-group-item d-flex justify-content-between align-items-center",style:{cursor:"pointer"}},[(0,i.Uk)((0,Ze.zw)(e.bom.product.name)+" - "+(0,Ze.zw)(e.updated_at)+" ",1),(0,i._)("i",{class:"fas fa-eye",onClick:t[4]||(t[4]=e=>n.InProgressRedirectToChecklist())})])))),128))])])):((0,i.wg)(),(0,i.iD)("div",Em,"None"))])])])]),(0,i._)("div",Nm,[(0,i._)("div",Om,[(0,i._)("div",Tm,[Am,(0,i._)("div",jm,[(0,i._)("button",{class:"btn btn-success btn-sm",onClick:t[5]||(t[5]=e=>n.redirectToGeneratedChecklistPage())}," View All ")])]),(0,i._)("div",Fm,[(0,i._)("div",qm,[o.result&&o.result.completed_checklists&&o.result.completed_checklists.length>0?((0,i.wg)(),(0,i.iD)("div",Wm,[(0,i._)("ul",Vm,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.result.completed_checklists,((e,t)=>((0,i.wg)(),(0,i.iD)("li",{key:t,class:"list-group-item d-flex justify-content-between align-items-center",style:{cursor:"pointer"}},[(0,i.Uk)((0,Ze.zw)(e.bom.product.name)+" - "+(0,Ze.zw)(e.updated_at)+" ",1),(0,i._)("i",{class:"fas fa-eye",onClick:t=>n.CompletedRedirectToDetailsChecklist(e.id)},null,8,Zm)])))),128))])])):((0,i.wg)(),(0,i.iD)("div",zm,"None"))])])])])]),(0,i._)("div",Gm,[(0,i._)("div",Hm,[(0,i._)("div",Qm,[(0,i._)("div",Ym,[Km,(0,i._)("div",Jm,[(0,i._)("button",{class:"btn btn-danger btn-sm",onClick:t[6]||(t[6]=(...e)=>n.redirectToGeneratedChecklistPage&&n.redirectToGeneratedChecklistPage(...e))}," View All ")])]),(0,i._)("div",Xm,[(0,i._)("div",eu,[o.result&&o.result.failed_checklists&&o.result.failed_checklists.length>0?((0,i.wg)(),(0,i.iD)("div",tu,[(0,i._)("ul",au,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.result.failed_checklists,((e,t)=>((0,i.wg)(),(0,i.iD)("li",{key:t,class:"list-group-item d-flex justify-content-between align-items-center",onClick:t=>n.FailedRedirectToDetailsChecklist(e.id),style:{cursor:"pointer"}},[(0,i.Uk)((0,Ze.zw)(e.bom.product.name)+" - "+(0,Ze.zw)(e.updated_at)+" ",1),iu],8,su)))),128))])])):((0,i.wg)(),(0,i.iD)("div",lu,"None"))])])])]),ou]),(0,i._)("div",nu,[(0,i._)("div",du,[(0,i._)("div",cu,[ru,(0,i._)("div",mu,[(0,i._)("div",uu,[hu,(0,i.wy)((0,i._)("input",{id:"startDate",type:"date","onUpdate:modelValue":t[7]||(t[7]=e=>o.selectedStartDate=e),class:"form-control",placeholder:"Select start date",onInput:t[8]||(t[8]=(...e)=>n.validateDates&&n.validateDates(...e))},null,544),[[s.nr,o.selectedStartDate]])]),(0,i._)("div",pu,[bu,(0,i.wy)((0,i._)("input",{id:"endDate",type:"date","onUpdate:modelValue":t[9]||(t[9]=e=>o.selectedEndDate=e),class:"form-control",placeholder:"Select end date",onInput:t[10]||(t[10]=(...e)=>n.validateDates&&n.validateDates(...e))},null,544),[[s.nr,o.selectedEndDate]])]),o.errorMessage?((0,i.wg)(),(0,i.iD)("div",gu,[fu,(0,i.Uk)(" "+(0,Ze.zw)(o.errorMessage),1)])):(0,i.kq)("",!0)]),(0,i._)("div",_u,[vu,(0,i._)("button",{type:"button",class:"btn btn-success",onClick:t[11]||(t[11]=(...e)=>n.setSelectedOptionAndFetchData&&n.setSelectedOptionAndFetchData(...e)),disabled:n.isFetchButtonDisabled,"data-bs-dismiss":"modal"}," Fetch Checklists ",8,yu)])])])])]))}var wu={components:{},data(){return{selectedOption:"Today",result:{},selectedCustomDate:null,selectedStartDate:"",selectedEndDate:"",errorMessage:""}},computed:{isFetchButtonDisabled(){return!this.selectedStartDate||!this.selectedEndDate||new Date(this.selectedStartDate)>new Date(this.selectedEndDate)||new Date(this.selectedStartDate)>new Date||new Date(this.selectedEndDate)>new Date}},mounted(){this.fetchData()},methods:{validateDates(){if(!this.selectedStartDate)return void(this.errorMessage="Please select a start date.");const e=new Date(this.selectedStartDate),t=new Date;if(e>t)return void(this.errorMessage="Start date cannot be in the future.");if(!this.selectedEndDate)return void(this.errorMessage="");const a=new Date(this.selectedEndDate);this.errorMessage=e>a?"Start date cannot be greater than end date.":a>t?"End date cannot be in the future.":""},selectOption(e){this.selectedOption=e,"Custom"!==this.selectOption&&this.fetchData()},async fetchData(){const e={selected_option:this.selectedOption,start_date:this.selectedStartDate,end_date:this.selectedEndDate};console.log(e.selected_option),console.log(e.start_date),console.log(e.end_date),this.$store.commit("setIsLoading",!0),await Ie.Z.post("store/get-checklist-count/",e).then((e=>{this.result=e.data,console.log("backend data",this.result),this.$store.commit("setIsLoading",!1)})).catch((e=>{console.error(e),this.$store.commit("setIsLoading",!1)}))},setSelectedOptionAndFetchData(){this.selectedOption="Custom",this.validateDates(),""===this.errorMessage&&this.fetchData()},redirectToGeneratedChecklistPage(){const e=[...this.result.in_progress,...this.result.completed_checklists,...this.result.failed_checklists],t=e.find((e=>void 0!==e.bom?.id&&null!==e.bom?.id));if(t){const e=t.bom.id;console.log(e),this.$router.push(`/generated-checklists/${e}`)}else console.error("No valid id found in the checklists")},InProgressRedirectToChecklist(){const e=this.result?.in_progress?.[0]?.bom?.id;console.log(e),void 0!==e&&null!==e?this.$router.push(`/begin-checklist/${e}`):console.error("id is not available")},FailedRedirectToDetailsChecklist(e){void 0!==e&&null!==e?this.$router.push(`/checklist-details/${e}`):console.error("checklistId is not available")},CompletedRedirectToDetailsChecklist(e){void 0!==e&&null!==e?this.$router.push(`/checklist-details/${e}`):console.error("checklistId is not available")}}};const Cu=(0,Ae.Z)(wu,[["render",ku],["__scopeId","data-v-bbcef4d6"]]);var Du=Cu;const Su={key:0,class:"container text-center"},Mu=(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1),Pu=(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1),Iu=[Mu,Pu],xu={key:1,class:"container"},Ru={class:"row align-items-center"},$u={class:"d-flex align-items-center mt-4"},Lu=(0,i._)("h2",{class:"mb-0"},"Checklist Report",-1),Bu=(0,i._)("span",{class:"ms-3 fs-4 text-muted"},"|",-1),Uu={"aria-label":"breadcrumb",class:"d-inline-block ms-3"},Eu={class:"breadcrumb bg-transparent m-0 p-0"},Nu=(0,i._)("li",{class:"breadcrumb-item"},[(0,i._)("a",{href:"/"},[(0,i._)("i",{class:"fas fa-home me-1"}),(0,i.Uk)("Home")])],-1),Ou={class:"breadcrumb-item active"},Tu=(0,i._)("i",{class:"fas fa-chart-bar me-1"},null,-1),Au=(0,i._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,i._)("i",{class:"fas fa-file-alt me-1"}),(0,i.Uk)(" Reports Checklist ")],-1);function ju(e,t,a,s,l,o){const n=(0,i.up)("router-link"),d=(0,i.up)("ChecklistReportTable");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",Su,Iu)):((0,i.wg)(),(0,i.iD)("div",xu,[(0,i._)("div",Ru,[(0,i._)("div",$u,[Lu,Bu,(0,i._)("nav",Uu,[(0,i._)("ol",Eu,[Nu,(0,i._)("li",Ou,[(0,i.Wm)(n,{to:"/reports"},{default:(0,i.w5)((()=>[Tu,(0,i.Uk)("Reports")])),_:1})]),Au])])])]),(0,i.Wm)(d,{checklists:l.checklists,style:{"margin-top":"20px"}},null,8,["checklists"])]))}const Fu=e=>((0,i.dD)("data-v-4216ffe3"),e=e(),(0,i.Cn)(),e),qu={class:"card card-outline card-primary mt-3"},Wu={class:"card-body"},Vu={class:"row"},Zu={class:"col-md-3 text-center"},zu=Fu((()=>(0,i._)("h6",{class:"lead"},"Total Completed",-1))),Gu={class:"display-6"},Hu={class:"col-md-3 text-center"},Qu=Fu((()=>(0,i._)("h6",{class:"lead"},"Total In Progress",-1))),Yu={class:"display-6"},Ku={class:"col-md-3 text-center"},Ju=Fu((()=>(0,i._)("h6",{class:"lead"},"Total Failed",-1))),Xu={class:"display-6"},eh={class:"col-md-3 text-center"},th=Fu((()=>(0,i._)("h6",{class:"lead"},"Total Checklists",-1))),ah={class:"display-6"};function sh(e,t,a,s,l,o){const n=(0,i.up)("ag-grid-vue");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",qu,[(0,i._)("div",Wu,[(0,i._)("div",Vu,[(0,i._)("div",Zu,[zu,(0,i._)("p",Gu,(0,Ze.zw)(l.total_completed),1)]),(0,i._)("div",Hu,[Qu,(0,i._)("p",Yu,(0,Ze.zw)(l.total_in_progress),1)]),(0,i._)("div",Ku,[Ju,(0,i._)("p",Xu,(0,Ze.zw)(l.total_failed),1)]),(0,i._)("div",eh,[th,(0,i._)("p",ah,(0,Ze.zw)(l.total_checklists),1)])])])]),(0,i._)("div",null,[(0,i.Wm)(n,{style:{height:"500px"},class:"ag-theme-quartz",rowData:a.checklists,defaultColDef:l.defaultColDef,columnDefs:l.colDefs,pagination:!0,onFirstDataRendered:o.onFirstDataRendered,onGridReady:o.onGridReady},null,8,["rowData","defaultColDef","columnDefs","onFirstDataRendered","onGridReady"])])])}var ih={components:{AgGridVue:Ba.n},props:{checklists:{type:Array,required:!0}},data(){return{colDefs:[{headerName:"Checklist ID",field:"id"},{headerName:"Unique Code",field:"unique_code",valueFormatter:function(e){return null===e.value?"null":e.value}},{headerName:"Project Name",field:"bom.product.project.name"},{headerName:"Product Name",field:"bom.product.name"},{headerName:"Product Code",field:"bom.product.product_code"},{headerName:"Updated At",field:"updated_at"},{headerName:"Updated By",valueGetter:function(e){if(console.log(e.data.updated_by),null!=e.data.updated_by){const t=e.data.updated_by.first_name||"",a=e.data.updated_by.last_name||"";return t||a?`${t} ${a}`:""}return""}},{headerName:"Created At",field:"created_at"},{headerName:"Created By",valueGetter:function(e){const t=e.data.created_by.first_name||"",a=e.data.created_by.last_name||"";return t||a?`${t} ${a}`:""}},{headerName:"Status",field:"status"},{headerName:"View",cellRenderer:this.viewButtonRenderer}],defaultColDef:{filter:!0,sortable:!0,resizable:!0,autoSize:!0},gridApi:null,total_completed:0,total_in_progress:0,total_failed:0,total_checklists:0}},mounted(){},methods:{onFirstDataRendered(){this.calculateTotalSum(),this.gridApi.addEventListener("filterChanged",this.calculateTotalSum)},onGridReady(e){this.gridApi=e.api},calculateTotalSum(){let e=0,t=0,a=0;this.gridApi.forEachNodeAfterFilter((s=>{"Completed"==s.data.status?e+=1:"In Progress"==s.data.status?t+=1:a+=1})),this.total_completed=e,this.total_failed=a,this.total_in_progress=t,this.total_checklists=this.gridApi.getDisplayedRowCount()},viewButtonRenderer(e){const t=document.createElement("button");return t.innerHTML='<i class="fas fa-eye"></i>',t.classList.add("btn","btn-outline-secondary"),t.addEventListener("click",(()=>this.onViewClick(e.data))),t},onViewClick(e){"In Progress"===e.status?this.$router.push(`/begin-checklist/${e.bom.id}`):this.$router.push(`/checklist-details/${e.id}`)}}};const lh=(0,Ae.Z)(ih,[["render",sh],["__scopeId","data-v-4216ffe3"]]);var oh=lh,nh={components:{ChecklistReportTable:oh},data(){return{checklists:[]}},mounted(){this.getChecklistReport()},methods:{async getChecklistReport(){console.log("run"),this.$store.commit("setIsLoading",!0),this.$store.commit("setIsLoading",!1),await Ie.Z.get("store/get-checklist-report/").then((e=>{console.log(e.data),this.checklists=e.data.checklists,this.$store.commit("setIsLoading",!1)})).catch((e=>{console.log("error:",e),this.$notify({title:"An error occured, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1)}))}}};const dh=(0,Ae.Z)(nh,[["render",ju]]);var ch=dh;const rh=e=>((0,i.dD)("data-v-4239cd5f"),e=e(),(0,i.Cn)(),e),mh={key:0,class:"container text-center"},uh=rh((()=>(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1))),hh=rh((()=>(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1))),ph=[uh,hh],bh={key:1,class:"container"},gh={class:"row align-items-center"},fh={class:"col-md-6 mt-4"},_h={class:"d-flex align-items-center"},vh=rh((()=>(0,i._)("h2",{class:"mb-0"},"Users",-1))),yh=rh((()=>(0,i._)("span",{class:"ms-3 fs-4 text-muted"},"|",-1))),kh={"aria-label":"breadcrumb",class:"d-inline-block ms-3"},wh={class:"breadcrumb bg-transparent m-0 p-0"},Ch={class:"breadcrumb-item"},Dh=rh((()=>(0,i._)("i",{class:"fas fa-home me-1"},null,-1))),Sh=rh((()=>(0,i._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,i._)("i",{class:"fas fa-users me-1"}),(0,i.Uk)("Users ")],-1))),Mh={class:"col-md-6 mt-4 text-end"},Ph=rh((()=>(0,i._)("i",{class:"fas fa-user-plus me-1"},null,-1))),Ih={class:"container mt-5"},xh={class:"table table-hover"},Rh=rh((()=>(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",null,"Email"),(0,i._)("th",null,"Actions")])],-1))),$h=["onClick"],Lh=rh((()=>(0,i._)("i",{class:"fas fa-edit me-1"},null,-1))),Bh=["onClick"],Uh=rh((()=>(0,i._)("i",{class:"fas fa-trash-alt me-1"},null,-1)));function Eh(e,t,a,s,l,o){const n=(0,i.up)("router-link");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",mh,ph)):((0,i.wg)(),(0,i.iD)("div",bh,[(0,i._)("div",gh,[(0,i._)("div",fh,[(0,i._)("div",_h,[vh,yh,(0,i._)("nav",kh,[(0,i._)("ol",wh,[(0,i._)("li",Ch,[(0,i.Wm)(n,{to:"/"},{default:(0,i.w5)((()=>[Dh,(0,i.Uk)(" Home")])),_:1})]),Sh])])])]),(0,i._)("div",Mh,[(0,i.Wm)(n,{to:"/users/create-user",class:"btn btn-primary btn-sm ms-2"},{default:(0,i.w5)((()=>[Ph,(0,i.Uk)(" Create New User ")])),_:1})])]),(0,i._)("div",Ih,[(0,i._)("table",xh,[Rh,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.userList,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e.id,onClick:t=>o.redirectToEditPage(e.id)},[(0,i._)("td",null,(0,Ze.zw)(e.email),1),(0,i._)("td",null,[(0,i.Wm)(n,{to:{name:"EditUser",params:{id:e.id}},class:"btn btn-primary btn-sm"},{default:(0,i.w5)((()=>[Lh,(0,i.Uk)(" Edit ")])),_:2},1032,["to"]),(0,i._)("button",{onClick:t=>o.deleteUser(t,e.id),class:"btn btn-danger btn-sm ml-3"},[Uh,(0,i.Uk)(" Delete ")],8,Bh)])],8,$h)))),128))])])])]))}var Nh={name:"UserManagement",data(){return{userList:[]}},mounted(){this.fetchUsers()},methods:{fetchUsers(){this.$store.commit("setIsLoading",!0),Ie.Z.get("/accounts/users/").then((e=>{console.log("response.data",e.data),this.userList=e.data,this.$store.commit("setIsLoading",!1)})).catch((e=>{console.error("Error fetching users:",e),this.$store.commit("setIsLoading",!1)}))},redirectToEditPage(e){this.$router.push({name:"EditUser",params:{id:e}})},deleteUser(e,t){e.stopPropagation(),confirm("Are you sure you want to delete this user?")&&Ie.Z.delete(`/accounts/users/delete/${t}/`).then((()=>{console.log("User deleted successfully."),alert("User Deleted successfully!"),this.fetchUsers(),this.$router.push("/users")})).catch((e=>{alert("error deleting!"),console.error("Error deleting user:",e)}))}}};const Oh=(0,Ae.Z)(Nh,[["render",Eh],["__scopeId","data-v-4239cd5f"]]);var Th=Oh;const Ah=e=>((0,i.dD)("data-v-fbd71b8a"),e=e(),(0,i.Cn)(),e),jh={key:0,class:"container text-center"},Fh=Ah((()=>(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1))),qh=Ah((()=>(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1))),Wh=[Fh,qh],Vh={key:1,class:"container mt-4"},Zh={class:"row align-items-center"},zh={class:"col-md-8 mt-4"},Gh={class:"d-flex align-items-center"},Hh=Ah((()=>(0,i._)("h2",{class:"mb-0"},"Edit Line Item |",-1))),Qh={"aria-label":"breadcrumb",class:"ms-3"},Yh={class:"breadcrumb bg-transparent m-0 p-0 justify-content-end"},Kh=Ah((()=>(0,i._)("li",{class:"breadcrumb-item"},[(0,i._)("a",{href:"/"},[(0,i._)("i",{class:"fas fa-home me-1"}),(0,i.Uk)("Home")])],-1))),Jh={class:"breadcrumb-item active","aria-current":"page"},Xh=Ah((()=>(0,i._)("i",{class:"fas fa-clipboard-list me-1"},null,-1))),ep={class:"breadcrumb-item","aria-current":"page"},tp=Ah((()=>(0,i._)("i",{class:"fas fa-list-alt me-1"},null,-1))),ap=Ah((()=>(0,i._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,i._)("i",{class:"fa fa-bars me-1","aria-hidden":"true"}),(0,i.Uk)("BOM Line Item ")],-1))),sp={class:"col-md-4 mt-4 d-flex justify-content-end"},ip={class:"row mt-5"},lp={class:"row"},op={class:"col-md-4"},np={class:"form-group"},dp=Ah((()=>(0,i._)("label",{for:"veplPartNumber"},"VEPL Part Number",-1))),cp={class:"col-md-4"},rp={class:"form-group"},mp=Ah((()=>(0,i._)("label",{for:"level"},"Level",-1))),up={class:"col-md-4"},hp={class:"form-group"},pp=Ah((()=>(0,i._)("label",{for:"priorityLevel"},"Priority Level",-1))),bp={class:"row"},gp={class:"col-md-4"},fp={class:"form-group"},_p=Ah((()=>(0,i._)("label",{for:"value"},"Value",-1))),vp={class:"col-md-4"},yp={class:"form-group"},kp=Ah((()=>(0,i._)("label",{for:"pcbFootprint"},"PCB Footprint",-1))),wp={class:"col-md-4"},Cp={class:"form-group"},Dp=Ah((()=>(0,i._)("label",{for:"lineItemType"},"Type",-1))),Sp=["value"],Mp={class:"form-group"},Pp=Ah((()=>(0,i._)("label",{for:"description"},"Description",-1))),Ip={class:"form-group"},xp={for:"references"},Rp=["onClick"],$p={class:"d-flex align-items-center mt-2"},Lp={class:"form-group"},Bp=Ah((()=>(0,i._)("label",{for:"manufacturerParts"},"Manufacturer Parts",-1))),Up=Ah((()=>(0,i._)("br",null,null,-1))),Ep=Ah((()=>(0,i._)("button",{type:"button",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#exampleModal"}," Change Manufacturer Parts ",-1))),Np={class:"form-group"},Op=Ah((()=>(0,i._)("label",{for:"customerPartNumber"},"Customer Part Number",-1))),Tp={class:"row"},Ap={class:"col-md-6"},jp={class:"form-group"},Fp=Ah((()=>(0,i._)("label",{for:"quantity"},"Quantity",-1))),qp={class:"col-md-6"},Wp={class:"form-group"},Vp=Ah((()=>(0,i._)("label",{for:"uom"},"UOM",-1))),Zp={class:"form-group"},zp=Ah((()=>(0,i._)("label",{for:"assemblyStage"},"Assembly Stage",-1))),Gp=["value"],Hp={class:"form-group"},Qp=Ah((()=>(0,i._)("label",{for:"ecn"},"ECN",-1))),Yp={class:"form-group"},Kp=Ah((()=>(0,i._)("label",{for:"msl"},"MSL",-1))),Jp={class:"form-group"},Xp=Ah((()=>(0,i._)("label",{for:"remarks"},"Remarks",-1))),eb={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},tb={class:"modal-dialog modal-lg"},ab={class:"modal-content"},sb=Ah((()=>(0,i._)("div",{class:"modal-header"},[(0,i._)("h1",{class:"modal-title fs-5",id:"exampleModalLabel"}," Select the Manufacturer Parts "),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),ib={class:"modal-body"},lb=Ah((()=>(0,i._)("div",{class:"modal-footer"},[(0,i._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close "),(0,i._)("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal"}," Save changes ")],-1)));function ob(e,t,a,l,o,n){const d=(0,i.up)("router-link"),c=(0,i.up)("manufacturer-parts-grid");return(0,i.wg)(),(0,i.iD)("div",null,[e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",jh,Wh)):((0,i.wg)(),(0,i.iD)("div",Vh,[(0,i._)("div",Zh,[(0,i._)("div",zh,[(0,i._)("div",Gh,[Hh,(0,i._)("nav",Qh,[(0,i._)("ol",Yh,[Kh,(0,i._)("li",Jh,[(0,i.Wm)(d,{to:"/bom"},{default:(0,i.w5)((()=>[Xh,(0,i.Uk)("Bill Of Materials ")])),_:1})]),(0,i._)("li",ep,[(0,i.Wm)(d,{to:`/bom/edit/${o.bom_id}`},{default:(0,i.w5)((()=>[tp,(0,i.Uk)(" BOM Details ")])),_:1},8,["to"])]),ap])])])]),(0,i._)("div",sp,[(0,i._)("button",{type:"button",class:"btn btn-primary me-2",onClick:t[0]||(t[0]=(...e)=>n.saveChanges&&n.saveChanges(...e))}," Update Changes "),(0,i._)("button",{type:"button",class:"btn btn-danger",onClick:t[1]||(t[1]=(...e)=>n.confirmDelete&&n.confirmDelete(...e))}," Delete Line Item ")])]),(0,i._)("div",ip,[(0,i._)("section",null,[(0,i._)("div",lp,[(0,i._)("div",op,[(0,i._)("div",np,[dp,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>o.editedBom.part_number=e),type:"text",class:"form-control"},null,512),[[s.nr,o.editedBom.part_number]])])]),(0,i._)("div",cp,[(0,i._)("div",rp,[mp,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>o.editedBom.level=e),type:"text",class:"form-control"},null,512),[[s.nr,o.editedBom.level]])])]),(0,i._)("div",up,[(0,i._)("div",hp,[pp,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>o.editedBom.priority_level=e),type:"text",class:"form-control"},null,512),[[s.nr,o.editedBom.priority_level]])])])]),(0,i._)("div",bp,[(0,i._)("div",gp,[(0,i._)("div",fp,[_p,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>o.editedBom.value=e),type:"text",class:"form-control"},null,512),[[s.nr,o.editedBom.value]])])]),(0,i._)("div",vp,[(0,i._)("div",yp,[kp,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>o.editedBom.pcb_footprint=e),type:"text",class:"form-control"},null,512),[[s.nr,o.editedBom.pcb_footprint]])])]),(0,i._)("div",wp,[(0,i._)("div",Cp,[Dp,(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[7]||(t[7]=e=>o.editedBom.line_item_type=e),class:"form-control"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.line_item_types,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e.id,value:e.id},(0,Ze.zw)(e.name),9,Sp)))),128))],512),[[s.bM,o.editedBom.line_item_type]])])])]),(0,i._)("div",Mp,[Pp,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>o.editedBom.description=e),type:"text",class:"form-control"},null,512),[[s.nr,o.editedBom.description]])]),(0,i._)("div",Ip,[(0,i._)("label",xp,[(0,i.Uk)(" References "),(0,i._)("div",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.editedBom.references,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e.id,class:"tag"},[(0,i.Uk)((0,Ze.zw)(e.name)+" ",1),(0,i._)("span",{onClick:t=>n.removeReference(e),class:"remove-tag"},"X",8,Rp)])))),128))]),(0,i._)("div",$p,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>o.newReference=e),onKeyup:t[10]||(t[10]=(0,s.D2)(((...e)=>n.addNewReference&&n.addNewReference(...e)),["enter"])),type:"text",placeholder:"Type to add a new reference",class:"form-control input-large"},null,544),[[s.nr,o.newReference]]),(0,i._)("button",{onClick:t[11]||(t[11]=(...e)=>n.addNewReference&&n.addNewReference(...e)),class:"btn btn-primary ms-2"}," Add ")])])]),(0,i._)("div",Lp,[Bp,Up,(0,i._)("div",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.editedBom.manufacturer_parts,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e.id,class:"tag"},(0,Ze.zw)(e.part_number)+" - "+(0,Ze.zw)(e.manufacturer.name),1)))),128))]),Ep]),(0,i._)("div",Np,[Op,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[12]||(t[12]=e=>o.editedBom.customer_part_number=e),type:"text",class:"form-control"},null,512),[[s.nr,o.editedBom.customer_part_number]])]),(0,i._)("div",Tp,[(0,i._)("div",Ap,[(0,i._)("div",jp,[Fp,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[13]||(t[13]=e=>o.editedBom.quantity=e),type:"text",class:"form-control"},null,512),[[s.nr,o.editedBom.quantity]])])]),(0,i._)("div",qp,[(0,i._)("div",Wp,[Vp,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[14]||(t[14]=e=>o.editedBom.uom=e),type:"text",class:"form-control"},null,512),[[s.nr,o.editedBom.uom]])])])]),(0,i._)("div",Zp,[zp,(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[15]||(t[15]=e=>o.editedBom.assembly_stage=e),class:"form-control"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.assembly_stages,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e.id,value:e.id},(0,Ze.zw)(e.name),9,Gp)))),128))],512),[[s.bM,o.editedBom.assembly_stage]])]),(0,i._)("div",Hp,[Qp,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[16]||(t[16]=e=>o.editedBom.ecn=e),type:"text",class:"form-control"},null,512),[[s.nr,o.editedBom.ecn]])]),(0,i._)("div",Yp,[Kp,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[17]||(t[17]=e=>o.editedBom.msl=e),type:"text",class:"form-control"},null,512),[[s.nr,o.editedBom.msl]])]),(0,i._)("div",Jp,[Xp,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[18]||(t[18]=e=>o.editedBom.remarks=e),type:"text",class:"form-control"},null,512),[[s.nr,o.editedBom.remarks]])])])]),(0,i._)("div",eb,[(0,i._)("div",tb,[(0,i._)("div",ab,[sb,(0,i._)("div",ib,[(0,i.Wm)(c,{manufacturerParts:o.manufacturerParts,selectedManufacturerParts:o.editedBom.manufacturer_parts,"onUpdate:selectedManufacturerParts":n.updateManufacturerParts},null,8,["manufacturerParts","selectedManufacturerParts","onUpdate:selectedManufacturerParts"])]),lb])])])]))])}const nb={class:"ag-theme-quartz",style:{height:"600px"}};function db(e,t,a,s,l,o){const n=(0,i.up)("ag-grid-vue");return(0,i.wg)(),(0,i.iD)("div",nb,[(0,i.Wm)(n,{ref:"agGrid",gridOptions:l.gridOptions,columnDefs:l.columnDefs,rowData:a.manufacturerParts,onFirstDataRendered:o.onFirstDataRendered,onSelectionChanged:o.onSelectionChanged},null,8,["gridOptions","columnDefs","rowData","onFirstDataRendered","onSelectionChanged"])])}var cb={components:{"ag-grid-vue":Ba.n},props:{manufacturerParts:{type:Array,default:()=>[]},selectedManufacturerParts:{type:Array,default:()=>[]}},data(){return{gridOptions:{domLayout:"autoHeight",rowSelection:"multiple",rowMultiSelectWithClick:!0,pagination:!0,paginationPageSize:20},columnDefs:[{headerCheckboxSelection:!0,checkboxSelection:!0,headerName:"Part Number",field:"part_number"},{headerName:"Manufacturer Name",field:"manufacturer.name"}]}},methods:{onFirstDataRendered(e){const t=e.api;t.forEachNode((e=>{const t=e.data,a=this.selectedManufacturerParts.some((e=>e.id===t.id));e.setSelected(a)}))},onSelectionChanged(){const e=this.$refs.agGrid.api.getSelectedRows();this.$emit("update:selectedManufacturerParts",e)}}};const rb=(0,Ae.Z)(cb,[["render",db],["__scopeId","data-v-e9409d6a"]]);var mb=rb,ub={data(){return{editedBom:{part_number:"",level:"",priority_level:"",value:"",pcb_footprint:"",line_item_type:"",description:"",references:[],manufacturer_parts:[],customer_part_number:"",quantity:"",uom:"",assembly_stage:"",ecn:"",msl:"",remarks:""},line_item_types:[],newReference:"",message:"",manufacturerParts:[],assembly_stages:[],bom_id:"",bom_line_item_id:""}},components:{"manufacturer-parts-grid":mb},methods:{async fetchDataFromAPI(){try{this.$store.commit("setIsLoading",!0);const e=await Ie.Z.get(`store/edit-bom-line-item/${this.$route.params.id}/`);console.log(" Main API response for line items",e.data),this.editedBom=e.data.bom_line_item,this.bom_id=e.data.bom_line_item.bom.id,this.bom_line_item_id=e.data.bom_line_item.id,console.log("bom-id=",this.bom_id),console.log("bom-line-item-id=",this.bom_line_item_id),this.line_item_types=e.data.line_item_types,this.manufacturerParts=e.data.manufacturers_parts,this.assembly_stages=e.data.assembly_stages,console.log("line_item_types",this.line_item_types),this.line_item_types.length>0&&(this.editedBom.line_item_type=e.data.bom_line_item.line_item_type.id),this.assembly_stages.length>0&&(this.editedBom.assembly_stage=e.data.bom_line_item.assembly_stage.id),console.log("this is edit bom",this.editedBom),this.$store.commit("setIsLoading",!1)}catch(e){console.error("Error fetching data from the API:",e),this.$store.commit("setIsLoading",!1)}},addNewReference(){if(""!==this.newReference.trim()){if(!this.isReferenceExists(this.newReference.trim())){const e={name:this.newReference.trim()};this.editedBom.references.push(e)}this.newReference=""}},isReferenceExists(e){return this.editedBom.references.some((t=>t.name.toLowerCase()===e.toLowerCase()))},removeReference(e){this.editedBom.references=this.editedBom.references.filter((t=>t!==e))},submit(){console.log(this.editedBom)},async saveChanges(){if(confirm("Are you sure you want to update this line item")){this.$store.commit("setIsLoading",!0);try{const e=await Ie.Z.put(`store/edit-bom-line-item/${this.$route.params.id}/`,this.editedBom);console.log(e.data),this.$store.commit("setIsLoading",!1),this.$notify({title:"Bom Line Item Updated Successfully",type:"bg-success-subtle text-success",duration:"5000"}),this.$router.push(`/bom/edit/${this.bom_id}`)}catch(e){console.error("Error updating BOM line item:",e),this.$store.commit("setIsLoading",!1),this.$notify({title:"Error Updating Bom Line Item",type:"bg-danger-subtle text-danger",duration:"5000"})}}},async confirmDelete(){if(confirm("Are you sure you want to delete this BOM Line Item?"))try{const e=await Ie.Z.delete(`store/delete-bom-line-item/${this.$route.params.id}`);204===e.status?(this.$notify({title:"Bom Line Item Deleted Successfully",type:"bg-success-subtle text-success",duration:5e3}),this.$router.push(`/bom/edit/${this.bom_id}`)):this.$notify({title:"An error occurred while deleting BOM Line Item",type:"alert-danger",duration:5e3})}catch(e){console.error("Error deleting BOM Line Item:",e),this.$notify({title:"An error occurred while deleting BOM Line Item",type:"alert-danger",duration:5e3})}},updateManufacturerParts(e){this.editedBom.manufacturer_parts=e},getReferences(e){return e&&e.length>0?e.map((e=>e.name)).join(", "):""},getManufacturerParts(e){return e&&e.length>0?e.map((e=>`${e.part_number} - ${e.manufacturer.name}`)).join(", "):""}},updateManufacturerParts(e){this.editedBom.manufacturer_parts=e},mounted(){this.fetchDataFromAPI()}};const hb=(0,Ae.Z)(ub,[["render",ob],["__scopeId","data-v-fbd71b8a"]]);var pb=hb;const bb=e=>((0,i.dD)("data-v-9455daf4"),e=e(),(0,i.Cn)(),e),gb={key:0,class:"container text-center"},fb=bb((()=>(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1))),_b=bb((()=>(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1))),vb=[fb,_b],yb={key:1,class:"container"},kb={class:"row align-items-center"},wb={class:"col-md-6 mt-4"},Cb={class:"d-flex align-items-center"},Db=bb((()=>(0,i._)("h2",{class:"mb-0"},"Users",-1))),Sb=bb((()=>(0,i._)("span",{class:"ms-3 fs-4 text-muted"},"|",-1))),Mb={"aria-label":"breadcrumb",class:"d-inline-block ms-3"},Pb={class:"breadcrumb bg-transparent m-0 p-0"},Ib={class:"breadcrumb-item"},xb=bb((()=>(0,i._)("i",{class:"fas fa-home me-1"},null,-1))),Rb={class:"breadcrumb-item"},$b=bb((()=>(0,i._)("i",{class:"fas fa-users me-1"},null,-1))),Lb=bb((()=>(0,i._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,i._)("i",{class:"fas fa-edit me-1"}),(0,i.Uk)(" Edit User ")],-1))),Bb={class:"col-md-6 mt-4 text-end"},Ub=bb((()=>(0,i._)("i",{class:"fas fa-save me-1"},null,-1))),Eb=bb((()=>(0,i._)("i",{class:"fas fa-trash me-1"},null,-1))),Nb={class:"card animate__animated animate__fadeIn mt-5"},Ob=bb((()=>(0,i._)("div",{class:"card-header bg-primary text-white"},[(0,i._)("h4",{class:"card-title"},[(0,i._)("i",{class:"fas fa-user me-1"}),(0,i.Uk)(" User Information ")])],-1))),Tb={class:"card-body"},Ab={class:"mb-3"},jb=bb((()=>(0,i._)("label",{for:"email",class:"form-label"},"Email:",-1))),Fb={class:"input-group"},qb=bb((()=>(0,i._)("span",{class:"input-group-text"},[(0,i._)("i",{class:"fas fa-envelope"})],-1))),Wb={key:0,class:"text-danger"},Vb={class:"mb-3 row"},Zb={class:"col"},zb=bb((()=>(0,i._)("label",{for:"first_name",class:"form-label"},"First Name:",-1))),Gb={class:"input-group"},Hb=bb((()=>(0,i._)("span",{class:"input-group-text"},[(0,i._)("i",{class:"fas fa-user"})],-1))),Qb={key:0,class:"text-danger"},Yb={class:"col"},Kb=bb((()=>(0,i._)("label",{for:"last_name",class:"form-label"},"Last Name:",-1))),Jb={class:"input-group"},Xb=bb((()=>(0,i._)("span",{class:"input-group-text"},[(0,i._)("i",{class:"fas fa-user"})],-1))),eg={class:"mb-3"},tg=bb((()=>(0,i._)("label",{for:"phone_number",class:"form-label"},"Phone Number:",-1))),ag={class:"input-group"},sg=bb((()=>(0,i._)("span",{class:"input-group-text"},[(0,i._)("i",{class:"fas fa-phone"})],-1))),ig={class:"mb-3 row"},lg={class:"col"},og={class:"form-check"},ng=bb((()=>(0,i._)("label",{class:"form-check-label",for:"is_superuser"},[(0,i._)("i",{class:"fas fa-user-shield me-1"}),(0,i.Uk)(" Is Admin")],-1))),dg={class:"col"},cg={class:"form-check"},rg=["disabled"],mg=bb((()=>(0,i._)("label",{class:"form-check-label",for:"is_staff"},[(0,i._)("i",{class:"fas fa-user-cog me-1"}),(0,i.Uk)(" Is Staff")],-1))),ug={class:"mb-3 row"},hg={class:"col"},pg={class:"form-check"},bg=["disabled"],gg=bb((()=>(0,i._)("label",{class:"form-check-label",for:"is_store_team"},[(0,i._)("i",{class:"fas fa-user-shield me-1"}),(0,i.Uk)(" Is Store Team")],-1))),fg={class:"col"},_g={class:"form-check"},vg=["disabled"],yg=bb((()=>(0,i._)("label",{class:"form-check-label",for:"is_design_team"},[(0,i._)("i",{class:"fas fa-user-cog me-1"}),(0,i.Uk)(" Is Design Team")],-1)));function kg(e,t,a,l,o,n){const d=(0,i.up)("router-link");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",gb,vb)):((0,i.wg)(),(0,i.iD)("div",yb,[(0,i._)("div",kb,[(0,i._)("div",wb,[(0,i._)("div",Cb,[Db,Sb,(0,i._)("nav",Mb,[(0,i._)("ol",Pb,[(0,i._)("li",Ib,[(0,i.Wm)(d,{to:"/"},{default:(0,i.w5)((()=>[xb,(0,i.Uk)(" Home")])),_:1})]),(0,i._)("li",Rb,[(0,i.Wm)(d,{to:"/users"},{default:(0,i.w5)((()=>[$b,(0,i.Uk)(" Users")])),_:1})]),Lb])])])]),(0,i._)("div",Bb,[(0,i._)("button",{type:"submit",class:"btn btn-primary btn-sm",onClick:t[0]||(t[0]=(...e)=>n.updateUser&&n.updateUser(...e))},[Ub,(0,i.Uk)(" Update User ")]),(0,i._)("button",{type:"button",class:"btn btn-danger ms-2 btn-sm",onClick:t[1]||(t[1]=(...e)=>n.deleteUser&&n.deleteUser(...e))},[Eb,(0,i.Uk)(" Delete User ")])])]),(0,i._)("div",Nb,[Ob,(0,i._)("div",Tb,[(0,i._)("div",Ab,[jb,(0,i._)("div",Fb,[qb,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>o.editedUser.email=e),type:"email",class:"form-control",id:"email",required:""},null,512),[[s.nr,o.editedUser.email]])]),o.editedUser.email?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("small",Wb,"Email is required."))]),(0,i._)("div",Vb,[(0,i._)("div",Zb,[zb,(0,i._)("div",Gb,[Hb,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>o.editedUser.first_name=e),type:"text",class:"form-control",id:"first_name",required:""},null,512),[[s.nr,o.editedUser.first_name]])]),o.editedUser.first_name?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("small",Qb,"First Name is required."))]),(0,i._)("div",Yb,[Kb,(0,i._)("div",Jb,[Xb,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>o.editedUser.last_name=e),type:"text",class:"form-control",id:"last_name"},null,512),[[s.nr,o.editedUser.last_name]])])])]),(0,i._)("div",eg,[tg,(0,i._)("div",ag,[sg,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>o.editedUser.phone_number=e),type:"tel",class:"form-control",id:"phone_number"},null,512),[[s.nr,o.editedUser.phone_number]])])]),(0,i._)("div",ig,[(0,i._)("div",lg,[(0,i._)("div",og,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>o.editedUser.is_superuser=e),onChange:t[7]||(t[7]=(...e)=>n.updateOthers&&n.updateOthers(...e)),type:"checkbox",class:"form-check-input",id:"is_superuser"},null,544),[[s.e8,o.editedUser.is_superuser]]),ng])]),(0,i._)("div",dg,[(0,i._)("div",cg,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>o.editedUser.is_staff=e),disabled:o.editedUser.is_superuser,type:"checkbox",class:"form-check-input",id:"is_staff"},null,8,rg),[[s.e8,o.editedUser.is_staff]]),mg])])]),(0,i._)("div",ug,[(0,i._)("div",hg,[(0,i._)("div",pg,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>o.editedUser.is_store_team=e),disabled:o.editedUser.is_superuser,type:"checkbox",class:"form-check-input",id:"is_store_team"},null,8,bg),[[s.e8,o.editedUser.is_store_team]]),gg])]),(0,i._)("div",fg,[(0,i._)("div",_g,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>o.editedUser.is_design_team=e),disabled:o.editedUser.is_superuser,type:"checkbox",class:"form-check-input",id:"is_design_team"},null,8,vg),[[s.e8,o.editedUser.is_design_team]]),yg])])])])])]))}var wg={name:"EditUser",data(){return{userId:null,editedUser:{email:"",first_name:"",last_name:"",phone_number:"",is_superuser:!1,is_staff:!1,is_store_team:!1,is_design_team:!1}}},mounted(){this.userId=this.$route.params.id,this.fetchUserData()},methods:{fetchUserData(){this.$store.commit("setIsLoading",!0),Ie.Z.get(`/accounts/users/${this.userId}/`).then((e=>{console.log("edit user response data",e.data),this.editedUser=e.data,this.$store.commit("setIsLoading",!1)})).catch((e=>{this.$store.commit("setIsLoading",!1),console.error("Error fetching user data:",e)}))},updateOthers(){this.editedUser.is_superuser&&(this.editedUser.is_staff=!0,this.editedUser.is_store_team=!0,this.editedUser.is_design_team=!0)},updateUser(){confirm("Are you sure you want to update this user?")&&(this.$store.commit("setIsLoading",!0),Ie.Z.put(`/accounts/users/update/${this.userId}/`,this.editedUser).then((e=>{console.log("User updated successfully:",e.data),this.$store.commit("setIsLoading",!1),alert("User Updated successfully!")})).catch((e=>{console.error("Error updating user:",e),this.$store.commit("setIsLoading",!1)})))},deleteUser(){confirm("Are you sure you want to delete this user?")&&(this.$store.commit("setIsLoading",!0),Ie.Z.delete(`/accounts/users/delete/${this.userId}/`).then((()=>{console.log("User deleted successfully."),this.$store.commit("setIsLoading",!1),alert("User Deleted successfully!"),this.$router.push("/users")})).catch((e=>{alert("error deleting!"),console.error("Error deleting user:",e)})))}}};const Cg=(0,Ae.Z)(wg,[["render",kg],["__scopeId","data-v-9455daf4"]]);var Dg=Cg;const Sg=e=>((0,i.dD)("data-v-7b78d019"),e=e(),(0,i.Cn)(),e),Mg={class:"container"},Pg={class:"row align-items-center"},Ig={class:"col-md-6 mt-4"},xg={class:"d-flex align-items-center"},Rg=Sg((()=>(0,i._)("h2",{class:"mb-0"},"Users",-1))),$g=Sg((()=>(0,i._)("span",{class:"ms-3 fs-4 text-muted"},"|",-1))),Lg={"aria-label":"breadcrumb",class:"d-inline-block ms-3"},Bg={class:"breadcrumb bg-transparent m-0 p-0"},Ug={class:"breadcrumb-item"},Eg=Sg((()=>(0,i._)("i",{class:"fas fa-home me-1"},null,-1))),Ng={class:"breadcrumb-item"},Og=Sg((()=>(0,i._)("i",{class:"fas fa-users me-1"},null,-1))),Tg=Sg((()=>(0,i._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,i._)("i",{class:"fa fa-user-plus"}),(0,i.Uk)(" Create User ")],-1))),Ag={class:"col-md-6 mt-4 text-end"},jg=Sg((()=>(0,i._)("i",{class:"fas fa-save me-1"},null,-1))),Fg={class:"card animate__animated animate__fadeIn mt-5"},qg=Sg((()=>(0,i._)("div",{class:"card-header bg-primary text-white"},[(0,i._)("h4",{class:"card-title"},[(0,i._)("i",{class:"fas fa-user"}),(0,i.Uk)(" User Information")])],-1))),Wg={class:"card-body"},Vg={class:"mb-3"},Zg=Sg((()=>(0,i._)("label",{for:"email",class:"form-label"},"Email:",-1))),zg={class:"input-group"},Gg=Sg((()=>(0,i._)("span",{class:"input-group-text"},[(0,i._)("i",{class:"fas fa-envelope"})],-1))),Hg={key:0,class:"text-danger"},Qg={class:"mb-3"},Yg=Sg((()=>(0,i._)("label",{for:"password",class:"form-label"},"Password:",-1))),Kg={class:"input-group"},Jg=Sg((()=>(0,i._)("span",{class:"input-group-text"},[(0,i._)("i",{class:"fas fa-lock"})],-1))),Xg=["type"],ef={key:0,class:"text-danger"},tf={key:1,class:"text-danger"},af=Sg((()=>(0,i._)("i",{class:"fas fa-exclamation-triangle"},null,-1))),sf={class:"mb-3 row"},lf={class:"col"},of=Sg((()=>(0,i._)("label",{for:"first_name",class:"form-label"},"First Name:",-1))),nf={class:"input-group"},df=Sg((()=>(0,i._)("span",{class:"input-group-text"},[(0,i._)("i",{class:"fas fa-user"})],-1))),cf={key:0,class:"text-danger"},rf={class:"col"},mf=Sg((()=>(0,i._)("label",{for:"last_name",class:"form-label"},"Last Name:",-1))),uf={class:"input-group"},hf=Sg((()=>(0,i._)("span",{class:"input-group-text"},[(0,i._)("i",{class:"fas fa-user"})],-1))),pf={class:"mb-3"},bf=Sg((()=>(0,i._)("label",{for:"phone_number",class:"form-label"},"Phone Number:",-1))),gf={class:"input-group"},ff=Sg((()=>(0,i._)("span",{class:"input-group-text"},[(0,i._)("i",{class:"fas fa-phone"})],-1))),_f={class:"mb-3 row"},vf={class:"col"},yf={class:"form-check"},kf=Sg((()=>(0,i._)("label",{class:"form-check-label",for:"is_superuser"},"Is Admin",-1))),wf={class:"col"},Cf={class:"form-check"},Df=["disabled"],Sf=Sg((()=>(0,i._)("label",{class:"form-check-label",for:"is_staff"},"Is Staff",-1))),Mf={class:"mb-3 row"},Pf={class:"col"},If={class:"form-check"},xf=["disabled"],Rf=Sg((()=>(0,i._)("label",{class:"form-check-label",for:"is_store_team"}," Is Store Team",-1))),$f={class:"col"},Lf={class:"form-check"},Bf=["disabled"],Uf=Sg((()=>(0,i._)("label",{class:"form-check-label",for:"is_design_team"}," Is Design Team",-1)));function Ef(e,t,a,l,o,n){const d=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",Mg,[(0,i._)("div",Pg,[(0,i._)("div",Ig,[(0,i._)("div",xg,[Rg,$g,(0,i._)("nav",Lg,[(0,i._)("ol",Bg,[(0,i._)("li",Ug,[(0,i.Wm)(d,{to:"/"},{default:(0,i.w5)((()=>[Eg,(0,i.Uk)("Home")])),_:1})]),(0,i._)("li",Ng,[(0,i.Wm)(d,{to:"/users"},{default:(0,i.w5)((()=>[Og,(0,i.Uk)("Users")])),_:1})]),Tg])])])]),(0,i._)("div",Ag,[(0,i._)("button",{type:"submit",class:"btn btn-primary btn-sm",onClick:t[0]||(t[0]=(...e)=>n.createUser&&n.createUser(...e))},[jg,(0,i.Uk)(" Create User ")])])]),(0,i._)("div",Fg,[qg,(0,i._)("div",Wg,[(0,i._)("div",Vg,[Zg,(0,i._)("div",zg,[Gg,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>o.newUser.email=e),type:"email",class:"form-control",id:"email",required:""},null,512),[[s.nr,o.newUser.email]])]),!o.newUser.email&&o.formSubmitted?((0,i.wg)(),(0,i.iD)("small",Hg," Email is required. ")):(0,i.kq)("",!0)]),(0,i._)("div",Qg,[Yg,(0,i._)("div",Kg,[Jg,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>o.newUser.password=e),type:o.showPassword?"text":"password",class:"form-control",id:"password",required:"",onFocus:t[3]||(t[3]=(...e)=>n.clearPasswordError&&n.clearPasswordError(...e))},null,40,Xg),[[s.YZ,o.newUser.password]]),(0,i._)("span",{class:"input-group-text",onClick:t[4]||(t[4]=(...e)=>n.togglePasswordVisibility&&n.togglePasswordVisibility(...e))},[(0,i._)("i",{class:(0,Ze.C_)(["fas",o.showPassword?"fa-eye-slash":"fa-eye"])},null,2)])]),!o.newUser.password&&o.formSubmitted?((0,i.wg)(),(0,i.iD)("small",ef," Password is required. ")):(0,i.kq)("",!0),o.passwordAuthenticationError?((0,i.wg)(),(0,i.iD)("div",tf,[(0,i._)("strong",null,[af,(0,i.Uk)(" "+(0,Ze.zw)(o.passwordAuthenticationError),1)])])):(0,i.kq)("",!0)]),(0,i._)("div",sf,[(0,i._)("div",lf,[of,(0,i._)("div",nf,[df,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>o.newUser.first_name=e),type:"text",class:"form-control",id:"first_name",required:""},null,512),[[s.nr,o.newUser.first_name]])]),!o.newUser.first_name&&o.formSubmitted?((0,i.wg)(),(0,i.iD)("small",cf," First Name is required. ")):(0,i.kq)("",!0)]),(0,i._)("div",rf,[mf,(0,i._)("div",uf,[hf,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>o.newUser.last_name=e),type:"text",class:"form-control",id:"last_name",required:""},null,512),[[s.nr,o.newUser.last_name]])])])]),(0,i._)("div",pf,[bf,(0,i._)("div",gf,[ff,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>o.newUser.phone_number=e),type:"tel",class:"form-control",id:"phone_number"},null,512),[[s.nr,o.newUser.phone_number]])])]),(0,i._)("div",_f,[(0,i._)("div",vf,[(0,i._)("div",yf,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>o.newUser.is_superuser=e),onChange:t[9]||(t[9]=(...e)=>n.updateOthers&&n.updateOthers(...e)),type:"checkbox",class:"form-check-input",id:"is_superuser"},null,544),[[s.e8,o.newUser.is_superuser]]),kf])]),(0,i._)("div",wf,[(0,i._)("div",Cf,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>o.newUser.is_staff=e),disabled:o.newUser.is_superuser,type:"checkbox",class:"form-check-input",id:"is_staff"},null,8,Df),[[s.e8,o.newUser.is_staff]]),Sf])])])]),(0,i._)("div",Mf,[(0,i._)("div",Pf,[(0,i._)("div",If,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>o.newUser.is_store_team=e),disabled:o.newUser.is_superuser,type:"checkbox",class:"form-check-input",id:"is_store_team"},null,8,xf),[[s.e8,o.newUser.is_store_team]]),Rf])]),(0,i._)("div",$f,[(0,i._)("div",Lf,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[12]||(t[12]=e=>o.newUser.is_design_team=e),disabled:o.newUser.is_superuser,type:"checkbox",class:"form-check-input",id:"is_design_team"},null,8,Bf),[[s.e8,o.newUser.is_design_team]]),Uf])])])])])}var Nf={name:"CreateUser",data(){return{newUser:{email:"",password:"",first_name:"",last_name:"",phone_number:"",is_superuser:!1,is_staff:!1,is_store_team:!1,is_design_team:!1},formSubmitted:!1,passwordAuthenticationError:null,showPassword:!1}},methods:{updateOthers(){this.newUser.is_superuser&&(this.newUser.is_staff=!0,this.newUser.is_store_team=!0,this.newUser.is_design_team=!0)},createUser(){console.log("form data",this.newUser),this.formSubmitted=!0,this.passwordAuthenticationError=null,this.newUser.email&&this.newUser.password&&this.newUser.first_name&&Ie.Z.post("accounts/users/create/",this.newUser).then((e=>{console.log("User created successfully:",e.data),alert("User created successfully!"),this.$router.push("/users")})).catch((e=>{e.response&&e.response.data.password?this.passwordAuthenticationError=e.response.data.password[0]:console.error("Error creating user:",e)}))},clearPasswordError(){this.passwordAuthenticationError=null},togglePasswordVisibility(){this.showPassword=!this.showPassword}}};const Of=(0,Ae.Z)(Nf,[["render",Ef],["__scopeId","data-v-7b78d019"]]);var Tf=Of;const Af={key:0,class:"container text-center"},jf=(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1),Ff=(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1),qf=[jf,Ff],Wf={key:1,class:"container"},Vf={class:"row align-items-center"},Zf=(0,i.uE)('<div class="col-md-6 mt-4"><div class="d-flex align-items-center"><h2 class="mb-0">Orders</h2><span class="ms-3 fs-4 text-muted">|</span><nav aria-label="breadcrumb" class="d-inline-block ms-3"><ol class="breadcrumb bg-transparent m-0 p-0"><li class="breadcrumb-item"><a href="/"><i class="fas fa-home me-1"></i>Home</a></li><li class="breadcrumb-item active" aria-current="page"><i class="fas fa-shopping-cart me-1"></i> Orders </li></ol></nav></div></div>',1),zf={class:"col-md-6 d-flex justify-content-end mt-4"};function Gf(e,t,a,s,l,o){const n=(0,i.up)("router-link"),d=(0,i.up)("OrderDetailsTableWithDelete");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",Af,qf)):((0,i.wg)(),(0,i.iD)("div",Wf,[(0,i._)("div",Vf,[Zf,(0,i._)("div",zf,[(0,i.Wm)(n,{to:"/orders/create",class:"btn btn-primary btn-sm ms-2"},{default:(0,i.w5)((()=>[(0,i.Uk)(" Create Order ")])),_:1})])]),(0,i.Wm)(d,{style:{"margin-top":"20px"},orders:l.orders,onRowClicked:o.handleRowClicked,onRowSelected:o.handleRowSelected},null,8,["orders","onRowClicked","onRowSelected"])]))}function Hf(e,t,a,s,l,o){const n=(0,i.up)("ag-grid-vue");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(n,{style:{height:"500px"},class:"ag-theme-quartz",rowData:a.orders,defaultColDef:l.defaultColDef,columnDefs:l.colDefs,pagination:!0,rowSelection:"multiple",onRowClicked:o.onRowClicked,onSelectionChanged:o.onSelectionChanged},null,8,["rowData","defaultColDef","columnDefs","onRowClicked","onSelectionChanged"])])}var Qf={name:"App",components:{AgGridVue:Ba.n},props:{orders:{type:Array,required:!0}},data(){return{colDefs:[{field:"id",headerName:"Order ID",hide:!0},{field:"bom.id",headerName:"BOM ID ",hide:!0},{field:"bom.product.project.name",checkboxSelection:!0,headerName:"Project Name"},{field:"bom.product.name",headerName:"Product"},{field:"batch_quantity",headerName:"Batch Quantity"},{field:"bom.bom_file_name",headerName:"File Name"},{headerName:"Download",cellRenderer:this.editButtonRenderer},{headerName:"Actions",field:"actions",cellRenderer:this.actionsCellRenderer,sortable:!1,filter:!1}],defaultColDef:{filter:!0,sortable:!0,resizable:!0,autoSize:!0},selectedRows:[]}},methods:{onRowClicked(e){this.$emit("rowClicked",e.data)},onSelectionChanged(e){const t=e.api.getSelectedRows(),a=t.length>0?t[0]:null;a?this.$emit("rowSelected",a):this.$emit("rowDeselected")},editButtonRenderer(e){console.log(e);const t=document.createElement("button");return t.innerHTML='<i class="fas fa-download"></i>',t.classList.add("btn-sm","btn-primary"),t.addEventListener("click",(()=>this.downloadFile(e.data.bom.bom_file_url))),t},actionsCellRenderer(e){const t=document.createElement("button");t.innerHTML='<i class="fas fa-trash-alt"></i>',t.classList.add("btn-sm","btn-danger","ms-2"),t.addEventListener("click",(()=>this.deleteProduct(e.data.id)));const a=document.createElement("div");return a.appendChild(t),a},onEditClick(e){this.$router.push(`/product/edit/${e}`)},async deleteProduct(e){if(console.log("order id",e),confirm("Are you sure you want to delete this Order?")){this.$store.commit("setIsLoading",!0);try{const t=await Ie.Z.delete(`/store/delete-order/${e}/`);console.log("Response:",t),204===t.status?(console.log("Order deleted successfully."),this.$store.commit("setIsLoading",!1),this.$notify({title:"Order Deleted Successfully",type:"bg-success-subtle text-success",duration:"5000"}),window.location.reload()):(console.error("Error deleting Order. Unexpected status:",t.status),this.$notify({title:"Order Deletion Unsuccessful",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1))}catch(t){console.error("Error deleting Order:",t),this.$notify({title:"Order Deletion Unsuccessful",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1)}}},downloadFile(e){const t=document.createElement("a");t.href=e,t.target="_blank",t.download="BOM_File",document.body.appendChild(t),t.click(),document.body.removeChild(t)}}};const Yf=(0,Ae.Z)(Qf,[["render",Hf]]);var Kf=Yf,Jf={components:{OrderDetailsTableWithDelete:Kf},data(){return{orders:[]}},methods:{async fetchData(){try{this.$store.commit("setIsLoading",!0);const e=await Ie.Z.get("store/get-orders/");console.log("response.data",e.data),this.orders=e.data.orders,console.log("orders",this.orders),this.$store.commit("setIsLoading",!1)}catch(e){console.error("Error fetching BOM data:",e),this.$store.commit("setIsLoading",!1)}},handleRowClicked(e){console.log("Clicked Row:",e)},handleRowSelected(e){console.log("Row Selected:",e),this.selectedRow=e}},mounted(){this.fetchData()}};const Xf=(0,Ae.Z)(Jf,[["render",Gf]]);var e_=Xf;const t_=e=>((0,i.dD)("data-v-9b431a9a"),e=e(),(0,i.Cn)(),e),a_={key:0,class:"container text-center"},s_=t_((()=>(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1))),i_=t_((()=>(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1))),l_=[s_,i_],o_={key:1,class:"container"},n_={class:"row align-items-center"},d_={class:"col-md-6 mt-4"},c_={class:"d-flex align-items-center"},r_=t_((()=>(0,i._)("h2",{class:"mb-0"},"Orders",-1))),m_=t_((()=>(0,i._)("span",{class:"ms-3 fs-4 text-muted"},"|",-1))),u_={"aria-label":"breadcrumb",class:"d-inline-block ms-3"},h_={class:"breadcrumb bg-transparent m-0 p-0"},p_=t_((()=>(0,i._)("li",{class:"breadcrumb-item"},[(0,i._)("a",{href:"/"},[(0,i._)("i",{class:"fas fa-home me-1"}),(0,i.Uk)("Home")])],-1))),b_={class:"breadcrumb-item active"},g_=t_((()=>(0,i._)("i",{class:"fas fa-shopping-cart me-1"},null,-1))),f_=t_((()=>(0,i._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,i._)("i",{class:"fa-solid fa-receipt me-1"}),(0,i.Uk)(" Create Order ")],-1))),__={class:"col-md-6 d-flex justify-content-end mt-4"},v_={class:"card p-3 mb-4 mt-4"},y_={class:"row mb-3"},k_={class:"col-md-6"},w_=t_((()=>(0,i._)("label",{for:"projectDropdown",class:"form-label"},[(0,i.Uk)("Select Project "),(0,i._)("span",{class:"text-danger"},"*")],-1))),C_=["value"],D_={class:"col-md-6"},S_=t_((()=>(0,i._)("label",{for:"productCode",class:"form-label"},[(0,i.Uk)("Product "),(0,i._)("span",{class:"text-danger"},"*")],-1))),M_=["value"],P_={key:0,class:"row mb-3"},I_={class:"col-md-6"},x_=t_((()=>(0,i._)("label",{for:"bomType",class:"form-label"},"BOM Type",-1))),R_={class:"col-md-6"},$_=t_((()=>(0,i._)("label",{for:"bomRevNo",class:"form-label"},[(0,i.Uk)("BOM REV No "),(0,i._)("span",{class:"text-danger"},"*")],-1))),L_={key:0,class:"text-danger"},B_={class:"row mb-3 justify-content-center"},U_={class:"col-md-6"},E_=t_((()=>(0,i._)("label",{for:"batchQuantity",class:"form-label"},[(0,i._)("i",{class:"fas fa-flask me-2"}),(0,i.Uk)("Batch Quantity "),(0,i._)("span",{class:"text-danger"},"*")],-1))),N_={key:0,class:"col-md-6"},O_=t_((()=>(0,i._)("label",{for:"issueDate",class:"form-label"},[(0,i.Uk)("Issue Date "),(0,i._)("span",{class:"text-danger"},"*")],-1))),T_={key:1,class:"card p-3 mb-4"},A_=t_((()=>(0,i._)("label",{for:"fileInput",class:"form-label"},[(0,i._)("i",{class:"fas fa-cloud-upload-alt mr-2"}),(0,i.Uk)(" Choose BOM Excel file "),(0,i._)("span",{class:"text-danger"},"*")],-1))),j_={class:"custom-file"},F_={class:"custom-file-label",for:"fileInput"},q_=t_((()=>(0,i._)("div",{style:{"margin-bottom":"10px"}},null,-1))),W_=t_((()=>(0,i._)("label",{for:"pcbFileInput",class:"form-label"},[(0,i._)("i",{class:"fas fa-cloud-upload-alt mr-2"}),(0,i.Uk)(" Choose PCB BBT Test Report ")],-1))),V_={class:"custom-file"},Z_={class:"custom-file-label",for:"pcbFileInput"},z_={class:"radio-button"},G_={class:"form-check form-check-inline"},H_=t_((()=>(0,i._)("label",{class:"form-check-label",for:"flexRadioDefault1"}," Upload a new BOM ",-1))),Q_={class:"form-check form-check-inline"},Y_=t_((()=>(0,i._)("label",{class:"form-check-label",for:"flexRadioDefault2"}," Select BOM ",-1))),K_={key:2},J_={type:"button",class:"btn btn-primary mt-4","data-bs-toggle":"modal","data-bs-target":"#exampleModal"},X_={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},ev={class:"modal-dialog modal-xl"},tv={class:"modal-content"},av=t_((()=>(0,i._)("div",{class:"modal-header"},[(0,i._)("h5",{class:"modal-title",id:"exampleModalLabel"},"Details"),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),sv={class:"modal-body"},iv={class:"modal-footer"},lv=t_((()=>(0,i._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1)));function ov(e,t,a,l,o,n){const d=(0,i.up)("router-link"),c=(0,i.up)("OrderBomDetailsVue"),r=(0,i.up)("CustomModal");return o.isLoading?((0,i.wg)(),(0,i.iD)("div",a_,l_)):((0,i.wg)(),(0,i.iD)("div",o_,[(0,i._)("div",n_,[(0,i._)("div",d_,[(0,i._)("div",c_,[r_,m_,(0,i._)("nav",u_,[(0,i._)("ol",h_,[p_,(0,i._)("li",b_,[(0,i.Wm)(d,{to:"/orders"},{default:(0,i.w5)((()=>[g_,(0,i.Uk)(" Orders ")])),_:1})]),f_])])])]),(0,i._)("div",__,[(0,i._)("button",{type:"button",class:"btn-sm btn-primary",onClick:t[0]||(t[0]=(...e)=>n.createOrder&&n.createOrder(...e))}," Create Order ")])]),(0,i._)("section",v_,[(0,i._)("div",y_,[(0,i._)("div",k_,[w_,(0,i.wy)((0,i._)("select",{class:"form-select",id:"projectDropdown","onUpdate:modelValue":t[1]||(t[1]=e=>o.selectedProject=e),required:""},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.projects,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e.id,value:e.id},(0,Ze.zw)(e.name),9,C_)))),128))],512),[[s.bM,o.selectedProject]])]),(0,i._)("div",D_,[S_,(0,i.wy)((0,i._)("select",{class:"form-select",id:"productCode","onUpdate:modelValue":t[2]||(t[2]=e=>o.selectedProduct=e),onChange:t[3]||(t[3]=(...e)=>n.filteredBoms&&n.filteredBoms(...e)),required:""},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.filteredProducts,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e.id,value:e.id},(0,Ze.zw)(e.name),9,M_)))),128))],544),[[s.bM,o.selectedProduct]])])]),"uploadNewBom"===o.selectedRadio?((0,i.wg)(),(0,i.iD)("div",P_,[(0,i._)("div",I_,[x_,(0,i.wy)((0,i._)("input",{type:"text",class:"form-control",id:"bomType","onUpdate:modelValue":t[4]||(t[4]=e=>o.bomType=e)},null,512),[[s.nr,o.bomType]])]),(0,i._)("div",R_,[$_,(0,i.wy)((0,i._)("input",{type:"text",class:"form-control",id:"bomRevNo","onUpdate:modelValue":t[5]||(t[5]=e=>o.bomRevNo=e),onInput:t[6]||(t[6]=(...e)=>n.validateBomRevNo&&n.validateBomRevNo(...e)),required:""},null,544),[[s.nr,o.bomRevNo]]),""===o.bomRevNo||o.isValidBomRevNo?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("p",L_," BOM REV No should be a decimal type with a minimum of 1.0. "))])])):(0,i.kq)("",!0),(0,i._)("div",B_,[(0,i._)("div",U_,[E_,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>o.order.batchQuantity=e),type:"number",class:"form-control",placeholder:"Enter Batch Quantity",min:"1",required:""},null,512),[[s.nr,o.order.batchQuantity]])]),"uploadNewBom"===o.selectedRadio?((0,i.wg)(),(0,i.iD)("div",N_,[O_,(0,i.wy)((0,i._)("input",{type:"date",class:"form-control",id:"issueDate","onUpdate:modelValue":t[8]||(t[8]=e=>o.issueDate=e),required:""},null,512),[[s.nr,o.issueDate]])])):(0,i.kq)("",!0)]),"uploadNewBom"===o.selectedRadio?((0,i.wg)(),(0,i.iD)("div",T_,[A_,(0,i._)("div",j_,[(0,i._)("input",{type:"file",class:"custom-file-input",id:"fileInput",onChange:t[9]||(t[9]=e=>n.handleFileUpload(e,"bom")),accept:".xls, .xlsx",required:""},null,32),(0,i._)("label",F_,(0,Ze.zw)(o.uploadedFileNameBOM||"Select file"),1)]),q_,W_,(0,i._)("div",V_,[(0,i._)("input",{type:"file",class:"custom-file-input",id:"pcbFileInput",onChange:t[10]||(t[10]=e=>n.handleFileUpload(e,"pcb")),accept:".xls, .xlsx,.pdf",required:""},null,32),(0,i._)("label",Z_,(0,Ze.zw)(o.uploadedFileNamePCB||"Select file"),1)])])):(0,i.kq)("",!0),(0,i._)("div",z_,[(0,i._)("div",G_,[(0,i.wy)((0,i._)("input",{class:"form-check-input",type:"radio",name:"flexRadioDefault",id:"flexRadioDefault1","onUpdate:modelValue":t[11]||(t[11]=e=>o.selectedRadio=e),value:"uploadNewBom"},null,512),[[s.G2,o.selectedRadio]]),H_]),(0,i._)("div",Q_,[(0,i.wy)((0,i._)("input",{class:"form-check-input",type:"radio",name:"flexRadioDefault",id:"flexRadioDefault2","onUpdate:modelValue":t[12]||(t[12]=e=>o.selectedRadio=e),value:"selectBom"},null,512),[[s.G2,o.selectedRadio]]),Y_])]),"selectBom"===o.selectedRadio?((0,i.wg)(),(0,i.iD)("div",K_,[(0,i._)("button",J_,(0,Ze.zw)(o.selectBomButtonText),1)])):(0,i.kq)("",!0)]),(0,i._)("div",X_,[(0,i._)("div",ev,[(0,i._)("div",tv,[av,(0,i._)("div",sv,[(0,i.Wm)(c,{bomByProducts:o.bomByProducts,onRowClicked:n.handleRowClicked,onRowSelected:n.handleRowSelected,onRowDeselected:n.handleRowDeselected},null,8,["bomByProducts","onRowClicked","onRowSelected","onRowDeselected"])]),(0,i._)("div",iv,[lv,(0,i._)("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal",onClick:t[13]||(t[13]=(...e)=>n.saveChanges&&n.saveChanges(...e))}," Save changes ")])])])]),(0,i.Wm)(r,{show:o.isCustomModalVisible,onCloseModal:n.handleCloseModal,onHandleModalSubmitted:n.handleModalSubmission,onDismissModal:n.handleCloseModal},null,8,["show","onCloseModal","onHandleModalSubmitted","onDismissModal"])]))}const nv={class:"modal fade",id:"bomRevisionNoteModal",tabindex:"-1","aria-labelledby":"bomRevisionNoteModalLabel","aria-hidden":"true"},dv={class:"modal-dialog"},cv={class:"modal-content"},rv=(0,i._)("div",{class:"modal-header"},[(0,i._)("h5",{class:"modal-title",id:"bomRevisionNoteModalLabel"}," BOM Revision Note "),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),mv={class:"modal-body"};function uv(e,t,a,s,l,o){const n=(0,i.up)("ag-grid-vue");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(n,{style:{height:"500px"},class:"ag-theme-quartz",rowData:a.bomByProducts,defaultColDef:l.defaultColDef,columnDefs:l.colDefs,pagination:!0,onRowClicked:o.onRowClicked,onSelectionChanged:o.onSelectionChanged,rowSelection:"single"},null,8,["rowData","defaultColDef","columnDefs","onRowClicked","onSelectionChanged"]),(0,i._)("div",nv,[(0,i._)("div",dv,[(0,i._)("div",cv,[rv,(0,i._)("div",mv,[(0,i._)("p",null,(0,Ze.zw)(l.selectedBomRevisionNote),1)])])])])])}var hv={name:"OrderBomDetails",components:{AgGridVue:Ba.n},props:{bomByProducts:{type:Array,required:!0}},data(){return{colDefs:[{field:"id",checkboxSelection:!0,headerName:"BOM ID"},{field:"bom_rev_number",headerName:"Bom Rev No."},{field:"change_note",headerName:"BOM Revision Note",valueFormatter:e=>e.value?e.value:"Change Note Absent"},{field:"product.project.name",headerName:"Project Name"},{field:"product.name",headerName:"Product Name"},{field:"product.product_code",headerName:"Product Code"},{field:"bom_type.name",headerName:"BOM Type"},{field:"issue_date",headerName:"Issue Date"},{field:"product.product_rev_number",headerName:"Product Rev No"},{headerName:"Download",cellRenderer:this.editButtonRenderer}],defaultColDef:{filter:!0,sortable:!0,resizable:!0,autoSize:!0},selectedRows:[],selectedBomRevisionNote:""}},methods:{onRowClicked(e){this.$emit("rowClicked",e.data)},onSelectionChanged(e){const t=e.api.getSelectedRows(),a=t.length>0?t[0]:null;a?this.$emit("rowSelected",a):this.$emit("rowDeselected")},editButtonRenderer(e){console.log(e);const t=document.createElement("button");return t.innerHTML=`<i class="fas fa-download"></i> ${e.data.bom_file_name} `,t.classList.add("btn-sm","btn-primary"),t.addEventListener("click",(()=>this.downloadFile(e.data.bom_file_url))),t},downloadFile(e){const t=document.createElement("a");t.href=e,t.target="_blank",t.download="BOM_File",document.body.appendChild(t),t.click(),document.body.removeChild(t)},onEditClick(e){this.$router.push(`/bom/edit/${e}`)},bomRevisionNoteRenderer(e){const t=document.createElement("div");if(e.data.change_note){const a=document.createElement("button");a.innerHTML='<i class="fas fa-eye"></i>',a.classList.add("btn","btn-secondary"),a.dataset.bsToggle="modal",a.dataset.bsTarget="#bomRevisionNoteModal",a.addEventListener("click",(t=>{t.stopPropagation(),this.loadBomRevisionChangeNoteInModal(e.data)})),t.appendChild(a)}else{const e=document.createElement("span");e.innerText="No Change",e.classList.add("text-muted"),t.appendChild(e)}return t},loadBomRevisionChangeNoteInModal(e){console.log("to set the data in the modal",e),console.log("revision note",e.change_note),this.selectedBomRevisionNote=e.change_note}}};const pv=(0,Ae.Z)(hv,[["render",uv]]);var bv=pv,gv={components:{OrderBomDetailsVue:bv,CustomModal:ha},data(){return{selectedRadio:null,issueDate:"",order:{selectedBomId:null,batchQuantity:1},boms:[],projects:[],products:[],orders:[],selectedProduct:null,selectedProject:null,bomByProducts:[],selectedBomFileName:"",selectedBomId:null,selectBomButtonText:"Select BOM",bomRevNo:null,isValidBomRevNo:!0,bomType:null,uploadedFileName:null,uploadedFile:null,uploadedFileNameBOM:"",uploadedFileNamePCB:"",uploadedFileBOM:null,uploadedFilePCB:null,isLoading:!1,bom_rev_change_note:"",isCustomModalVisible:!1}},computed:{filteredProducts(){if(this.products&&this.projects&&this.products.length&&this.projects.length){if(console.log("selectedProject",this.selectedProject),null!==this.selectedProject){const e=this.products.filter((e=>{const t=e.project;return t===this.selectedProject}));return console.log("Filtered Products:",e),e}return console.log("All Products:",this.products),[]}return console.log("No Products or Projects available."),[]},prepopulatedIssueDate(){return this.bomByProducts.length>0?this.bomByProducts[0].issue_date:null},formattedIssueDate(){if(this.prepopulatedIssueDate){const[e,t,a]=this.prepopulatedIssueDate.split("/");return`${a}-${e.padStart(2,"0")}-${t.padStart(2,"0")}`}return null}},mounted(){this.getData()},methods:{openCustomModal(){this.isCustomModalVisible=!0},handleCloseModal(){this.isCustomModalVisible=!1},validateBomRevNo(){const e=/^(1\.[0-9]|1[0-9]|2\.0)$/;e.test(this.bomRevNo)?this.isValidBomRevNo=!0:this.isValidBomRevNo=!1},setIsLoading(e){this.isLoading=e,this.$store.commit("setIsLoading",e)},notifySuccess(e){this.$notify({title:e,type:"bg-success-subtle text-success",duration:"5000"})},notifyError(e){this.$notify({title:e,type:"bg-danger-subtle text-danger",duration:"5000"})},handleError(e){this.notifyError(e),this.setIsLoading(!1)},handleFileUpload(e,t){const a=e.target.files[0];a&&(console.log("Uploaded file:",a),"bom"===t?(console.log("BOM file uploaded:",a.name),this.uploadedFileNameBOM=a.name,this.uploadedFileBOM=a):"pcb"===t&&(console.log("PCB file uploaded:",a.name),this.uploadedFileNamePCB=a.name,this.uploadedFilePCB=a),this.uploadedFileBOM&&console.log("Uploaded BOM file:",this.uploadedFileBOM),this.uploadedFilePCB&&console.log("Uploaded PCB file:",this.uploadedFilePCB))},async getData(){try{this.setIsLoading(!0);const e=await Ie.Z.get("store/create-order/");console.log("boms + products + projects",e.data),this.setIsLoading(!1),this.boms=e.data.boms,this.projects=e.data.projects,this.products=e.data.products,this.orders=e.data.orders}catch(e){console.error("Error fetching projects:",e),this.setIsLoading(!1)}},filteredBoms(){console.log(this.selectedProduct),this.boms&&null!==this.selectedProduct?(this.bomByProducts=this.boms.filter((e=>e.product.id===this.selectedProduct)),console.log("Filtered Boms i.e bomByProducts=:",this.bomByProducts)):(console.log("No Boms or Selected Product available."),this.bomByProducts=[])},handleRowClicked(e){console.log("Row Clicked:",e),this.selectedBomFileName=e.bom_file_name,this.selectedBomId=e.id},handleRowSelected(e){console.log("Row Selected:",e),this.selectedBomFileName=e.bom_file_name,this.selectedBomId=e.id},handleRowDeselected(){console.log("Row Deselected")},saveChanges(){this.selectedBomFileName&&null!==this.selectedBomId?(this.selectBomButtonText=this.selectedBomFileName,this.order.selectedBomId=this.selectedBomId,console.log("Selected BOM File Name:",this.selectedBomFileName),console.log("Selected BOM ID:",this.selectedBomId)):(console.warn("No BOM selected."),this.selectBomButtonText="Select BOM"),this.selectedBomFileName="",this.selectedBomId=null},async createSelectedBOMOrder(){this.setIsLoading(!0),await Ie.Z.post("store/create-order/",this.order).then((e=>{console.log("Order Created:",e.data),this.notifySuccess("Order Created Successfully"),this.setIsLoading(!1),this.$router.push("/orders")})).catch((e=>{console.error("Error creating order:",e),this.handleError("Order Creation Failed")}))},createOrder(){this.setIsLoading(!0),"selectBom"===this.selectedRadio?this.createSelectedBOMOrder():"uploadNewBom"===this.selectedRadio&&this.createBomTask()},async createBomTask(){this.setIsLoading(!0);const e=new FormData;e.append("project_id",this.selectedProject),e.append("product_id",this.selectedProduct),e.append("bom_type",this.bomType),e.append("bom_rev_no",this.bomRevNo),e.append("issue_date",this.issueDate),e.append("batch_quantity",this.order.batchQuantity),e.append("bom_file",this.uploadedFileBOM),e.append("pcb_file",this.uploadedFilePCB);try{const t=await Ie.Z.post("store/handle-bom-cases/",e,{headers:{"Content-Type":"multipart/form-data"}});if(console.log("Response from handle-bom-cases API:",t.data),200===t.status)this.setIsLoading(!1),console.log("hi",t.data.message),this.$notify({title:`BOM Already Exists With Rev No: ${t.data.bom_rev_number}`,type:"bg-danger-subtle text-danger",duration:"5000"});else if(201===t.status)this.setIsLoading(!1),console.log("inside case two block"),console.log(t.data.message),console.log("Before setting isCustomModalVisible:",this.isCustomModalVisible),this.isCustomModalVisible=!0,console.log("After setting isCustomModalVisible:",this.isCustomModalVisible);else if(204===t.status){console.log(t.data.message),this.setIsLoading(!0);const a=await Ie.Z.post("store/create-order-task/",e,{headers:{"Content-Type":"multipart/form-data"}});console.log(a.data);const s=a.data.task_id;"IN PROGRESS"===a.data.task_status||"PENDING"===a.data.task_status?setTimeout((()=>{this.checkTaskStatus(s)}),1e4):"SUCCESS"===a.data.task_status?(this.$notify({title:"BOM Uploaded Successfully adn Order Created",type:"bg-success-subtle text-success",duration:"5000"}),this.setIsLoading(!1),this.$router.push("/orders")):(this.$notify({title:"BOM Upload Failed",type:"bg-danger-subtle text-danger",duration:"5000"}),this.setIsLoading(!1))}}catch(t){console.log("error:",t),this.$notify({title:"An error occurred, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"}),this.setIsLoading(!1)}},async createOrderAndUploadBom(e){this.setIsLoading(!0);try{const t=await Ie.Z.post("store/create-order-task/",e,{headers:{"Content-Type":"multipart/form-data"}});console.log(t.data);const a=t.data.task_id;"IN PROGRESS"===t.data.task_status||"PENDING"===t.data.task_status?setTimeout((()=>{this.checkTaskStatus(a)}),1e4):"SUCCESS"===t.data.task_status?(this.$notify({title:"BOM Uploaded Successfully",type:"bg-success-subtle text-success",duration:"5000"}),this.setIsLoading(!1),this.$router.push("/bom")):(this.$notify({title:"BOM Upload Failed",type:"bg-danger-subtle text-danger",duration:"5000"}),this.setIsLoading(!1))}catch(t){console.log("error:",t),this.$notify({title:"An error occurred, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"}),this.setIsLoading(!1)}},async handleModalSubmission(e){console.log("inside handleModal Submisison which will revece CHANGE NOTE IN ARFUMENT"),console.log("this is the change note ",e);const t=new FormData;t.append("project_id",this.selectedProject),t.append("product_id",this.selectedProduct),t.append("bom_type",this.bomType),t.append("bom_rev_no",this.bomRevNo),t.append("issue_date",this.issueDate),t.append("bom_file",this.uploadedFile),t.append("bom_rev_change_note",e),t.append("batch_quantity",this.order.batchQuantity),console.log("FormData:",t),await this.createOrderAndUploadBom(t)},async checkTaskStatus(e){try{const t=await Ie.Z.get(`store/check-task-status/${e}/`);"IN PROGRESS"===t.data.task_status||"PENDING"===t.data.task_status?setTimeout((()=>{this.checkTaskStatus(e)}),5e3):"SUCCESS"===t.data.task_status?(this.notifySuccess("BOM Uploaded and Order Created Successfully"),this.setIsLoading(!1),this.$router.push("/orders")):(this.notifyError("BOM Upload Failed"),this.setIsLoading(!1))}catch(t){console.log("error:",t),this.handleError("An error occurred, please try again later")}}}};const fv=(0,Ae.Z)(gv,[["render",ov],["__scopeId","data-v-9b431a9a"]]);var _v=fv;const vv={key:0,class:"container text-center"},yv=(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1),kv=(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1),wv=[yv,kv],Cv={key:1,class:"container"},Dv={class:"row align-items-center"},Sv={class:"col-md-6 mt-4"},Mv={class:"d-flex align-items-center"},Pv=(0,i._)("h2",{class:"mb-0"},"Project",-1),Iv=(0,i._)("span",{class:"ms-3 fs-4 text-muted"},"|",-1),xv={"aria-label":"breadcrumb",class:"d-inline-block ms-3"},Rv={class:"breadcrumb bg-transparent m-0 p-0"},$v={class:"breadcrumb-item"},Lv=(0,i._)("i",{class:"fas fa-home me-1"},null,-1),Bv=(0,i._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,i._)("i",{class:"fas fa-project-diagram me-1"}),(0,i.Uk)(" Project ")],-1),Uv={class:"col-md-6 mt-4 text-end"};function Ev(e,t,a,s,l,o){const n=(0,i.up)("router-link"),d=(0,i.up)("ProjectsLandingTable");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",vv,wv)):((0,i.wg)(),(0,i.iD)("div",Cv,[(0,i._)("div",Dv,[(0,i._)("div",Sv,[(0,i._)("div",Mv,[Pv,Iv,(0,i._)("nav",xv,[(0,i._)("ol",Rv,[(0,i._)("li",$v,[(0,i.Wm)(n,{to:"/"},{default:(0,i.w5)((()=>[Lv,(0,i.Uk)(" Home")])),_:1})]),Bv])])])]),(0,i._)("div",Uv,[(0,i.Wm)(n,{to:"/projects/create-project",class:"btn btn-primary btn-sm ms-2"},{default:(0,i.w5)((()=>[(0,i.Uk)(" Create New Project ")])),_:1})])]),(0,i.Wm)(d,{style:{"margin-top":"20px"},projectList:l.projectList},null,8,["projectList"])]))}function Nv(e,t,a,s,l,o){const n=(0,i.up)("ag-grid-vue");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(n,{style:{height:"500px"},class:"ag-theme-quartz",rowData:a.projectList,defaultColDef:l.defaultColDef,columnDefs:l.colDefs,pagination:!0,onRowClicked:o.onRowClicked,onSelectionChanged:o.onSelectionChanged},null,8,["rowData","defaultColDef","columnDefs","onRowClicked","onSelectionChanged"])])}var Ov={name:"App",components:{AgGridVue:Ba.n},props:{projectList:{type:Array,required:!0}},data(){return{colDefs:[{field:"id",hide:!0},{field:"name",headerName:"Project Name",width:600},{headerName:"Actions",cellRenderer:this.editButtonRenderer,width:600}],defaultColDef:{filter:!0,sortable:!0,resizable:!0,autoSize:!0},selectedRows:[]}},methods:{onRowClicked(e){this.$emit("rowClicked",e.data),this.$router.push(`/project-edit/${e.data.id}`)},onRowSelected(e){e.node.isSelected()&&this.$emit("rowSelected",e.node.data)},onSelectionChanged(e){const t=e.api.getSelectedRows(),a=t.length>0?t[0]:null;a?this.$emit("rowSelected",a):this.$emit("rowDeselected")},editButtonRenderer(e){console.log(e);const t=document.createElement("button");return t.innerHTML='<i class="fas fa-edit"></i>',t.classList.add("btn","btn-primary"),t.addEventListener("click",(()=>this.onEditClick(e.data.id))),t},onEditClick(e){this.$router.push(`/project-edit/${e}`)}}};const Tv=(0,Ae.Z)(Ov,[["render",Nv]]);var Av=Tv,jv={components:{ProjectsLandingTable:Av},data(){return{projectList:[]}},mounted(){this.getData()},methods:{getData(){this.$store.commit("setIsLoading",!0),Ie.Z.get("/store/edit-project").then((e=>{console.log("response.data",e.data),this.projectList=e.data.projects,this.$store.commit("setIsLoading",!1)})).catch((e=>{console.error("Error fetching products:",e),this.$store.commit("setIsLoading",!1)}))}}};const Fv=(0,Ae.Z)(jv,[["render",Ev]]);var qv=Fv;const Wv=e=>((0,i.dD)("data-v-29f30d24"),e=e(),(0,i.Cn)(),e),Vv={key:0,class:"container text-center"},Zv=Wv((()=>(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1))),zv=Wv((()=>(0,i._)("div",null,[(0,i._)("b",null," Loading...")],-1))),Gv=[Zv,zv],Hv={key:1,class:"container"},Qv={class:"row align-items-center"},Yv={class:"col-md-8 mt-4"},Kv={class:"d-flex align-items-center"},Jv=Wv((()=>(0,i._)("h2",{class:"mb-0"},"Edit Project |",-1))),Xv={"aria-label":"breadcrumb",class:"ms-3"},ey={class:"breadcrumb bg-transparent m-0 p-0 justify-content-end"},ty=Wv((()=>(0,i._)("li",{class:"breadcrumb-item"},[(0,i._)("a",{href:"/"},[(0,i._)("i",{class:"fas fa-home me-1"}),(0,i.Uk)("Home")])],-1))),ay={class:"breadcrumb-item active","aria-current":"page"},sy=Wv((()=>(0,i._)("i",{class:"fas fa-project-diagram me-1"},null,-1))),iy=Wv((()=>(0,i._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,i._)("i",{class:"fa fa-bars me-1","aria-hidden":"true"}),(0,i.Uk)("Project Details ")],-1))),ly={class:"col-md-4 mt-4 d-flex justify-content-end"},oy={class:"mt-5"},ny={class:"row"},dy={class:"form-group"},cy=Wv((()=>(0,i._)("label",{for:"veplPartNumber"},"Project Name",-1))),ry={class:"form-group"},my=Wv((()=>(0,i._)("label",{for:"products"},"Products:",-1))),uy=Wv((()=>(0,i._)("br",null,null,-1))),hy=Wv((()=>(0,i._)("button",{type:"button",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#exampleModal"}," Add Product ",-1))),py={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},by={class:"modal-dialog modal-xl"},gy={class:"modal-content"},fy=Wv((()=>(0,i._)("div",{class:"modal-header"},[(0,i._)("h1",{class:"modal-title fs-5",id:"exampleModalLabel"}," Create New Product "),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),_y={class:"modal-body"},vy={class:"card mt-4"},yy=Wv((()=>(0,i._)("div",{class:"card-header bg-primary text-white"},[(0,i._)("h4",{class:"card-title"},[(0,i._)("i",{class:"fas fa-Product-diagram me-2"}),(0,i.Uk)(" Product Information ")])],-1))),ky={class:"card-body"},wy={class:"mb-3"},Cy=Wv((()=>(0,i._)("label",{for:"productName",class:"form-label"},"Product Name:",-1))),Dy={key:0,class:"text-danger"},Sy={class:"mb-3"},My=Wv((()=>(0,i._)("label",{for:"productCode",class:"form-label"},"Product Code:",-1))),Py={key:0,class:"text-danger"},Iy={class:"mb-3"},xy=Wv((()=>(0,i._)("label",{for:"ProductRevNo",class:"form-label"},"Product Rev No:",-1))),Ry={key:0,class:"text-danger"},$y={class:"modal-footer"},Ly=Wv((()=>(0,i._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1))),By=Wv((()=>(0,i._)("i",{class:"fas fa-save me-1"},null,-1)));function Uy(e,t,a,l,o,n){const d=(0,i.up)("router-link"),c=(0,i.up)("products-for-project-grid");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",Vv,Gv)):((0,i.wg)(),(0,i.iD)("div",Hv,[(0,i._)("div",Qv,[(0,i._)("div",Yv,[(0,i._)("div",Kv,[Jv,(0,i._)("nav",Xv,[(0,i._)("ol",ey,[ty,(0,i._)("li",ay,[(0,i.Wm)(d,{to:"/projects"},{default:(0,i.w5)((()=>[sy,(0,i.Uk)("Projects ")])),_:1})]),iy])])])]),(0,i._)("div",ly,[(0,i._)("button",{type:"button",class:"btn btn-primary me-2",onClick:t[0]||(t[0]=(...e)=>n.updateProject&&n.updateProject(...e))}," Update Project "),(0,i._)("button",{type:"button",class:"btn btn-danger",onClick:t[1]||(t[1]=(...e)=>n.deleteProject&&n.deleteProject(...e))}," Delete Project ")])]),(0,i._)("section",oy,[(0,i._)("div",ny,[(0,i._)("div",dy,[cy,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>o.editedProject.name=e),type:"text",class:"form-control"},null,512),[[s.nr,o.editedProject.name]])])]),(0,i._)("div",ry,[my,uy,hy,(0,i.Wm)(c,{style:{"margin-top":"20px"},products:o.project.products,onRowSelected:e.handleRowSelected},null,8,["products","onRowSelected"])])]),(0,i._)("div",py,[(0,i._)("div",by,[(0,i._)("div",gy,[fy,(0,i._)("div",_y,[(0,i._)("div",vy,[yy,(0,i._)("div",ky,[(0,i._)("div",wy,[Cy,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>o.newProduct.name=e),type:"text",class:"form-control",id:"productName",required:""},null,512),[[s.nr,o.newProduct.name]]),o.newProduct.name?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("small",Dy,"Product Name is required."))]),(0,i._)("div",Sy,[My,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>o.newProduct.product_code=e),class:"form-control",id:"productCode",required:""},null,512),[[s.nr,o.newProduct.product_code]]),o.newProduct.product_code?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("small",Py,"Product Code is required."))]),(0,i._)("div",Iy,[xy,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>o.newProduct.product_rev_number=e),type:"text",class:"form-control",id:"productRevNo",required:""},null,512),[[s.nr,o.newProduct.product_rev_number]]),o.newProduct.product_rev_number?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("small",Ry,"Product Rev No is required."))])])])]),(0,i._)("div",$y,[Ly,(0,i._)("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal",onClick:t[6]||(t[6]=(...e)=>n.createProduct&&n.createProduct(...e))},[By,(0,i.Uk)(" Create New Product ")])])])])])]))}const Ey={class:"ag-theme-quartz",style:{height:"600px"}};function Ny(e,t,a,s,l,o){const n=(0,i.up)("ag-grid-vue");return(0,i.wg)(),(0,i.iD)("div",Ey,[(0,i.Wm)(n,{ref:"agGrid",gridOptions:l.gridOptions,columnDefs:l.columnDefs,rowData:a.products,onRowClicked:o.onRowClicked,onRowSelected:o.onRowSelected},null,8,["gridOptions","columnDefs","rowData","onRowClicked","onRowSelected"])])}var Oy={components:{"ag-grid-vue":Ba.n},props:{products:{type:Array,default:()=>[]},selectedProducts:{type:Array,default:()=>[]}},data(){return{gridOptions:{domLayout:"autoHeight",rowSelection:"multiple",pagination:!0,paginationPageSize:20},columnDefs:[{headerCheckboxSelection:!0,checkboxSelection:!0,headerName:"Product name",field:"name",width:300},{headerName:"Product Code",field:"product_code",width:300},{headerName:"Product Rev No",field:"product_rev_number",width:300},{headerName:"Actions",field:"actions",cellRenderer:this.actionsCellRenderer,sortable:!1,filter:!1}]}},methods:{onRowClicked(e){this.$emit("rowClicked",e.data),this.$router.push(`/product/edit/${e.data.id}`)},onRowSelected(e){e.node.isSelected()&&this.$emit("rowSelected",e.data)},onSelectionChanged(){this.$refs.agGrid&&this.$refs.agGrid.api&&(this.selectedRows=this.$refs.agGrid.api.getSelectedRows())},actionsCellRenderer(e){const t=document.createElement("button");t.innerHTML='<i class="fas fa-edit"></i>',t.classList.add("btn","btn-primary","ms-2"),t.addEventListener("click",(()=>this.onEditClick(e.data.id)));const a=document.createElement("button");a.innerHTML='<i class="fas fa-trash-alt"></i>',a.classList.add("btn","btn-danger","ms-4"),a.addEventListener("click",(t=>this.deleteProduct(e.data.id,t)));const s=document.createElement("div");return s.appendChild(t),s.appendChild(a),s},onEditClick(e){this.$router.push(`/product/edit/${e}`)},async deleteProduct(e,t){t.stopPropagation(),confirm("Are you sure you want to delete this product?")&&(this.$store.commit("setIsLoading",!0),Ie.Z.delete(`/store/delete-product/${e}/`).then((e=>{console.log(e.data),console.log("Product deleted successfully."),this.$store.commit("setIsLoading",!1),this.$notify({title:"Product Deleted Successfully",type:"bg-success-subtle text-success",duration:"5000"}),window.location.reload()})).catch((e=>{console.error("Error deleting user:",e),this.$notify({title:"Product Deletion Unsuccessful",type:"bg-danger-subtle text-danger",duration:"5000"})})))}}};const Ty=(0,Ae.Z)(Oy,[["render",Ny],["__scopeId","data-v-cbc677c0"]]);var Ay=Ty,jy={components:{"products-for-project-grid":Ay},data(){return{editedProject:{name:"",project_code:"",project_rev_number:"",products:[]},newProduct:{name:"",product_code:"",product_rev_number:""},project:[],products:[]}},mounted(){this.fetchData()},methods:{async fetchData(){this.$store.commit("setIsLoading",!0),Ie.Z.get(`/store/edit-project/${this.$route.params.id}`).then((e=>{console.log("response.data",e.data),this.project=e.data.project,this.project&&(this.editedProject.name=this.project.name,this.editedProject.project_code=this.project.project_code,this.editedProject.project_rev_number=this.project.project_rev_number),this.$store.commit("setIsLoading",!1)})).catch((e=>{console.error("Error fetching products:",e),this.$store.commit("setIsLoading",!1)}))},updateProject(){console.log("Edited Project:",this.editedProject),confirm("Are you sure you want to update this project?")&&(this.$store.commit("setIsLoading",!0),Ie.Z.put(`/store/edit-project/${this.$route.params.id}/`,this.editedProject).then((e=>{console.log("Project updated successfully:",e.data),this.$store.commit("setIsLoading",!1),this.$notify({title:"Project Updated Successfully",type:"bg-success-subtle text-success",duration:"5000"}),this.$router.push("/projects")})).catch((e=>{console.error("Error updating Project:",e),this.$notify({title:"Project Creation Unsuccessful",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1)})))},createProduct(){this.$store.commit("setIsLoading",!0),console.log("form data",this.newProduct),this.newProduct.name&&this.newProduct.product_code&&this.newProduct.product_rev_number&&Ie.Z.post(`/store/create-product/${this.$route.params.id}/`,this.newProduct).then((e=>{console.log("Product created successfully:",e.data),this.$store.commit("setIsLoading",!1);const t=e.data.product;this.project.products.push(t),this.$notify({title:"Product Created Successfully",type:"bg-success-subtle text-success",duration:"5000"}),this.newProduct={};const a=this.$route.params.id;this.$router.push(`/project-edit/${a}`)})).catch((e=>{console.error("Error creating Product:",e),this.$store.commit("setIsLoading",!1),this.$notify({title:"Product Creation Unsuccessful",type:"bg-danger-subtle text-danger",duration:"5000"})}))},deleteProject(){confirm("Are you sure you want to delete this project?")&&(this.$store.commit("setIsLoading",!0),Ie.Z.delete(`/store/delete-project/${this.$route.params.id}/`).then((e=>{console.log(e.data),console.log("Project deleted successfully."),this.$store.commit("setIsLoading",!1),this.$notify({title:"Project Deleted Successfully",type:"bg-success-subtle text-success",duration:"5000"}),this.$router.push("/projects")})).catch((e=>{console.error("Error deleting user:",e),this.$notify({title:"Project Deletion Unsuccessful",type:"bg-danger-subtle text-danger",duration:"5000"})})))}}};const Fy=(0,Ae.Z)(jy,[["render",Uy],["__scopeId","data-v-29f30d24"]]);var qy=Fy;const Wy=e=>((0,i.dD)("data-v-2b92c84a"),e=e(),(0,i.Cn)(),e),Vy={class:"container"},Zy={class:"row align-items-center"},zy={class:"col-md-6 mt-4"},Gy={class:"d-flex align-items-center"},Hy=Wy((()=>(0,i._)("h2",{class:"mb-0"},"Projects",-1))),Qy=Wy((()=>(0,i._)("span",{class:"ms-3 fs-4 text-muted"},"|",-1))),Yy={"aria-label":"breadcrumb",class:"d-inline-block ms-3"},Ky={class:"breadcrumb bg-transparent m-0 p-0"},Jy={class:"breadcrumb-item"},Xy=Wy((()=>(0,i._)("i",{class:"fas fa-home me-1"},null,-1))),ek={class:"breadcrumb-item"},tk=Wy((()=>(0,i._)("i",{class:"fas fa-project-diagram me-1"},null,-1))),ak=Wy((()=>(0,i._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,i._)("i",{class:"fa fa-plus"}),(0,i.Uk)(" Create Project ")],-1))),sk={class:"col-md-6 mt-4 text-end"},ik=Wy((()=>(0,i._)("i",{class:"fas fa-save me-1"},null,-1))),lk={class:"card mt-4"},ok=Wy((()=>(0,i._)("div",{class:"card-header bg-primary text-white"},[(0,i._)("h4",{class:"card-title"},[(0,i._)("i",{class:"fas fa-project-diagram me-2"}),(0,i.Uk)(" Project Information ")])],-1))),nk={class:"card-body"},dk={class:"mb-3"},ck=Wy((()=>(0,i._)("label",{for:"projectName",class:"form-label"},"Project Name:",-1))),rk={key:0,class:"text-danger"};function mk(e,t,a,l,o,n){const d=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",Vy,[(0,i._)("div",Zy,[(0,i._)("div",zy,[(0,i._)("div",Gy,[Hy,Qy,(0,i._)("nav",Yy,[(0,i._)("ol",Ky,[(0,i._)("li",Jy,[(0,i.Wm)(d,{to:"/"},{default:(0,i.w5)((()=>[Xy,(0,i.Uk)("Home")])),_:1})]),(0,i._)("li",ek,[(0,i.Wm)(d,{to:"/projects"},{default:(0,i.w5)((()=>[tk,(0,i.Uk)("Projects")])),_:1})]),ak])])])]),(0,i._)("div",sk,[(0,i._)("button",{type:"submit",class:"btn btn-success btn-sm",onClick:t[0]||(t[0]=(...e)=>n.createProject&&n.createProject(...e))},[ik,(0,i.Uk)(" Create Project ")])])]),(0,i._)("div",lk,[ok,(0,i._)("div",nk,[(0,i._)("div",dk,[ck,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>o.newProject.name=e),type:"text",class:"form-control",id:"projectName",required:""},null,512),[[s.nr,o.newProject.name]]),o.newProject.name?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("small",rk,"Project Name is required."))])])])])}var uk={name:"CreateProject",data(){return{newProject:{name:"",project_code:"",project_rev_number:""}}},methods:{createProject(){this.$store.commit("setIsLoading",!0),this.newProject.name&&Ie.Z.post("/store/create-project/",this.newProject).then((e=>{console.log("Project created successfully:",e.data),this.$store.commit("setIsLoading",!1),this.$notify({title:"Project Created Successfully",type:"bg-success-subtle text-success",duration:"5000"}),this.$router.push("/projects")})).catch((e=>{console.error("Error creating project:",e),this.$store.commit("setIsLoading",!1),this.$notify({title:"Project Creation Unsuccessful",type:"bg-danger-subtle text-danger",duration:"5000"})}))}}};const hk=(0,Ae.Z)(uk,[["render",mk],["__scopeId","data-v-2b92c84a"]]);var pk=hk;const bk=e=>((0,i.dD)("data-v-b198b0c4"),e=e(),(0,i.Cn)(),e),gk={key:0,class:"container text-center"},fk=bk((()=>(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1))),_k=bk((()=>(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1))),vk=[fk,_k],yk={key:1,class:"container"},kk={class:"row align-items-center"},wk={class:"col-md-6 mt-4"},Ck={class:"d-flex align-items-center"},Dk=bk((()=>(0,i._)("h2",{class:"mb-0"},"Edit Product",-1))),Sk=bk((()=>(0,i._)("span",{class:"ms-3 fs-4 text-muted"},"|",-1))),Mk={"aria-label":"breadcrumb",class:"d-inline-block ms-3"},Pk={class:"breadcrumb bg-transparent m-0 p-0"},Ik={class:"breadcrumb-item"},xk=bk((()=>(0,i._)("i",{class:"fas fa-home me-1"},null,-1))),Rk={class:"breadcrumb-item"},$k=bk((()=>(0,i._)("i",{class:"fas fa-project-diagram me-1"},null,-1))),Lk={class:"breadcrumb-item"},Bk=bk((()=>(0,i._)("i",{class:"fas fa-bars me-1"},null,-1))),Uk=bk((()=>(0,i._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,i._)("i",{class:"fas fa-edit me-1"}),(0,i.Uk)(" Edit Product ")],-1))),Ek={class:"col-md-6 mt-4 text-end"},Nk=bk((()=>(0,i._)("i",{class:"fas fa-save me-1"},null,-1))),Ok=bk((()=>(0,i._)("i",{class:"fas fa-trash me-1"},null,-1))),Tk={class:"card animate__animated animate__fadeIn mt-5"},Ak=bk((()=>(0,i._)("div",{class:"card-header bg-primary text-white"},[(0,i._)("h4",{class:"card-title"},[(0,i._)("i",{class:"fas fa-user me-1"}),(0,i.Uk)(" Product Information ")])],-1))),jk={class:"card-body"},Fk={class:"mb-3"},qk=bk((()=>(0,i._)("label",{for:"email",class:"form-label"},"Product Name:",-1))),Wk={class:"input-group"},Vk=bk((()=>(0,i._)("span",{class:"input-group-text"},[(0,i._)("i",{class:"fas fa-envelope"})],-1))),Zk={key:0,class:"text-danger"},zk={class:"mb-3 row"},Gk={class:"col"},Hk=bk((()=>(0,i._)("label",{for:"first_name",class:"form-label"},"Product Code:",-1))),Qk={class:"input-group"},Yk=bk((()=>(0,i._)("span",{class:"input-group-text"},[(0,i._)("i",{class:"fas fa-user"})],-1))),Kk={key:0,class:"text-danger"},Jk={class:"col"},Xk=bk((()=>(0,i._)("label",{for:"first_name",class:"form-label"},"Product Rev No:",-1))),ew={class:"input-group"},tw=bk((()=>(0,i._)("span",{class:"input-group-text"},[(0,i._)("i",{class:"fas fa-user"})],-1))),aw={key:0,class:"text-danger"};function sw(e,t,a,l,o,n){const d=(0,i.up)("router-link");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",gk,vk)):((0,i.wg)(),(0,i.iD)("div",yk,[(0,i._)("div",kk,[(0,i._)("div",wk,[(0,i._)("div",Ck,[Dk,Sk,(0,i._)("nav",Mk,[(0,i._)("ol",Pk,[(0,i._)("li",Ik,[(0,i.Wm)(d,{to:"/"},{default:(0,i.w5)((()=>[xk,(0,i.Uk)(" Home")])),_:1})]),(0,i._)("li",Rk,[(0,i.Wm)(d,{to:"/projects"},{default:(0,i.w5)((()=>[$k,(0,i.Uk)(" Projects")])),_:1})]),(0,i._)("li",Lk,[(0,i.Wm)(d,{to:`/project-edit/${this.product.project}`},{default:(0,i.w5)((()=>[Bk,(0,i.Uk)(" Products Details")])),_:1},8,["to"])]),Uk])])])]),(0,i._)("div",Ek,[(0,i._)("button",{type:"submit",class:"btn btn-primary btn-sm",onClick:t[0]||(t[0]=(...e)=>n.updateProduct&&n.updateProduct(...e))},[Nk,(0,i.Uk)(" Update Product ")]),(0,i._)("button",{type:"button",class:"btn btn-danger ms-2 btn-sm",onClick:t[1]||(t[1]=(...e)=>n.deleteProduct&&n.deleteProduct(...e))},[Ok,(0,i.Uk)(" Delete Product ")])])]),(0,i._)("div",Tk,[Ak,(0,i._)("div",jk,[(0,i._)("div",Fk,[qk,(0,i._)("div",Wk,[Vk,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>o.editedProduct.name=e),type:"text",class:"form-control",id:"project_name",required:""},null,512),[[s.nr,o.editedProduct.name]])]),o.editedProduct.name?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("small",Zk,"Project Name is required."))]),(0,i._)("div",zk,[(0,i._)("div",Gk,[Hk,(0,i._)("div",Qk,[Yk,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>o.editedProduct.product_code=e),type:"text",class:"form-control",id:"product_code",required:""},null,512),[[s.nr,o.editedProduct.product_code]])]),o.editedProduct.product_code?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("small",Kk,"First Name is required."))]),(0,i._)("div",Jk,[Xk,(0,i._)("div",ew,[tw,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>o.editedProduct.product_rev_number=e),type:"text",class:"form-control",id:"product_rev_number",required:""},null,512),[[s.nr,o.editedProduct.product_rev_number]])]),o.editedProduct.product_rev_number?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("small",aw,"Product Rev Number is required."))])])])])]))}var iw={name:"EditProduct",data(){return{editedProduct:{name:"",product_code:"",product_rev_number:""},product:[]}},mounted(){this.fetchData()},methods:{async fetchData(){this.$store.commit("setIsLoading",!0),console.log("id",this.$route.params.id),Ie.Z.get(`/store/edit-product/${this.$route.params.id}`).then((e=>{console.log("response.data ",e.data),this.product=e.data.product,this.product&&(this.editedProduct.name=this.product.name,this.editedProduct.product_code=this.product.product_code,this.editedProduct.product_rev_number=this.product.product_rev_number),this.$store.commit("setIsLoading",!1)})).catch((e=>{console.error("Error fetching products:",e),this.$store.commit("setIsLoading",!1)}))},updateProduct(){confirm("Are you sure you want to update this product?")&&(this.$store.commit("setIsLoading",!0),Ie.Z.put(`/store/edit-product/${this.$route.params.id}/`,this.editedProduct).then((e=>{console.log("Product updated successfully:",e.data),this.$store.commit("setIsLoading",!1),this.$notify({title:"Product Updated Successfully",type:"bg-success-subtle text-success",duration:"5000"});const t=this.product.project;this.$router.push(`/project-edit/${t}`)})).catch((e=>{console.error("Error updating Product:",e),this.$notify({title:"Product Creation Unsuccessful",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1)})))},deleteProduct(){confirm("Are you sure you want to delete this product?")&&(this.$store.commit("setIsLoading",!0),Ie.Z.delete(`/store/delete-product/${this.$route.params.id}/`).then((()=>{console.log("Product  deleted successfully."),this.$store.commit("setIsLoading",!1),this.$notify({title:"Product Deleted Successfully",type:"bg-success-subtle text-success",duration:"5000"});const e=this.product.project;this.$router.push(`/project-edit/${e}`)})).catch((e=>{console.error("Error deleting user:",e),this.$notify({title:"Product Deletion Unsuccessful",type:"bg-danger-subtle text-danger",duration:"5000"})})))}}};const lw=(0,Ae.Z)(iw,[["render",sw],["__scopeId","data-v-b198b0c4"]]);var ow=lw;const nw={key:0,class:"container text-center"},dw=(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1),cw=(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1),rw=[dw,cw],mw={key:1,class:"container"},uw={class:"row align-items-center"},hw=(0,i.uE)('<div class="col-md-6 mt-4"><div class="d-flex align-items-center"><h2 class="mb-0">Checklist</h2><span class="ms-3 fs-4 text-muted">|</span><nav aria-label="breadcrumb" class="d-inline-block ms-3"><ol class="breadcrumb bg-transparent m-0 p-0"><li class="breadcrumb-item"><a href="/"><i class="fas fa-home me-1"></i>Home</a></li><li class="breadcrumb-item active" aria-current="page"><i class="fas fa-list-alt me-1"></i> Checklist </li></ol></nav></div></div>',1),pw={class:"col-md-6 mt-4 text-end"},bw={class:"container has-text-centered"},gw={class:"d-flex"},fw=["disabled"],_w=["disabled"],vw=["disabled"],yw={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},kw={class:"modal-dialog"},ww={class:"modal-content"},Cw=(0,i._)("div",{class:"modal-header"},[(0,i._)("h1",{class:"modal-title fs-5",id:"exampleModalLabel"}," Fill the Required Batch Quantity "),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Dw={class:"modal-body"},Sw={class:"modal-footer"},Mw=(0,i._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1);function Pw(e,t,a,l,o,n){const d=(0,i.up)("OrderDetailsTable");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",nw,rw)):((0,i.wg)(),(0,i.iD)("div",mw,[(0,i._)("div",uw,[hw,(0,i._)("div",pw,[(0,i._)("div",bw,[(0,i._)("div",gw,[(0,i._)("button",{type:"button",disabled:!o.isButtonEnabled,class:"btn btn-primary btn-sm",onClick:t[0]||(t[0]=(...e)=>n.checkAndGenerateChecklist&&n.checkAndGenerateChecklist(...e))}," Generate New Checklist ",8,fw),(0,i._)("button",{onClick:t[1]||(t[1]=(...e)=>n.checkExistingChecklist&&n.checkExistingChecklist(...e)),disabled:!o.isButtonEnabled,class:"btn btn-warning btn-sm ms-2"}," View Ongoing Checklist ",8,_w),(0,i._)("button",{onClick:t[2]||(t[2]=(...e)=>n.viewGeneratedChecklists&&n.viewGeneratedChecklists(...e)),disabled:!o.isButtonEnabled,class:"btn btn-success btn-sm ms-2"}," View Generated Checklists ",8,vw)])])])]),(0,i.Wm)(d,{style:{"margin-top":"20px"},orders:e.orders,onRowClicked:n.handleRowClicked,onRowSelected:n.handleRowSelected,onRowDeselected:n.handleRowDeselected},null,8,["orders","onRowClicked","onRowSelected","onRowDeselected"]),(0,i._)("div",yw,[(0,i._)("div",kw,[(0,i._)("div",ww,[Cw,(0,i._)("div",Dw,[(0,i.wy)((0,i._)("input",{type:"number",class:"form-control",id:"requiredBatchQuantity","onUpdate:modelValue":t[3]||(t[3]=e=>o.batch_quantity=e),placeholder:"Enter Batch Quantity",min:"1"},null,512),[[s.nr,o.batch_quantity]])]),(0,i._)("div",Sw,[Mw,(0,i._)("button",{onClick:t[4]||(t[4]=(...e)=>n.checkAndGenerateChecklist&&n.checkAndGenerateChecklist(...e)),type:"button",class:"btn btn-primary","data-bs-dismiss":"modal"}," Generate Checklist ")])])])])]))}function Iw(e,t,a,s,l,o){const n=(0,i.up)("ag-grid-vue");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(n,{style:{height:"500px"},class:"ag-theme-quartz",rowData:a.orders,defaultColDef:l.defaultColDef,columnDefs:l.colDefs,pagination:!0,rowSelection:"single",onRowClicked:o.onRowClicked,onSelectionChanged:o.onSelectionChanged},null,8,["rowData","defaultColDef","columnDefs","onRowClicked","onSelectionChanged"])])}var xw={name:"App",components:{AgGridVue:Ba.n},props:{orders:{type:Array,required:!0}},data(){return{colDefs:[{field:"id",headerName:"Order ID",checkboxSelection:!0},{field:"bom.id",headerName:"BOM ID ",hide:!0},{field:"bom.product.project.name",headerName:"Project Name"},{field:"bom.product.name",headerName:"Product"},{field:"batch_quantity",headerName:"Batch Quantity"},{field:"bom.bom_file_name",headerName:"BOM File Name"},{headerName:"Download",cellRenderer:this.editButtonRenderer,flex:1}],defaultColDef:{filter:!0,sortable:!0,resizable:!0,autoSize:!0,autoSizeColumns:!0},selectedRows:[]}},methods:{onRowClicked(e){this.$emit("rowClicked",e.data)},onSelectionChanged(e){const t=e.api.getSelectedRows(),a=t.length>0?t[0]:null;a?this.$emit("rowSelected",a):this.$emit("rowDeselected")},editButtonRenderer(e){console.log(e);const t=document.createElement("button");return t.innerHTML='<i class="fas fa-download"></i>',t.classList.add("btn-sm","btn-primary"),t.addEventListener("click",(()=>this.downloadFile(e.data.bom.bom_file_url))),t},downloadFile(e){const t=document.createElement("a");t.href=e,t.target="_blank",t.download="BOM_File",document.body.appendChild(t),t.click(),document.body.removeChild(t)},onEditClick(e){this.$router.push(`/bom/edit/${e}`)}}};const Rw=(0,Ae.Z)(xw,[["render",Iw]]);var $w=Rw,Lw={components:{OrderDetailsTable:$w},data(){return{rowData:[],selectedRow:null,clickedRowId:null,orderId:null,isButtonEnabled:!1,isExisting:!1,isActive:!1,batch_quantity:1,generateChecklists:[]}},methods:{async fetchData(){try{this.$store.commit("setIsLoading",!0);const e=await Ie.Z.get("store/get-orders/");this.orders=e.data.orders,console.log(e.data.orders),this.$store.commit("setIsLoading",!1)}catch(e){console.error("Error fetching BOM data:",e),this.$store.commit("setIsLoading",!1)}},handleRowClicked(e){console.log("Clicked Row:",e)},handleRowSelected(e){console.log("Row Selected:",e),e&&e.id&&(this.selectedRow=e,this.clickedRowId=e.bom.id,this.orderId=e.id,console.log("clicked row id +BOM ID =",this.clickedRowId),console.log("Order ID =",this.orderId),this.isButtonEnabled=!0)},handleRowDeselected(){console.log("Row Deselected:"),this.isButtonEnabled=!1},async checkAndGenerateChecklist(){console.log("generate checklist clicked"),this.$store.commit("setIsLoading",!0);try{const e=await Ie.Z.post(`store/check-existing-checklist/${this.clickedRowId}/`);console.log(e.data),this.isActive=e.data.is_active,this.isExisting=e.data.is_existing,this.isExisting?(this.$notify({title:"There is already an active ongoing checklist for this order, please end that checklist by viewing the ongoing checklist to generate a new one.",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1)):await this.generateChecklist()}catch(e){console.log("error:",e),this.$notify({title:e.response.data,type:"bg-danger-subtle text-danger",duration:"5000"})}finally{this.$store.commit("setIsLoading",!1)}},async generateChecklist(){try{const e=await Ie.Z.post(`store/generate-new-checklist/${this.orderId}/`);console.log(e.data),this.$router.push(`/begin-checklist/${this.clickedRowId}`)}catch(e){console.log("error:",e),this.$notify({title:e.response.data.error,type:"bg-danger-subtle text-danger",duration:"5000"})}finally{this.$store.commit("setIsLoading",!1)}},async checkExistingChecklist(){this.$store.commit("setIsLoading",!0),await Ie.Z.post(`store/check-existing-checklist/${this.clickedRowId}/`).then((e=>{console.log(e.data),this.isActive=e.data.is_active,this.isExisting=e.data.is_existing,this.isExisting?this.isActive?this.$router.push(`/begin-checklist/${this.clickedRowId}`):this.$notify({title:"No active checklist found for this bom, please generate a new checklist",type:"bg-danger-subtle text-danger",duration:"5000"}):this.$notify({title:"No ongoing checklist found for this order, please generate a new checklist",type:"bg-danger-subtle text-danger",duration:"5000"})})).catch((e=>{console.log("error:",e),this.$notify({title:"An error occurred, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"})})).finally((()=>{this.$store.commit("setIsLoading",!1)}))},viewOngoingChecklists(){this.clickedRowId&&this.$router.push(`/begin-checklist/${this.clickedRowId}`)},viewGeneratedChecklists(){console.log("inside view generated checklists",this.clickedRowId),this.$store.commit("setIsLoading",!0),Ie.Z.get(`store/generated-checklists/${this.clickedRowId}/`).then((e=>{const t=e.data;console.log("generated checklists",t),t&&t.length>0?(this.$store.commit("setIsLoading",!1),this.$router.push(`/generated-checklists/${this.clickedRowId}`)):(this.$notify({title:"No checklists are generated for this order.",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1))})).catch((e=>{console.error("Error fetching generated checklists:",e),this.$notify({title:"An error occurred while fetching generated checklists.",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1)}))}},mounted(){this.fetchData()}};const Bw=(0,Ae.Z)(Lw,[["render",Pw]]);var Uw=Bw;const Ew={key:0,class:"container text-center"},Nw=(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1),Ow=(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1),Tw=[Nw,Ow],Aw={key:1,class:"container"},jw={class:"row align-items-center"},Fw=(0,i.uE)('<div class="col-md-6 mt-4"><div class="d-flex align-items-center"><h2 class="mb-0">IQC for Checklist</h2><span class="ms-3 fs-4 text-muted">|</span><nav aria-label="breadcrumb" class="d-inline-block ms-3"><ol class="breadcrumb bg-transparent m-0 p-0"><li class="breadcrumb-item"><a href="/"><i class="fas fa-home me-1"></i>Home</a></li><li class="breadcrumb-item active" aria-current="page"><i class="fas fa-list-alt me-1"></i> Checklist </li></ol></nav></div></div>',1),qw={class:"col-md-6 mt-4 text-end"},Ww={class:"container has-text-centered"},Vw={class:"d-flex justify-content-end"},Zw=["disabled"];function zw(e,t,a,s,l,o){const n=(0,i.up)("PassedChecklistsTable");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",Ew,Tw)):((0,i.wg)(),(0,i.iD)("div",Aw,[(0,i._)("div",jw,[Fw,(0,i._)("div",qw,[(0,i._)("div",Ww,[(0,i._)("div",Vw,[(0,i._)("button",{onClick:t[0]||(t[0]=(...e)=>o.startIqc&&o.startIqc(...e)),disabled:!l.isButtonEnabled,class:"btn btn-success btn-sm ms-2"}," Start IQC ",8,Zw)])])])]),(0,i.Wm)(n,{style:{"margin-top":"20px"},passed_checklists:l.passed_checklists,onRowClicked:o.handleRowClicked,onRowSelected:o.handleRowSelected,onRowDeselected:o.handleRowDeselected},null,8,["passed_checklists","onRowClicked","onRowSelected","onRowDeselected"])]))}function Gw(e,t,a,s,l,o){const n=(0,i.up)("ag-grid-vue");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(n,{style:{height:"500px"},class:"ag-theme-quartz",rowData:a.passed_checklists,defaultColDef:l.defaultColDef,columnDefs:l.colDefs,pagination:!0,onRowClicked:o.onRowClicked,onSelectionChanged:o.onSelectionChanged},null,8,["rowData","defaultColDef","columnDefs","onRowClicked","onSelectionChanged"])])}var Hw={components:{AgGridVue:Ba.n},props:{passed_checklists:{type:Array,required:!0}},data(){return{colDefs:[{headerName:"Checklist ID",field:"id",checkboxSelection:!0},{headerName:"Unique Code",field:"unique_code",valueFormatter:function(e){return null===e.value?"null":e.value}},{headerName:"Project Name",field:"bom.product.project.name"},{headerName:"Product Name",field:"bom.product.name"},{headerName:"Product Code",field:"bom.product.product_code"},{headerName:"Updated At",field:"updated_at"},{headerName:"Updated By",valueGetter:function(e){if(console.log(e.data.updated_by),null!=e.data.updated_by){const t=e.data.updated_by.first_name||"",a=e.data.updated_by.last_name||"";return t||a?`${t} ${a}`:""}return""}},{headerName:"Created At",field:"created_at"},{headerName:"Created By",valueGetter:function(e){const t=e.data.created_by.first_name||"",a=e.data.created_by.last_name||"";return t||a?`${t} ${a}`:""}},{headerName:"Status",field:"status"},{headerName:"View",cellRenderer:this.viewButtonRenderer}],defaultColDef:{filter:!0,sortable:!0,resizable:!0,autoSize:!0},gridApi:null}},mounted(){},methods:{onRowClicked(e){this.$emit("rowClicked",e.data)},onSelectionChanged(e){const t=e.api.getSelectedRows(),a=t.length>0?t[0]:null;a?this.$emit("rowSelected",a):this.$emit("rowDeselected")},onGridReady(e){this.gridApi=e.api},viewButtonRenderer(e){const t=document.createElement("button");return t.innerHTML='<i class="fas fa-eye"></i>',t.classList.add("btn","btn-outline-secondary"),t.addEventListener("click",(()=>this.onViewClick(e.data))),t},onViewClick(e){"In Progress"===e.status?this.$router.push(`/begin-checklist/${e.bom.id}`):this.$router.push(`/checklist-details/${e.id}`)}}};const Qw=(0,Ae.Z)(Hw,[["render",Gw],["__scopeId","data-v-b7ef300c"]]);var Yw=Qw,Kw={components:{PassedChecklistsTable:Yw},data(){return{selectedRow:null,clickedRowId:null,isButtonEnabled:!1,isExisting:!1,isActive:!1,passed_checklists:[]}},methods:{async fetchData(){try{this.$store.commit("setIsLoading",!0);const e=await Ie.Z.get("store/get-passed-checklists/");this.passed_checklists=e.data.passed_checklists,console.log(e.data),this.$store.commit("setIsLoading",!1)}catch(e){console.error("Error fetching passed checklists:",e),this.$store.commit("setIsLoading",!1)}},handleRowClicked(e){console.log("Clicked Row:",e)},handleRowSelected(e){console.log("Row Selected:",e),e&&e.id&&(this.selectedRow=e,this.clickedRowId=e.id,this.isButtonEnabled=!0)},handleRowDeselected(){console.log("Row Deselected:"),this.isButtonEnabled=!1},startIqc(){this.clickedRowId&&this.$router.push(`/iqc-for-checklist/${this.clickedRowId}`)}},mounted(){this.fetchData()}};const Jw=(0,Ae.Z)(Kw,[["render",zw]]);var Xw=Jw;const eC=e=>((0,i.dD)("data-v-9b363590"),e=e(),(0,i.Cn)(),e),tC={key:0,class:"container text-center"},aC=eC((()=>(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1))),sC=eC((()=>(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1))),iC=[aC,sC],lC={key:1,class:"container"},oC={class:"row align-items-center"},nC={class:"col-md-6 mt-4"},dC={class:"d-flex align-items-center"},cC=eC((()=>(0,i._)("h2",{class:"mb-0"},"Checklist",-1))),rC=eC((()=>(0,i._)("span",{class:"ms-3 fs-4 text-muted me-3"},"|",-1))),mC={"aria-label":"breadcrumb"},uC={class:"breadcrumb bg-transparent m-0 p-0 justify-content-end"},hC=eC((()=>(0,i._)("li",{class:"breadcrumb-item"},[(0,i._)("a",{href:"/"},[(0,i._)("i",{class:"fas fa-home me-1"}),(0,i.Uk)("Home")])],-1))),pC={class:"breadcrumb-item active","aria-current":"page"},bC=eC((()=>(0,i._)("i",{class:"fas fa-list-alt me-1"},null,-1))),gC=eC((()=>(0,i._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,i._)("i",{class:"fas fa-spinner me-1"}),(0,i.Uk)(" Ongoing Checklist ")],-1))),fC={class:"modal fade",id:"generateLabelModal",tabindex:"-1","aria-labelledby":"generateLabelModalLabel","aria-hidden":"true"},_C={class:"modal-dialog"},vC={class:"modal-content"},yC=eC((()=>(0,i._)("div",{class:"modal-header"},[(0,i._)("h1",{class:"modal-title fs-5",id:"generateLabelModalLabel"}," Generate Label "),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),kC={class:"modal-body"},wC={key:0},CC={key:0,id:"printable-content"},DC=["src"],SC={key:1},MC={key:1},PC={class:"modal-footer"},IC=eC((()=>(0,i._)("button",{type:"button",class:"btn btn-dark","data-bs-dismiss":"modal"}," Cancel ",-1))),xC={key:0},RC={class:"modal fade",id:"endChecklistModal",tabindex:"-1","aria-labelledby":"endChecklistModalLabel","aria-hidden":"true"},$C={class:"modal-dialog"},LC={class:"modal-content"},BC=eC((()=>(0,i._)("div",{class:"modal-header"},[(0,i._)("h1",{class:"modal-title fs-5",id:"endChecklistModalLabel"}," End Checklist "),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),UC=eC((()=>(0,i._)("div",{class:"modal-body"}," Are you sure you want to end this checklist? ",-1))),EC={class:"modal-footer"},NC=eC((()=>(0,i._)("button",{type:"button",class:"btn btn-dark","data-bs-dismiss":"modal"}," Cancel ",-1))),OC={class:"card border-primary mb-4 mt-4"},TC=eC((()=>(0,i._)("div",{class:"card-header bg-primary text-white"},[(0,i._)("h4",{class:"mb-0"},"Bom Details")],-1))),AC={class:"card-body"},jC={class:"row"},FC={key:0,class:"col"},qC=eC((()=>(0,i._)("strong",null,"Project Name:",-1))),WC={key:1,class:"col"},VC=eC((()=>(0,i._)("strong",null,"Product Name:",-1))),ZC={key:2,class:"col"},zC=eC((()=>(0,i._)("strong",null,"BOM Rev No:",-1))),GC={key:3,class:"col"},HC=eC((()=>(0,i._)("strong",null,"Issue Date:",-1))),QC={class:"accordion",id:"accordionPanelsStayOpenExample"},YC={class:"accordion-item"},KC={class:"accordion-header",id:"panelsStayOpen-headingOne"},JC={class:"accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseOne","aria-expanded":"true","aria-controls":"panelsStayOpen-collapseOne"},XC={key:0,class:"spinner-border ms-2",role:"status"},eD=eC((()=>(0,i._)("span",{class:"visually-hidden"},"Loading...",-1))),tD=[eD],aD={key:1},sD=eC((()=>(0,i._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),iD=[sD],lD={id:"panelsStayOpen-collapseOne",class:"accordion-collapse collapse show","aria-labelledby":"panelsStayOpen-headingOne"},oD={class:"accordion-body"};function nD(e,t,a,s,l,o){const n=(0,i.up)("router-link"),d=(0,i.up)("IqcChecklistTable");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",tC,iC)):((0,i.wg)(),(0,i.iD)("div",lC,[(0,i._)("div",oC,[(0,i._)("div",nC,[(0,i._)("div",dC,[cC,rC,(0,i._)("nav",mC,[(0,i._)("ol",uC,[hC,(0,i._)("li",pC,[(0,i.Wm)(n,{to:"/checklist"},{default:(0,i.w5)((()=>[bC,(0,i.Uk)(" IQC Checklist")])),_:1})]),gC])])])])]),(0,i._)("div",fC,[(0,i._)("div",_C,[(0,i._)("div",vC,[yC,(0,i._)("div",kC,[e.isChecklistPassed?((0,i.wg)(),(0,i.iD)("div",wC,[e.generatedQRCode?((0,i.wg)(),(0,i.iD)("div",CC,[(0,i._)("img",{src:e.generatedQRCode,alt:"QR Code"},null,8,DC)])):((0,i.wg)(),(0,i.iD)("p",SC," All Checks passed successfully, generate a label by pressing the generate button. "))])):((0,i.wg)(),(0,i.iD)("div",MC," You can only generate a label if all checks are passed "))]),(0,i._)("div",PC,[IC,e.isChecklistPassed?((0,i.wg)(),(0,i.iD)("div",xC,[e.generatedQRCode?((0,i.wg)(),(0,i.iD)("button",{key:0,type:"button",class:"btn btn-success",onClick:t[0]||(t[0]=(...t)=>e.printQRCode&&e.printQRCode(...t))}," Print ")):((0,i.wg)(),(0,i.iD)("button",{key:1,type:"button",class:"btn btn-success",onClick:t[1]||(t[1]=(...t)=>e.generateQRCode&&e.generateQRCode(...t))}," Generate "))])):(0,i.kq)("",!0)])])])]),(0,i._)("div",RC,[(0,i._)("div",$C,[(0,i._)("div",LC,[BC,UC,(0,i._)("div",EC,[NC,(0,i._)("button",{type:"button",class:"btn btn-danger",onClick:t[2]||(t[2]=(...t)=>e.endChecklist&&e.endChecklist(...t)),"data-bs-dismiss":"modal"}," End ")])])])]),(0,i._)("div",OC,[TC,(0,i._)("div",AC,[(0,i._)("div",jC,[l.checklist.bom?((0,i.wg)(),(0,i.iD)("div",FC,[qC,(0,i.Uk)(" "+(0,Ze.zw)(l.checklist.bom.product.project.name),1)])):(0,i.kq)("",!0),l.checklist.bom?((0,i.wg)(),(0,i.iD)("div",WC,[VC,(0,i.Uk)(" "+(0,Ze.zw)(l.checklist.bom.product.name),1)])):(0,i.kq)("",!0),l.checklist.bom?((0,i.wg)(),(0,i.iD)("div",ZC,[zC,(0,i.Uk)(" "+(0,Ze.zw)(l.checklist.bom.bom_rev_number),1)])):(0,i.kq)("",!0),l.checklist.bom?((0,i.wg)(),(0,i.iD)("div",GC,[HC,(0,i.Uk)(" "+(0,Ze.zw)(l.checklist.bom.issue_date),1)])):(0,i.kq)("",!0)])])]),(0,i._)("div",QC,[(0,i._)("div",YC,[(0,i._)("h2",KC,[(0,i._)("button",JC,[(0,i.Uk)(" IQC Check "),!1===l.isIqcPassed?((0,i.wg)(),(0,i.iD)("div",XC,tD)):((0,i.wg)(),(0,i.iD)("div",aD,iD))])]),(0,i._)("div",lD,[(0,i._)("div",oD,[(0,i.Wm)(d,{checklist_uids:l.checklist_uids,onRowClicked:o.handleRowClicked,onRowSelected:o.handleRowSelected},null,8,["checklist_uids","onRowClicked","onRowSelected"])])])])])]))}const dD=e=>((0,i.dD)("data-v-99fa986e"),e=e(),(0,i.Cn)(),e),cD={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},rD={class:"modal-dialog modal-lg"},mD={class:"modal-content"},uD=dD((()=>(0,i._)("div",{class:"modal-header"},[(0,i._)("h1",{class:"modal-title fs-5",id:"exampleModalLabel"}," Upload IQC File "),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),hD={class:"modal-body"},pD={class:"mb-3"},bD={class:"modal-footer"},gD=dD((()=>(0,i._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1)));function fD(e,t,a,s,l,o){const n=(0,i.up)("ag-grid-vue");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(n,{ref:"agGrid",style:{height:"550px"},class:"ag-theme-quartz",rowData:a.checklist_uids,defaultColDef:l.defaultColDef,columnDefs:l.colDefs,pagination:!0,onRowClicked:o.onRowClicked,onSelectionChanged:o.onSelectionChanged},null,8,["rowData","defaultColDef","columnDefs","onRowClicked","onSelectionChanged"]),(0,i._)("div",cD,[(0,i._)("div",rD,[(0,i._)("div",mD,[uD,(0,i._)("div",hD,[(0,i._)("div",pD,[(0,i._)("input",{type:"file",class:"form-control",id:"modalFileInput",onChange:t[0]||(t[0]=(...e)=>o.handleModalFileUpload&&o.handleModalFileUpload(...e))},null,32)])]),(0,i._)("div",bD,[gD,(0,i._)("button",{type:"button",class:"btn btn-primary",onClick:t[1]||(t[1]=(...e)=>o.uploadFileModal&&o.uploadFileModal(...e)),"data-bs-dismiss":"modal"}," Upload File ")])])])])])}var _D={props:{checklist_uids:{type:Array,required:!0}},components:{AgGridVue:Ba.n},data(){return{gridApi:null,isGridReady:!1,colDefs:[{headerName:"UID",field:"uid",checkboxSelection:!0},{headerName:"VEPL Part No",field:"checklist_item.bom_line_item.part_number"},{headerName:"Updated At",field:"updated_at"},{headerName:"File",cellRenderer:this.fileCellRenderer}],defaultColDef:{filter:!0,sortable:!0,resizable:!0,autoSize:!0,domLayout:"autoHeight"},selectedRows:[],selectedFile:null,activeChecklistItemUidId:""}},methods:{fileCellRenderer(e){const t=e.data&&e.data.iqc_file_url;if(t){const a=t.split("/").pop(),s=document.createElement("a");return s.href=e.data.iqc_file_url,s.textContent=a,s.style.color="blue",s.download=!0,s}{const t=document.createElement("button");t.innerHTML='<i class="fas fa-upload me-1"></i> Upload IQC File',t.classList.add("btn-sm","btn-primary");const a=e.data.id;return t.addEventListener("click",(()=>this.triggerModal(a))),t.setAttribute("data-bs-toggle","modal"),t.setAttribute("data-bs-target","#exampleModal"),t}},triggerModal(e){this.activeChecklistItemUidId=e},uploadFileModal(){if(console.log("Upload file functionality"),console.log("this is the file=",this.selectedFile),this.$store.commit("setIsLoading",!0),this.activeChecklistItemUidId&&this.selectedFile){const e=new FormData;e.append("iqc_file",this.selectedFile),e.append("checklist_item_uid_id",this.activeChecklistItemUidId),Ie.Z.post("store/upload-iqc-file/",e).then((e=>{this.$store.commit("setIsLoading",!1),console.log("File uploaded successfully",e.data),this.$notify({title:"File Uploaded Successfully",type:"bg-success-subtle text-success",duration:"5000"});const t=this.checklist_uids.every((e=>e.iqc_file_url));t&&this.$emit("iqcCheckPassed"),setTimeout((()=>{window.location.reload()}),1e3),this.$store.commit("setIsLoading",!1)})).catch((e=>{console.error("Error uploading file",e),this.$notify({title:"File Upload Unsuccessful",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1)})),this.activeChecklistItemUidId=""}else console.warn("No file selected or active checklist item UID."),this.$notify({title:"Please Select A File to Upload",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1)},onRowClicked(e){this.$emit("rowClicked",e.data)},onSelectionChanged(e){const t=e.api.getSelectedRows(),a=t.length>0?t[0]:null;a?this.$emit("rowSelected",a):this.$emit("rowDeselected")},handleModalFileUpload(e){this.selectedFile=e.target.files[0]}}};const vD=(0,Ae.Z)(_D,[["render",fD],["__scopeId","data-v-99fa986e"]]);var yD=vD,kD={components:{IqcChecklistTable:yD},data(){return{activeBom:"",checklistItems:[],isIqcPassed:!1,checklist:[],checklist_uids:[],selectedRow:[]}},mounted(){this.getData()},methods:{getData(){this.$store.commit("setIsLoading",!0),Ie.Z.get(`store/get-iqc-data/${this.$route.params.id}`).then((e=>{this.checklist=e.data.checklist,this.checklist_uids=e.data.checklist_uids,console.log(e.data),this.$store.commit("setIsLoading",!1)})).catch((e=>{console.error("Error fetching checklist details:",e),this.$store.commit("setIsLoading",!1)}))},downloadBOM(){try{const e=this.checklist.bom.bom_file_url;console.log("file url",e);const t=document.createElement("a");t.href=e,t.download=this.checklist.bom.bom_file_name,document.body.appendChild(t),t.click(),document.body.removeChild(t)}catch(e){console.error("Error downloading BOM:",e)}},handleRowClicked(e){console.log("Clicked Row:",e)},handleRowSelected(e){console.log("Row Selected:",e),this.selectedRow=e}},watch:{checklist_uids:{handler(e){this.isIqcPassed=e.every((e=>e.iqc_file_url))},deep:!0,immediate:!0}}};const wD=(0,Ae.Z)(kD,[["render",nD],["__scopeId","data-v-9b363590"]]);var CD=wD;const DD={key:0,class:"container text-center"},SD=(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1),MD=(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1),PD=[SD,MD],ID={key:1,class:"container"},xD={class:"row align-items-center"},RD={class:"col-md-6 mt-4"},$D={class:"d-flex align-items-center"},LD=(0,i._)("h2",{class:"mb-0"},"Project Pricing",-1),BD=(0,i._)("span",{class:"ms-3 fs-4 text-muted"},"|",-1),UD={"aria-label":"breadcrumb",class:"d-inline-block ms-3"},ED={class:"breadcrumb bg-transparent m-0 p-0"},ND={class:"breadcrumb-item"},OD=(0,i._)("i",{class:"fas fa-home me-1"},null,-1),TD=(0,i._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,i._)("i",{class:"fas fa-project-diagram me-1"}),(0,i.Uk)(" Project Pricing ")],-1),AD={class:"card p-3 mb-4 mt-4"},jD={class:"row mb-3"},FD={class:"col-md-6"},qD=(0,i._)("label",{for:"projectDropdown",class:"form-label"},"Project",-1),WD=["value"],VD={class:"col-md-6"},ZD=(0,i._)("label",{for:"productCode",class:"form-label"},"Product",-1),zD=["value"],GD={class:"col"},HD=["disabled"],QD={key:0,class:"spinner-border spinner-border-sm me-1",role:"status","aria-hidden":"true"},YD={class:"text-muted"},KD={class:"modal fade",id:"pricingTableModal",tabindex:"-1","aria-labelledby":"pricingTableModalLabel","aria-hidden":"true"},JD={class:"modal-dialog modal-xl"},XD={class:"modal-content"},eS={class:"modal-header"},tS={class:"modal-title fs-5",id:"pricingTableModalLabel"},aS=(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),sS={class:"modal-body"},iS=(0,i._)("div",{class:"modal-footer"},[(0,i._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ")],-1);function lS(e,t,a,l,o,n){const d=(0,i.up)("router-link"),c=(0,i.up)("PartNumberPricingTable");return(0,i.wg)(),(0,i.iD)(i.HY,null,[e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",DD,PD)):((0,i.wg)(),(0,i.iD)("div",ID,[(0,i._)("div",xD,[(0,i._)("div",RD,[(0,i._)("div",$D,[LD,BD,(0,i._)("nav",UD,[(0,i._)("ol",ED,[(0,i._)("li",ND,[(0,i.Wm)(d,{to:"/"},{default:(0,i.w5)((()=>[OD,(0,i.Uk)(" Home")])),_:1})]),TD])])])])]),(0,i._)("section",AD,[(0,i._)("div",jD,[(0,i._)("div",FD,[qD,(0,i.wy)((0,i._)("select",{class:"form-select",id:"projectDropdown","onUpdate:modelValue":t[0]||(t[0]=e=>o.form.selectedProject=e),required:""},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.projects,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e.id,value:e},(0,Ze.zw)(e.name),9,WD)))),128))],512),[[s.bM,o.form.selectedProject]])]),(0,i._)("div",VD,[ZD,(0,i.wy)((0,i._)("select",{class:"form-select",id:"productCode","onUpdate:modelValue":t[1]||(t[1]=e=>o.form.selectedProduct=e),required:""},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.filteredProducts,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e.id,value:e},(0,Ze.zw)(e.name),9,zD)))),128))],512),[[s.bM,o.form.selectedProduct]])])]),(0,i._)("div",GD,[(0,i._)("button",{class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#pricingTableModal",onClick:t[2]||(t[2]=(...e)=>n.fetchProductPrices&&n.fetchProductPrices(...e))}," Fetch Prices "),(0,i._)("button",{class:"btn btn-secondary ms-2",onClick:t[3]||(t[3]=(...e)=>n.refreshProductPrices&&n.refreshProductPrices(...e)),disabled:o.isRefreshing},[o.isRefreshing?((0,i.wg)(),(0,i.iD)("span",QD)):(0,i.kq)("",!0),(0,i.Uk)(" "+(0,Ze.zw)(o.isRefreshing?"Refreshing Prices...":"Refresh Prices"),1)],8,HD)]),(0,i._)("span",YD," Last Refreshed At: "+(0,Ze.zw)(o.lastUpdatedAt),1)])])),(0,i._)("div",KD,[(0,i._)("div",JD,[(0,i._)("div",XD,[(0,i._)("div",eS,[(0,i._)("h1",tS," Pricing Details - "+(0,Ze.zw)(o.form.selectedProject.name)+" ("+(0,Ze.zw)(o.form.selectedProduct.name)+") ",1),aS]),(0,i._)("div",sS,[(0,i.Wm)(c,{prices:o.partPrices},null,8,["prices"])]),iS])])])],64)}const oS={key:0,class:"container text-center"},nS=(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1),dS=(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1),cS=[nS,dS],rS={key:1};function mS(e,t,a,s,l,o){const n=(0,i.up)("ag-grid-vue");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",oS,cS)):((0,i.wg)(),(0,i.iD)("div",rS,[(0,i.Wm)(n,{style:{height:"500px"},class:"ag-theme-quartz",rowData:a.prices,defaultColDef:l.defaultColDef,columnDefs:l.colDefs,pagination:!0},null,8,["rowData","defaultColDef","columnDefs"])]))}var uS={components:{AgGridVue:Ba.n},props:{prices:{type:Array,required:!0}},data(){return{colDefs:[{field:"part_number",headerName:"VEPL Part Number"},{field:"part_name",headerName:"Name"},{field:"description",headerName:"Description"},{field:"rate",headerName:"Rate",cellRenderer:e=>{if(e.data.po_json){const t=e.data.po_json.currency_symbol,a=e.data.rate,s=this.$parsePriceToString(a);return`${t} ${s}`}return e.data.rate}},{field:"quantity",headerName:"Quantity"},{field:"total",headerName:"Total",cellRenderer:e=>{if(e.data.po_json){const t=e.data.po_json.currency_symbol,a=e.data.total,s=this.$parsePriceToString(a);return`${t} ${s}`}return e.data.total}}],defaultColDef:{filter:!0,sortable:!0,resizable:!0,autoSize:!0,autoSizeColumns:!0}}},methods:{}};const hS=(0,Ae.Z)(uS,[["render",mS]]);var pS=hS,bS={components:{PartNumberPricingTable:pS},data(){return{projects:[],products:[],form:{selectedProject:"",selectedProduct:""},partPrices:[],lastUpdatedAt:"",isRefreshing:"1"===this.$route.query.is_refreshing}},mounted(){this.getProjectPricingPage();const e="1"===this.$route.query.is_refreshing;this.isRefreshing=e;const t=sessionStorage.getItem("refresh_prices_task_id");e&&t&&this.checkTaskStatus(t)},watch:{"$route.query.is_refreshing":function(e){this.isRefreshing="1"===e}},computed:{filteredProducts(){if(this.products&&this.projects){if(null!==this.form.selectedProject){const e=this.products.filter((e=>{const t=e.project;return t===this.form.selectedProject.id}));return e}return[]}return[]}},methods:{async getProjectPricingPage(){this.$store.commit("setIsLoading",!0),await Ie.Z.get("/pricing/get-project-pricing-page").then((e=>{console.log(e.data),this.projects=e.data.projects,this.products=e.data.products,this.lastUpdatedAt=e.data.last_updated_at,this.$store.commit("setIsLoading",!1)})).catch((e=>{console.error("Error:",e),this.$store.commit("setIsLoading",!1)}))},async fetchProductPrices(){this.form.selectedProduct?(this.$store.commit("setIsLoading",!0),await Ie.Z.get(`/pricing/get-product-pricing/${this.form.selectedProduct.id}/`).then((e=>{console.log(e.data),this.partPrices=e.data.part_prices,this.$store.commit("setIsLoading",!1)})).catch((e=>{console.error("Error:",e),this.$store.commit("setIsLoading",!1)}))):this.form.selectedProject?(this.$store.commit("setIsLoading",!0),await Ie.Z.get(`/pricing/get-project-pricing/${this.form.selectedProject.id}/`).then((e=>{console.log(e.data),this.partPrices=e.data.part_prices,this.$store.commit("setIsLoading",!1)})).catch((e=>{console.error("Error:",e),this.$store.commit("setIsLoading",!1),this.$notify({title:"An error occured,please try again",type:"bg-danger-subtle text-danger",duration:"5000"})}))):this.$notify({title:"Please select the project or product to fetch prices",type:"bg-danger-subtle text-danger",duration:"5000"})},async refreshProductPrices(){await Ie.Z.get("/pricing/refresh-product-pricing").then((e=>{if(console.log(e.data),this.$notify({title:"Pricing Refresh Started",type:"bg-success-subtle text-success",text:e.data.message,duration:"5000"}),"IN PROGRESS"===e.data.task_status||"PENDING"===e.data.task_status){const t=this.$route,a={is_refreshing:1};this.$router.replace({...t,query:{...t.query,...a}}),sessionStorage.setItem("refresh_prices_task_id",e.data.task_id),this.checkTaskStatus(e.data.task_id)}else"SUCCESS"===e.data.task_status?(this.$notify({title:"Prices Refreshed Successfully",type:"bg-success-subtle text-success",duration:"5000"}),this.$router.push("/project-pricing")):this.$notify({title:"Failed to Refresh Prices",type:"bg-danger-subtle text-danger",duration:"5000"})})).catch((e=>{console.error("Error:",e)}))},async checkTaskStatus(e){try{const t=await Ie.Z.get(`store/check-task-status/${e}/`);if("IN PROGRESS"===t.data.task_status||"PENDING"===t.data.task_status){const t=this.$route,a={is_refreshing:1};this.$router.replace({...t,query:{...t.query,...a}}),setTimeout((()=>{this.checkTaskStatus(e)}),1e4)}else"SUCCESS"===t.data.task_status?(this.$notify({title:"Prices Refreshed Successfully",type:"bg-success-subtle text-success",duration:"5000"}),sessionStorage.removeItem("refresh_prices_task_id"),this.getProjectPricingPage(),this.$router.push("/project-pricing")):(this.$notify({title:"Failed to Refresh Prices",type:"bg-danger-subtle text-danger",duration:"5000"}),sessionStorage.removeItem("refresh_prices_task_id"),this.getProjectPricingPage(),this.$router.push("/project-pricing"))}catch(t){console.log("error:",t),this.$notify({title:"Failed to Refresh Prices",type:"bg-danger-subtle text-danger",duration:"5000"}),this.getProjectPricingPage(),sessionStorage.removeItem("refresh_prices_task_id"),this.$router.push("/project-pricing")}}}};const gS=(0,Ae.Z)(bS,[["render",lS]]);var fS=gS;const _S=e=>((0,i.dD)("data-v-39753d6a"),e=e(),(0,i.Cn)(),e),vS={key:0,class:"container text-center"},yS=_S((()=>(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1))),kS=_S((()=>(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1))),wS=[yS,kS],CS={key:1,class:"container"},DS={class:"row align-items-center"},SS=(0,i.uE)('<div class="col-md-6 mt-4" data-v-39753d6a><div class="d-flex align-items-center" data-v-39753d6a><h2 class="mb-0" data-v-39753d6a>Maintenance Calendar</h2><span class="ms-3 fs-4 text-muted" data-v-39753d6a>|</span><nav aria-label="breadcrumb" class="d-inline-block ms-3" data-v-39753d6a><ol class="breadcrumb bg-transparent m-0 p-0" data-v-39753d6a><li class="breadcrumb-item" data-v-39753d6a><a href="/" data-v-39753d6a><i class="fas fa-home me-2" data-v-39753d6a></i>Home</a></li></ol></nav></div></div>',1),MS={class:"col-md-6 d-flex justify-content-end mt-4"},PS=_S((()=>(0,i._)("option",{disabled:"",value:""},"Select Line",-1))),IS=["value","selected"],xS=_S((()=>(0,i._)("option",{disabled:"",value:""},"Select Machine",-1))),RS=["value","selected"],$S={class:"card card-outline card-primary mt-5"},LS=_S((()=>(0,i._)("div",{class:"card-header"},[(0,i._)("h3",{class:"card-title",style:{"font-weight":"bold","font-size":"1.2em"}}," Legend: "),(0,i._)("div",{class:"card-tools"})],-1))),BS={class:"card-body"},US=(0,i.uE)('<div class="legends-container" data-v-39753d6a><div class="legend-item" data-v-39753d6a><div class="legend-color red" data-v-39753d6a></div><div class="legend-label" data-v-39753d6a>Maintenance Activity Due</div></div><div class="legend-item" data-v-39753d6a><div class="legend-color yellow" data-v-39753d6a></div><div class="legend-label" data-v-39753d6a>Maintenance Activity Scheduled</div></div><div class="legend-item" data-v-39753d6a><div class="legend-color green" data-v-39753d6a></div><div class="legend-label" data-v-39753d6a>Maintenance Activity Performed</div></div></div>',1),ES={style:{"margin-top":"50px"}};function NS(e,t,a,l,o,n){const d=(0,i.up)("router-link"),c=(0,i.up)("FullCalendar"),r=(0,i.up)("MaintenancePlanDetailsModal"),m=(0,i.up)("CreateMaintenancePlanModal"),u=(0,i.up)("EditableNoteModal");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",vS,wS)):((0,i.wg)(),(0,i.iD)("div",CS,[(0,i._)("div",DS,[SS,(0,i._)("div",MS,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>o.selectedLine=e),onChange:t[1]||(t[1]=(...e)=>n.selectLine&&n.selectLine(...e))},[PS,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.lines,(t=>((0,i.wg)(),(0,i.iD)("option",{key:t.id,value:t,selected:t.id===e.preselectedLineId},(0,Ze.zw)(t.name),9,IS)))),128))],544),[[s.bM,o.selectedLine]]),(0,i.wy)((0,i._)("select",{class:"ms-2","onUpdate:modelValue":t[2]||(t[2]=e=>o.selectedMachine=e),onChange:t[3]||(t[3]=(...e)=>n.selectMachine&&n.selectMachine(...e))},[xS,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.filteredMachines,(t=>((0,i.wg)(),(0,i.iD)("option",{key:t.id,value:t,selected:t.id===e.preselectedMachineId},(0,Ze.zw)(t.name),9,RS)))),128))],544),[[s.bM,o.selectedMachine]]),(0,i.Wm)(d,{to:"/machine/create-maintenance-calendar",class:"btn btn-primary btn-sm ms-2"},{default:(0,i.w5)((()=>[(0,i.Uk)(" Create Maintenance Plan ")])),_:1})])]),(0,i._)("div",$S,[LS,(0,i._)("div",BS,[US,(0,i._)("div",ES,[(0,i.Wm)(c,{options:o.calendarOptions},null,8,["options"])])])]),(0,i.Wm)(r,{show:o.showPlanDetailsModal,selectedEvent:o.selectedEvent,clickedEvent:e.clickedEvent,onCloseModal:n.closePlanDetailsModal,onMaintenancePlanDeleted:n.populateCalendarNew,onMaintenanceActivityDeleted:n.populateCalendarNew},null,8,["show","selectedEvent","clickedEvent","onCloseModal","onMaintenancePlanDeleted","onMaintenanceActivityDeleted"]),(0,i.Wm)(m,{show:o.showCreateMaintenancePlanModal,maintenanceActivityTypes:o.maintenance_activity_types,onCloseModal:n.closeCreateMaintenancePlanModal,"maintenance-plan-info":o.maintenancePlanInfo,onMaintenancePlanCreatedByClicking:n.populateCalendarNew},null,8,["show","maintenanceActivityTypes","onCloseModal","maintenance-plan-info","onMaintenancePlanCreatedByClicking"]),(0,i.Wm)(u,{show:o.showEditableModal,selectedEvent:o.selectedEvent,clickedEvent:e.clickedEvent,onCloseModal:n.closeEditableNoteModal,modalTitle:e.modalTitle,onEventColorUpdated:e.handleEventColorUpdated,onDateMarkedMaintenanceActivityCreated:n.populateCalendarNew,onMaintenanceActivityNoteUpdated:n.populateCalendarNew,onMaintenanceActivityDeleted:n.populateCalendarNew},null,8,["show","selectedEvent","clickedEvent","onCloseModal","modalTitle","onEventColorUpdated","onDateMarkedMaintenanceActivityCreated","onMaintenanceActivityNoteUpdated","onMaintenanceActivityDeleted"])]))}var OS=a(2415),TS=a(7127),AS=a(7079);const jS=e=>((0,i.dD)("data-v-f485bd64"),e=e(),(0,i.Cn)(),e),FS={key:0,class:"modal fade show",id:"myModal",tabindex:"-1","aria-labelledby":"myModalLabel","aria-modal":"true",role:"dialog",style:{display:"block"}},qS={class:"modal-dialog modal-lg",role:"document"},WS={class:"modal-content"},VS={class:"modal-header bg-primary text-light"},ZS=jS((()=>(0,i._)("h4",{class:"modal-title",id:"myModalLabel"},"Maintenance Details",-1))),zS=jS((()=>(0,i._)("span",{"aria-hidden":"true"},"×",-1))),GS=[zS],HS={class:"modal-body"},QS={class:"row"},YS={class:"col-md-6"},KS=jS((()=>(0,i._)("p",{class:"mb-2"},[(0,i._)("strong",null,"Maintenance Date:")],-1))),JS=jS((()=>(0,i._)("p",{class:"mb-2"},[(0,i._)("strong",null,"Performed By:")],-1))),XS={class:"col-md-6"},eM=jS((()=>(0,i._)("p",{class:"mb-2"},[(0,i._)("strong",null,"Maintenance Time:")],-1))),tM=jS((()=>(0,i._)("p",{class:"mb-2"},[(0,i._)("strong",null,"Note:")],-1))),aM={class:"modal-footer"},sM={key:1,class:"modal-backdrop fade show",id:"backdrop",style:{display:"block"}};function iM(e,t,a,s,l,o){return(0,i.wg)(),(0,i.iD)(i.HY,null,[a.show?((0,i.wg)(),(0,i.iD)("div",FS,[(0,i._)("div",qS,[(0,i._)("div",WS,[(0,i._)("div",VS,[ZS,(0,i._)("button",{type:"button",class:"close text-light","aria-label":"Close",onClick:t[0]||(t[0]=(...e)=>o.closeModal&&o.closeModal(...e))},GS)]),(0,i._)("div",HS,[(0,i._)("div",QS,[(0,i._)("div",YS,[KS,(0,i._)("p",null,(0,Ze.zw)(o.formattedDate),1),JS,(0,i._)("p",null,(0,Ze.zw)(a.selectedEvent.extendedProps.created_by_name),1)]),(0,i._)("div",XS,[eM,(0,i._)("p",null,(0,Ze.zw)(o.formattedTime),1),tM,(0,i._)("p",null,(0,Ze.zw)(a.selectedEvent.extendedProps.note),1)])])]),(0,i._)("div",aM,[(0,i._)("button",{class:"btn btn-danger",onClick:t[1]||(t[1]=(...e)=>o.confirmDeleteMaintenancePlan&&o.confirmDeleteMaintenancePlan(...e))}," Delete Maintenance Plan "),(0,i._)("button",{class:"btn btn-warning",onClick:t[2]||(t[2]=(...e)=>o.confirmDeleteMaintenanceActivity&&o.confirmDeleteMaintenanceActivity(...e))}," Delete Maintenance Activity "),(0,i._)("button",{class:"btn btn-secondary",onClick:t[3]||(t[3]=(...e)=>o.closeModal&&o.closeModal(...e))},"Close")])])])])):(0,i.kq)("",!0),a.show?((0,i.wg)(),(0,i.iD)("div",sM)):(0,i.kq)("",!0)],64)}var lM={props:{show:{type:Boolean,required:!0,default:!1},selectedEvent:{type:Object,required:!0}},computed:{formattedDate(){return this.extractDate(this.selectedEvent.extendedProps.created_at)},formattedTime(){return this.extractTime(this.selectedEvent.extendedProps.created_at)}},methods:{extractDate(e){const[t,a]=e.split(" "),[s,i,l]=t.split("/"),o=new Date(`${l}-${i}-${s}T${a}`);return o.toLocaleDateString("en-IN",{timeZone:"Asia/Kolkata"})},extractTime(e){const[t,a]=e.split(" "),[s,i,l]=t.split("/"),o=new Date(`${l}-${i}-${s}T${a}`);return o.toLocaleTimeString("en-IN",{timeZone:"Asia/Kolkata",hour:"2-digit",minute:"2-digit"})},confirmDeleteMaintenancePlan(){window.confirm("Are you sure you want to delete this maintenance plan?")&&this.deleteMaintenancePlan()},async deleteMaintenancePlan(){Ie.Z.delete(`/machine-maintenance/delete-maintenance-plan/${this.selectedEvent.extendedProps.id}`).then((e=>{200!==e.status&&204!==e.status||(this.$emit("maintenance-plan-deleted",e.data.maintenance_plans),this.closeModal(),this.$notify({title:" Maintenance Plan Deleted Successfully",type:"bg-success-subtle text-success",duration:"5000"}))})).catch((e=>{console.error("Error deleting note:",e),this.$notify({title:"Error deleing Maintenance Plan",type:"bg-danger-subtle text-danger",duration:"5000"})}))},confirmDeleteMaintenanceActivity(){window.confirm("Are you sure you want to delete this maintenance activity?")&&this.deleteMaintenanceActivity()},async deleteMaintenanceActivity(){Ie.Z.delete(`/machine-maintenance/update-or-delete-maintenance-activity/${this.selectedEvent.extendedProps.id}`).then((e=>{200!==e.status&&204!==e.status||(this.$emit("maintenance-activity-deleted",e.data.maintenance_plans),this.closeModal(),this.$notify({title:"Date Unmarked and Maintenance Activity Deleted",type:"bg-success-subtle text-success",duration:"5000"}))})).catch((e=>{console.error("Error deleting note:",e),this.$notify({title:"Error deleing Maintenance Activity",type:"bg-danger-subtle text-danger",duration:"5000"})}))},closeModal(){this.$emit("close-modal")}}};const oM=(0,Ae.Z)(lM,[["render",iM],["__scopeId","data-v-f485bd64"]]);var nM=oM;const dM=e=>((0,i.dD)("data-v-f423093e"),e=e(),(0,i.Cn)(),e),cM={key:0,class:"modal fade show",id:"myModal",tabindex:"-1","aria-labelledby":"myModalLabel","aria-modal":"true",role:"dialog",style:{display:"block"}},rM={class:"modal-dialog",role:"document"},mM={class:"modal-content"},uM=dM((()=>(0,i._)("div",{class:"modal-header"},[(0,i._)("h4",{class:"modal-title",id:"myModalLabel"},[(0,i._)("strong",{style:{color:"#333"}},"Create Maintenance Plan")])],-1))),hM={class:"modal-body"},pM={class:"mb-3"},bM=dM((()=>(0,i._)("label",{for:"description",class:"form-label"},"Description (Optional)",-1))),gM={class:"mb-3"},fM=dM((()=>(0,i._)("label",{for:"activityType",class:"form-label"},"Activity Type",-1))),_M=dM((()=>(0,i._)("option",{disabled:"",value:""},"Select Activity Type",-1))),vM=["value"],yM={class:"modal-footer"},kM={key:1,class:"modal-backdrop fade show",id:"backdrop",style:{display:"block"}};function wM(e,t,a,l,o,n){return(0,i.wg)(),(0,i.iD)(i.HY,null,[a.show?((0,i.wg)(),(0,i.iD)("div",cM,[(0,i._)("div",rM,[(0,i._)("div",mM,[uM,(0,i._)("div",hM,[(0,i._)("div",pM,[bM,(0,i.wy)((0,i._)("textarea",{"onUpdate:modelValue":t[0]||(t[0]=e=>o.description=e),class:"form-control",rows:"4",id:"description"},null,512),[[s.nr,o.description]])]),(0,i._)("div",gM,[fM,(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>o.selectedActivityType=e),class:"form-select",id:"activityType"},[_M,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.maintenanceActivityTypes,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e.id,value:e.id},(0,Ze.zw)(e.name),9,vM)))),128))],512),[[s.bM,o.selectedActivityType]])])]),(0,i._)("div",yM,[(0,i._)("button",{class:"btn btn-primary",onClick:t[2]||(t[2]=(...e)=>n.createMaintenancePlan&&n.createMaintenancePlan(...e))}," Create "),(0,i._)("button",{class:"btn btn-secondary",onClick:t[3]||(t[3]=(...e)=>n.closeModal&&n.closeModal(...e))},"Close")])])])])):(0,i.kq)("",!0),a.show?((0,i.wg)(),(0,i.iD)("div",kM)):(0,i.kq)("",!0)],64)}var CM={props:{show:{type:Boolean,required:!0,default:!1},selectedEvent:{type:Object,required:!0},maintenanceActivityTypes:{type:Array,required:!0},maintenancePlanInfo:{type:Object,required:!0}},data(){return{description:"",selectedActivityType:""}},methods:{createMaintenancePlan(){const e={description:this.description,selectedActivityType:this.selectedActivityType,machineId:this.maintenancePlanInfo.selectedMachine.id,selectedDate:this.maintenancePlanInfo.selectedDate};console.log("Form Data:",e),Ie.Z.post("/machine-maintenance/create-maintenance-plan-by-clicking/",e).then((e=>{console.log("Maintenance plan created:",e.data),this.$notify({title:"Maintenance Plan Created",type:"bg-success-subtle text-success",duration:"5000"}),this.$emit("maintenance-plan-created-by-clicking",e.data.maintenance_plans),this.closeModal()})).catch((e=>{console.error("Error creating maintenance plan:",e),this.$notify({title:"Error creating Maintenance Plan",type:"bg-danger-subtle text-danger",duration:"5000"})}))},closeModal(){this.$emit("close-modal")}}};const DM=(0,Ae.Z)(CM,[["render",wM],["__scopeId","data-v-f423093e"]]);var SM=DM;const MM={key:0,class:"modal fade show",id:"myModal",tabindex:"-1","aria-labelledby":"myModalLabel","aria-modal":"true",role:"dialog",style:{display:"block"}},PM={class:"modal-dialog",role:"document"},IM={class:"modal-content"},xM={class:"modal-header"},RM={class:"modal-title",id:"myModalLabel"},$M={style:{color:"#333"}},LM={class:"modal-body"},BM={class:"modal-footer"},UM=["disabled"],EM={key:1,class:"modal-backdrop fade show",id:"backdrop",style:{display:"block"}};function NM(e,t,a,l,o,n){return(0,i.wg)(),(0,i.iD)(i.HY,null,[a.show?((0,i.wg)(),(0,i.iD)("div",MM,[(0,i._)("div",PM,[(0,i._)("div",IM,[(0,i._)("div",xM,[(0,i._)("h4",RM,[(0,i._)("strong",$M,(0,Ze.zw)(a.modalTitle),1)])]),(0,i._)("div",LM,[(0,i.wy)((0,i._)("textarea",{"onUpdate:modelValue":t[0]||(t[0]=e=>o.note=e),class:"form-control",rows:"4"},null,512),[[s.nr,o.note]])]),(0,i._)("div",BM,[(0,i._)("button",{class:"btn btn-danger",disabled:"Add Note"===a.modalTitle,onClick:t[1]||(t[1]=(...e)=>n.confirmDeleteMaintenanceActivity&&n.confirmDeleteMaintenanceActivity(...e))}," Delete Maintenance Activity ",8,UM),(0,i._)("button",{class:"btn btn-primary",onClick:t[2]||(t[2]=(...e)=>n.saveChanges&&n.saveChanges(...e))}," Save Changes "),(0,i._)("button",{class:"btn btn-secondary",onClick:t[3]||(t[3]=(...e)=>n.closeModal&&n.closeModal(...e))},"Close")])])])])):(0,i.kq)("",!0),a.show?((0,i.wg)(),(0,i.iD)("div",EM)):(0,i.kq)("",!0)],64)}var OM={props:{show:{type:Boolean,required:!0,default:!1},selectedEvent:{type:Object,required:!0},modalTitle:{type:String,required:!0}},data(){return{note:""}},watch:{selectedEvent:{handler(e){e&&e.extendedProps&&e.extendedProps.note?this.note=e.extendedProps.note:this.note=""},deep:!0,immediate:!0}},methods:{confirmDeleteMaintenanceActivity(){window.confirm("Are you sure you want to delete this maintenance activity?")&&this.deleteMaintenanceActivity()},async deleteMaintenanceActivity(){Ie.Z.delete(`/machine-maintenance/update-or-delete-maintenance-activity/${this.selectedEvent.extendedProps.id}`).then((e=>{200!==e.status&&204!==e.status||(this.$emit("maintenance-activity-deleted",e.data.maintenance_plans),this.closeModal(),this.$notify({title:"Date Unmarked and Maintenance Activity Deleted",type:"bg-success-subtle text-success",duration:"5000"}))})).catch((e=>{console.error("Error deleting note:",e),this.$notify({title:"Error deleing Maintenance Activity",type:"bg-danger-subtle text-danger",duration:"5000"})}))},closeModal(){this.$emit("close-modal")},async saveChanges(){if(console.log("this is the note =",this.note),this.note.trim())if(console.log("first time maitnenace activity date markign creation api"),console.log("isnide save changes api starting..loggin selected events =",this.selectedEvent),"orange"===this.selectedEvent.extendedProps.color||"red"==this.selectedEvent.extendedProps.color){const e=this.selectedEvent.extendedProps.id,t=this.note;Ie.Z.post("/machine-maintenance/create-maintenance-activity",{id:e,note:t}).then((e=>{console.log("Response:",e.data),this.$emit("date-marked-maintenance-activity-created",e.data.maintenance_plans),this.closeModal(),this.$notify({title:"Maintenance Activity Created Successfully with the note",type:"bg-success-subtle text-success",duration:"5000"})})).catch((e=>{console.error("Error:",e),this.$notify({title:"Error creating note",type:"bg-danger-subtle text-danger",duration:"5000"})}))}else"green"===this.selectedEvent.color&&(console.log("put api called to update the activity note"),Ie.Z.put(`/machine-maintenance/update-or-delete-maintenance-activity/${this.selectedEvent.extendedProps.id}/`,{note:this.note}).then((e=>{200!==e.status&&204!==e.status||(this.$emit("maintenance-activity-note-updated",e.data.maintenance_plans),this.closeModal(),this.$notify({title:"Note Updated Successfully",type:"bg-success-subtle text-success",duration:"5000"}))})).catch((e=>{console.error("Error updating note:",e),this.$notify({title:"Error updating note",type:"bg-danger-subtle text-danger",duration:"5000"})})));else this.$notify({title:"Error: Note Field Cannot be empty, please provide a valid note.",type:"bg-danger-subtle text-danger",duration:"5000"})}}};const TM=(0,Ae.Z)(OM,[["render",NM],["__scopeId","data-v-f2d0ee24"]]);var AM=TM,jM={props:["lineId","machineId"],components:{FullCalendar:OS.Z,MaintenancePlanDetailsModal:nM,CreateMaintenancePlanModal:SM,EditableNoteModal:AM},data(){return{calendarOptions:{plugins:[TS.Z,AS.ZP],initialView:"dayGridMonth",events:[],eventClick:this.handleEventClick,dateClick:this.handleDateClick},lines:[],selectedLine:"",selectedMachine:"",selectedEvent:{},showPlanDetailsModal:!1,showCreateMaintenancePlanModal:!1,maintenance_plans:{},maintenance_activity_types:[],maintenancePlanInfo:{},showEditableModal:!1,filteredMachines:[]}},methods:{async getData(){await Ie.Z.get("machine-maintenance/get-machine-data/").then((e=>{console.log(e.data),this.lines=e.data.lines;const{lineId:t,machineId:a}=this.$route.query;console.log(t),console.log(a),t&&a&&(console.log("lines in if",this.lines),this.selectedLine=e.data.lines.find((e=>e.id==t)),this.selectLine(),console.log("Selected Line:",this.selectedLine),this.selectedLine&&(this.selectedMachine=this.selectedLine.machines.find((e=>e.id==a)),console.log("Selected Machine:",this.selectedMachine),this.selectedMachine&&this.selectMachine())),this.maintenance_activity_types=e.data.maintenance_activity_types})).catch((e=>{console.log("error fetching data",e)}))},fetchMaintenanceDates(e){console.log("id of the machine selected",e),Ie.Z.post("machine-maintenance/get-maintenance-plan/",{machine_id:e}).then((e=>{this.maintenance_plans=e.data.maintenance_plans,console.log("this is maintenance_plans ",this.maintenance_plans),this.populateCalendar()})).catch((e=>{console.error("Error fetching maintenance dates:",e)}))},populateCalendar(){console.log("Inside populate calendar");const e=new Date;console.log(e);const t=this.maintenance_plans.map((t=>{let a="",s="",i="",l="",o="",n="";if(t.maintenance_activity_type&&(a=t.maintenance_activity_type.code),t.maintenance_activities&&t.maintenance_activities.length>0)s="green",i=t.maintenance_activities.map((e=>e.note)).join("\n"),t.maintenance_activities[0].created_by&&t.maintenance_activities[0].created_at&&(l=t.maintenance_activities[0].created_by.email,o=t.maintenance_activities[0].created_by.first_name,n=t.maintenance_activities[0].created_at);else{const a=new Date(t.maintenance_date);a.setHours(0,0,0,0),e.setHours(0,0,0,0),console.log("inside else"),s=a<e?"red":"orange",t.created_by&&(l=t.created_by.email,o=t.created_by.first_name,n=t.created_at)}return{title:a,start:t.maintenance_date,color:s,extendedProps:{id:t.id,note:i,color:s,maintenance_plan_date:t.maintenance_date,created_by_userMail:l,created_by_name:o,created_at:n}}}));this.calendarOptions.events=t},handleEventClick(e){console.log("event clicked"),console.log("info:",e),console.log("info.event:",e.event),console.log(e.event.id);const t=e.event.start;console.log("clicked event start date",t);const a=t.toLocaleString("en-IN",{timeZone:"Asia/Kolkata"}),s=a.split(",")[0],[i,l,o]=s.split("/").map((e=>e.padStart(2,"0"))),n=`${o}-${l}-${i}`;console.log(n);const d=this.calendarOptions.events.filter((e=>{const t=e.start;return t===n}));console.log("events on same date",d);const c=d.find((t=>t.extendedProps.id===e.event.extendedProps.id));if(console.log("existingEvent",c),c)console.log("existing event for this date",c),"orange"===c.extendedProps.color||"red"===c.extendedProps.color?this.modifyEvent(c):"green"===c.color&&(this.selectedEvent=c,console.log("this is selected event passed as prop ",this.selectedEvent),this.togglePlanDetailsModal());else{const t={selectedMachine:this.selectedMachine,selectedDate:e.dateStr};this.maintenancePlanInfo=t,this.toggleCreateMaintenancePlanModal()}},handleDateClick(e){console.log("inside creating plan by manually marking dates");const t={selectedMachine:this.selectedMachine,selectedDate:e.dateStr};this.maintenancePlanInfo=t,this.toggleCreateMaintenancePlanModal()},modifyEvent(e){"orange"!==e.extendedProps.color&&"red"!==e.extendedProps.color||""!==e.extendedProps.note?"green"===e.extendedProps.color&&null!==e.extendedProps.note&&(this.selectedEvent=e,this.toggleEditableModal(e)):(this.selectedEvent=e,this.toggleEditableModal(e))},toggleEditableModal(e){const t="orange"!==e.extendedProps.color&&"red"!==e.extendedProps.color||e.extendedProps.note?"Edit Note":"Add Note";this.showEditableModal=!this.showEditableModal,this.modalTitle=t},createMaintenancePlan(e){console.log("Creating maintenance plan:",e)},closeCreateMaintenancePlanModal(){this.showCreateMaintenancePlanModal=!1},closePlanDetailsModal(){console.log("inside close modal parent"),this.showPlanDetailsModal=!1},closeEditableNoteModal(){this.showEditableModal=!1},populateCalendarNew(e){this.maintenance_plans=e,this.populateCalendar()},toggleCreateMaintenancePlanModal(){this.showCreateMaintenancePlanModal=!this.showCreateMaintenancePlanModal},togglePlanDetailsModal(){this.showPlanDetailsModal=!this.showPlanDetailsModal},selectLine(){console.log("inside select line"),console.log("Selected Line ID:=",this.selectedLine),this.selectedLine?(this.filteredMachines=this.selectedLine.machines,console.log(this.filteredMachines)):this.filteredMachines=[],this.selectedMachine=null},selectMachine(){console.log("inside select machine"),console.log("Selected machine:",this.selectedMachine),this.selectedMachine&&this.fetchMaintenanceDates(this.selectedMachine.id)}},mounted(){this.getData()}};const FM=(0,Ae.Z)(jM,[["render",NS],["__scopeId","data-v-39753d6a"]]);var qM=FM;const WM=e=>((0,i.dD)("data-v-6f1786f6"),e=e(),(0,i.Cn)(),e),VM={class:"container"},ZM={class:"row align-items-center"},zM={class:"col-md-6 mt-4"},GM={class:"d-flex align-items-center"},HM=WM((()=>(0,i._)("h2",{class:"mb-0"},"Create Maintenance Calendar",-1))),QM=WM((()=>(0,i._)("span",{class:"ms-3 fs-4 text-muted"},"|",-1))),YM={"aria-label":"breadcrumb",class:"d-inline-block ms-3"},KM={class:"breadcrumb bg-transparent m-0 p-0"},JM={class:"breadcrumb-item"},XM=WM((()=>(0,i._)("i",{class:"fas fa-calendar-alt me-2"},null,-1))),eP={class:"col-md-6 mt-4 text-end"},tP={class:"container mt-5"},aP={class:"mb-3"},sP=WM((()=>(0,i._)("label",{for:"year",class:"form-label"},"Select Year:",-1))),iP=(0,i.uE)('<option value="" disabled data-v-6f1786f6>Select Year</option><option value="2024" data-v-6f1786f6>2024</option><option value="2025" data-v-6f1786f6>2025</option><option value="2026" data-v-6f1786f6>2026</option><option value="2027" data-v-6f1786f6>2027</option><option value="2028" data-v-6f1786f6>2028</option><option value="2029" data-v-6f1786f6>2029</option><option value="2030" data-v-6f1786f6>2030</option><option value="2031" data-v-6f1786f6>2031</option><option value="2032" data-v-6f1786f6>2032</option><option value="2033" data-v-6f1786f6>2033</option>',11),lP=[iP],oP={class:"mb-3"},nP=WM((()=>(0,i._)("label",{for:"dates",class:"form-label"},"Select Dates:",-1))),dP={class:"d-flex align-items-center"},cP=WM((()=>(0,i._)("option",{value:"customizable","data-bs-toggle":"modal","data-bs-target":"#exampleModal"}," Customizable Date ",-1))),rP=WM((()=>(0,i._)("option",{value:"wholeMonth"},"Whole Month",-1))),mP=[cP,rP],uP=WM((()=>(0,i._)("i",{class:"fas fa-plus"},null,-1))),hP=[uP],pP={class:"accordion",id:"accordion"},bP=["id"],gP=["data-bs-target","aria-controls"],fP=["id","aria-labelledby"],_P={class:"accordion-body"},vP=WM((()=>(0,i._)("strong",null,"Selected Months:",-1))),yP=WM((()=>(0,i._)("strong",null,"Selected Weeks:",-1))),kP=WM((()=>(0,i._)("strong",null,"Selected Days:",-1))),wP={class:"mt-3"},CP=["onClick"],DP=WM((()=>(0,i._)("i",{class:"fas fa-edit"},null,-1))),SP=["onClick"],MP=WM((()=>(0,i._)("i",{class:"fas fa-trash-alt"},null,-1))),PP={class:"mb-3"},IP=WM((()=>(0,i._)("label",{for:"machine",class:"form-label"},"Machine:",-1))),xP=WM((()=>(0,i._)("br",null,null,-1))),RP=WM((()=>(0,i._)("button",{type:"button",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#machineModal"}," Select Machines ",-1))),$P=WM((()=>(0,i._)("br",null,null,-1))),LP={class:"tag-container"},BP={class:"modal fade",id:"machineModal",tabindex:"-1","aria-labelledby":"machineModalLabel","aria-hidden":"true"},UP={class:"modal-dialog modal-xl"},EP={class:"modal-content"},NP=WM((()=>(0,i._)("div",{class:"modal-header"},[(0,i._)("h1",{class:"modal-title fs-5",id:"machineModalLabel"}," Select Machines "),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),OP={class:"modal-body"},TP=WM((()=>(0,i._)("div",{class:"modal-footer"},[(0,i._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close "),(0,i._)("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal"}," Save changes ")],-1))),AP={class:"mb-3"},jP=WM((()=>(0,i._)("label",{for:"type",class:"form-label"},"Type:",-1))),FP=WM((()=>(0,i._)("option",{disabled:"",value:""},"Please select",-1))),qP=["value"],WP={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},VP={class:"modal-dialog modal-xl"},ZP={class:"modal-content"},zP={class:"modal-header"},GP={class:"modal-title fs-5",id:"exampleModalLabel"},HP=WM((()=>(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))),QP={class:"modal-body"},YP={class:"row mb-3"},KP={class:"col"},JP=WM((()=>(0,i._)("label",{for:"monthDropdown",class:"form-label"},"For Months:",-1))),XP=(0,i.uE)('<option value="January" data-v-6f1786f6>January</option><option value="February" data-v-6f1786f6>February</option><option value="March" data-v-6f1786f6>March</option><option value="April" data-v-6f1786f6>April</option><option value="May" data-v-6f1786f6>May</option><option value="June" data-v-6f1786f6>June</option><option value="July" data-v-6f1786f6>July</option><option value="August" data-v-6f1786f6>August</option><option value="September" data-v-6f1786f6>September</option><option value="October" data-v-6f1786f6>October</option><option value="November" data-v-6f1786f6>November</option><option value="December" data-v-6f1786f6>December</option>',12),eI=[XP],tI={class:"col"},aI=WM((()=>(0,i._)("label",{class:"form-label"},"Selected Month:",-1))),sI={class:"row mb-3"},iI={class:"col"},lI=WM((()=>(0,i._)("label",{for:"weekDropdown",class:"form-label"},"For Weeks:",-1))),oI=(0,i.uE)('<option value="Week 1" data-v-6f1786f6>Week 1</option><option value="Week 2" data-v-6f1786f6>Week 2</option><option value="Week 3" data-v-6f1786f6>Week 3</option><option value="Week 4" data-v-6f1786f6>Week 4</option><option value="Week 5" data-v-6f1786f6>Week 5</option>',5),nI=[oI],dI={class:"col"},cI=WM((()=>(0,i._)("label",{class:"form-label"},"Selected Weeks:",-1))),rI={class:"row mb-3"},mI={class:"col"},uI=WM((()=>(0,i._)("label",{for:"dayDropdown",class:"form-label"},"On Days:",-1))),hI=(0,i.uE)('<option value="Monday" data-v-6f1786f6>Monday</option><option value="Tuesday" data-v-6f1786f6>Tuesday</option><option value="Wednesday" data-v-6f1786f6>Wednesday</option><option value="Thursday" data-v-6f1786f6>Thursday</option><option value="Friday" data-v-6f1786f6>Friday</option><option value="Saturday" data-v-6f1786f6>Saturday</option><option value="Sunday" data-v-6f1786f6>Sunday</option>',7),pI=[hI],bI={class:"col"},gI=WM((()=>(0,i._)("label",{class:"form-label"},"Selected Days:",-1))),fI={class:"modal-footer"},_I=WM((()=>(0,i._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1)));function vI(e,t,a,l,o,n){const d=(0,i.up)("router-link"),c=(0,i.up)("MachineTableGrid");return(0,i.wg)(),(0,i.iD)("div",VM,[(0,i._)("div",ZM,[(0,i._)("div",zM,[(0,i._)("div",GM,[HM,QM,(0,i._)("nav",YM,[(0,i._)("ol",KM,[(0,i._)("li",JM,[(0,i.Wm)(d,{to:"/machine"},{default:(0,i.w5)((()=>[XM,(0,i.Uk)("Calendar ")])),_:1})])])])])]),(0,i._)("div",eP,[(0,i._)("button",{type:"submit",class:"btn btn-primary btn-sm",onClick:t[0]||(t[0]=(...e)=>n.createPlan&&n.createPlan(...e))}," Create Plan ")])]),(0,i._)("div",tP,[(0,i._)("section",aP,[sP,(0,i.wy)((0,i._)("select",{id:"year",class:"form-select","onUpdate:modelValue":t[1]||(t[1]=e=>o.selectedYears=e),multiple:""},lP,512),[[s.bM,o.selectedYears]])]),(0,i._)("section",oP,[nP,(0,i._)("div",dP,[(0,i.wy)((0,i._)("select",{id:"dates",class:"form-select me-2","onUpdate:modelValue":t[2]||(t[2]=e=>o.selectedDates=e),onChange:t[3]||(t[3]=(...e)=>n.openModal&&n.openModal(...e))},mP,544),[[s.bM,o.selectedDates]]),(0,i._)("button",{type:"button",class:"btn-sm btn-primary","data-bs-toggle":"modal","data-bs-target":"#exampleModal",onClick:t[4]||(t[4]=(...t)=>e.addDate&&e.addDate(...t))},hP)])]),(0,i._)("section",null,[(0,i._)("div",pP,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.DateChoices.choices,((e,t)=>((0,i.wg)(),(0,i.iD)("div",{key:t,class:"accordion-item"},[(0,i._)("h2",{class:"accordion-header",id:"headingChoice"+t},[(0,i._)("button",{class:"accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseChoice"+t,"aria-expanded":"true","aria-controls":"collapseChoice"+t}," Choice "+(0,Ze.zw)(t+1),9,gP)],8,bP),(0,i._)("div",{id:"collapseChoice"+t,class:"accordion-collapse collapse","aria-labelledby":"headingChoice"+t,"data-bs-parent":"#accordion"},[(0,i._)("div",_P,[(0,i._)("ul",null,[(0,i._)("li",null,[vP,(0,i.Uk)(" "+(0,Ze.zw)(e.selectedMonths.join(", ")),1)]),(0,i._)("li",null,[yP,(0,i.Uk)(" "+(0,Ze.zw)(e.selectedWeeks.join(", ")),1)]),(0,i._)("li",null,[kP,(0,i.Uk)(" "+(0,Ze.zw)(e.selectedDays.join(", ")),1)])]),(0,i._)("div",wP,[(0,i._)("button",{onClick:e=>n.editFormChoice(t),class:"btn btn-primary me-2"},[DP,(0,i.Uk)(" Edit ")],8,CP),(0,i._)("button",{onClick:e=>n.removeFormChoice(t),class:"btn btn-danger"},[MP,(0,i.Uk)(" Delete ")],8,SP)])])],8,fP)])))),128))])]),(0,i._)("section",PP,[IP,xP,RP,$P,(0,i._)("div",LP,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.selectedMachinesArray,((e,t)=>((0,i.wg)(),(0,i.iD)("div",{key:t,class:"tag badge bg-secondary"},[(0,i._)("span",null,(0,Ze.zw)(e.name)+" Of "+(0,Ze.zw)(e.line.name),1)])))),128))]),(0,i._)("div",BP,[(0,i._)("div",UP,[(0,i._)("div",EP,[NP,(0,i._)("div",OP,[(0,i.Wm)(c,{style:{"margin-top":"20px"},machines:o.machines,selectedMachinesArray:o.selectedMachinesArray,onRowClicked:e.handleRowClicked,onRowsDeselected:e.handleRowDeselected,onRowsSelected:n.handleRowsSelected},null,8,["machines","selectedMachinesArray","onRowClicked","onRowsDeselected","onRowsSelected"])]),TP])])])]),(0,i._)("section",AP,[jP,(0,i.wy)((0,i._)("select",{id:"type",class:"form-select","onUpdate:modelValue":t[5]||(t[5]=e=>o.selectedType=e)},[FP,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.maintenance_activity_types,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e.id,value:e.id},(0,Ze.zw)(e.name),9,qP)))),128))],512),[[s.bM,o.selectedType]])])]),(0,i._)("div",WP,[(0,i._)("div",VP,[(0,i._)("div",ZP,[(0,i._)("div",zP,[(0,i._)("h1",GP,(0,Ze.zw)(null!==o.editingIndex?"Update Choice":"Custom Dates"),1),HP]),(0,i._)("div",QP,[(0,i._)("div",YP,[(0,i._)("div",KP,[JP,(0,i.wy)((0,i._)("select",{id:"monthDropdown",class:"form-select",multiple:"","onUpdate:modelValue":t[6]||(t[6]=e=>o.formChoice.selectedMonths=e)},eI,512),[[s.bM,o.formChoice.selectedMonths]])]),(0,i._)("div",tI,[aI,(0,i._)("p",null,(0,Ze.zw)(o.formChoice.selectedMonths),1)])]),(0,i._)("div",sI,[(0,i._)("div",iI,[lI,(0,i.wy)((0,i._)("select",{id:"weekDropdown",class:"form-select",multiple:"","onUpdate:modelValue":t[7]||(t[7]=e=>o.formChoice.selectedWeeks=e)},nI,512),[[s.bM,o.formChoice.selectedWeeks]])]),(0,i._)("div",dI,[cI,(0,i._)("p",null,(0,Ze.zw)(o.formChoice.selectedWeeks),1)])]),(0,i._)("div",rI,[(0,i._)("div",mI,[uI,(0,i.wy)((0,i._)("select",{id:"dayDropdown",class:"form-select",multiple:"","onUpdate:modelValue":t[8]||(t[8]=e=>o.formChoice.selectedDays=e)},pI,512),[[s.bM,o.formChoice.selectedDays]])]),(0,i._)("div",bI,[gI,(0,i._)("p",null,(0,Ze.zw)(o.formChoice.selectedDays),1)])])]),(0,i._)("div",fI,[_I,(0,i._)("button",{type:"button",class:"btn btn-primary",onClick:t[9]||(t[9]=e=>null!==o.editingIndex?n.updateFormChoice():n.addFormChoice())},(0,Ze.zw)(null!==o.editingIndex?"Update Choice":"Add Choice"),1)])])])])])}function yI(e,t,a,s,l,o){const n=(0,i.up)("ag-grid-vue");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(n,{ref:"agGrid",style:{height:"500px"},class:"ag-theme-quartz",rowData:a.machines,defaultColDef:l.defaultColDef,columnDefs:l.colDefs,pagination:!0,rowSelection:"multiple",onRowClicked:o.onRowClicked,onSelectionChanged:o.onSelectionChanged,onGridReady:e.onGridReady,onFirstDataRendered:o.onFirstDataRendered,onAfterFilterChanged:e.onAfterFilterChanged,onHeaderCheckboxSelectionChanged:o.onHeaderCheckboxChanged},null,8,["rowData","defaultColDef","columnDefs","onRowClicked","onSelectionChanged","onGridReady","onFirstDataRendered","onAfterFilterChanged","onHeaderCheckboxSelectionChanged"])])}var kI={name:"App",components:{AgGridVue:Ba.n},props:{machines:{type:Array,required:!0},selectedMachinesArray:{type:Array,required:!0}},data(){return{colDefs:[{field:"id",hide:!0},{field:"name",headerCheckboxSelection:!0,checkboxSelection:!0,headerName:"Machine Name",width:375},{field:"line.name",headerName:"Lines",width:375}],defaultColDef:{filter:!0,sortable:!0,resizable:!0},selectedRows:[]}},methods:{onRowClicked(e){this.$emit("rowClicked",e.data)},onSelectionChanged(e){const t=e.api.getSelectedRows();this.$emit("rowsSelected",t),0===t.length&&this.$emit("rowsDeselected")},onFirstDataRendered(e){console.log("hey");const t=e.api;this.selectedMachinesArray.forEach((e=>{const a=t.getRowNode(e.id);a&&a.setSelected(!0)}))},onHeaderCheckboxChanged(e){const t=this.gridApi.getModel().rowsToDisplay,a=this.gridApi.getFilterInstance("line.name").getFilterModel().filter;t.forEach((t=>{const s=t.data;t.group||a&&s.line.name!==a||t.setSelected(e.target.checked)}))}}};const wI=(0,Ae.Z)(kI,[["render",yI]]);var CI=wI,DI={components:{MachineTableGrid:CI},data(){return{selectedDates:null,type:"",formChoice:{selectedMonths:[],selectedWeeks:[],selectedDays:[],selectedWeeksExcept:[],selectedDaysExcept:[]},editedChoice:{selectedMonths:[],selectedWeeks:[],selectedDays:[],selectedWeeksExcept:[],selectedDaysExcept:[]},DateChoices:{choices:[]},editingIndex:null,machines:[],lines:[],types:[],selectedMachine:null,selectedType:null,selectedYears:[],maintenance_activity_types:[],selectedMachinesArray:[]}},mounted(){this.getData()},computed:{filteredTypes(){return this.selectedMachine&&0!==this.types.length?this.types.filter((e=>e.id===this.selectedMachine)):[]}},methods:{handleRowsSelected(e){this.selectedMachinesArray=e,console.log("selected machines array",this.selectedMachinesArray)},removeTag(e){this.selectedMachinesArray.splice(e,1),console.log("selected machiens array",this.selectedMachinesArray)},openModal(){if("customizable"===this.selectedDates){const e=document.querySelector('[data-bs-target="#exampleModal"]');e&&e.click()}},editFormChoice(e){this.editingIndex=e,this.formChoice={...this.DateChoices.choices[e]},this.openModalGeneral()},addFormChoice(){console.log("Form Choice:",this.formChoice),this.DateChoices.choices.push({...this.formChoice}),this.formChoice={selectedMonths:[],selectedWeeks:[],selectedDays:[]},console.log(" whole list of form choice array",this.DateChoices)},openModalGeneral(){const e=document.querySelector('[data-bs-target="#exampleModal"]');e&&e.click()},closeModalGeneral(){const e=document.querySelector('[data-bs-dismiss="modal"]');e&&e.click()},updateFormChoice(){this.DateChoices.choices.splice(this.editingIndex,1,{...this.formChoice}),this.formChoice={selectedMonths:[],selectedWeeks:[],selectedDays:[]},this.editingIndex=null,this.closeModalGeneral()},removeFormChoice(e){this.DateChoices.choices.splice(e,1)},getData(){Ie.Z.get("machine-maintenance/get-machine-data/").then((e=>{console.log("this is resposne.data",e.data),this.machines=e.data.machines,this.lines=e.data.lines,this.maintenance_activity_types=e.data.maintenance_activity_types})).catch((e=>{console.log("error fetching data",e)}))},createPlan(){this.$store.commit("setIsLoading",!0),console.log("this is the selected mahcine",this.selectedMachinesArray);const e=this.selectedMachinesArray.map((e=>e.id)),t={selectedYears:this.selectedYears,selectedType:this.selectedType,dateChoices:this.DateChoices,selectedMachines:e};console.log("data being passed from front-end",t),Ie.Z.post("/machine-maintenance/create-maintenance-plan/",t).then((e=>{console.log(e.data.message),this.$notify({title:"Maintenance Plan Created",type:"bg-success-subtle text-success",duration:"5000"}),this.$router.push("/machine"),this.$store.commit("setIsLoading",!1)})).catch((e=>{console.error("Error:",e),this.$notify({title:"Error creating  Maintenance plan",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1)}))}}};const SI=(0,Ae.Z)(DI,[["render",vI],["__scopeId","data-v-6f1786f6"]]);var MI=SI;const PI=e=>((0,i.dD)("data-v-b9e03556"),e=e(),(0,i.Cn)(),e),II={key:0,class:"container text-center"},xI=PI((()=>(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1))),RI=PI((()=>(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1))),$I=[xI,RI],LI={key:1,class:"container"},BI={class:"row align-items-center"},UI=(0,i.uE)('<div class="col-md-6 mt-4" data-v-b9e03556><div class="d-flex align-items-center" data-v-b9e03556><h2 class="mb-0" data-v-b9e03556>Mark Maintenance Dates</h2><span class="ms-3 fs-4 text-muted" data-v-b9e03556>|</span><nav aria-label="breadcrumb" class="d-inline-block ms-3" data-v-b9e03556><ol class="breadcrumb bg-transparent m-0 p-0" data-v-b9e03556><li class="breadcrumb-item" data-v-b9e03556><a href="/" data-v-b9e03556><i class="fas fa-home me-2" data-v-b9e03556></i>Home</a></li></ol></nav></div></div>',1),EI={class:"col-md-6 d-flex justify-content-end mt-4"},NI=PI((()=>(0,i._)("option",{disabled:"",value:""},"Select Line",-1))),OI=["value"],TI=PI((()=>(0,i._)("option",{disabled:"",value:""},"Select Machine",-1))),AI=["value"],jI={class:"card card-outline card-primary mt-5"},FI=PI((()=>(0,i._)("div",{class:"card-header"},[(0,i._)("h3",{class:"card-title",style:{"font-weight":"bold","font-size":"1.2em"}}," Legend: "),(0,i._)("div",{class:"card-tools"})],-1))),qI={class:"card-body"},WI=(0,i.uE)('<div class="legends-container" data-v-b9e03556><div class="legend-item" data-v-b9e03556><div class="legend-color red" data-v-b9e03556></div><div class="legend-label" data-v-b9e03556>Maintenance Activity Due</div></div><div class="legend-item" data-v-b9e03556><div class="legend-color yellow" data-v-b9e03556></div><div class="legend-label" data-v-b9e03556>Maintenance Activity Scheduled</div></div><div class="legend-item" data-v-b9e03556><div class="legend-color green" data-v-b9e03556></div><div class="legend-label" data-v-b9e03556>Maintenance Activity Performed</div></div></div>',1),VI={style:{"margin-top":"50px"}};function ZI(e,t,a,l,o,n){const d=(0,i.up)("FullCalendar"),c=(0,i.up)("EditableNoteModal");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",II,$I)):((0,i.wg)(),(0,i.iD)("div",LI,[(0,i._)("div",BI,[UI,(0,i._)("div",EI,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>o.selectedLine=e),onChange:t[1]||(t[1]=(...e)=>n.selectLine&&n.selectLine(...e))},[NI,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.lines,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e.id,value:e},(0,Ze.zw)(e.name),9,OI)))),128))],544),[[s.bM,o.selectedLine]]),(0,i.wy)((0,i._)("select",{class:"ms-2","onUpdate:modelValue":t[2]||(t[2]=e=>o.selectedMachine=e),onChange:t[3]||(t[3]=(...e)=>n.selectMachine&&n.selectMachine(...e))},[TI,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.filteredMachines,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e.id,value:e},(0,Ze.zw)(e.name),9,AI)))),128))],544),[[s.bM,o.selectedMachine]])])]),(0,i._)("div",jI,[FI,(0,i._)("div",qI,[WI,(0,i._)("div",VI,[(0,i.Wm)(d,{options:o.calendarOptions},null,8,["options"])])])]),(0,i.Wm)(c,{show:o.showModal,selectedEvent:o.selectedEvent,clickedEvent:e.clickedEvent,onCloseModal:n.closeModal,modalTitle:e.modalTitle,onEventColorUpdated:n.handleEventColorUpdated,onDateMarkedMaintenanceActivityCreated:n.populateCalendarNew,onMaintenanceActivityNoteUpdated:n.populateCalendarNew,onMaintenanceActivityDeleted:n.populateCalendarNew},null,8,["show","selectedEvent","clickedEvent","onCloseModal","modalTitle","onEventColorUpdated","onDateMarkedMaintenanceActivityCreated","onMaintenanceActivityNoteUpdated","onMaintenanceActivityDeleted"])]))}var zI={components:{FullCalendar:OS.Z,EditableNoteModal:AM},data(){return{calendarOptions:{plugins:[TS.Z,AS.ZP],initialView:"dayGridMonth",events:[],eventClick:this.handleEventClick},maintenance_plans:{},lines:[],selectedLine:"",selectedMachine:"",selectedDate:null,selectedEvent:{},showModal:!1}},methods:{getData(){console.log("info of logged in user",this.$store.state.user),Ie.Z.get("machine-maintenance/get-machine-data/").then((e=>{console.log(e.data),this.lines=e.data.lines,this.maintenance_activity_types=e.data.maintenance_activity_types})).catch((e=>{console.log("error fetching data",e)}))},fetchMaintenanceDates(e){console.log("id of the machine selected",e),Ie.Z.post("machine-maintenance/get-maintenance-plan/",{machine_id:e}).then((e=>{this.maintenance_plans=e.data.maintenance_plans,console.log("this is maintenance_plans ",this.maintenance_plans),this.populateCalendar()})).catch((e=>{console.error("Error fetching maintenance dates:",e)}))},populateCalendar(){console.log("Inside populate calendar");const e=new Date,t=this.maintenance_plans.map((t=>{let a="",s="",i="",l="",o="",n="";if(t.maintenance_activity_type&&(a=t.maintenance_activity_type.code),t.maintenance_activities&&t.maintenance_activities.length>0)s="green",i=t.maintenance_activities.map((e=>e.note)).join("\n"),t.maintenance_activities[0].created_by&&t.maintenance_activities[0].created_at&&(l=t.maintenance_activities[0].created_by.email,o=t.maintenance_activities[0].created_by.first_name,n=t.maintenance_activities[0].created_at);else{const a=new Date(t.maintenance_date);a.setHours(0,0,0,0),e.setHours(0,0,0,0),console.log("inside else"),s=a<e?"red":"orange",t.created_by&&(l=t.created_by.email,o=t.created_by.first_name,n=t.created_at)}return{title:a,start:t.maintenance_date,color:s,extendedProps:{id:t.id,note:i,color:s,maintenance_plan_date:t.maintenance_date,created_by_userMail:l,created_by_name:o,created_at:n}}}));this.calendarOptions.events=t},handleEventClick(e){console.log("inside event click"),console.log("info:",e),console.log("info.dateStr:",e.dateStr),console.log(e.event.id);const t=e.event.start;console.log("clicked event start date",t);const a=t.toLocaleString("en-IN",{timeZone:"Asia/Kolkata"}),s=a.split(",")[0],[i,l,o]=s.split("/").map((e=>e.padStart(2,"0"))),n=`${o}-${l}-${i}`;console.log(n);const d=new Date(n),c=new Date;if(d.getDate()!==c.getDate()||d.getMonth()!==c.getMonth()||d.getFullYear()!==c.getFullYear())return void window.alert("You can only modify events for today.");const r=this.calendarOptions.events.filter((e=>{const t=e.start;return t===n}));console.log("events on same date",r);const m=r.find((t=>t.extendedProps.id===e.event.extendedProps.id));console.log("clickedEvent",m),m&&(console.log("this is clicked event=",m),"orange"===m.extendedProps.color?this.modifyEvent(m):"green"===m.extendedProps.color&&(this.$store.state.user.email===m.extendedProps.created_by_userMail?this.modifyEvent(m):window.alert("Only the creator of the maintenance activity can modify it.")))},modifyEvent(e){("orange"===e.extendedProps.color&&""===e.extendedProps.note||"green"===e.extendedProps.color&&null!==e.extendedProps.note)&&(this.selectedEvent=e,this.toggleModal(e))},toggleModal(e){const t="orange"!==e.extendedProps.color||e.extendedProps.note?"Edit Note":"Add Note";this.showModal=!this.showModal,this.modalTitle=t},closeModal(){console.log("inside close modal parent"),this.showModal=!1},populateCalendarNew(e){this.maintenance_plans=e,this.populateCalendar()},handleEventColorUpdated(e){console.log("inside event color update",e);const t=this.calendarOptions.events,a=t.find((t=>t.id===e.eventId));a?(console.log("print eventToUpdate",a),a.color=e.newColor,void 0!==e.createdNote&&(a.extendedProps.note=e.createdNote)):console.error("Event not found in events array")},MarkDate(){console.log("create maintenance activity called"),Ie.Z.post("/machine-maintenance/create-or-delete-maintenance-activity",this.selectedEvent).then((e=>{console.log("Response:",e.data)})).catch((e=>{console.error("Error:",e)}))},unmarkDate(e){console.log("delete maintenance activity called"),Ie.Z.delete("/machine-maintenance/create-or-delete-maintenance-activity",{data:this.selectedEvent}).then((t=>{console.log("Maintenance activity deleted:",t.data),e.color="orange",this.selectedEvent=null})).catch((e=>{console.error("Error deleting maintenance activity:",e)}))},selectLine(){this.selectedLine?this.filteredMachines=this.selectedLine.machines:this.filteredMachines=[],this.selectedMachine=null},selectMachine(){console.log("inside select machine"),console.log("Selected machine:",this.selectedMachine),this.selectedMachine&&this.fetchMaintenanceDates(this.selectedMachine.id)}},mounted(){this.getData()}};const GI=(0,Ae.Z)(zI,[["render",ZI],["__scopeId","data-v-b9e03556"]]);var HI=GI;const QI=e=>((0,i.dD)("data-v-1f6ce73e"),e=e(),(0,i.Cn)(),e),YI={key:0,class:"container text-center"},KI=QI((()=>(0,i._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1))),JI=QI((()=>(0,i._)("div",null,[(0,i._)("b",null," Loading... ")],-1))),XI=[KI,JI],ex={key:1,class:"container"},tx={class:"row align-items-center"},ax=(0,i.uE)('<div class="col-md-6 mt-4" data-v-1f6ce73e><div class="d-flex align-items-center" data-v-1f6ce73e><h2 class="mb-0" data-v-1f6ce73e>Maintenance Calendar</h2><span class="ms-3 fs-4 text-muted" data-v-1f6ce73e>|</span><nav aria-label="breadcrumb" class="d-inline-block ms-3" data-v-1f6ce73e><ol class="breadcrumb bg-transparent m-0 p-0" data-v-1f6ce73e><li class="breadcrumb-item" data-v-1f6ce73e><a href="/" data-v-1f6ce73e><i class="fas fa-home me-2" data-v-1f6ce73e></i>Home</a></li></ol></nav></div></div>',1),sx={class:"col-md-6 d-flex justify-content-end mt-4"},ix=QI((()=>(0,i._)("option",{disabled:"",value:""},"Select Line",-1))),lx=["value"],ox=QI((()=>(0,i._)("option",{disabled:"",value:""},"Select Machine",-1))),nx=["value"],dx={class:"card card-outline card-primary mt-5"},cx=QI((()=>(0,i._)("div",{class:"card-header"},[(0,i._)("h3",{class:"card-title",style:{"font-weight":"bold","font-size":"1.2em"}}," Legend: "),(0,i._)("div",{class:"card-tools"})],-1))),rx={class:"card-body"},mx=(0,i.uE)('<div class="legends-container" data-v-1f6ce73e><div class="legend-item" data-v-1f6ce73e><div class="legend-color red" data-v-1f6ce73e></div><div class="legend-label" data-v-1f6ce73e>Maintenance Activity Due</div></div><div class="legend-item" data-v-1f6ce73e><div class="legend-color yellow" data-v-1f6ce73e></div><div class="legend-label" data-v-1f6ce73e>Maintenance Activity Scheduled</div></div><div class="legend-item" data-v-1f6ce73e><div class="legend-color green" data-v-1f6ce73e></div><div class="legend-label" data-v-1f6ce73e>Maintenance Activity Performed</div></div></div>',1),ux={style:{"margin-top":"50px"}};function hx(e,t,a,l,o,n){const d=(0,i.up)("router-link"),c=(0,i.up)("FullCalendar"),r=(0,i.up)("MaintenancePlanDetailsModal"),m=(0,i.up)("CreateMaintenancePlanModal"),u=(0,i.up)("EditableNoteModal");return e.$store.state.isLoading?((0,i.wg)(),(0,i.iD)("div",YI,XI)):((0,i.wg)(),(0,i.iD)("div",ex,[(0,i._)("div",tx,[ax,(0,i._)("div",sx,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>o.selectedLine=e),onChange:t[1]||(t[1]=(...e)=>n.selectLine&&n.selectLine(...e))},[ix,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.lines,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e.id,value:e},(0,Ze.zw)(e.name),9,lx)))),128))],544),[[s.bM,o.selectedLine]]),(0,i.wy)((0,i._)("select",{class:"ms-2","onUpdate:modelValue":t[2]||(t[2]=e=>o.selectedMachine=e),onChange:t[3]||(t[3]=(...e)=>n.selectMachine&&n.selectMachine(...e))},[ox,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.filteredMachines,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e.id,value:e},(0,Ze.zw)(e.name),9,nx)))),128))],544),[[s.bM,o.selectedMachine]]),o.selectedLine&&o.selectedMachine?((0,i.wg)(),(0,i.j4)(d,{key:0,to:{name:"CalendarMonthlyView",query:{lineId:o.selectedLine.id,machineId:o.selectedMachine.id}},class:"btn btn-primary btn-sm ms-2"},{default:(0,i.w5)((()=>[(0,i.Uk)(" See Monthly View ")])),_:1},8,["to"])):(0,i.kq)("",!0)])]),(0,i._)("div",dx,[cx,(0,i._)("div",rx,[mx,(0,i._)("div",ux,[(0,i.Wm)(c,{options:o.calendarOptions},null,8,["options"])])])]),(0,i.Wm)(r,{show:o.showPlanDetailsModal,selectedEvent:o.selectedEvent,clickedEvent:e.clickedEvent,onCloseModal:n.closePlanDetailsModal,onMaintenancePlanDeleted:n.populateCalendarNew,onMaintenanceActivityDeleted:n.populateCalendarNew},null,8,["show","selectedEvent","clickedEvent","onCloseModal","onMaintenancePlanDeleted","onMaintenanceActivityDeleted"]),(0,i.Wm)(m,{show:o.showCreateMaintenancePlanModal,maintenanceActivityTypes:o.maintenance_activity_types,onCloseModal:n.closeCreateMaintenancePlanModal,"maintenance-plan-info":o.maintenancePlanInfo,onMaintenancePlanCreatedByClicking:n.populateCalendarNew},null,8,["show","maintenanceActivityTypes","onCloseModal","maintenance-plan-info","onMaintenancePlanCreatedByClicking"]),(0,i.Wm)(u,{show:o.showEditableModal,selectedEvent:o.selectedEvent,clickedEvent:e.clickedEvent,onCloseModal:n.closeEditableNoteModal,modalTitle:e.modalTitle,onEventColorUpdated:e.handleEventColorUpdated,onDateMarkedMaintenanceActivityCreated:n.populateCalendarNew,onMaintenanceActivityNoteUpdated:n.populateCalendarNew,onMaintenanceActivityDeleted:n.populateCalendarNew},null,8,["show","selectedEvent","clickedEvent","onCloseModal","modalTitle","onEventColorUpdated","onDateMarkedMaintenanceActivityCreated","onMaintenanceActivityNoteUpdated","onMaintenanceActivityDeleted"])]))}var px=a(7871),bx={components:{FullCalendar:OS.Z,MaintenancePlanDetailsModal:nM,CreateMaintenancePlanModal:SM,EditableNoteModal:AM},data(){return{calendarOptions:{plugins:[px.Z],initialView:"multiMonthYear",events:[]},lines:[],selectedLine:"",selectedMachine:"",selectedEvent:{},showPlanDetailsModal:!1,showCreateMaintenancePlanModal:!1,maintenance_plans:{},maintenance_activity_types:[],maintenancePlanInfo:{},showEditableModal:!1,filteredMachines:[]}},methods:{getData(){Ie.Z.get("machine-maintenance/get-machine-data/").then((e=>{console.log(e.data),this.lines=e.data.lines,this.maintenance_activity_types=e.data.maintenance_activity_types})).catch((e=>{console.log("error fetching data",e)}))},fetchMaintenanceDates(e){console.log("id of the machine selected",e),Ie.Z.post("machine-maintenance/get-maintenance-plan/",{machine_id:e}).then((e=>{this.maintenance_plans=e.data.maintenance_plans,console.log("this is maintenance_plans ",this.maintenance_plans),this.populateCalendar()})).catch((e=>{console.error("Error fetching maintenance dates:",e)}))},populateCalendar(){console.log("Inside populate calendar");const e=new Date;console.log(e);const t=this.maintenance_plans.map((t=>{let a="",s="",i="",l="",o="",n="";if(t.maintenance_activity_type&&(a=t.maintenance_activity_type.code),t.maintenance_activities&&t.maintenance_activities.length>0)s="green",i=t.maintenance_activities.map((e=>e.note)).join("\n"),t.maintenance_activities[0].created_by&&t.maintenance_activities[0].created_at&&(l=t.maintenance_activities[0].created_by.email,o=t.maintenance_activities[0].created_by.first_name,n=t.maintenance_activities[0].created_at);else{const a=new Date(t.maintenance_date);a.setHours(0,0,0,0),e.setHours(0,0,0,0),console.log("inside else"),s=a<e?"red":"orange",t.created_by&&(l=t.created_by.email,o=t.created_by.first_name,n=t.created_at)}return{title:a,start:t.maintenance_date,color:s,extendedProps:{id:t.id,note:i,color:s,maintenance_plan_date:t.maintenance_date,created_by_userMail:l,created_by_name:o,created_at:n}}}));this.calendarOptions.events=t},handleEventClick(e){console.log("event clicked"),console.log("info:",e),console.log("info.event:",e.event),console.log(e.event.id);const t=e.event.start;console.log("clicked event start date",t);const a=t.toLocaleString("en-IN",{timeZone:"Asia/Kolkata"}),s=a.split(",")[0],[i,l,o]=s.split("/").map((e=>e.padStart(2,"0"))),n=`${o}-${l}-${i}`;console.log(n);const d=this.calendarOptions.events.filter((e=>{const t=e.start;return t===n}));console.log("events on same date",d);const c=d.find((t=>t.extendedProps.id===e.event.extendedProps.id));if(console.log("existingEvent",c),c)console.log("existing event for this date",c),"orange"===c.extendedProps.color||"red"===c.extendedProps.color?this.modifyEvent(c):"green"===c.color&&(this.selectedEvent=c,console.log("this is selected event passed as prop ",this.selectedEvent),this.togglePlanDetailsModal());else{const t={selectedMachine:this.selectedMachine,selectedDate:e.dateStr};this.maintenancePlanInfo=t,this.toggleCreateMaintenancePlanModal()}},handleDateClick(e){console.log("inside creating plan by manually marking dates");const t={selectedMachine:this.selectedMachine,selectedDate:e.dateStr};this.maintenancePlanInfo=t,this.toggleCreateMaintenancePlanModal()},modifyEvent(e){"orange"!==e.extendedProps.color&&"red"!==e.extendedProps.color||""!==e.extendedProps.note?"green"===e.extendedProps.color&&null!==e.extendedProps.note&&(this.selectedEvent=e,this.toggleEditableModal(e)):(this.selectedEvent=e,this.toggleEditableModal(e))},toggleEditableModal(e){const t="orange"!==e.extendedProps.color&&"red"!==e.extendedProps.color||e.extendedProps.note?"Edit Note":"Add Note";this.showEditableModal=!this.showEditableModal,this.modalTitle=t},createMaintenancePlan(e){console.log("Creating maintenance plan:",e)},closeCreateMaintenancePlanModal(){this.showCreateMaintenancePlanModal=!1},closePlanDetailsModal(){console.log("inside close modal parent"),this.showPlanDetailsModal=!1},closeEditableNoteModal(){this.showEditableModal=!1},populateCalendarNew(e){this.maintenance_plans=e,this.populateCalendar()},toggleCreateMaintenancePlanModal(){this.showCreateMaintenancePlanModal=!this.showCreateMaintenancePlanModal},togglePlanDetailsModal(){this.showPlanDetailsModal=!this.showPlanDetailsModal},selectLine(){console.log("inside select line"),console.log("Selected Line ID:=",this.selectedLine),this.selectedLine?(this.filteredMachines=this.selectedLine.machines,console.log(this.filteredMachines)):this.filteredMachines=[],this.selectedMachine=null},selectMachine(){console.log("inside select machine"),console.log("Selected machine:",this.selectedMachine),this.selectedMachine&&this.fetchMaintenanceDates(this.selectedMachine.id)}},mounted(){this.getData()}};const gx=(0,Ae.Z)(bx,[["render",hx],["__scopeId","data-v-1f6ce73e"]]);var fx=gx;const _x=[{path:"/",name:"Home",component:Du},{path:"/login",name:"LoginForm",component:it},{path:"/bom",name:"BomLanding",component:Aa},{path:"/bom/upload",name:"UploadBom",component:ga},{path:"/CheckList",name:"CheckListOrderBased",component:Uw,props:!0},{path:"/reports",name:"ReportsList",component:Zr},{path:"/dashboard",name:"CheckListsDashboard",component:Du},{path:"/checklist-report",name:"ChecklistReport",component:ch},{path:"/bom/edit/:id",name:"BomLineLevel",component:$s,props:!0},{path:"/begin-checklist/:id",name:"begin-checklist",component:wn,props:!0},{path:"/generated-checklists/:id",name:"generated-checklist",component:zn,props:!0},{path:"/checklist-details/:id",name:"checklist-details",component:Or,props:!0},{path:"/users",name:"users",component:Th},{path:"/users/edit-user/:id",name:"EditUser",component:Dg},{path:"/users/create-user",name:"CreateUser",component:Tf},{path:"/bom-line-item/edit/:id",name:"BomLineItemEdit",component:pb,props:e=>({bom_id:e.params.id})},{path:"/orders",name:"OrdersLanding",component:e_},{path:"/orders/create",name:"OrderCreation",component:_v},{path:"/projects",name:"ProjectsLanding",component:qv},{path:"/projects/create-project",name:"CreateProject",component:pk},{path:"/project-edit/:id",name:"ProjectEdit",component:qy,props:!0},{path:"/product/edit/:id",name:"ProductEdit",component:ow,props:!0},{path:"/new",name:"CheckList",component:li,props:!0},{path:"/iqc",name:"IqcLanding",component:Xw,props:!0},{path:"/iqc-for-checklist/:id",name:"IqcForChecklist",component:CD,props:!0},{path:"/project-pricing",name:"ProjectPricing",component:fS},{path:"/machine/create-maintenance-calendar",name:"CreateMaintenanceCalendar",component:MI},{path:"/machine/mark-maintenance-plan",name:"MarkMaintenancePlan",component:HI},{path:"/machine/calendar-yearly-view",name:"CalendarYearlyView",component:fx},{path:"/calendar-monthly-view",name:"CalendarMonthlyView",component:qM,props:e=>({lineId:e.query.lineId,machineId:e.query.machineId})}],vx=(0,dt.p7)({history:(0,dt.PO)("/"),routes:_x});var yx=vx,kx=a(65);const wx=(0,kx.MT)({state:{user:{token:"",isAuthenticated:!1,username:"",password:"",first_name:"",last_name:"",email:"",is_staff:!1,is_superuser:!1,is_store_team:!1,is_design_team:!1},isLoading:!1},mutations:{initializeStore(e){if(localStorage.getItem("token")){e.user.token=localStorage.getItem("token"),Ie.Z.defaults.headers.common["Authorization"]="Token "+e.user.token,e.user.isAuthenticated=!0;const t=localStorage.getItem("userDetails");if(t){const a=JSON.parse(t);e.user.first_name=a.first_name,e.user.last_name=a.last_name,e.user.email=a.email,e.user.is_staff=a.is_staff,e.user.is_superuser=a.is_superuser,e.user.is_store_team=a.is_store_team,e.user.is_design_team=a.is_design_team}}else e.user.token="",e.user.isAuthenticated=!1;e.isLoading=!1},setToken(e,t){e.user.token=t,Ie.Z.defaults.headers.common["Authorization"]="Token "+e.user.token,e.user.isAuthenticated=!0},setUserDetails(e,t){e.user.first_name=t.first_name,e.user.last_name=t.last_name,e.user.email=t.email,e.user.is_staff=t.is_staff,e.user.is_superuser=t.is_superuser,e.user.is_store_team=t.is_store_team,e.user.is_design_team=t.is_design_team},setIsLoading(e,t){e.isLoading=t},removeToken(e){e.user.token="",e.user.first_name="",e.user.last_name="",e.user.email="",e.user.is_staff=!1,e.user.is_superuser=!1,e.user.is_store_team=!1,e.user.is_design_team=!1,e.user.isAuthenticated=!1,localStorage.removeItem("token"),localStorage.removeItem("userDetails"),Ie.Z.defaults.headers.common["Authorization"]=""},setAuthentication(e,t){e.user.isAuthenticated=t}},actions:{},modules:{}});wx.commit("initializeStore");var Cx=wx,Dx=a(1037);a(8830),a(5572);const Sx=e=>{const t=e.replace(/,/g,""),a=parseFloat(t);return a},Mx=e=>{const t=parseFloat(e);return isNaN(t)?e:t.toLocaleString("en-IN")};Ie.Z.defaults.baseURL="https://sfcsdev.xtractautomation.com/api/v1/";const Px=(0,s.ri)(nt);Px.config.globalProperties.$parsePriceToFloat=Sx,Px.config.globalProperties.$parsePriceToString=Mx,Px.use(Cx).use(yx).use(Dx.ZP),Px.mount("#app")}},t={};function a(s){var i=t[s];if(void 0!==i)return i.exports;var l=t[s]={exports:{}};return e[s].call(l.exports,l,l.exports,a),l.exports}a.m=e,function(){var e=[];a.O=function(t,s,i,l){if(!s){var o=1/0;for(r=0;r<e.length;r++){s=e[r][0],i=e[r][1],l=e[r][2];for(var n=!0,d=0;d<s.length;d++)(!1&l||o>=l)&&Object.keys(a.O).every((function(e){return a.O[e](s[d])}))?s.splice(d--,1):(n=!1,l<o&&(o=l));if(n){e.splice(r--,1);var c=i();void 0!==c&&(t=c)}}return t}l=l||0;for(var r=e.length;r>0&&e[r-1][2]>l;r--)e[r]=e[r-1];e[r]=[s,i,l]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,s){var i,l,o=s[0],n=s[1],d=s[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in n)a.o(n,i)&&(a.m[i]=n[i]);if(d)var r=d(a)}for(t&&t(s);c<o.length;c++)l=o[c],a.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return a.O(r)},s=self["webpackChunksfcs_checklist"]=self["webpackChunksfcs_checklist"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(3271)}));s=a.O(s)})();
//# sourceMappingURL=app.e3a646c0.js.map