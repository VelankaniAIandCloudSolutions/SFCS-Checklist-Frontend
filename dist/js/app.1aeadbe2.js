(function(){"use strict";var e={7960:function(e,t,s){var a=s(9242),l=s(3396);const i={key:0,id:"app"},o={key:1};function c(e,t,s,a,c,r){const d=(0,l.up)("LoginForm"),n=(0,l.up)("AdminLte"),u=(0,l.up)("notifications");return(0,l.wg)(),(0,l.iD)("div",null,[e.$store.state.user.isAuthenticated?((0,l.wg)(),(0,l.iD)("div",o,[(0,l.Wm)(n)])):((0,l.wg)(),(0,l.iD)("div",i,[(0,l.Wm)(d)])),(0,l.Wm)(u,{position:"bottom right",classes:"alert"})])}const r=e=>((0,l.dD)("data-v-00a0808a"),e=e(),(0,l.Cn)(),e),d={class:"wrapper"},n={class:"main-header navbar navbar-expand navbar-white navbar-light"},u={class:"navbar-nav"},m=r((()=>(0,l._)("li",{class:"nav-item"},[(0,l._)("a",{class:"nav-link","data-widget":"pushmenu",href:"#",role:"button"},[(0,l._)("i",{class:"fas fa-bars"})])],-1))),h={class:"nav-item"},p=r((()=>(0,l._)("i",{class:"fas fa-home"},null,-1))),b={class:"navbar-nav ml-auto"},f={class:"nav-item"},_=r((()=>(0,l._)("i",{class:"fas fa-sign-out-alt"},null,-1))),g=[_],y={class:"main-sidebar sidebar-dark-primary elevation-4"},v=r((()=>(0,l._)("a",{href:"/",class:"brand-link"},[(0,l._)("img",{src:"https://content.jdmagicbox.com/comp/bangalore/73/080ppe03673/catalogue/velankani-software-pvt-ltd-electronic-city-bangalore-computer-software-developers-2rgz2h5-250.jpg",alt:"AdminLTE Logo",class:"brand-image img-circle elevation-3",style:{opacity:"0.8"}}),(0,l._)("span",{class:"brand-text font-weight-light"},"Velankani SFCS")],-1))),k={class:"sidebar"},w={class:"mt-2"},C={class:"nav nav-pills nav-sidebar flex-column","data-widget":"treeview",role:"menu","data-accordion":"false"},S={key:0,class:"nav-item text-left"},D=r((()=>(0,l._)("a",{href:"#",class:"nav-link"},[(0,l._)("i",{class:"nav-icon fas fa-users"}),(0,l._)("p",null,[(0,l.Uk)(" Accounts "),(0,l._)("i",{class:"right fas fa-angle-left"})])],-1))),I={class:"nav nav-treeview"},P={class:"nav-item"},R=r((()=>(0,l._)("i",{class:"fas fa-user-plus nav-icon"},null,-1))),x=r((()=>(0,l._)("p",null,"Users",-1))),L={key:1,class:"nav-item text-left"},$=r((()=>(0,l._)("a",{href:"#",class:"nav-link"},[(0,l._)("i",{class:"nav-icon fas fa-store"}),(0,l._)("p",null,[(0,l.Uk)(" Store "),(0,l._)("i",{class:"right fas fa-angle-left"})])],-1))),B={class:"nav nav-treeview"},U={class:"nav-item"},O=r((()=>(0,l._)("i",{class:"fas fa-chart-line nav-icon"},null,-1))),N=r((()=>(0,l._)("p",null,"Dashboard",-1))),j={class:"nav-item"},M=r((()=>(0,l._)("i",{class:"fas fa-list-ul nav-icon"},null,-1))),E=r((()=>(0,l._)("p",null,"Checklist",-1))),T={class:"nav-item"},q=r((()=>(0,l._)("i",{class:"fas fa-chart-bar nav-icon"},null,-1))),A=r((()=>(0,l._)("p",null,"Reports",-1))),F={key:2,class:"nav-item text-left"},W=r((()=>(0,l._)("a",{href:"#",class:"nav-link"},[(0,l._)("i",{class:"nav-icon fas fa-shopping-cart"}),(0,l._)("p",null,[(0,l.Uk)(" Orders "),(0,l._)("i",{class:"right fas fa-angle-left"})])],-1))),V={class:"nav nav-treeview"},Z={class:"nav-item"},z=r((()=>(0,l._)("i",{class:"fas fa-receipt nav-icon"},null,-1))),G=r((()=>(0,l._)("p",null,"Orders",-1))),Q={key:3,class:"nav-item text-left"},H=r((()=>(0,l._)("a",{href:"#",class:"nav-link"},[(0,l._)("i",{class:"nav-icon fas fa-industry"}),(0,l._)("p",null,[(0,l.Uk)(" Material Management "),(0,l._)("i",{class:"right fas fa-angle-left"})])],-1))),Y={class:"nav nav-treeview"},K={class:"nav-item"},J=r((()=>(0,l._)("i",{class:"fas fa-clipboard-list nav-icon"},null,-1))),X=r((()=>(0,l._)("p",null,"Bill Of Materials",-1))),ee={class:"nav-item"},te=r((()=>(0,l._)("i",{class:"fas fa-project-diagram nav-icon"},null,-1))),se=r((()=>(0,l._)("p",null,"Projects",-1))),ae={key:4,class:"nav-item text-left"},le=r((()=>(0,l._)("a",{href:"#",class:"nav-link"},[(0,l._)("i",{class:"nav-icon fas fa-shopping-cart"}),(0,l._)("p",null,[(0,l.Uk)(" IQC "),(0,l._)("i",{class:"right fas fa-angle-left"})])],-1))),ie={class:"nav nav-treeview"},oe={class:"nav-item"},ce=r((()=>(0,l._)("i",{class:"fas fa-receipt nav-icon"},null,-1))),re=r((()=>(0,l._)("p",null,"IQC Checklist",-1))),de={class:"content-wrapper"};function ne(e,t,s,a,i,o){const c=(0,l.up)("router-link"),r=(0,l.up)("router-view");return(0,l.wg)(),(0,l.iD)("div",d,[(0,l._)("nav",n,[(0,l._)("ul",u,[m,(0,l._)("li",h,[(0,l.Wm)(c,{to:"/",class:"nav-link"},{default:(0,l.w5)((()=>[p])),_:1})])]),(0,l._)("ul",b,[(0,l._)("li",f,[(0,l._)("a",{href:"#",class:"nav-link",onClick:t[0]||(t[0]=(...e)=>o.logout&&o.logout(...e))},g)])])]),(0,l._)("aside",y,[v,(0,l._)("div",k,[(0,l._)("nav",w,[(0,l._)("ul",C,[e.$store.state.user.is_superuser?((0,l.wg)(),(0,l.iD)("li",S,[D,(0,l._)("ul",I,[(0,l._)("li",P,[(0,l.Wm)(c,{to:"/users",class:"nav-link"},{default:(0,l.w5)((()=>[R,x])),_:1})])])])):(0,l.kq)("",!0),e.$store.state.user.is_superuser||e.$store.state.user.is_store_team?((0,l.wg)(),(0,l.iD)("li",L,[$,(0,l._)("ul",B,[(0,l._)("li",U,[(0,l.Wm)(c,{to:"/dashboard",class:"nav-link"},{default:(0,l.w5)((()=>[O,N])),_:1})]),(0,l._)("li",j,[(0,l.Wm)(c,{to:"/checklist",class:"nav-link"},{default:(0,l.w5)((()=>[M,E])),_:1})]),(0,l._)("li",T,[(0,l.Wm)(c,{to:"/reports",class:"nav-link"},{default:(0,l.w5)((()=>[q,A])),_:1})])])])):(0,l.kq)("",!0),e.$store.state.user.is_superuser||e.$store.state.user.is_design_team?((0,l.wg)(),(0,l.iD)("li",F,[W,(0,l._)("ul",V,[(0,l._)("li",Z,[(0,l.Wm)(c,{to:"/orders",class:"nav-link"},{default:(0,l.w5)((()=>[z,G])),_:1})])])])):(0,l.kq)("",!0),e.$store.state.user.is_superuser||e.$store.state.user.is_design_team?((0,l.wg)(),(0,l.iD)("li",Q,[H,(0,l._)("ul",Y,[(0,l._)("li",K,[(0,l.Wm)(c,{to:"/bom",class:"nav-link"},{default:(0,l.w5)((()=>[J,X])),_:1})]),(0,l._)("li",ee,[(0,l.Wm)(c,{to:"/projects",class:"nav-link"},{default:(0,l.w5)((()=>[te,se])),_:1})])])])):(0,l.kq)("",!0),e.$store.state.user.is_superuser||e.$store.state.user.is_design_team?((0,l.wg)(),(0,l.iD)("li",ae,[le,(0,l._)("ul",ie,[(0,l._)("li",oe,[(0,l.Wm)(c,{to:"/iqc",class:"nav-link"},{default:(0,l.w5)((()=>[ce,re])),_:1})])])])):(0,l.kq)("",!0)])])])]),(0,l._)("div",de,[(0,l.Wm)(r)])])}var ue=s(1076),me={methods:{async logout(){await ue.Z.post("token/logout/").then((e=>{console.log("Logged out",e.data),this.$store.commit("removeToken"),window.location.href="/login"})).catch((e=>{console.log(e)}))}}},he=s(89);const pe=(0,he.Z)(me,[["render",ne],["__scopeId","data-v-00a0808a"]]);var be=pe,fe=s(7139);const _e=e=>((0,l.dD)("data-v-60d7e883"),e=e(),(0,l.Cn)(),e),ge={class:"container"},ye={class:"login"},ve=_e((()=>(0,l._)("h1",null,"Velankani SFCS",-1))),ke={class:"input-box"},we=_e((()=>(0,l._)("i",{class:"fa fa-envelope"},null,-1))),Ce={class:"input-box"},Se=["type"],De=_e((()=>(0,l._)("button",{type:"submit"},"Login",-1)));function Ie(e,t,s,i,o,c){return(0,l.wg)(),(0,l.iD)("div",ge,[(0,l._)("div",ye,[ve,(0,l._)("form",{onSubmit:t[3]||(t[3]=(0,a.iM)(((...e)=>c.handleSubmit&&c.handleSubmit(...e)),["prevent"]))},[(0,l._)("div",ke,[(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>o.email=e),type:"email",placeholder:"Email"},null,512),[[a.nr,o.email]]),we]),(0,l._)("div",Ce,[(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>o.password=e),type:o.showPassword?"text":"password",placeholder:"Password"},null,8,Se),[[a.YZ,o.password]]),(0,l._)("i",{onClick:t[2]||(t[2]=(...e)=>c.togglePasswordVisibility&&c.togglePasswordVisibility(...e)),class:(0,fe.C_)(o.showPassword?"fa fa-eye-slash":"fa fa-eye")},null,2)]),De],32)])])}s(560);var Pe={data(){return{email:"",password:"",errors:[],showPassword:!1}},methods:{togglePasswordVisibility(){this.showPassword=!this.showPassword},async handleSubmit(){if(this.$store.commit("setIsLoading",!0),this.errors=[],""===this.email&&this.errors.push("The email is missing!"),""===this.password&&this.errors.push("The password is missing!"),this.errors.length)this.$store.commit("setIsLoading",!1);else{const e={email:this.email,password:this.password};await ue.Z.post("token/login/",e).then((e=>{this.$notify({title:"Login successful",type:"bg-success-subtle text-success",duration:5e3}),setTimeout((async()=>{const t=e.data.auth_token;this.$store.commit("setToken",t),ue.Z.defaults.headers.common["Authorization"]="Token "+t,localStorage.setItem("token",t),console.log("Received Token:",t);const s=await ue.Z.get("accounts/user/authenticated/"),a=s.data;console.log("User Details:",a),localStorage.setItem("userDetails",JSON.stringify(a)),this.$store.commit("setUserDetails",a),window.location.href="/dashboard"}),1e3)})).catch((e=>{this.$notify({title:"Login failed. Please check your credentials.",type:"alert-danger",duration:5e3}),console.error("Login failed:",e.response.data),this.errors.push("Login failed. Please check your credentials.")})).finally((()=>{this.$store.commit("setIsLoading",!1)}))}}}};const Re=(0,he.Z)(Pe,[["render",Ie],["__scopeId","data-v-60d7e883"]]);var xe=Re,Le={name:"App",components:{LoginForm:xe,AdminLte:be},data(){return{isLoggedIn:!1}},computed:{activeRoute(){return this.$route.path}},methods:{}};const $e=(0,he.Z)(Le,[["render",c]]);var Be=$e,Ue=(s(8052),s(2483));const Oe=e=>((0,l.dD)("data-v-1a910259"),e=e(),(0,l.Cn)(),e),Ne={key:0,class:"container text-center"},je=Oe((()=>(0,l._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,l._)("span",{class:"visually-hidden"},"Loading...")],-1))),Me=Oe((()=>(0,l._)("div",null,[(0,l._)("b",null," Loading... ")],-1))),Ee=[je,Me],Te={key:1,class:"container"},qe={class:"row align-items-center"},Ae={class:"d-flex align-items-center mt-4"},Fe=Oe((()=>(0,l._)("h2",{class:"mb-0"},"Upload Bill Of Materials",-1))),We=Oe((()=>(0,l._)("span",{class:"ms-3 fs-4 text-muted"},"|",-1))),Ve={"aria-label":"breadcrumb",class:"d-inline-block ms-3"},Ze={class:"breadcrumb bg-transparent m-0 p-0"},ze=Oe((()=>(0,l._)("li",{class:"breadcrumb-item"},[(0,l._)("a",{href:"/"},[(0,l._)("i",{class:"fas fa-home me-1"}),(0,l.Uk)("Home")])],-1))),Ge={class:"breadcrumb-item"},Qe=Oe((()=>(0,l._)("i",{class:"fas fa-clipboard-list me-1"},null,-1))),He=Oe((()=>(0,l._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,l._)("i",{class:"fas fa-upload me-1"}),(0,l.Uk)(" Upload the bom ")],-1))),Ye={class:"card p-3 mb-4 mt-4"},Ke={class:"row mb-3"},Je={class:"col-md-6"},Xe=Oe((()=>(0,l._)("label",{for:"projectDropdown",class:"form-label"},"Select Project",-1))),et=["value"],tt={class:"col-md-6"},st=Oe((()=>(0,l._)("label",{for:"productCode",class:"form-label"},"Product ",-1))),at=["value"],lt={class:"row mb-3"},it={class:"col-md-6"},ot=Oe((()=>(0,l._)("label",{for:"bomType",class:"form-label"},"BOM Type",-1))),ct={class:"col-md-6"},rt=Oe((()=>(0,l._)("label",{for:"bomRevNo",class:"form-label"},"BOM REV No",-1))),dt={class:"row mb-3 justify-content-center"},nt={class:"col-md-6"},ut=Oe((()=>(0,l._)("label",{for:"issueDate",class:"form-label"},"Issue Date",-1))),mt={class:"card p-3 mb-4"},ht=Oe((()=>(0,l._)("label",{for:"fileInput",class:"form-label"},[(0,l._)("i",{class:"fas fa-cloud-upload-alt mr-2"}),(0,l.Uk)(" Choose BOM Excel file ")],-1))),pt={class:"custom-file"},bt={class:"custom-file-label",for:"fileInput"},ft={class:"card p-3"};function _t(e,t,s,i,o,c){const r=(0,l.up)("router-link");return e.$store.state.isLoading?((0,l.wg)(),(0,l.iD)("div",Ne,Ee)):((0,l.wg)(),(0,l.iD)("div",Te,[(0,l._)("div",qe,[(0,l._)("div",Ae,[Fe,We,(0,l._)("nav",Ve,[(0,l._)("ol",Ze,[ze,(0,l._)("li",Ge,[(0,l.Wm)(r,{to:"/bom"},{default:(0,l.w5)((()=>[Qe,(0,l.Uk)(" Bill Of Materials ")])),_:1})]),He])])])]),(0,l._)("section",Ye,[(0,l._)("div",Ke,[(0,l._)("div",Je,[Xe,(0,l.wy)((0,l._)("select",{class:"form-select",id:"projectDropdown","onUpdate:modelValue":t[0]||(t[0]=e=>o.selectedProject=e),onChange:t[1]||(t[1]=(...t)=>e.loadProducts&&e.loadProducts(...t)),required:""},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(o.projects,(e=>((0,l.wg)(),(0,l.iD)("option",{key:e.id,value:e.id},(0,fe.zw)(e.name),9,et)))),128))],544),[[a.bM,o.selectedProject]])]),(0,l._)("div",tt,[st,(0,l.wy)((0,l._)("select",{class:"form-select",id:"productCode","onUpdate:modelValue":t[2]||(t[2]=e=>o.selectedProduct=e),required:""},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(c.filteredProducts,(e=>((0,l.wg)(),(0,l.iD)("option",{key:e.id,value:e.id},(0,fe.zw)(e.name),9,at)))),128))],512),[[a.bM,o.selectedProduct]])])]),(0,l._)("div",lt,[(0,l._)("div",it,[ot,(0,l.wy)((0,l._)("input",{type:"text",class:"form-control",id:"bomType","onUpdate:modelValue":t[3]||(t[3]=e=>o.bomType=e),required:""},null,512),[[a.nr,o.bomType]])]),(0,l._)("div",ct,[rt,(0,l.wy)((0,l._)("input",{type:"text",class:"form-control",id:"bomRevNo","onUpdate:modelValue":t[4]||(t[4]=e=>o.bomRevNo=e),required:""},null,512),[[a.nr,o.bomRevNo]])])]),(0,l._)("div",dt,[(0,l._)("div",nt,[ut,(0,l.wy)((0,l._)("input",{type:"date",class:"form-control",id:"issueDate","onUpdate:modelValue":t[5]||(t[5]=e=>o.issueDate=e),required:""},null,512),[[a.nr,o.issueDate]])])])]),(0,l._)("div",mt,[ht,(0,l._)("div",pt,[(0,l._)("input",{type:"file",class:"custom-file-input",id:"fileInput",onChange:t[6]||(t[6]=(...e)=>c.handleFileUpload&&c.handleFileUpload(...e)),accept:".xls, .xlsx",required:""},null,32),(0,l._)("label",bt,(0,fe.zw)(o.uploadedFileName||"Select file"),1)])]),(0,l._)("div",ft,[(0,l._)("button",{type:"button",class:"btn btn-primary",onClick:t[7]||(t[7]=(...e)=>c.submitForm&&c.submitForm(...e))}," Upload BOM ")])]))}var gt={data(){return{productName:"",productCode:"",bomType:"",bomRevNo:"",issueDate:"",batchQuantity:1,productRevNo:"",uploadedFileName:null,uploadedFile:null,selectedProject:null,selectedProduct:null,projects:[],products:[]}},computed:{filteredProducts(){if(this.products&&this.projects&&this.products.length&&this.projects.length){if(console.log("selectedProject",this.selectedProject),null!==this.selectedProject){const e=this.products.filter((e=>{const t=e.project;return t===this.selectedProject}));return console.log("Filtered Products:",e),e}return console.log("All Products:",this.products),[]}return console.log("No Products or Projects available."),[]}},mounted(){this.getData()},methods:{async getData(){try{const e=await ue.Z.get("store/create-order/");console.log(e.data),this.projects=e.data.projects,this.projects=e.data.projects,this.products=e.data.products,console.log(this.projects)}catch(e){console.error("Error fetching projects:",e)}},async submitForm(){this.$store.commit("setIsLoading",!0);const e=new FormData;console.log("Form Data:",{selectedProjectId:this.selectedProject,selectedProductName:this.selectedProduct,bomType:this.bomType,bomRevNo:this.bomRevNo,issueDate:this.issueDate,uploadedFileName:this.uploadedFileName}),e.append("project_id",this.selectedProject),e.append("product_id",this.selectedProduct),e.append("bom_type",this.bomType),e.append("bom_rev_no",this.bomRevNo),e.append("issue_date",this.issueDate),e.append("bom_file",this.uploadedFile),console.log("Form Data:",e),await ue.Z.post("store/upload-bom/",e,{headers:{"Content-Type":"multipart/form-data"}}).then((e=>{console.log(e.data);const t=e.data.task_id;"IN PROGRESS"===e.data.task_status||"PENDING"===e.data.task_status?setTimeout((()=>{this.checkTaskStatus(t)}),1e4):"SUCCESS"===e.data.task_status?(this.$store.commit("setIsLoading",!1),this.$notify({title:"BOM Uploaded Successfully",type:"bg-success-subtle text-success",duration:"5000"}),this.$router.push("/bom")):(this.$notify({title:"BOM Upload Failed",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1))})).catch((e=>{console.log("error:",e),this.$notify({title:"An error occured, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1)}))},async checkTaskStatus(e){try{const t=await ue.Z.get(`store/check-task-status/${e}/`);"IN PROGRESS"===t.data.task_status||"PENDING"===t.data.task_status?setTimeout((()=>{this.checkTaskStatus(e)}),5e3):"SUCCESS"===t.data.task_status?(this.$notify({title:"BOM Uploaded Successfully",type:"bg-success-subtle text-success",duration:"5000"}),this.$router.push("/bom"),this.$store.commit("setIsLoading",!1)):(this.$notify({title:"BOM Upload Failed",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1))}catch(t){console.log("error:",t),this.$notify({title:"An error occurred, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1)}},handleFileUpload(e){const t=e.target.files[0];t&&(console.log("Uploaded file:",t),this.uploadedFileName=t.name,this.uploadedFile=t)}}};const yt=(0,he.Z)(gt,[["render",_t],["__scopeId","data-v-1a910259"]]);var vt=yt;const kt={key:0,class:"container text-center"},wt=(0,l._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,l._)("span",{class:"visually-hidden"},"Loading...")],-1),Ct=(0,l._)("div",null,[(0,l._)("b",null," Loading... ")],-1),St=[wt,Ct],Dt={key:1,class:"container"},It={class:"row align-items-center"},Pt=(0,l.uE)('<div class="col-md-6 mt-4"><div class="d-flex align-items-center"><h2 class="mb-0">Bill Of Materials</h2><span class="ms-3 fs-4 text-muted">|</span><nav aria-label="breadcrumb" class="d-inline-block ms-3"><ol class="breadcrumb bg-transparent m-0 p-0"><li class="breadcrumb-item"><a href="/"><i class="fas fa-home me-1"></i>Home</a></li><li class="breadcrumb-item active" aria-current="page"><i class="fas fa-clipboard-list me-1"></i> Bill Of Materials </li></ol></nav></div></div>',1),Rt={class:"col-md-6 d-flex justify-content-end mt-4"};function xt(e,t,s,a,i,o){const c=(0,l.up)("router-link"),r=(0,l.up)("BomDetailsTable");return e.$store.state.isLoading?((0,l.wg)(),(0,l.iD)("div",kt,St)):((0,l.wg)(),(0,l.iD)("div",Dt,[(0,l._)("div",It,[Pt,(0,l._)("div",Rt,[(0,l.Wm)(c,{to:"/bom/upload",class:"btn btn-primary btn-sm ms-2"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Upload BOM ")])),_:1})])]),(0,l.Wm)(r,{style:{"margin-top":"20px"},boms:i.boms,onRowClicked:o.handleRowClicked,onRowSelected:o.handleRowSelected},null,8,["boms","onRowClicked","onRowSelected"])]))}function Lt(e,t,s,a,i,o){const c=(0,l.up)("ag-grid-vue");return(0,l.wg)(),(0,l.iD)("div",null,[s.boms.length>0?((0,l.wg)(),(0,l.j4)(c,{key:0,style:{height:"500px"},class:"ag-theme-quartz",rowData:s.boms,defaultColDef:i.defaultColDef,columnDefs:i.colDefs,pagination:!0,onRowClicked:o.onRowClicked,onRowSelected:o.onRowSelected},null,8,["rowData","defaultColDef","columnDefs","onRowClicked","onRowSelected"])):(0,l.kq)("",!0)])}var $t=s(6732),Bt={name:"BombDetailsTable",components:{AgGridVue:$t.n},props:{boms:{type:Array,required:!0}},data(){return{colDefs:[{field:"id",hide:!0},{field:"product.project.name",headerCheckboxSelection:!0,checkboxSelection:!0,headerName:"Project Name"},{field:"product.name",headerName:"Product Name"},{field:"product.product_code",headerName:"Product Code"},{field:"bom_type.name",headerName:"BOM Type"},{field:"bom_rev_number",headerName:"BOM Rev No"},{field:"issue_date",headerName:"Issue Date"},{field:"product.product_rev_number",headerName:"Product Rev No"},{headerName:"Actions",cellRenderer:this.editButtonRenderer}],defaultColDef:{filter:!0,sortable:!0,resizable:!0,autoSize:!0},selectedRows:[]}},methods:{onRowClicked(e){this.$emit("rowClicked",e.data),this.$router.push(`/bom/edit/${e.data.id}`)},onRowSelected(e){e.node.isSelected()&&this.$emit("rowSelected",e.node.data)},onSelectionChanged(){this.$refs.agGrid&&this.$refs.agGrid.api&&(this.selectedRows=this.$refs.agGrid.api.getSelectedRows())},editButtonRenderer(e){console.log(e);const t=document.createElement("button");return t.innerHTML='<i class="fas fa-edit"></i>',t.classList.add("btn","btn-primary"),t.addEventListener("click",(()=>this.onEditClick(e.data.id))),t},onEditClick(e){this.$router.push(`/bom/edit/${e}`)}}};const Ut=(0,he.Z)(Bt,[["render",Lt],["__scopeId","data-v-1201045e"]]);var Ot=Ut,Nt={components:{BomDetailsTable:Ot},data(){return{boms:[]}},methods:{async fetchData(){try{this.$store.commit("setIsLoading",!0);const e=await ue.Z.get("store/get-boms/");console.log("response.data",e.data),this.boms=e.data.boms,console.log("boms",this.boms),this.$store.commit("setIsLoading",!1)}catch(e){console.error("Error fetching BOM data:",e),this.$store.commit("setIsLoading",!1)}},handleRowClicked(e){console.log("Clicked Row:",e)},handleRowSelected(e){console.log("Row Selected:",e),this.selectedRow=e}},mounted(){this.fetchData()}};const jt=(0,he.Z)(Nt,[["render",xt]]);var Mt=jt;const Et=e=>((0,l.dD)("data-v-09c82d64"),e=e(),(0,l.Cn)(),e),Tt={key:0,class:"container text-center"},qt=Et((()=>(0,l._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,l._)("span",{class:"visually-hidden"},"Loading...")],-1))),At=Et((()=>(0,l._)("div",null,[(0,l._)("b",null," Loading... ")],-1))),Ft=[qt,At],Wt={key:1,class:"container"},Vt={class:"row align-items-center"},Zt={class:"d-flex align-items-center mt-4"},zt=Et((()=>(0,l._)("h2",{class:"mb-0"},"BOM Details",-1))),Gt=Et((()=>(0,l._)("span",{class:"ms-3 fs-4 text-muted"},"|",-1))),Qt={"aria-label":"breadcrumb",class:"d-inline-block ms-3"},Ht={class:"breadcrumb bg-transparent m-0 p-0"},Yt=Et((()=>(0,l._)("li",{class:"breadcrumb-item"},[(0,l._)("a",{href:"/"},[(0,l._)("i",{class:"fas fa-home me-1"}),(0,l.Uk)("Home")])],-1))),Kt={class:"breadcrumb-item"},Jt=Et((()=>(0,l._)("i",{class:"fas fa-clipboard-list me-1"},null,-1))),Xt=Et((()=>(0,l._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,l._)("i",{class:"fas fa-list-alt me-1"}),(0,l.Uk)(" Bom Details ")],-1))),es={class:"card",style:{"margin-top":"20px",padding:"10px"}},ts={class:"card-body"},ss={class:"row"},as={class:"col-md-4 mb-2"},ls=Et((()=>(0,l._)("label",{class:"fw-bold"},"Project Name:",-1))),is={key:0},os={class:"col-md-4 mb-2"},cs=Et((()=>(0,l._)("label",{class:"fw-bold"},"BOM Type:",-1))),rs={key:0},ds={class:"col-md-4 mb-2"},ns=Et((()=>(0,l._)("label",{class:"fw-bold"},"Issue Date:",-1))),us={key:0},ms={class:"col-md-4 mb-2"},hs=Et((()=>(0,l._)("label",{class:"fw-bold"},"Product Name:",-1))),ps={key:0},bs={class:"col-md-4 mb-2"},fs=Et((()=>(0,l._)("label",{class:"fw-bold"},"BOM Rev No:",-1))),_s={key:0},gs={class:"col-md-4 mb-2"},ys=Et((()=>(0,l._)("label",{class:"fw-bold"},"Product Rev No:",-1))),vs={key:0},ks=Et((()=>(0,l._)("div",{class:"mt-4"},null,-1)));function ws(e,t,s,a,i,o){const c=(0,l.up)("router-link"),r=(0,l.up)("BomItemsTable");return(0,l.wg)(),(0,l.iD)("div",null,[e.$store.state.isLoading?((0,l.wg)(),(0,l.iD)("div",Tt,Ft)):((0,l.wg)(),(0,l.iD)("div",Wt,[(0,l._)("div",Vt,[(0,l._)("div",Zt,[zt,Gt,(0,l._)("nav",Qt,[(0,l._)("ol",Ht,[Yt,(0,l._)("li",Kt,[(0,l.Wm)(c,{to:"/bom"},{default:(0,l.w5)((()=>[Jt,(0,l.Uk)("Bill of Materials")])),_:1})]),Xt])]),(0,l._)("button",{class:"btn btn-primary ml-auto",onClick:t[0]||(t[0]=(...e)=>o.downloadBOM&&o.downloadBOM(...e))}," Download BOM ")])]),(0,l._)("div",es,[(0,l._)("div",ts,[(0,l._)("div",ss,[(0,l._)("div",as,[ls,i.bom.product?((0,l.wg)(),(0,l.iD)("div",is,(0,fe.zw)(i.bom.product.project.name),1)):(0,l.kq)("",!0)]),(0,l._)("div",os,[cs,i.bom.bom_type?((0,l.wg)(),(0,l.iD)("div",rs,(0,fe.zw)(i.bom.bom_type.name),1)):(0,l.kq)("",!0)]),(0,l._)("div",ds,[ns,i.bom.issue_date?((0,l.wg)(),(0,l.iD)("div",us,(0,fe.zw)(i.bom.issue_date),1)):(0,l.kq)("",!0)]),(0,l._)("div",ms,[hs,i.bom.product?((0,l.wg)(),(0,l.iD)("div",ps,(0,fe.zw)(i.bom.product.name),1)):(0,l.kq)("",!0)]),(0,l._)("div",bs,[fs,i.bom.bom_rev_number?((0,l.wg)(),(0,l.iD)("div",_s,(0,fe.zw)(i.bom.bom_rev_number),1)):(0,l.kq)("",!0)]),(0,l._)("div",gs,[ys,i.bom.product?((0,l.wg)(),(0,l.iD)("div",vs,(0,fe.zw)(i.bom.product.product_rev_number),1)):(0,l.kq)("",!0)])])])]),ks,(0,l.Wm)(r,{bom:i.bom.bom_line_items,onRowClicked:o.handleRowClicked,onRowSelected:o.handleRowSelected},null,8,["bom","onRowClicked","onRowSelected"])]))])}function Cs(e,t,s,a,i,o){const c=(0,l.up)("ag-grid-vue");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l.Wm)(c,{style:{height:"500px"},class:"ag-theme-quartz",rowData:s.bom,defaultColDef:i.defaultColDef,columnDefs:i.colDefs,pagination:!0,onRowClicked:o.onRowClicked,frameworkComponents:{editButtonRenderer:o.editButtonRenderer}},null,8,["rowData","defaultColDef","columnDefs","onRowClicked","frameworkComponents"])])}var Ss={name:"BomItemDetails",components:{AgGridVue:$t.n},props:{bom:{type:Array,required:!0}},data(){return{colDefs:[{headerName:"ID",field:"id",hide:!0},{headerName:" Level",field:"level"},{headerName:"VEPL Part Number",field:"part_number"},{headerName:"Priority Level",field:"priority_level"},{headerName:"Value",field:"value"},{headerName:"PCB Footprint",field:"pcb_footprint"},{headerName:"Type",field:"line_item_type.name"},{headerName:"Description",field:"description"},{headerName:"References",valueGetter:function(e){const t=e.data.references;if(t&&t.length>0){const e=t.map((e=>e.name));return e.join(", ")}return""}},{headerName:"Manufacturer Parts",valueGetter:function(e){const t=e.data.manufacturer_parts;if(t&&t.length>0){const e=t.map((e=>{const t=e.manufacturer;return t?`${e.part_number} - ${t.name}`:""}));return e.join(", ")}return""}},{headerName:"Customer Part Number",field:"customer_part_number"},{headerName:"Quantity",field:"quantity"},{headerName:"UOM",field:"uom"},{headerName:"Assembly Stage",field:"assembly_stage.name"},{headerName:"ECN",field:"ecn"},{headerName:"MSL",field:"msl"},{headerName:"Remarks",field:"remarks"},{headerName:"Actions",cellRenderer:this.editButtonRenderer}],defaultColDef:{filter:!0,sortable:!0,resizable:!0,autoSize:!0},selectedRows:[]}},mounted(){},methods:{onRowClicked(e){this.$emit("rowClicked",e.data)},onRowSelected(e){e.node.isSelected()&&this.$emit("rowSelected",e.node.data)},editButtonRenderer(e){const t=document.createElement("button");return t.innerHTML='<i class="fas fa-edit"></i>',t.classList.add("btn","btn-primary"),t.addEventListener("click",(()=>this.onEditClick(e.data.id))),t},onEditClick(e){this.$router.push({name:"BomLineItemEdit",params:{id:e}})}}};const Ds=(0,he.Z)(Ss,[["render",Cs]]);var Is=Ds,Ps={components:{BomItemsTable:Is},data(){return{bom:""}},methods:{handleRowClicked(e){console.log("Row clicked:",e)},handleRowSelected(e){console.log("Row selected:",e)},async fetchData(){this.$store.commit("setIsLoading",!0),await ue.Z.get(`store/get-boms/${this.$route.params.id}/`).then((e=>{console.log(e.data),this.bom=e.data.bom,this.$store.commit("setIsLoading",!1)})).catch((e=>{console.error("Error fetching data:",e),this.$store.commit("setIsLoading",!1)}))},downloadBOM(){try{const e=this.bom.bom_file_url,t=document.createElement("a");t.href=e,t.download=this.bom.bom_file_name,document.body.appendChild(t),t.click(),document.body.removeChild(t)}catch(e){console.error("Error downloading BOM:",e)}}},mounted(){this.fetchData()}};const Rs=(0,he.Z)(Ps,[["render",ws],["__scopeId","data-v-09c82d64"]]);var xs=Rs;const Ls={key:0,class:"container text-center"},$s=(0,l._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,l._)("span",{class:"visually-hidden"},"Loading...")],-1),Bs=(0,l._)("div",null,[(0,l._)("b",null," Loading... ")],-1),Us=[$s,Bs],Os={key:1,class:"container"},Ns={class:"row align-items-center"},js=(0,l.uE)('<div class="col-md-6 mt-4"><div class="d-flex align-items-center"><h2 class="mb-0">Checklist</h2><span class="ms-3 fs-4 text-muted">|</span><nav aria-label="breadcrumb" class="d-inline-block ms-3"><ol class="breadcrumb bg-transparent m-0 p-0"><li class="breadcrumb-item"><a href="/"><i class="fas fa-home me-1"></i>Home</a></li><li class="breadcrumb-item active" aria-current="page"><i class="fas fa-list-alt me-1"></i> Checklist </li></ol></nav></div></div>',1),Ms={class:"col-md-6 mt-4 text-end"},Es={class:"container has-text-centered"},Ts={class:"d-flex"},qs=["disabled"],As=["disabled"],Fs=["disabled"],Ws={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Vs={class:"modal-dialog"},Zs={class:"modal-content"},zs=(0,l._)("div",{class:"modal-header"},[(0,l._)("h1",{class:"modal-title fs-5",id:"exampleModalLabel"}," Fill the Required Batch Quantity "),(0,l._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Gs={class:"modal-body"},Qs={class:"modal-footer"},Hs=(0,l._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1);function Ys(e,t,s,i,o,c){const r=(0,l.up)("BomDetailsTableWithoutEdit");return e.$store.state.isLoading?((0,l.wg)(),(0,l.iD)("div",Ls,Us)):((0,l.wg)(),(0,l.iD)("div",Os,[(0,l._)("div",Ns,[js,(0,l._)("div",Ms,[(0,l._)("div",Es,[(0,l._)("div",Ts,[(0,l._)("button",{type:"button",disabled:!o.isButtonEnabled,class:"btn btn-primary btn-sm","data-bs-toggle":"modal","data-bs-target":"#exampleModal"}," Generate New Checklist ",8,qs),(0,l._)("button",{onClick:t[0]||(t[0]=(...e)=>c.checkExistingChecklist&&c.checkExistingChecklist(...e)),disabled:!o.isButtonEnabled,class:"btn btn-warning btn-sm ms-2"}," View Ongoing Checklist ",8,As),(0,l._)("button",{onClick:t[1]||(t[1]=(...e)=>c.viewGeneratedChecklists&&c.viewGeneratedChecklists(...e)),disabled:!o.isButtonEnabled,class:"btn btn-success btn-sm ms-2"}," View Generated Checklists ",8,Fs)])])])]),(0,l.Wm)(r,{style:{"margin-top":"20px"},rowData:o.rowData,onRowClicked:c.handleRowClicked,onRowSelected:c.handleRowSelected,onRowDeselected:c.handleRowDeselected},null,8,["rowData","onRowClicked","onRowSelected","onRowDeselected"]),(0,l._)("div",Ws,[(0,l._)("div",Vs,[(0,l._)("div",Zs,[zs,(0,l._)("div",Gs,[(0,l.wy)((0,l._)("input",{type:"number",class:"form-control",id:"requiredBatchQuantity","onUpdate:modelValue":t[2]||(t[2]=e=>o.batch_quantity=e),placeholder:"Enter Batch Quantity",min:"1"},null,512),[[a.nr,o.batch_quantity]])]),(0,l._)("div",Qs,[Hs,(0,l._)("button",{onClick:t[3]||(t[3]=(...e)=>c.checkAndGenerateChecklist&&c.checkAndGenerateChecklist(...e)),type:"button",class:"btn btn-primary","data-bs-dismiss":"modal"}," Generate Checklist ")])])])])]))}function Ks(e,t,s,a,i,o){const c=(0,l.up)("ag-grid-vue");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l.Wm)(c,{style:{height:"500px"},class:"ag-theme-quartz",rowData:s.rowData,defaultColDef:i.defaultColDef,columnDefs:i.colDefs,pagination:!0,rowSelection:"single",onRowClicked:o.onRowClicked,onSelectionChanged:o.onSelectionChanged},null,8,["rowData","defaultColDef","columnDefs","onRowClicked","onSelectionChanged"])])}var Js={name:"App",components:{AgGridVue:$t.n},props:{rowData:{type:Array,required:!0}},data(){return{colDefs:[{field:"id",hide:!0},{field:"product.name",headerCheckboxSelection:!0,checkboxSelection:!0,headerName:"Product Name"},{field:"product.product_code",headerName:"Product Code"},{field:"bom_type.name",headerName:"BOM Type"},{field:"bom_rev_number",headerName:"BOM Rev No"},{field:"issue_date",headerName:"Issue Date"},{field:"product.product_rev_number",headerName:"Product Rev No"}],defaultColDef:{filter:!0,sortable:!0,resizable:!0,autoSize:!0},selectedRows:[]}},methods:{onRowClicked(e){this.$emit("rowClicked",e.data)},onSelectionChanged(e){const t=e.api.getSelectedRows(),s=t.length>0?t[0]:null;s?this.$emit("rowSelected",s):this.$emit("rowDeselected")},onEditClick(e){this.$router.push(`/bom/edit/${e}`)}}};const Xs=(0,he.Z)(Js,[["render",Ks]]);var ea=Xs,ta={components:{BomDetailsTableWithoutEdit:ea},data(){return{rowData:[],selectedRow:null,clickedRowId:null,isButtonEnabled:!1,isExisting:!1,isActive:!1,batch_quantity:1}},methods:{async fetchData(){try{this.$store.commit("setIsLoading",!0);const e=await ue.Z.get("store/get-boms/");this.rowData=e.data.boms,console.log(e.data.boms),this.$store.commit("setIsLoading",!1)}catch(e){console.error("Error fetching BOM data:",e),this.$store.commit("setIsLoading",!1)}},handleRowClicked(e){console.log("Clicked Row:",e)},handleRowSelected(e){console.log("Row Selected:",e),e&&e.id&&(this.selectedRow=e,this.clickedRowId=e.id,this.isButtonEnabled=!0)},handleRowDeselected(){console.log("Row Deselected:"),this.isButtonEnabled=!1},async checkAndGenerateChecklist(){this.$store.commit("setIsLoading",!0),await ue.Z.post(`store/check-existing-checklist/${this.clickedRowId}/`).then((e=>{console.log(e.data),this.isActive=e.data.is_active,this.isExisting=e.data.is_existing,this.isExisting?this.$notify({title:"There is already an active ongoing checklist for this bom, please end that checklist by viewing the ongoing checklist to generate a new one.",type:"bg-danger-subtle text-danger",duration:"5000"}):this.generateChecklist()})).catch((e=>{console.log("error:",e),this.$notify({title:"An error occured, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"})})).finally((()=>{this.$store.commit("setIsLoading",!1)}))},async generateChecklist(){this.$store.commit("setIsLoading",!0);const e={batch_quantity:this.batch_quantity};await ue.Z.post(`store/generate-new-checklist/${this.clickedRowId}/`,e).then((e=>{console.log(e.data),this.$router.push(`/begin-checklist/${this.clickedRowId}`)})).catch((e=>{console.log("error:",e),this.$notify({title:"An error occured, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"})})).finally((()=>{this.$store.commit("setIsLoading",!1)}))},async checkExistingChecklist(){this.$store.commit("setIsLoading",!0),await ue.Z.post(`store/check-existing-checklist/${this.clickedRowId}/`).then((e=>{console.log(e.data),this.isActive=e.data.is_active,this.isExisting=e.data.is_existing,this.isExisting?this.isActive?this.$router.push(`/begin-checklist/${this.clickedRowId}`):this.$notify({title:"No active checklist found for this bom, please generate a new checklist",type:"bg-danger-subtle text-danger",duration:"5000"}):this.$notify({title:"No ongoing checklist found for this bom, please generate a new checklist",type:"bg-danger-subtle text-danger",duration:"5000"})})).catch((e=>{console.log("error:",e),this.$notify({title:"An error occured, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"})})).finally((()=>{this.$store.commit("setIsLoading",!1)}))},viewOngoingChecklists(){this.clickedRowId&&this.$router.push(`/begin-checklist/${this.clickedRowId}`)},viewGeneratedChecklists(){this.clickedRowId&&this.$router.push(`/generated-checklists/${this.clickedRowId}`)}},mounted(){this.fetchData()}};const sa=(0,he.Z)(ta,[["render",Ys]]);var aa=sa;const la=e=>((0,l.dD)("data-v-cfa9c45e"),e=e(),(0,l.Cn)(),e),ia={key:0,class:"container text-center"},oa=la((()=>(0,l._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,l._)("span",{class:"visually-hidden"},"Loading...")],-1))),ca=la((()=>(0,l._)("div",null,[(0,l._)("b",null," Loading... ")],-1))),ra=[oa,ca],da={key:1,class:"container"},na={class:"row align-items-center"},ua={class:"col-md-6 mt-4"},ma={class:"d-flex align-items-center"},ha=la((()=>(0,l._)("h2",{class:"mb-0"},"Checklist",-1))),pa=la((()=>(0,l._)("span",{class:"ms-3 fs-4 text-muted me-3"},"|",-1))),ba={"aria-label":"breadcrumb"},fa={class:"breadcrumb bg-transparent m-0 p-0 justify-content-end"},_a=la((()=>(0,l._)("li",{class:"breadcrumb-item"},[(0,l._)("a",{href:"/"},[(0,l._)("i",{class:"fas fa-home me-1"}),(0,l.Uk)("Home")])],-1))),ga={class:"breadcrumb-item active","aria-current":"page"},ya=la((()=>(0,l._)("i",{class:"fas fa-list-alt me-1"},null,-1))),va=la((()=>(0,l._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,l._)("i",{class:"fas fa-spinner me-1"}),(0,l.Uk)(" Ongoing Checklist ")],-1))),ka={class:"col-md-6 mt-4"},wa={class:"container"},Ca={class:"d-flex justify-content-end"},Sa={key:0,type:"button","data-bs-toggle":"modal","data-bs-target":"#generateLabelModal",class:"btn btn-success me-2"},Da={key:1,type:"button","data-bs-toggle":"modal","data-bs-target":"#generateLabelModal",class:"btn btn-success me-2"},Ia=la((()=>(0,l._)("button",{type:"button","data-bs-toggle":"modal","data-bs-target":"#endChecklistModal",class:"btn btn-danger"}," End Checklist ",-1))),Pa={class:"modal fade",id:"generateLabelModal",tabindex:"-1","aria-labelledby":"generateLabelModalLabel","aria-hidden":"true"},Ra={class:"modal-dialog"},xa={class:"modal-content"},La=la((()=>(0,l._)("div",{class:"modal-header"},[(0,l._)("h1",{class:"modal-title fs-5",id:"generateLabelModalLabel"}," Generate Label "),(0,l._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),$a={class:"modal-body"},Ba={key:0},Ua={key:0,id:"printable-content"},Oa=["src"],Na={key:1},ja={key:1},Ma={class:"modal-footer"},Ea=la((()=>(0,l._)("button",{type:"button",class:"btn btn-dark","data-bs-dismiss":"modal"}," Cancel ",-1))),Ta={key:0},qa={class:"modal fade",id:"endChecklistModal",tabindex:"-1","aria-labelledby":"endChecklistModalLabel","aria-hidden":"true"},Aa={class:"modal-dialog"},Fa={class:"modal-content"},Wa=la((()=>(0,l._)("div",{class:"modal-header"},[(0,l._)("h1",{class:"modal-title fs-5",id:"endChecklistModalLabel"}," End Checklist "),(0,l._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),Va=la((()=>(0,l._)("div",{class:"modal-body"}," Are you sure you want to end this checklist? ",-1))),Za={class:"modal-footer"},za=la((()=>(0,l._)("button",{type:"button",class:"btn btn-dark","data-bs-dismiss":"modal"}," Cancel ",-1))),Ga={class:"card border-primary mb-4 mt-4"},Qa=la((()=>(0,l._)("div",{class:"card-header bg-primary text-white"},[(0,l._)("h4",{class:"mb-0"},"Active Bom Details")],-1))),Ha={class:"card-body"},Ya={class:"row"},Ka={key:0,class:"col"},Ja=la((()=>(0,l._)("strong",null,"Project Name:",-1))),Xa={key:1,class:"col"},el=la((()=>(0,l._)("strong",null,"Product Name:",-1))),tl={class:"col"},sl=la((()=>(0,l._)("strong",null,"BOM Rev No:",-1))),al={class:"col"},ll=la((()=>(0,l._)("strong",null,"Issue Date:",-1))),il={class:"col"},ol=la((()=>(0,l._)("strong",null,"Batch Quantity:",-1))),cl={class:"accordion",id:"accordionPanelsStayOpenExample"},rl={class:"accordion-item"},dl={class:"accordion-header",id:"panelsStayOpen-headingOne"},nl={class:"accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseOne","aria-expanded":"true","aria-controls":"panelsStayOpen-collapseOne"},ul={key:0,class:"spinner-border ms-2",role:"status"},ml=la((()=>(0,l._)("span",{class:"visually-hidden"},"Loading...",-1))),hl=[ml],pl={key:1},bl=la((()=>(0,l._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),fl=[bl],_l={id:"panelsStayOpen-collapseOne",class:"accordion-collapse collapse show","aria-labelledby":"panelsStayOpen-headingOne"},gl={class:"accordion-body"},yl={class:"accordion-item"},vl={class:"accordion-header",id:"panelsStayOpen-headingTwo"},kl={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseTwo","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseTwo"},wl={key:0,class:"spinner-border ms-2",role:"status"},Cl=la((()=>(0,l._)("span",{class:"visually-hidden"},"Loading...",-1))),Sl=[Cl],Dl={key:1},Il=la((()=>(0,l._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),Pl=[Il],Rl={id:"panelsStayOpen-collapseTwo",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingTwo"},xl={class:"accordion-body"},Ll={class:"accordion-item"},$l={class:"accordion-header",id:"panelsStayOpen-headingThree"},Bl={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseThree","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseThree"},Ul={key:0,class:"spinner-border ms-2",role:"status"},Ol=la((()=>(0,l._)("span",{class:"visually-hidden"},"Loading...",-1))),Nl=[Ol],jl={key:1},Ml=la((()=>(0,l._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),El=[Ml],Tl={id:"panelsStayOpen-collapseThree",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingThree"},ql={class:"accordion-body"},Al={class:"accordion-item"},Fl={class:"accordion-header",id:"panelsStayOpen-headingFour"},Wl={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseFour","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseFour"},Vl={key:0,class:"spinner-border ms-2",role:"status"},Zl=la((()=>(0,l._)("span",{class:"visually-hidden"},"Loading...",-1))),zl=[Zl],Gl={key:1},Ql=la((()=>(0,l._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),Hl=[Ql],Yl={id:"panelsStayOpen-collapseFour",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingFour"},Kl={class:"accordion-body"},Jl={class:"accordion-item"},Xl={class:"accordion-header",id:"panelsStayOpen-headingFive"},ei={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseFive","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseFive"},ti={key:0,class:"spinner-border ms-2",role:"status"},si=la((()=>(0,l._)("span",{class:"visually-hidden"},"Loading...",-1))),ai=[si],li={key:1},ii=la((()=>(0,l._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),oi=[ii],ci={id:"panelsStayOpen-collapseFive",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingFive"},ri={class:"accordion-body"},di={class:"accordion-item"},ni={class:"accordion-header",id:"panelsStayOpen-headingSix"},ui={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseSix","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseSix"},mi={key:0,class:"spinner-border ms-2",role:"status"},hi=la((()=>(0,l._)("span",{class:"visually-hidden"},"Loading...",-1))),pi=[hi],bi={key:1},fi=la((()=>(0,l._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),_i=[fi],gi={id:"panelsStayOpen-collapseSix",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingSix"},yi={class:"accordion-body"},vi={class:"accordion-item"},ki={class:"accordion-header",id:"panelsStayOpen-headingSeven"},wi={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseSeven","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseSeven"},Ci={key:0,class:"spinner-border ms-2",role:"status"},Si=la((()=>(0,l._)("span",{class:"visually-hidden"},"Loading...",-1))),Di=[Si],Ii={key:1},Pi=la((()=>(0,l._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),Ri=[Pi],xi={id:"panelsStayOpen-collapseSeven",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingSeven"},Li={class:"accordion-body"},$i={class:"accordion-item"},Bi={class:"accordion-header",id:"panelsStayOpen-headingEight"},Ui={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseEight","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseEight"},Oi={key:0,class:"spinner-border ms-2",role:"status"},Ni=la((()=>(0,l._)("span",{class:"visually-hidden"},"Loading...",-1))),ji=[Ni],Mi={key:1},Ei=la((()=>(0,l._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),Ti=[Ei],qi={id:"panelsStayOpen-collapseEight",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingEight"},Ai={class:"accordion-body"},Fi={class:"accordion-item"},Wi={class:"accordion-header",id:"panelsStayOpen-headingNine"},Vi={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseNine","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseNine"},Zi={key:0,class:"spinner-border ms-2",role:"status"},zi=la((()=>(0,l._)("span",{class:"visually-hidden"},"Loading...",-1))),Gi=[zi],Qi={key:1},Hi=la((()=>(0,l._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),Yi=[Hi],Ki={id:"panelsStayOpen-collapseNine",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingNine"},Ji={class:"accordion-body"},Xi={class:"accordion-item"},eo={class:"accordion-header",id:"panelsStayOpen-headingTen"},to={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseTen","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseTen"},so={key:0,class:"spinner-border ms-2",role:"status"},ao=la((()=>(0,l._)("span",{class:"visually-hidden"},"Loading...",-1))),lo=[ao],io={key:1},oo=la((()=>(0,l._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),co=[oo],ro={id:"panelsStayOpen-collapseTen",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingTen"},no={class:"accordion-body"};function uo(e,t,s,a,i,o){const c=(0,l.up)("router-link"),r=(0,l.up)("CheckListTable");return e.$store.state.isLoading?((0,l.wg)(),(0,l.iD)("div",ia,ra)):((0,l.wg)(),(0,l.iD)("div",da,[(0,l._)("div",na,[(0,l._)("div",ua,[(0,l._)("div",ma,[ha,pa,(0,l._)("nav",ba,[(0,l._)("ol",fa,[_a,(0,l._)("li",ga,[(0,l.Wm)(c,{to:"/checklist"},{default:(0,l.w5)((()=>[ya,(0,l.Uk)(" Checklist")])),_:1})]),va])])])]),(0,l._)("div",ka,[(0,l._)("div",wa,[(0,l._)("div",Ca,[i.generatedQRCode?((0,l.wg)(),(0,l.iD)("button",Sa," View Generated Label ")):((0,l.wg)(),(0,l.iD)("button",Da," Generate Label ")),(0,l._)("button",{class:"btn btn-primary me-2",onClick:t[0]||(t[0]=(...e)=>o.downloadBOM&&o.downloadBOM(...e))}," Download BOM "),Ia])])])]),(0,l._)("div",Pa,[(0,l._)("div",Ra,[(0,l._)("div",xa,[La,(0,l._)("div",$a,[i.isChecklistPassed?((0,l.wg)(),(0,l.iD)("div",Ba,[i.generatedQRCode?((0,l.wg)(),(0,l.iD)("div",Ua,[(0,l._)("img",{src:i.generatedQRCode,alt:"QR Code"},null,8,Oa)])):((0,l.wg)(),(0,l.iD)("p",Na," All Checks passed successfully, generate a label by pressing the generate button. "))])):((0,l.wg)(),(0,l.iD)("div",ja," You can only generate a label if all checks are passed "))]),(0,l._)("div",Ma,[Ea,i.isChecklistPassed?((0,l.wg)(),(0,l.iD)("div",Ta,[i.generatedQRCode?((0,l.wg)(),(0,l.iD)("button",{key:0,type:"button",class:"btn btn-success",onClick:t[1]||(t[1]=(...e)=>o.printQRCode&&o.printQRCode(...e))}," Print ")):((0,l.wg)(),(0,l.iD)("button",{key:1,type:"button",class:"btn btn-success",onClick:t[2]||(t[2]=(...e)=>o.generateQRCode&&o.generateQRCode(...e))}," Generate "))])):(0,l.kq)("",!0)])])])]),(0,l._)("div",qa,[(0,l._)("div",Aa,[(0,l._)("div",Fa,[Wa,Va,(0,l._)("div",Za,[za,(0,l._)("button",{type:"button",class:"btn btn-danger",onClick:t[3]||(t[3]=(...e)=>o.endChecklist&&o.endChecklist(...e)),"data-bs-dismiss":"modal"}," End ")])])])]),(0,l._)("div",Ga,[Qa,(0,l._)("div",Ha,[(0,l._)("div",Ya,[i.activeBom.product?((0,l.wg)(),(0,l.iD)("div",Ka,[Ja,(0,l.Uk)(" "+(0,fe.zw)(i.activeBom.product.project.name),1)])):(0,l.kq)("",!0),i.activeBom.product?((0,l.wg)(),(0,l.iD)("div",Xa,[el,(0,l.Uk)(" "+(0,fe.zw)(i.activeBom.product.name),1)])):(0,l.kq)("",!0),(0,l._)("div",tl,[sl,(0,l.Uk)(" "+(0,fe.zw)(i.activeBom.bom_rev_number),1)]),(0,l._)("div",al,[ll,(0,l.Uk)(" "+(0,fe.zw)(i.activeBom.issue_date),1)]),(0,l._)("div",il,[ol,(0,l.Uk)(" "+(0,fe.zw)(i.checklist.batch_quantity),1)])])])]),(0,l._)("div",cl,[(0,l._)("div",rl,[(0,l._)("h2",dl,[(0,l._)("button",nl,[(0,l.Uk)(" Raw Material Check "),!1===i.isRawMaterialSufficient?((0,l.wg)(),(0,l.iD)("div",ul,hl)):((0,l.wg)(),(0,l.iD)("div",pl,fl))])]),(0,l._)("div",_l,[(0,l._)("div",gl,[(0,l.Wm)(r,{checklistItems:i.filteredChecklistItems["Raw Material"]},null,8,["checklistItems"])])])]),(0,l._)("div",yl,[(0,l._)("h2",vl,[(0,l._)("button",kl,[(0,l.Uk)(" PCB Check "),!1===i.isPcbSufficient?((0,l.wg)(),(0,l.iD)("div",wl,Sl)):((0,l.wg)(),(0,l.iD)("div",Dl,Pl))])]),(0,l._)("div",Rl,[(0,l._)("div",xl,[(0,l.Wm)(r,{checklistItems:i.filteredChecklistItems["PCB"]},null,8,["checklistItems"])])])]),(0,l._)("div",Ll,[(0,l._)("h2",$l,[(0,l._)("button",Bl,[(0,l.Uk)(" Solder Paste Check "),!1===i.isSolderPasteSufficient?((0,l.wg)(),(0,l.iD)("div",Ul,Nl)):((0,l.wg)(),(0,l.iD)("div",jl,El))])]),(0,l._)("div",Tl,[(0,l._)("div",ql,[(0,l.Wm)(r,{checklistItems:i.filteredChecklistItems["Solder Paste"]},null,8,["checklistItems"])])])]),(0,l._)("div",Al,[(0,l._)("h2",Fl,[(0,l._)("button",Wl,[(0,l.Uk)(" Solder Bar Check "),!1===i.isSolderBarSufficient?((0,l.wg)(),(0,l.iD)("div",Vl,zl)):((0,l.wg)(),(0,l.iD)("div",Gl,Hl))])]),(0,l._)("div",Yl,[(0,l._)("div",Kl,[(0,l.Wm)(r,{checklistItems:i.filteredChecklistItems["Solder Bar"]},null,8,["checklistItems"]),(0,l.Uk)("> ")])])]),(0,l._)("div",Jl,[(0,l._)("h2",Xl,[(0,l._)("button",ei,[(0,l.Uk)(" Solder Flux Check "),!1===i.isSolderFluxSufficient?((0,l.wg)(),(0,l.iD)("div",ti,ai)):((0,l.wg)(),(0,l.iD)("div",li,oi))])]),(0,l._)("div",ci,[(0,l._)("div",ri,[(0,l.Wm)(r,{checklistItems:i.filteredChecklistItems["Solder Flux"]},null,8,["checklistItems"])])])]),(0,l._)("div",di,[(0,l._)("h2",ni,[(0,l._)("button",ui,[(0,l.Uk)(" IPA Check "),!1===i.isIpaSufficient?((0,l.wg)(),(0,l.iD)("div",mi,pi)):((0,l.wg)(),(0,l.iD)("div",bi,_i))])]),(0,l._)("div",gi,[(0,l._)("div",yi,[(0,l.Wm)(r,{checklistItems:i.filteredChecklistItems["IPA"]},null,8,["checklistItems"])])])]),(0,l._)("div",vi,[(0,l._)("h2",ki,[(0,l._)("button",wi,[(0,l.Uk)(" Solder Wire Check "),!1===i.isSolderWireSufficient?((0,l.wg)(),(0,l.iD)("div",Ci,Di)):((0,l.wg)(),(0,l.iD)("div",Ii,Ri))])]),(0,l._)("div",xi,[(0,l._)("div",Li,[(0,l.Wm)(r,{checklistItems:i.filteredChecklistItems["Solder Wire"]},null,8,["checklistItems"])])])]),(0,l._)("div",$i,[(0,l._)("h2",Bi,[(0,l._)("button",Ui,[(0,l.Uk)(" SMT Pallet Check "),!1===i.isSMTPalletSufficient?((0,l.wg)(),(0,l.iD)("div",Oi,ji)):((0,l.wg)(),(0,l.iD)("div",Mi,Ti))])]),(0,l._)("div",qi,[(0,l._)("div",Ai,[(0,l.Wm)(r,{checklistItems:i.filteredChecklistItems["SMT Pallet"]},null,8,["checklistItems"])])])]),(0,l._)("div",Fi,[(0,l._)("h2",Wi,[(0,l._)("button",Vi,[(0,l.Uk)(" Wave Pallet Check "),!1===i.isWavePalletSufficient?((0,l.wg)(),(0,l.iD)("div",Zi,Gi)):((0,l.wg)(),(0,l.iD)("div",Qi,Yi))])]),(0,l._)("div",Ki,[(0,l._)("div",Ji,[(0,l.Wm)(r,{checklistItems:i.filteredChecklistItems["Wave Pallet"]},null,8,["checklistItems"])])])]),(0,l._)("div",Xi,[(0,l._)("h2",eo,[(0,l._)("button",to,[(0,l.Uk)(" PCB Serial Number Label Check "),!1===i.isLabelSufficient?((0,l.wg)(),(0,l.iD)("div",so,lo)):((0,l.wg)(),(0,l.iD)("div",io,co))])]),(0,l._)("div",ro,[(0,l._)("div",no,[(0,l.Wm)(r,{checklistItems:i.filteredChecklistItems["PCB Serial Number Label"]},null,8,["checklistItems"])])])])])]))}function mo(e,t,s,a,i,o){const c=(0,l.up)("ag-grid-vue");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l.Wm)(c,{ref:"agGrid",style:{height:"550px"},class:"ag-theme-quartz",rowData:s.checklistItems,defaultColDef:i.defaultColDef,columnDefs:i.colDefs,pagination:!0,onFirstDataRendered:o.onFirstDataRendered,onRowClicked:o.onRowClicked,onRowSelected:o.onRowSelected,onRowDeselected:o.onRowDeselected,onGridReady:o.onGridReady},null,8,["rowData","defaultColDef","columnDefs","onFirstDataRendered","onRowClicked","onRowSelected","onRowDeselected","onGridReady"])])}var ho={props:{checklistItems:{type:Array,required:!0}},components:{AgGridVue:$t.n},data(){return{gridApi:null,isGridReady:!1,colDefs:[{headerName:"VEPL Part No",field:"bom_line_item.part_number"},{headerName:"UID",field:"checklist_item_uids",valueFormatter:function(e){if(!e.value||0===e.value.length)return null;const t=e.value.map((e=>e.uid));return t.join(", ")}},{headerName:"Present Quantity",field:"present_quantity"},{headerName:"Required Quantity",field:"required_quantity"},{headerName:"Delta",valueGetter:function(e){const t=e.data.present_quantity,s=e.data.required_quantity,a=t-s;return a>=0?`+${a}`:`-${Math.abs(a)}`}},{headerName:"Is Present",field:"is_present"},{headerName:"Is Quantity Sufficient",field:"is_quantity_sufficient"},{headerName:"Updated At",field:"updated_at"}],defaultColDef:{filter:!0,sortable:!0,resizable:!0,autoSize:!0,domLayout:"autoHeight"},selectedRows:[]}},mounted(){},methods:{statusCellRenderer(e){return e.value?"":""},onRowClicked(e){this.$emit("rowClicked",e.data)},onRowSelected(e){e.node.isSelected()&&this.$emit("rowSelected",e.node.data),this.onSelectionChanged()},onRowDeselected(){this.onSelectionChanged()},onSelectionChanged(){this.selectedRows=this.gridApi.getSelectedRows()},onFirstDataRendered(e){e.api&&(this.gridApi=e.api,this.isGridReady=!0)},onGridReady(e){this.gridApi=e.api,this.isGridReady=!0}}};const po=(0,he.Z)(ho,[["render",mo],["__scopeId","data-v-68eea027"]]);var bo=po,fo=s(8385),_o={components:{CheckListTable:bo},data(){return{activeBom:"",checklist:"",checklistItems:[],isChecklistPassed:!1,isChecklistEnded:!1,isRawMaterialSufficient:!1,isPcbSufficient:!1,isSolderPasteSufficient:!1,isSolderBarSufficient:!1,isSolderFluxSufficient:!1,isIpaSufficient:!1,isSolderWireSufficient:!1,isSMTPalletSufficient:!1,isWavePalletSufficient:!1,isLabelSufficient:!1,pollingInterval:"",generatedQRCode:"",filteredChecklistItems:{"Raw Material":[],PCB:[],"Solder Paste":[],"Solder Bar":[],"Solder Flux":[],Ipa:[],"Solder Wire":[],"SMT Pallet":[],"Wave Pallet":[],"PCB Serial Number Label":[]},scannedEntries:[]}},mounted(){this.getChecklistBeginning(),this.pollingInterval=setInterval((()=>{this.isChecklistPassed?(clearInterval(this.pollingInterval),this.$notify({title:"BOM Check Passed",type:"bg-success-subtle text-success",duration:"5000"})):this.getChecklist()}),5e3)},beforeUnmount(){clearInterval(this.pollingInterval)},methods:{async getChecklistBeginning(){this.$store.commit("setIsLoading",!0),await ue.Z.get(`store/get-active-checklist/${this.$route.params.id}/`).then((e=>{console.log(e.data),this.checklist=e.data.checklist,this.checklistItems=this.checklist.checklist_items,console.log("checklists items hereeeeee",this.checklistItems);const t=this.filterChecklistItemsByType("Raw Material"),s=this.filterChecklistItemsByType("PCB"),a=this.filterChecklistItemsByType("Solder Paste"),l=this.filterChecklistItemsByType("Solder Bar"),i=this.filterChecklistItemsByType("Solder Flux"),o=this.filterChecklistItemsByType("IPA"),c=this.filterChecklistItemsByType("Solder Wire"),r=this.filterChecklistItemsByType("SMT Pallet"),d=this.filterChecklistItemsByType("Wave Pallet"),n=this.filterChecklistItemsByType("PCB Serial Number Label");this.isChecklistPassed=this.checklist.is_passed,this.activeBom=this.checklist.bom,this.filteredChecklistItems={"Raw Material":t,PCB:s,"Solder Paste":a,"Solder Bar":l,"Solder Flux":i,IPA:o,"Solder Wire":c,"SMT Pallet":r,"Wave Pallet":d,"PCB Serial Number Label":n},console.log("filered checklsit items",this.filteredChecklistItems),this.isRawMaterialSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Raw Material"),this.isPcbSufficient=this.isItemsSufficient(this.filteredChecklistItems,"PCB"),this.isSolderPasteSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Paste"),console.log("checking solder paste",this.isSolderPasteSufficient),this.isSolderBarSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Bar"),console.log("checkinsssg solder bar",this.isSolderBarSufficient),this.isSolderFluxSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Flux"),this.isIpaSufficient=this.isItemsSufficient(this.filteredChecklistItems,"IPA"),this.isSolderWireSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Wire"),this.isSMTPalletSufficient=this.isItemsSufficient(this.filteredChecklistItems,"SMT Pallet"),this.isWavePalletSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Wave Pallet"),this.isLabelSufficient=this.isItemsSufficient(this.filteredChecklistItems,"PCB Serial Number Label"),"Completed"!=this.checklist.status&&"Failed"!=this.checklist.status||(this.isChecklistEnded=!0),this.checklist.qr_code_link&&(this.generatedQRCode=this.checklist.qr_code_link),this.$store.commit("setIsLoading",!1)})).catch((e=>{console.log("error:",e),this.$notify({title:"An error occured, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1)}))},async getChecklist(){await ue.Z.get(`store/get-active-checklist/${this.$route.params.id}/`).then((e=>{console.log(e.data),this.checklist=e.data.checklist,this.checklistItems=this.checklist.checklist_items,console.log("chehcklist items hereeeeee",this.checklistItems);const t=this.filterChecklistItemsByType("Raw Material"),s=this.filterChecklistItemsByType("PCB"),a=this.filterChecklistItemsByType("Solder Paste"),l=this.filterChecklistItemsByType("Solder Bar"),i=this.filterChecklistItemsByType("Solder Flux"),o=this.filterChecklistItemsByType("IPA"),c=this.filterChecklistItemsByType("Solder Wire"),r=this.filterChecklistItemsByType("SMT Pallet"),d=this.filterChecklistItemsByType("Wave Pallet"),n=this.filterChecklistItemsByType("PCB Serial Number Label");this.isChecklistPassed=this.checklist.is_passed,this.activeBom=this.checklist.bom,this.filteredChecklistItems={"Raw Material":t,PCB:s,"Solder Paste":a,"Solder Bar":l,"Solder Flux":i,IPA:o,"Solder Wire":c,"SMT Pallet":r,"Wave Pallet":d,"PCB Serial Number Label":n},console.log("filered checklsit items",this.filteredChecklistItems),this.isRawMaterialSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Raw Material"),this.isPcbSufficient=this.isItemsSufficient(this.filteredChecklistItems,"PCB"),this.isSolderPasteSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Paste"),this.isSolderBarSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Bar"),console.log("checking solder bar",this.isSolderBarSufficient),this.isSolderFluxSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Flux"),this.isIpaSufficient=this.isItemsSufficient(this.filteredChecklistItems,"IPA"),this.isSolderWireSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Wire"),this.isSMTPalletSufficient=this.isItemsSufficient(this.filteredChecklistItems,"SMT Pallet"),this.isWavePalletSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Wave Pallet"),this.isLabelSufficient=this.isItemsSufficient(this.filteredChecklistItems,"PCB Serial Number Label"),"Completed"!=this.checklist.status&&"Failed"!=this.checklist.status||(this.isChecklistEnded=!0),this.checklist.qr_code_link&&(this.generatedQRCode=this.checklist.qr_code_link)})).catch((e=>{console.log("error:",e),this.$notify({title:"An error occured, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"})}))},async endChecklist(){this.$store.commit("setIsLoading",!0),clearInterval(this.pollingInterval),await ue.Z.get(`store/end-checklist/${this.checklist.id}/`).then((e=>{console.log(e.data),this.$notify({title:"Checklist ended",type:"bg-danger-subtle text-danger",duration:"5000"}),this.checklist=e.data.checklist,this.checklistItems=this.checklist.checklist_items,this.isChecklistPassed=this.checklist.is_passed,this.activeBom=this.checklist.bom,"Completed"!=this.checklist.status&&"Failed"!=this.checklist.status||(this.isChecklistEnded=!0),this.$router.push(`/generated-checklists/${this.$route.params.id}`),this.$store.commit("setIsLoading",!1)})).catch((e=>{console.log("error:",e),this.$notify({title:"An error occured, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"}),clearInterval(this.pollingInterval),this.$store.commit("setIsLoading",!1)}))},async generateQRCode(){const e=this.generateUniqueCode();console.log(e);const t=await fo.toDataURL(e),s={uniqueCode:e,qrCodeDataURL:t};this.saveQRCode(s)},generateUniqueCode(){const e=Date.now().toString(),t=Math.random().toString(36).substring(7);return`${e}-${t}`},async saveQRCode(e){await ue.Z.post(`store/save-qr-code/${this.checklist.id}/`,e).then((t=>{console.log(t.data),this.generatedQRCode=e.qrCodeDataURL,this.$notify({title:"QR Code generated and saved successfully",type:"bg-success-subtle text-success",duration:"5000"})})).catch((e=>{console.log("error:",e),this.$notify({title:"An error occured, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"})}))},printQRCode(){if(this.generatedQRCode){const e=document.getElementById("printable-content"),t=window.open("","","height=1000,width=1000");t.document.write(e.innerHTML),t.print()}},filterChecklistItemsByType(e){return this.checklistItems.filter((t=>{const s=t.checklist_item_type;return!(!s||!s.name)&&s.name.toUpperCase()===e.toUpperCase()}))},isItemsSufficient(e,t){const s=this.filteredChecklistItems[t];if(s){if(0===s.length)return!0;const e=s.filter((e=>!0===e.is_quantity_sufficient));return e.length===s.length}return!1},downloadBOM(){try{const e=this.checklist.bom.bom_file_url;console.log("file url",e);const t=document.createElement("a");t.href=e,t.download=this.checklist.bom.bom_file_name,document.body.appendChild(t),t.click(),document.body.removeChild(t)}catch(e){console.error("Error downloading BOM:",e)}}}};const go=(0,he.Z)(_o,[["render",uo],["__scopeId","data-v-cfa9c45e"]]);var yo=go;const vo={key:0,class:"container text-center"},ko=(0,l._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,l._)("span",{class:"visually-hidden"},"Loading...")],-1),wo=(0,l._)("div",null,[(0,l._)("b",null," Loading... ")],-1),Co=[ko,wo],So={key:1,class:"container"},Do={class:"row align-items-center"},Io={class:"col-md-12 mt-4"},Po={class:"d-flex align-items-center"},Ro=(0,l._)("h2",{class:"mb-0 me-3"},"Generated Checklists",-1),xo=(0,l._)("span",{class:"fs-4 text-muted"},"|",-1),Lo={"aria-label":"breadcrumb",class:"d-inline-block ms-3"},$o={class:"breadcrumb bg-transparent m-0 p-0"},Bo=(0,l._)("li",{class:"breadcrumb-item"},[(0,l._)("a",{href:"/"},[(0,l._)("i",{class:"fas fa-home me-1"}),(0,l.Uk)("Home")])],-1),Uo={class:"breadcrumb-item"},Oo=(0,l._)("i",{class:"fas fa-list-alt me-1"},null,-1),No=(0,l._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,l._)("i",{class:"fa-solid fa-list-check me-1"}),(0,l.Uk)(" Generated Checklists ")],-1);function jo(e,t,s,a,i,o){const c=(0,l.up)("router-link"),r=(0,l.up)("CheckListsTable");return e.$store.state.isLoading?((0,l.wg)(),(0,l.iD)("div",vo,Co)):((0,l.wg)(),(0,l.iD)("div",So,[(0,l._)("div",Do,[(0,l._)("div",Io,[(0,l._)("div",Po,[Ro,xo,(0,l._)("nav",Lo,[(0,l._)("ol",$o,[Bo,(0,l._)("li",Uo,[(0,l.Wm)(c,{to:"/checklist"},{default:(0,l.w5)((()=>[Oo,(0,l.Uk)(" Checklist")])),_:1})]),No])])])])]),(0,l.Wm)(r,{style:{"margin-top":"20px"},rowData:i.rowData},null,8,["rowData"])]))}function Mo(e,t,s,a,i,o){const c=(0,l.up)("ag-grid-vue");return(0,l.wg)(),(0,l.iD)("div",null,[s.rowData.length>0?((0,l.wg)(),(0,l.j4)(c,{key:0,style:{height:"500px"},class:"ag-theme-quartz",rowData:s.rowData,defaultColDef:i.defaultColDef,columnDefs:i.colDefs,pagination:!0,onRowClicked:o.onRowClicked,onRowSelected:o.onRowSelected},null,8,["rowData","defaultColDef","columnDefs","onRowClicked","onRowSelected"])):(0,l.kq)("",!0)])}var Eo={components:{AgGridVue:$t.n},props:{rowData:{type:Array}},data(){return{colDefs:[{field:"id",hide:!0},{headerName:"Checklist ID",field:"id",headerCheckboxSelection:!0,checkboxSelection:!0},{headerName:"Unique Code",field:"unique_code",valueFormatter:function(e){return null===e.value?"null":e.value}},{headerName:"Project Name",field:"bom.product.project.name"},{headerName:"Product Name",field:"bom.product.name"},{headerName:"Product Code",field:"bom.product.product_code"},{headerName:"Batch Quantity",field:"batch_quantity"},{headerName:"Updated At",field:"updated_at"},{headerName:"Status",field:"status"},{headerName:"Actions",cellRenderer:this.editButtonRenderer}],defaultColDef:{filter:!0,sortable:!0,resizable:!0,autoSize:!0},selectedRows:[]}},methods:{onRowClicked(e){this.$emit("rowClicked",e.data)},onRowSelected(e){e.node.isSelected()&&this.$emit("rowSelected",e.node.data)},onSelectionChanged(){this.$refs.agGrid&&this.$refs.agGrid.api&&(this.selectedRows=this.$refs.agGrid.api.getSelectedRows())},editButtonRenderer(e){const t=document.createElement("button");return t.innerHTML='<i class="fas fa-eye"></i>',t.classList.add("btn","btn-success"),t.addEventListener("click",(()=>this.onViewClick(e.data))),t},onViewClick(e){"In Progress"===e.status?this.$router.push(`/begin-checklist/${e.bom.id}`):this.$router.push(`/checklist-details/${e.id}`)}}};const To=(0,he.Z)(Eo,[["render",Mo],["__scopeId","data-v-4d2eec7a"]]);var qo=To,Ao={components:{CheckListsTable:qo},data(){return{rowData:[]}},mounted(){this.fetchData()},methods:{async fetchData(){try{this.$store.commit("setIsLoading",!0);const e=await ue.Z.get(`store/generated-checklists/${this.$route.params.id}`);this.rowData=e.data,console.log("checklists",e.data),this.$store.commit("setIsLoading",!1)}catch(e){console.error("Error fetching CheckLists data:",e),this.$store.commit("setIsLoading",!1)}}}};const Fo=(0,he.Z)(Ao,[["render",jo]]);var Wo=Fo;const Vo=e=>((0,l.dD)("data-v-d53e0868"),e=e(),(0,l.Cn)(),e),Zo={key:0,class:"container text-center"},zo=Vo((()=>(0,l._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,l._)("span",{class:"visually-hidden"},"Loading...")],-1))),Go=Vo((()=>(0,l._)("div",null,[(0,l._)("b",null," Loading... ")],-1))),Qo=[zo,Go],Ho={key:1,class:"container"},Yo={class:"row align-items-center"},Ko=(0,l.uE)('<div class="col-md-6 mt-4" data-v-d53e0868><div class="d-flex align-items-center" data-v-d53e0868><h2 class="mb-0" data-v-d53e0868>Checklist Details</h2><span class="ms-3 fs-4 text-muted me-3" data-v-d53e0868>|</span><nav aria-label="breadcrumb" data-v-d53e0868><ol class="breadcrumb bg-transparent m-0 p-0 justify-content-end" data-v-d53e0868><li class="breadcrumb-item" data-v-d53e0868><a href="/" data-v-d53e0868>Home</a></li><li class="breadcrumb-item active" aria-current="page" data-v-d53e0868> Checklist </li></ol></nav></div></div>',1),Jo={class:"col-md-6 mt-4 d-flex justify-content-end"},Xo={class:"container"},ec={class:"d-flex justify-content-end"},tc={key:0,type:"button","data-bs-toggle":"modal","data-bs-target":"#generateLabelModal",class:"btn btn-success me-2"},sc={key:1,type:"button","data-bs-toggle":"modal","data-bs-target":"#generateLabelModal",class:"btn btn-success me-2"},ac={class:"modal fade",id:"generateLabelModal",tabindex:"-1","aria-labelledby":"generateLabelModalLabel","aria-hidden":"true"},lc={class:"modal-dialog"},ic={class:"modal-content"},oc=Vo((()=>(0,l._)("div",{class:"modal-header"},[(0,l._)("h1",{class:"modal-title fs-5",id:"generateLabelModalLabel"}," Generate Label "),(0,l._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),cc={class:"modal-body"},rc={key:0},dc={key:0,id:"printable-content"},nc=["src"],uc={key:1},mc={key:1},hc={class:"modal-footer"},pc=Vo((()=>(0,l._)("button",{type:"button",class:"btn btn-dark","data-bs-dismiss":"modal"}," Cancel ",-1))),bc={key:0},fc={class:"card border-primary mb-4 mt-4"},_c=Vo((()=>(0,l._)("div",{class:"card-header bg-primary text-white"},[(0,l._)("h4",{class:"mb-0"},"BOM Details")],-1))),gc={class:"card-body"},yc={class:"row"},vc={key:0,class:"col"},kc=Vo((()=>(0,l._)("strong",null,"Project Name:",-1))),wc={key:1,class:"col"},Cc=Vo((()=>(0,l._)("strong",null,"Product Name:",-1))),Sc={class:"col"},Dc=Vo((()=>(0,l._)("strong",null,"BOM Rev No:",-1))),Ic={class:"col"},Pc=Vo((()=>(0,l._)("strong",null,"Issue Date:",-1))),Rc={class:"accordion",id:"accordionPanelsStayOpenExample"},xc={class:"accordion-item"},Lc={class:"accordion-header",id:"panelsStayOpen-headingOne"},$c={class:"accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseOne","aria-expanded":"true","aria-controls":"panelsStayOpen-collapseOne"},Bc={key:0},Uc=Vo((()=>(0,l._)("i",{class:"bi bi-x-circle-fill fs-4 ms-2"},null,-1))),Oc=[Uc],Nc={key:1},jc=Vo((()=>(0,l._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),Mc=[jc],Ec={id:"panelsStayOpen-collapseOne",class:"accordion-collapse collapse show","aria-labelledby":"panelsStayOpen-headingOne"},Tc={class:"accordion-body"},qc={class:"accordion-item"},Ac={class:"accordion-header",id:"panelsStayOpen-headingTwo"},Fc={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseTwo","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseTwo"},Wc={key:0},Vc=Vo((()=>(0,l._)("i",{class:"bi bi-x-circle-fill fs-4 ms-2"},null,-1))),Zc=[Vc],zc={key:1},Gc=Vo((()=>(0,l._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),Qc=[Gc],Hc={id:"panelsStayOpen-collapseTwo",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingTwo"},Yc={class:"accordion-body"},Kc={class:"accordion-item"},Jc={class:"accordion-header",id:"panelsStayOpen-headingThree"},Xc={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseThree","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseThree"},er={key:0},tr=Vo((()=>(0,l._)("i",{class:"bi bi-x-circle-fill fs-4 ms-2"},null,-1))),sr=[tr],ar={key:1},lr=Vo((()=>(0,l._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),ir=[lr],or={id:"panelsStayOpen-collapseThree",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingThree"},cr={class:"accordion-body"},rr={class:"accordion-item"},dr={class:"accordion-header",id:"panelsStayOpen-headingFour"},nr={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseFour","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseFour"},ur={key:0},mr=Vo((()=>(0,l._)("i",{class:"bi bi-x-circle-fill fs-4 ms-2"},null,-1))),hr=[mr],pr={key:1},br=Vo((()=>(0,l._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),fr=[br],_r={id:"panelsStayOpen-collapseFour",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingFour"},gr={class:"accordion-body"},yr={class:"accordion-item"},vr={class:"accordion-header",id:"panelsStayOpen-headingFive"},kr={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseFive","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseFive"},wr={key:0},Cr=Vo((()=>(0,l._)("i",{class:"bi bi-x-circle-fill fs-4 ms-2"},null,-1))),Sr=[Cr],Dr={key:1},Ir=Vo((()=>(0,l._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),Pr=[Ir],Rr={id:"panelsStayOpen-collapseFive",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingFive"},xr={class:"accordion-body"},Lr={class:"accordion-item"},$r={class:"accordion-header",id:"panelsStayOpen-headingSix"},Br={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseSix","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseSix"},Ur={key:0},Or=Vo((()=>(0,l._)("i",{class:"bi bi-x-circle-fill fs-4 ms-2"},null,-1))),Nr=[Or],jr={key:1},Mr=Vo((()=>(0,l._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),Er=[Mr],Tr={id:"panelsStayOpen-collapseSix",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingSix"},qr={class:"accordion-body"},Ar={class:"accordion-item"},Fr={class:"accordion-header",id:"panelsStayOpen-headingSeven"},Wr={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseSeven","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseSeven"},Vr={key:0},Zr=Vo((()=>(0,l._)("i",{class:"bi bi-x-circle-fill fs-4 ms-2"},null,-1))),zr=[Zr],Gr={key:1},Qr=Vo((()=>(0,l._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),Hr=[Qr],Yr={id:"panelsStayOpen-collapseSeven",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingSeven"},Kr={class:"accordion-body"},Jr={class:"accordion-item"},Xr={class:"accordion-header",id:"panelsStayOpen-headingEight"},ed={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseEight","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseEight"},td={key:0},sd=Vo((()=>(0,l._)("i",{class:"bi bi-x-circle-fill fs-4 ms-2"},null,-1))),ad=[sd],ld={key:1},id=Vo((()=>(0,l._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),od=[id],cd={id:"panelsStayOpen-collapseEight",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingEight"},rd={class:"accordion-body"},dd={class:"accordion-item"},nd={class:"accordion-header",id:"panelsStayOpen-headingNine"},ud={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseNine","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseNine"},md={key:0},hd=Vo((()=>(0,l._)("i",{class:"bi bi-x-circle-fill fs-4 ms-2"},null,-1))),pd=[hd],bd={key:1},fd=Vo((()=>(0,l._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),_d=[fd],gd={id:"panelsStayOpen-collapseNine",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingNine"},yd={class:"accordion-body"},vd={class:"accordion-item"},kd={class:"accordion-header",id:"panelsStayOpen-headingTen"},wd={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseTen","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseTen"},Cd={key:0},Sd=Vo((()=>(0,l._)("i",{class:"bi bi-x-circle-fill fs-4 ms-2"},null,-1))),Dd=[Sd],Id={key:1},Pd=Vo((()=>(0,l._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),Rd=[Pd],xd={id:"panelsStayOpen-collapseTen",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingTen"},Ld={class:"accordion-body"};function $d(e,t,s,a,i,o){const c=(0,l.up)("CheckListTable");return e.$store.state.isLoading?((0,l.wg)(),(0,l.iD)("div",Zo,Qo)):((0,l.wg)(),(0,l.iD)("div",Ho,[(0,l._)("div",Yo,[Ko,(0,l._)("div",Jo,[(0,l._)("div",Xo,[(0,l._)("div",ec,[i.generatedQRCode?((0,l.wg)(),(0,l.iD)("button",tc," View Generated Label ")):((0,l.wg)(),(0,l.iD)("button",sc," Generate Label "))])])])]),(0,l._)("div",ac,[(0,l._)("div",lc,[(0,l._)("div",ic,[oc,(0,l._)("div",cc,[i.isChecklistPassed?((0,l.wg)(),(0,l.iD)("div",rc,[i.generatedQRCode?((0,l.wg)(),(0,l.iD)("div",dc,[(0,l._)("img",{src:i.generatedQRCode,alt:"QR Code"},null,8,nc)])):((0,l.wg)(),(0,l.iD)("p",uc," All Checks passed successfully, generate a label by pressing the generate button. "))])):((0,l.wg)(),(0,l.iD)("div",mc," You can only generate a label if all checks are passed "))]),(0,l._)("div",hc,[pc,i.isChecklistPassed?((0,l.wg)(),(0,l.iD)("div",bc,[i.generatedQRCode?((0,l.wg)(),(0,l.iD)("button",{key:0,type:"button",class:"btn btn-success",onClick:t[0]||(t[0]=(...e)=>o.printQRCode&&o.printQRCode(...e))}," Print ")):((0,l.wg)(),(0,l.iD)("button",{key:1,type:"button",class:"btn btn-success",onClick:t[1]||(t[1]=(...e)=>o.generateQRCode&&o.generateQRCode(...e))}," Generate "))])):(0,l.kq)("",!0)])])])]),(0,l._)("div",fc,[_c,(0,l._)("div",gc,[(0,l._)("div",yc,[i.activeBom.product?((0,l.wg)(),(0,l.iD)("div",vc,[kc,(0,l.Uk)(" "+(0,fe.zw)(i.activeBom.product.project.name),1)])):(0,l.kq)("",!0),i.activeBom.product?((0,l.wg)(),(0,l.iD)("div",wc,[Cc,(0,l.Uk)(" "+(0,fe.zw)(i.activeBom.product.name),1)])):(0,l.kq)("",!0),(0,l._)("div",Sc,[Dc,(0,l.Uk)(" "+(0,fe.zw)(i.activeBom.bom_rev_number),1)]),(0,l._)("div",Ic,[Pc,(0,l.Uk)(" "+(0,fe.zw)(i.activeBom.issue_date),1)])])])]),(0,l._)("div",Rc,[(0,l._)("div",xc,[(0,l._)("h2",Lc,[(0,l._)("button",$c,[(0,l.Uk)(" Raw Material Check "),0==i.isRawMaterialSufficient?((0,l.wg)(),(0,l.iD)("div",Bc,Oc)):((0,l.wg)(),(0,l.iD)("div",Nc,Mc))])]),(0,l._)("div",Ec,[(0,l._)("div",Tc,[(0,l.Wm)(c,{checklistItems:i.filteredChecklistItems["Raw Material"]},null,8,["checklistItems"])])])]),(0,l._)("div",qc,[(0,l._)("h2",Ac,[(0,l._)("button",Fc,[(0,l.Uk)(" PCB Check "),0==i.isPcbSufficient?((0,l.wg)(),(0,l.iD)("div",Wc,Zc)):((0,l.wg)(),(0,l.iD)("div",zc,Qc))])]),(0,l._)("div",Hc,[(0,l._)("div",Yc,[(0,l.Wm)(c,{checklistItems:i.filteredChecklistItems["PCB"]},null,8,["checklistItems"])])])]),(0,l._)("div",Kc,[(0,l._)("h2",Jc,[(0,l._)("button",Xc,[(0,l.Uk)(" Solder Paste "),0==i.isSolderPasteSufficient?((0,l.wg)(),(0,l.iD)("div",er,sr)):((0,l.wg)(),(0,l.iD)("div",ar,ir))])]),(0,l._)("div",or,[(0,l._)("div",cr,[(0,l.Wm)(c,{checklistItems:i.filteredChecklistItems["Solder Paste"]},null,8,["checklistItems"])])])]),(0,l._)("div",rr,[(0,l._)("h2",dr,[(0,l._)("button",nr,[(0,l.Uk)(" Solder Bar "),0==i.isSolderBarSufficient?((0,l.wg)(),(0,l.iD)("div",ur,hr)):((0,l.wg)(),(0,l.iD)("div",pr,fr))])]),(0,l._)("div",_r,[(0,l._)("div",gr,[(0,l.Wm)(c,{checklistItems:i.filteredChecklistItems["Solder Bar"]},null,8,["checklistItems"]),(0,l.Uk)("> ")])])]),(0,l._)("div",yr,[(0,l._)("h2",vr,[(0,l._)("button",kr,[(0,l.Uk)(" Solder Flux "),0==i.isSolderFluxSufficient?((0,l.wg)(),(0,l.iD)("div",wr,Sr)):((0,l.wg)(),(0,l.iD)("div",Dr,Pr))])]),(0,l._)("div",Rr,[(0,l._)("div",xr,[(0,l.Wm)(c,{checklistItems:i.filteredChecklistItems["Solder Flux"]},null,8,["checklistItems"])])])]),(0,l._)("div",Lr,[(0,l._)("h2",$r,[(0,l._)("button",Br,[(0,l.Uk)(" IPA "),0==i.isIpaSufficient?((0,l.wg)(),(0,l.iD)("div",Ur,Nr)):((0,l.wg)(),(0,l.iD)("div",jr,Er))])]),(0,l._)("div",Tr,[(0,l._)("div",qr,[(0,l.Wm)(c,{checklistItems:i.filteredChecklistItems["IPA"]},null,8,["checklistItems"])])])]),(0,l._)("div",Ar,[(0,l._)("h2",Fr,[(0,l._)("button",Wr,[(0,l.Uk)(" Solder Wire "),0==i.isSolderWireSufficient?((0,l.wg)(),(0,l.iD)("div",Vr,zr)):((0,l.wg)(),(0,l.iD)("div",Gr,Hr))])]),(0,l._)("div",Yr,[(0,l._)("div",Kr,[(0,l.Wm)(c,{checklistItems:i.filteredChecklistItems["Solder Wire"]},null,8,["checklistItems"])])])]),(0,l._)("div",Jr,[(0,l._)("h2",Xr,[(0,l._)("button",ed,[(0,l.Uk)(" SMT Pallet "),0==i.isSMTPalletSufficient?((0,l.wg)(),(0,l.iD)("div",td,ad)):((0,l.wg)(),(0,l.iD)("div",ld,od))])]),(0,l._)("div",cd,[(0,l._)("div",rd,[(0,l.Wm)(c,{checklistItems:i.filteredChecklistItems["SMT Pallet"]},null,8,["checklistItems"])])])]),(0,l._)("div",dd,[(0,l._)("h2",nd,[(0,l._)("button",ud,[(0,l.Uk)(" Wave Pallet "),0==i.isWavePalletSufficient?((0,l.wg)(),(0,l.iD)("div",md,pd)):((0,l.wg)(),(0,l.iD)("div",bd,_d))])]),(0,l._)("div",gd,[(0,l._)("div",yd,[(0,l.Wm)(c,{checklistItems:i.filteredChecklistItems["Wave Pallet"]},null,8,["checklistItems"])])])]),(0,l._)("div",vd,[(0,l._)("h2",kd,[(0,l._)("button",wd,[(0,l.Uk)(" PCB Serial Number Label "),0==i.isLabelSufficient?((0,l.wg)(),(0,l.iD)("div",Cd,Dd)):((0,l.wg)(),(0,l.iD)("div",Id,Rd))])]),(0,l._)("div",xd,[(0,l._)("div",Ld,[(0,l.Wm)(c,{checklistItems:i.filteredChecklistItems["PCB Serial Number Label"]},null,8,["checklistItems"])])])])])]))}var Bd={components:{CheckListTable:bo},data(){return{activeBom:"",checklist:"",checklistItems:[],isRawMaterialSufficient:!1,isPcbSufficient:!1,isSolderPasteSufficient:!1,isSolderBarSufficient:!1,isSolderFluxSufficient:!1,isIpaSufficient:!1,isSolderWireSufficient:!1,isSMTPalletSufficient:!1,isWavePalletSufficient:!1,isLabelSufficient:!1,isChecklistPassed:!1,isChecklistEnded:!1,pollingInterval:"",filteredChecklistItems:{"Raw Material":[],PCB:[],"Solder Paste":[],"Solder Bar":[],"Solder Flux":[],IPA:[],"Solder Wire":[],"SMT Pallet":[],"Wave Pallet":[],"PCB Serial Number Label":[]},generatedQRCode:""}},mounted(){this.getChecklist()},methods:{async getChecklist(){this.$store.commit("setIsLoading",!0),await ue.Z.get(`store/get-checklist-details/${this.$route.params.id}/`).then((e=>{console.log("yehh",e.data),this.checklist=e.data.checklist,this.checklistItems=this.checklist.checklist_items,console.log("chehcklist items hereeeeee",this.checklistItems),console.log("chehcklist items hereeeeee",this.checklistItems);const t=this.filterChecklistItemsByType("Raw Material");console.log(t);const s=this.filterChecklistItemsByType("PCB"),a=this.filterChecklistItemsByType("Solder Paste"),l=this.filterChecklistItemsByType("Solder Bar"),i=this.filterChecklistItemsByType("Solder Flux"),o=this.filterChecklistItemsByType("IPA"),c=this.filterChecklistItemsByType("Solder Wire"),r=this.filterChecklistItemsByType("SMT Pallet"),d=this.filterChecklistItemsByType("Wave Pallet"),n=this.filterChecklistItemsByType("PCB Serial Number Label");this.isChecklistPassed=this.checklist.is_passed,this.activeBom=this.checklist.bom,this.filteredChecklistItems={"Raw Material":t,PCB:s,"Solder Paste":a,"Solder Bar":l,"Solder Flux":i,IPA:o,"Solder Wire":c,"SMT Pallet":r,"Wave Pallet":d,"PCB Serial Number Label":n},console.log("filered checklsit items",this.filteredChecklistItems),this.isRawMaterialSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Raw Material"),this.isPcbSufficient=this.isItemsSufficient(this.filteredChecklistItems,"PCB"),this.isSolderPasteSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Paste"),this.isSolderBarSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Bar"),console.log("checking solder bar",this.isSolderBarSufficient),this.isSolderFluxSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Flux"),this.isIpaSufficient=this.isItemsSufficient(this.filteredChecklistItems,"IPA"),this.isSolderWireSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Solder Wire"),this.isSMTPalletSufficient=this.isItemsSufficient(this.filteredChecklistItems,"SMT Pallet"),this.isWavePalletSufficient=this.isItemsSufficient(this.filteredChecklistItems,"Wave Pallet"),this.isLabelSufficient=this.isItemsSufficient(this.filteredChecklistItems,"PCB Serial Number Label"),this.isChecklistPassed=this.checklist.is_passed,this.activeBom=this.checklist.bom,"Completed"!=this.checklist.status&&"Failed"!=this.checklist.status||(this.isChecklistEnded=!0),this.checklist.qr_code_link&&(this.generatedQRCode=this.checklist.qr_code_link),this.$store.commit("setIsLoading",!1)})).catch((e=>{console.log("error:",e),this.$notify({title:"An error occured, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1)}))},filterChecklistItemsByType(e){return this.checklistItems.filter((t=>{const s=t.checklist_item_type;return!(!s||!s.name)&&s.name.toLowerCase()===e.toLowerCase()}))},isItemsSufficient(e,t){const s=this.filteredChecklistItems[t];if(0===s.length)return!0;const a=s.filter((e=>!0===e.is_quantity_sufficient));return a.length===s.length},async generateQRCode(){const e=this.generateUniqueCode();console.log(e);const t=await fo.toDataURL(e),s={uniqueCode:e,qrCodeDataURL:t};this.saveQRCode(s)},generateUniqueCode(){const e=Date.now().toString(),t=Math.random().toString(36).substring(7);return`${e}-${t}`},async saveQRCode(e){await ue.Z.post(`store/save-qr-code/${this.checklist.id}/`,e).then((t=>{console.log(t.data),this.generatedQRCode=e.qrCodeDataURL,this.$notify({title:"QR Code generated and saved successfully",type:"bg-success-subtle text-success",duration:"5000"})})).catch((e=>{console.log("error:",e),this.$notify({title:"An error occured, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"})}))},printQRCode(){if(this.generatedQRCode){const e=document.getElementById("printable-content"),t=window.open("","","height=1000,width=1000");t.document.write(e.innerHTML),t.print()}}}};const Ud=(0,he.Z)(Bd,[["render",$d],["__scopeId","data-v-d53e0868"]]);var Od=Ud;const Nd={class:"container"},jd=(0,l.uE)('<div class="row align-items-center"><div class="col-md-6 mt-4"><div class="d-flex align-items-center"><h2 class="mb-0">Reports</h2><span class="ms-3 fs-4 text-muted">|</span><nav aria-label="breadcrumb" class="d-inline-block ms-3"><ol class="breadcrumb bg-transparent m-0 p-0"><li class="breadcrumb-item"><a href="/"><i class="fas fa-home me-1"></i>Home</a></li><li class="breadcrumb-item active" aria-current="page"><i class="fas fa-chart-bar me-1"></i> Reports </li></ol></nav></div></div></div>',1),Md={class:"conatiner"},Ed={class:"list-group pt-4"};function Td(e,t){const s=(0,l.up)("router-link");return(0,l.wg)(),(0,l.iD)("div",Nd,[jd,(0,l._)("div",Md,[(0,l._)("ul",Ed,[(0,l.Wm)(s,{class:"list-group-item list-group-item-action text-left",to:"/checklist-report"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Checklist Report ")])),_:1})])])])}const qd={},Ad=(0,he.Z)(qd,[["render",Td]]);var Fd=Ad;const Wd=e=>((0,l.dD)("data-v-bbcef4d6"),e=e(),(0,l.Cn)(),e),Vd={key:0,class:"container text-center"},Zd=Wd((()=>(0,l._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,l._)("span",{class:"visually-hidden"},"Loading...")],-1))),zd=Wd((()=>(0,l._)("div",null,[(0,l._)("b",null," Loading... ")],-1))),Gd=[Zd,zd],Qd={key:1,class:"container"},Hd={class:"row align-items-center"},Yd=(0,l.uE)('<div class="col-md-6 mt-4" data-v-bbcef4d6><div class="d-flex align-items-center" data-v-bbcef4d6><h2 class="mb-0" data-v-bbcef4d6>Dashboard</h2><span class="ms-3 fs-4 text-muted" data-v-bbcef4d6>|</span><nav aria-label="breadcrumb" class="d-inline-block ms-3" data-v-bbcef4d6><ol class="breadcrumb bg-transparent m-0 p-0" data-v-bbcef4d6><li class="breadcrumb-item" data-v-bbcef4d6><a href="/" data-v-bbcef4d6><i class="fas fa-home me-1" data-v-bbcef4d6></i>Home</a></li><li class="breadcrumb-item active" aria-current="page" data-v-bbcef4d6><i class="fa fa-tachometer me-1" aria-hidden="true" data-v-bbcef4d6></i> Dashboard </li></ol></nav></div></div>',1),Kd={class:"col-md-6 mt-4 text-end"},Jd={class:"container"},Xd={class:"dropdown"},en={class:"btn btn-secondary dropdown-toggle",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"},tn={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton1"},sn=Wd((()=>(0,l._)("a",{class:"dropdown-item",href:"#"},"Today",-1))),an=[sn],ln=Wd((()=>(0,l._)("a",{class:"dropdown-item",href:"#"},"Previous Week",-1))),on=[ln],cn=Wd((()=>(0,l._)("a",{class:"dropdown-item",href:"#"},"Previous Month",-1))),rn=[cn],dn=Wd((()=>(0,l._)("li",null,[(0,l._)("button",{type:"button",class:"btn","data-bs-toggle":"modal","data-bs-target":"#exampleModal"}," Custom Date Range ")],-1))),nn={class:"row mt-4",style:{display:"flex",gap:"30px","justify-content":"space-between"}},un={class:"small-box bg-gradient-success",style:{flex:"1"}},mn={class:"inner"},hn=Wd((()=>(0,l._)("p",null,"Completed",-1))),pn=Wd((()=>(0,l._)("div",{class:"icon"},[(0,l._)("i",{class:"fa-solid fa-check"})],-1))),bn={class:"small-box bg-gradient-primary",style:{flex:"1"}},fn={class:"inner"},_n=Wd((()=>(0,l._)("p",null,"In Progress",-1))),gn=Wd((()=>(0,l._)("div",{class:"icon"},[(0,l._)("i",{class:"fa-solid fa-spinner"})],-1))),yn={class:"small-box bg-gradient-danger",style:{flex:"1"}},vn={class:"inner"},kn=Wd((()=>(0,l._)("p",null,"Failed",-1))),wn=Wd((()=>(0,l._)("div",{class:"icon"},[(0,l._)("i",{class:"fa-solid fa-xmark"})],-1))),Cn={class:"row mt-4 d-flex"},Sn={class:"col-6"},Dn={class:"card card-primary"},In={class:"card-header"},Pn=Wd((()=>(0,l._)("h3",{class:"card-title"},"In Progress Checklists",-1))),Rn={class:"card-tools"},xn={class:"card-body"},Ln={class:"row"},$n={key:0},Bn={class:"list-group list-group-flush"},Un={key:1},On={class:"col-6"},Nn={class:"card card-success"},jn={class:"card-header"},Mn=Wd((()=>(0,l._)("h3",{class:"card-title"},"Completed Checklists",-1))),En={class:"card-tools"},Tn={class:"card-body"},qn={class:"row"},An={key:0},Fn={class:"list-group list-group-flush"},Wn=["onClick"],Vn={key:1},Zn={class:"row mt-4 d-flex"},zn={class:"col-6"},Gn={class:"card card-danger"},Qn={class:"card-header"},Hn=Wd((()=>(0,l._)("h3",{class:"card-title"},"Failed Checklists",-1))),Yn={class:"card-tools"},Kn={class:"card-body"},Jn={class:"row"},Xn={key:0},eu={class:"list-group list-group-flush"},tu=["onClick"],su=Wd((()=>(0,l._)("i",{class:"fas fa-eye"},null,-1))),au={key:1},lu=Wd((()=>(0,l._)("div",{class:"col-6"},null,-1))),iu={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},ou={class:"modal-dialog"},cu={class:"modal-content"},ru=Wd((()=>(0,l._)("div",{class:"modal-header"},[(0,l._)("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},[(0,l._)("strong",null,"Custom Date Range")]),(0,l._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),du={class:"modal-body"},nu={class:"mb-3"},uu=Wd((()=>(0,l._)("label",{for:"startDate",class:"form-label"},"Start Date:",-1))),mu={class:"mb-3"},hu=Wd((()=>(0,l._)("label",{for:"endDate",class:"form-label"},"End Date:",-1))),pu={key:0,class:"alert alert-danger mt-3 p-2"},bu=Wd((()=>(0,l._)("i",{class:"fas fa-exclamation-triangle"},null,-1))),fu={class:"modal-footer"},_u=Wd((()=>(0,l._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1))),gu=["disabled"];function yu(e,t,s,i,o,c){return e.$store.state.isLoading?((0,l.wg)(),(0,l.iD)("div",Vd,Gd)):((0,l.wg)(),(0,l.iD)("div",Qd,[(0,l._)("div",Hd,[Yd,(0,l._)("div",Kd,[(0,l._)("div",Jd,[(0,l._)("div",Xd,[(0,l._)("button",en,(0,fe.zw)("Previous_Week"===o.selectedOption?"Previous Week":"Previous_Month"===o.selectedOption?"Previous Month":o.selectedOption),1),(0,l._)("ul",tn,[(0,l._)("li",{onClick:t[0]||(t[0]=e=>c.selectOption("Today")),class:(0,fe.C_)({active:"Today"===o.selectedOption})},an,2),(0,l._)("li",{onClick:t[1]||(t[1]=e=>c.selectOption("Previous_Week")),class:(0,fe.C_)({active:"Previous_Week"===o.selectedOption})},on,2),(0,l._)("li",{onClick:t[2]||(t[2]=e=>c.selectOption("Previous_Month")),class:(0,fe.C_)({active:"Previous_Month"===o.selectedOption})},rn,2),dn])])])])]),(0,l._)("div",nn,[(0,l._)("div",un,[(0,l._)("div",mn,[(0,l._)("h3",null,(0,fe.zw)(o.result.completed_checklists?o.result.completed_checklists.length:"Loading"),1),hn]),pn]),(0,l._)("div",bn,[(0,l._)("div",fn,[(0,l._)("h3",null,(0,fe.zw)(o.result.in_progress?o.result.in_progress.length:"Loading"),1),_n]),gn]),(0,l._)("div",yn,[(0,l._)("div",vn,[(0,l._)("h3",null,(0,fe.zw)(o.result.failed_checklists?o.result.failed_checklists.length:"Loading"),1),kn]),wn])]),(0,l._)("div",Cn,[(0,l._)("div",Sn,[(0,l._)("div",Dn,[(0,l._)("div",In,[Pn,(0,l._)("div",Rn,[(0,l._)("button",{class:"btn btn-primary btn-sm",onClick:t[3]||(t[3]=(...e)=>c.redirectToGeneratedChecklistPage&&c.redirectToGeneratedChecklistPage(...e))}," View All ")])]),(0,l._)("div",xn,[(0,l._)("div",Ln,[o.result&&o.result.in_progress&&o.result.in_progress.length>0?((0,l.wg)(),(0,l.iD)("div",$n,[(0,l._)("ul",Bn,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(o.result.in_progress,((e,s)=>((0,l.wg)(),(0,l.iD)("li",{key:s,class:"list-group-item d-flex justify-content-between align-items-center",style:{cursor:"pointer"}},[(0,l.Uk)((0,fe.zw)(e.bom.product.name)+" - "+(0,fe.zw)(e.updated_at)+" ",1),(0,l._)("i",{class:"fas fa-eye",onClick:t[4]||(t[4]=e=>c.InProgressRedirectToChecklist())})])))),128))])])):((0,l.wg)(),(0,l.iD)("div",Un,"None"))])])])]),(0,l._)("div",On,[(0,l._)("div",Nn,[(0,l._)("div",jn,[Mn,(0,l._)("div",En,[(0,l._)("button",{class:"btn btn-success btn-sm",onClick:t[5]||(t[5]=e=>c.redirectToGeneratedChecklistPage())}," View All ")])]),(0,l._)("div",Tn,[(0,l._)("div",qn,[o.result&&o.result.completed_checklists&&o.result.completed_checklists.length>0?((0,l.wg)(),(0,l.iD)("div",An,[(0,l._)("ul",Fn,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(o.result.completed_checklists,((e,t)=>((0,l.wg)(),(0,l.iD)("li",{key:t,class:"list-group-item d-flex justify-content-between align-items-center",style:{cursor:"pointer"}},[(0,l.Uk)((0,fe.zw)(e.bom.product.name)+" - "+(0,fe.zw)(e.updated_at)+" ",1),(0,l._)("i",{class:"fas fa-eye",onClick:t=>c.CompletedRedirectToDetailsChecklist(e.id)},null,8,Wn)])))),128))])])):((0,l.wg)(),(0,l.iD)("div",Vn,"None"))])])])])]),(0,l._)("div",Zn,[(0,l._)("div",zn,[(0,l._)("div",Gn,[(0,l._)("div",Qn,[Hn,(0,l._)("div",Yn,[(0,l._)("button",{class:"btn btn-danger btn-sm",onClick:t[6]||(t[6]=(...e)=>c.redirectToGeneratedChecklistPage&&c.redirectToGeneratedChecklistPage(...e))}," View All ")])]),(0,l._)("div",Kn,[(0,l._)("div",Jn,[o.result&&o.result.failed_checklists&&o.result.failed_checklists.length>0?((0,l.wg)(),(0,l.iD)("div",Xn,[(0,l._)("ul",eu,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(o.result.failed_checklists,((e,t)=>((0,l.wg)(),(0,l.iD)("li",{key:t,class:"list-group-item d-flex justify-content-between align-items-center",onClick:t=>c.FailedRedirectToDetailsChecklist(e.id),style:{cursor:"pointer"}},[(0,l.Uk)((0,fe.zw)(e.bom.product.name)+" - "+(0,fe.zw)(e.updated_at)+" ",1),su],8,tu)))),128))])])):((0,l.wg)(),(0,l.iD)("div",au,"None"))])])])]),lu]),(0,l._)("div",iu,[(0,l._)("div",ou,[(0,l._)("div",cu,[ru,(0,l._)("div",du,[(0,l._)("div",nu,[uu,(0,l.wy)((0,l._)("input",{id:"startDate",type:"date","onUpdate:modelValue":t[7]||(t[7]=e=>o.selectedStartDate=e),class:"form-control",placeholder:"Select start date",onInput:t[8]||(t[8]=(...e)=>c.validateDates&&c.validateDates(...e))},null,544),[[a.nr,o.selectedStartDate]])]),(0,l._)("div",mu,[hu,(0,l.wy)((0,l._)("input",{id:"endDate",type:"date","onUpdate:modelValue":t[9]||(t[9]=e=>o.selectedEndDate=e),class:"form-control",placeholder:"Select end date",onInput:t[10]||(t[10]=(...e)=>c.validateDates&&c.validateDates(...e))},null,544),[[a.nr,o.selectedEndDate]])]),o.errorMessage?((0,l.wg)(),(0,l.iD)("div",pu,[bu,(0,l.Uk)(" "+(0,fe.zw)(o.errorMessage),1)])):(0,l.kq)("",!0)]),(0,l._)("div",fu,[_u,(0,l._)("button",{type:"button",class:"btn btn-success",onClick:t[11]||(t[11]=(...e)=>c.setSelectedOptionAndFetchData&&c.setSelectedOptionAndFetchData(...e)),disabled:c.isFetchButtonDisabled,"data-bs-dismiss":"modal"}," Fetch Checklists ",8,gu)])])])])]))}var vu={components:{},data(){return{selectedOption:"Today",result:{},selectedCustomDate:null,selectedStartDate:"",selectedEndDate:"",errorMessage:""}},computed:{isFetchButtonDisabled(){return!this.selectedStartDate||!this.selectedEndDate||new Date(this.selectedStartDate)>new Date(this.selectedEndDate)||new Date(this.selectedStartDate)>new Date||new Date(this.selectedEndDate)>new Date}},mounted(){this.fetchData()},methods:{validateDates(){if(!this.selectedStartDate)return void(this.errorMessage="Please select a start date.");const e=new Date(this.selectedStartDate),t=new Date;if(e>t)return void(this.errorMessage="Start date cannot be in the future.");if(!this.selectedEndDate)return void(this.errorMessage="");const s=new Date(this.selectedEndDate);this.errorMessage=e>s?"Start date cannot be greater than end date.":s>t?"End date cannot be in the future.":""},selectOption(e){this.selectedOption=e,"Custom"!==this.selectOption&&this.fetchData()},async fetchData(){const e={selected_option:this.selectedOption,start_date:this.selectedStartDate,end_date:this.selectedEndDate};console.log(e.selected_option),console.log(e.start_date),console.log(e.end_date),this.$store.commit("setIsLoading",!0),await ue.Z.post("store/get-checklist-count/",e).then((e=>{this.result=e.data,console.log("backend data",this.result),this.$store.commit("setIsLoading",!1)})).catch((e=>{console.error(e),this.$store.commit("setIsLoading",!1)}))},setSelectedOptionAndFetchData(){this.selectedOption="Custom",this.validateDates(),""===this.errorMessage&&this.fetchData()},redirectToGeneratedChecklistPage(){const e=[...this.result.in_progress,...this.result.completed_checklists,...this.result.failed_checklists],t=e.find((e=>void 0!==e.bom?.id&&null!==e.bom?.id));if(t){const e=t.bom.id;console.log(e),this.$router.push(`/generated-checklists/${e}`)}else console.error("No valid id found in the checklists")},InProgressRedirectToChecklist(){const e=this.result?.in_progress?.[0]?.bom?.id;console.log(e),void 0!==e&&null!==e?this.$router.push(`/begin-checklist/${e}`):console.error("id is not available")},FailedRedirectToDetailsChecklist(e){void 0!==e&&null!==e?this.$router.push(`/checklist-details/${e}`):console.error("checklistId is not available")},CompletedRedirectToDetailsChecklist(e){void 0!==e&&null!==e?this.$router.push(`/checklist-details/${e}`):console.error("checklistId is not available")}}};const ku=(0,he.Z)(vu,[["render",yu],["__scopeId","data-v-bbcef4d6"]]);var wu=ku;const Cu={key:0,class:"container text-center"},Su=(0,l._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,l._)("span",{class:"visually-hidden"},"Loading...")],-1),Du=(0,l._)("div",null,[(0,l._)("b",null," Loading... ")],-1),Iu=[Su,Du],Pu={key:1,class:"container"},Ru={class:"row align-items-center"},xu={class:"d-flex align-items-center mt-4"},Lu=(0,l._)("h2",{class:"mb-0"},"Checklist Report",-1),$u=(0,l._)("span",{class:"ms-3 fs-4 text-muted"},"|",-1),Bu={"aria-label":"breadcrumb",class:"d-inline-block ms-3"},Uu={class:"breadcrumb bg-transparent m-0 p-0"},Ou=(0,l._)("li",{class:"breadcrumb-item"},[(0,l._)("a",{href:"/"},[(0,l._)("i",{class:"fas fa-home me-1"}),(0,l.Uk)("Home")])],-1),Nu={class:"breadcrumb-item active"},ju=(0,l._)("i",{class:"fas fa-chart-bar me-1"},null,-1),Mu=(0,l._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,l._)("i",{class:"fas fa-file-alt me-1"}),(0,l.Uk)(" Reports Checklist ")],-1);function Eu(e,t,s,a,i,o){const c=(0,l.up)("router-link"),r=(0,l.up)("ChecklistReportTable");return e.$store.state.isLoading?((0,l.wg)(),(0,l.iD)("div",Cu,Iu)):((0,l.wg)(),(0,l.iD)("div",Pu,[(0,l._)("div",Ru,[(0,l._)("div",xu,[Lu,$u,(0,l._)("nav",Bu,[(0,l._)("ol",Uu,[Ou,(0,l._)("li",Nu,[(0,l.Wm)(c,{to:"/reports"},{default:(0,l.w5)((()=>[ju,(0,l.Uk)("Reports")])),_:1})]),Mu])])])]),(0,l.Wm)(r,{checklists:i.checklists,style:{"margin-top":"20px"}},null,8,["checklists"])]))}const Tu=e=>((0,l.dD)("data-v-4216ffe3"),e=e(),(0,l.Cn)(),e),qu={class:"card card-outline card-primary mt-3"},Au={class:"card-body"},Fu={class:"row"},Wu={class:"col-md-3 text-center"},Vu=Tu((()=>(0,l._)("h6",{class:"lead"},"Total Completed",-1))),Zu={class:"display-6"},zu={class:"col-md-3 text-center"},Gu=Tu((()=>(0,l._)("h6",{class:"lead"},"Total In Progress",-1))),Qu={class:"display-6"},Hu={class:"col-md-3 text-center"},Yu=Tu((()=>(0,l._)("h6",{class:"lead"},"Total Failed",-1))),Ku={class:"display-6"},Ju={class:"col-md-3 text-center"},Xu=Tu((()=>(0,l._)("h6",{class:"lead"},"Total Checklists",-1))),em={class:"display-6"};function tm(e,t,s,a,i,o){const c=(0,l.up)("ag-grid-vue");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l._)("div",qu,[(0,l._)("div",Au,[(0,l._)("div",Fu,[(0,l._)("div",Wu,[Vu,(0,l._)("p",Zu,(0,fe.zw)(i.total_completed),1)]),(0,l._)("div",zu,[Gu,(0,l._)("p",Qu,(0,fe.zw)(i.total_in_progress),1)]),(0,l._)("div",Hu,[Yu,(0,l._)("p",Ku,(0,fe.zw)(i.total_failed),1)]),(0,l._)("div",Ju,[Xu,(0,l._)("p",em,(0,fe.zw)(i.total_checklists),1)])])])]),(0,l._)("div",null,[(0,l.Wm)(c,{style:{height:"500px"},class:"ag-theme-quartz",rowData:s.checklists,defaultColDef:i.defaultColDef,columnDefs:i.colDefs,pagination:!0,onFirstDataRendered:o.onFirstDataRendered,onGridReady:o.onGridReady},null,8,["rowData","defaultColDef","columnDefs","onFirstDataRendered","onGridReady"])])])}var sm={components:{AgGridVue:$t.n},props:{checklists:{type:Array,required:!0}},data(){return{colDefs:[{headerName:"Checklist ID",field:"id"},{headerName:"Unique Code",field:"unique_code",valueFormatter:function(e){return null===e.value?"null":e.value}},{headerName:"Project Name",field:"bom.product.project.name"},{headerName:"Product Name",field:"bom.product.name"},{headerName:"Product Code",field:"bom.product.product_code"},{headerName:"Updated At",field:"updated_at"},{headerName:"Updated By",valueGetter:function(e){if(console.log(e.data.updated_by),null!=e.data.updated_by){const t=e.data.updated_by.first_name||"",s=e.data.updated_by.last_name||"";return t||s?`${t} ${s}`:""}return""}},{headerName:"Created At",field:"created_at"},{headerName:"Created By",valueGetter:function(e){const t=e.data.created_by.first_name||"",s=e.data.created_by.last_name||"";return t||s?`${t} ${s}`:""}},{headerName:"Status",field:"status"},{headerName:"View",cellRenderer:this.viewButtonRenderer}],defaultColDef:{filter:!0,sortable:!0,resizable:!0,autoSize:!0},gridApi:null,total_completed:0,total_in_progress:0,total_failed:0,total_checklists:0}},mounted(){},methods:{onFirstDataRendered(){this.calculateTotalSum(),this.gridApi.addEventListener("filterChanged",this.calculateTotalSum)},onGridReady(e){this.gridApi=e.api},calculateTotalSum(){let e=0,t=0,s=0;this.gridApi.forEachNodeAfterFilter((a=>{"Completed"==a.data.status?e+=1:"In Progress"==a.data.status?t+=1:s+=1})),this.total_completed=e,this.total_failed=s,this.total_in_progress=t,this.total_checklists=this.gridApi.getDisplayedRowCount()},viewButtonRenderer(e){const t=document.createElement("button");return t.innerHTML='<i class="fas fa-eye"></i>',t.classList.add("btn","btn-outline-secondary"),t.addEventListener("click",(()=>this.onViewClick(e.data))),t},onViewClick(e){"In Progress"===e.status?this.$router.push(`/begin-checklist/${e.bom.id}`):this.$router.push(`/checklist-details/${e.id}`)}}};const am=(0,he.Z)(sm,[["render",tm],["__scopeId","data-v-4216ffe3"]]);var lm=am,im={components:{ChecklistReportTable:lm},data(){return{checklists:[]}},mounted(){this.getChecklistReport()},methods:{async getChecklistReport(){console.log("run"),this.$store.commit("setIsLoading",!0),this.$store.commit("setIsLoading",!1),await ue.Z.get("store/get-checklist-report/").then((e=>{console.log(e.data),this.checklists=e.data.checklists,this.$store.commit("setIsLoading",!1)})).catch((e=>{console.log("error:",e),this.$notify({title:"An error occured, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1)}))}}};const om=(0,he.Z)(im,[["render",Eu]]);var cm=om;const rm=e=>((0,l.dD)("data-v-4239cd5f"),e=e(),(0,l.Cn)(),e),dm={key:0,class:"container text-center"},nm=rm((()=>(0,l._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,l._)("span",{class:"visually-hidden"},"Loading...")],-1))),um=rm((()=>(0,l._)("div",null,[(0,l._)("b",null," Loading... ")],-1))),mm=[nm,um],hm={key:1,class:"container"},pm={class:"row align-items-center"},bm={class:"col-md-6 mt-4"},fm={class:"d-flex align-items-center"},_m=rm((()=>(0,l._)("h2",{class:"mb-0"},"Users",-1))),gm=rm((()=>(0,l._)("span",{class:"ms-3 fs-4 text-muted"},"|",-1))),ym={"aria-label":"breadcrumb",class:"d-inline-block ms-3"},vm={class:"breadcrumb bg-transparent m-0 p-0"},km={class:"breadcrumb-item"},wm=rm((()=>(0,l._)("i",{class:"fas fa-home me-1"},null,-1))),Cm=rm((()=>(0,l._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,l._)("i",{class:"fas fa-users me-1"}),(0,l.Uk)("Users ")],-1))),Sm={class:"col-md-6 mt-4 text-end"},Dm=rm((()=>(0,l._)("i",{class:"fas fa-user-plus me-1"},null,-1))),Im={class:"container mt-5"},Pm={class:"table table-hover"},Rm=rm((()=>(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th",null,"Email"),(0,l._)("th",null,"Actions")])],-1))),xm=["onClick"],Lm=rm((()=>(0,l._)("i",{class:"fas fa-edit me-1"},null,-1))),$m=["onClick"],Bm=rm((()=>(0,l._)("i",{class:"fas fa-trash-alt me-1"},null,-1)));function Um(e,t,s,a,i,o){const c=(0,l.up)("router-link");return e.$store.state.isLoading?((0,l.wg)(),(0,l.iD)("div",dm,mm)):((0,l.wg)(),(0,l.iD)("div",hm,[(0,l._)("div",pm,[(0,l._)("div",bm,[(0,l._)("div",fm,[_m,gm,(0,l._)("nav",ym,[(0,l._)("ol",vm,[(0,l._)("li",km,[(0,l.Wm)(c,{to:"/"},{default:(0,l.w5)((()=>[wm,(0,l.Uk)(" Home")])),_:1})]),Cm])])])]),(0,l._)("div",Sm,[(0,l.Wm)(c,{to:"/users/create-user",class:"btn btn-primary btn-sm ms-2"},{default:(0,l.w5)((()=>[Dm,(0,l.Uk)(" Create New User ")])),_:1})])]),(0,l._)("div",Im,[(0,l._)("table",Pm,[Rm,(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(i.userList,(e=>((0,l.wg)(),(0,l.iD)("tr",{key:e.id,onClick:t=>o.redirectToEditPage(e.id)},[(0,l._)("td",null,(0,fe.zw)(e.email),1),(0,l._)("td",null,[(0,l.Wm)(c,{to:{name:"EditUser",params:{id:e.id}},class:"btn btn-primary btn-sm"},{default:(0,l.w5)((()=>[Lm,(0,l.Uk)(" Edit ")])),_:2},1032,["to"]),(0,l._)("button",{onClick:t=>o.deleteUser(t,e.id),class:"btn btn-danger btn-sm ml-3"},[Bm,(0,l.Uk)(" Delete ")],8,$m)])],8,xm)))),128))])])])]))}var Om={name:"UserManagement",data(){return{userList:[]}},mounted(){this.fetchUsers()},methods:{fetchUsers(){this.$store.commit("setIsLoading",!0),ue.Z.get("/accounts/users/").then((e=>{console.log("response.data",e.data),this.userList=e.data,this.$store.commit("setIsLoading",!1)})).catch((e=>{console.error("Error fetching users:",e),this.$store.commit("setIsLoading",!1)}))},redirectToEditPage(e){this.$router.push({name:"EditUser",params:{id:e}})},deleteUser(e,t){e.stopPropagation(),confirm("Are you sure you want to delete this user?")&&ue.Z.delete(`/accounts/users/delete/${t}/`).then((()=>{console.log("User deleted successfully."),alert("User Deleted successfully!"),this.fetchUsers(),this.$router.push("/users")})).catch((e=>{alert("error deleting!"),console.error("Error deleting user:",e)}))}}};const Nm=(0,he.Z)(Om,[["render",Um],["__scopeId","data-v-4239cd5f"]]);var jm=Nm;const Mm=e=>((0,l.dD)("data-v-faa9e030"),e=e(),(0,l.Cn)(),e),Em={key:0,class:"container text-center"},Tm=Mm((()=>(0,l._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,l._)("span",{class:"visually-hidden"},"Loading...")],-1))),qm=Mm((()=>(0,l._)("div",null,[(0,l._)("b",null," Loading... ")],-1))),Am=[Tm,qm],Fm={key:1,class:"container mt-4"},Wm={class:"row align-items-center"},Vm={class:"col-md-8 mt-4"},Zm={class:"d-flex align-items-center"},zm=Mm((()=>(0,l._)("h2",{class:"mb-0"},"Edit Line Item |",-1))),Gm={"aria-label":"breadcrumb",class:"ms-3"},Qm={class:"breadcrumb bg-transparent m-0 p-0 justify-content-end"},Hm=Mm((()=>(0,l._)("li",{class:"breadcrumb-item"},[(0,l._)("a",{href:"/"},[(0,l._)("i",{class:"fas fa-home me-1"}),(0,l.Uk)("Home")])],-1))),Ym={class:"breadcrumb-item active","aria-current":"page"},Km=Mm((()=>(0,l._)("i",{class:"fas fa-clipboard-list me-1"},null,-1))),Jm={class:"breadcrumb-item","aria-current":"page"},Xm=Mm((()=>(0,l._)("i",{class:"fas fa-list-alt me-1"},null,-1))),eh=Mm((()=>(0,l._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,l._)("i",{class:"fa fa-bars me-1","aria-hidden":"true"}),(0,l.Uk)("BOM Line Item ")],-1))),th={class:"col-md-4 mt-4 d-flex justify-content-end"},sh={class:"row mt-5"},ah={class:"row"},lh={class:"col-md-4"},ih={class:"form-group"},oh=Mm((()=>(0,l._)("label",{for:"veplPartNumber"},"VEPL Part Number",-1))),ch={class:"col-md-4"},rh={class:"form-group"},dh=Mm((()=>(0,l._)("label",{for:"level"},"Level",-1))),nh={class:"col-md-4"},uh={class:"form-group"},mh=Mm((()=>(0,l._)("label",{for:"priorityLevel"},"Priority Level",-1))),hh={class:"row"},ph={class:"col-md-4"},bh={class:"form-group"},fh=Mm((()=>(0,l._)("label",{for:"value"},"Value",-1))),_h={class:"col-md-4"},gh={class:"form-group"},yh=Mm((()=>(0,l._)("label",{for:"pcbFootprint"},"PCB Footprint",-1))),vh={class:"col-md-4"},kh={class:"form-group"},wh=Mm((()=>(0,l._)("label",{for:"lineItemType"},"Type",-1))),Ch=["value"],Sh={class:"form-group"},Dh=Mm((()=>(0,l._)("label",{for:"description"},"Description",-1))),Ih={class:"form-group"},Ph={for:"references"},Rh=["onClick"],xh={class:"d-flex align-items-center mt-2"},Lh={class:"form-group"},$h=Mm((()=>(0,l._)("label",{for:"manufacturerParts"},"Manufacturer Parts",-1))),Bh=Mm((()=>(0,l._)("br",null,null,-1))),Uh=Mm((()=>(0,l._)("button",{type:"button",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#exampleModal"}," Change Manufacturer Parts ",-1))),Oh={class:"form-group"},Nh=Mm((()=>(0,l._)("label",{for:"customerPartNumber"},"Customer Part Number",-1))),jh={class:"row"},Mh={class:"col-md-6"},Eh={class:"form-group"},Th=Mm((()=>(0,l._)("label",{for:"quantity"},"Quantity",-1))),qh={class:"col-md-6"},Ah={class:"form-group"},Fh=Mm((()=>(0,l._)("label",{for:"uom"},"UOM",-1))),Wh={class:"form-group"},Vh=Mm((()=>(0,l._)("label",{for:"assemblyStage"},"Assembly Stage",-1))),Zh=["value"],zh={class:"form-group"},Gh=Mm((()=>(0,l._)("label",{for:"ecn"},"ECN",-1))),Qh={class:"form-group"},Hh=Mm((()=>(0,l._)("label",{for:"msl"},"MSL",-1))),Yh={class:"form-group"},Kh=Mm((()=>(0,l._)("label",{for:"remarks"},"Remarks",-1))),Jh={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Xh={class:"modal-dialog modal-lg"},ep={class:"modal-content"},tp=Mm((()=>(0,l._)("div",{class:"modal-header"},[(0,l._)("h1",{class:"modal-title fs-5",id:"exampleModalLabel"}," Select the Manufacturer Parts "),(0,l._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),sp={class:"modal-body"},ap=Mm((()=>(0,l._)("div",{class:"modal-footer"},[(0,l._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close "),(0,l._)("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal"}," Save changes ")],-1)));function lp(e,t,s,i,o,c){const r=(0,l.up)("router-link"),d=(0,l.up)("manufacturer-parts-grid");return(0,l.wg)(),(0,l.iD)("div",null,[e.$store.state.isLoading?((0,l.wg)(),(0,l.iD)("div",Em,Am)):((0,l.wg)(),(0,l.iD)("div",Fm,[(0,l._)("div",Wm,[(0,l._)("div",Vm,[(0,l._)("div",Zm,[zm,(0,l._)("nav",Gm,[(0,l._)("ol",Qm,[Hm,(0,l._)("li",Ym,[(0,l.Wm)(r,{to:"/bom"},{default:(0,l.w5)((()=>[Km,(0,l.Uk)("Bill Of Materials ")])),_:1})]),(0,l._)("li",Jm,[(0,l.Wm)(r,{to:`/bom/edit/${o.bom_id}`},{default:(0,l.w5)((()=>[Xm,(0,l.Uk)(" BOM Details ")])),_:1},8,["to"])]),eh])])])]),(0,l._)("div",th,[(0,l._)("button",{type:"button",class:"btn btn-primary me-2",onClick:t[0]||(t[0]=(...e)=>c.saveChanges&&c.saveChanges(...e))}," Update Changes "),(0,l._)("button",{type:"button",class:"btn btn-danger",onClick:t[1]||(t[1]=(...e)=>c.confirmDelete&&c.confirmDelete(...e))}," Delete Line Item ")])]),(0,l._)("div",sh,[(0,l._)("section",null,[(0,l._)("div",ah,[(0,l._)("div",lh,[(0,l._)("div",ih,[oh,(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>o.editedBom.part_number=e),type:"text",class:"form-control"},null,512),[[a.nr,o.editedBom.part_number]])])]),(0,l._)("div",ch,[(0,l._)("div",rh,[dh,(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>o.editedBom.level=e),type:"text",class:"form-control"},null,512),[[a.nr,o.editedBom.level]])])]),(0,l._)("div",nh,[(0,l._)("div",uh,[mh,(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>o.editedBom.priority_level=e),type:"text",class:"form-control"},null,512),[[a.nr,o.editedBom.priority_level]])])])]),(0,l._)("div",hh,[(0,l._)("div",ph,[(0,l._)("div",bh,[fh,(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>o.editedBom.value=e),type:"text",class:"form-control"},null,512),[[a.nr,o.editedBom.value]])])]),(0,l._)("div",_h,[(0,l._)("div",gh,[yh,(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>o.editedBom.pcb_footprint=e),type:"text",class:"form-control"},null,512),[[a.nr,o.editedBom.pcb_footprint]])])]),(0,l._)("div",vh,[(0,l._)("div",kh,[wh,(0,l.wy)((0,l._)("select",{"onUpdate:modelValue":t[7]||(t[7]=e=>o.editedBom.line_item_type=e),class:"form-control"},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(o.line_item_types,(e=>((0,l.wg)(),(0,l.iD)("option",{key:e.id,value:e.id},(0,fe.zw)(e.name),9,Ch)))),128))],512),[[a.bM,o.editedBom.line_item_type]])])])]),(0,l._)("div",Sh,[Dh,(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>o.editedBom.description=e),type:"text",class:"form-control"},null,512),[[a.nr,o.editedBom.description]])]),(0,l._)("div",Ih,[(0,l._)("label",Ph,[(0,l.Uk)(" References "),(0,l._)("div",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(o.editedBom.references,(e=>((0,l.wg)(),(0,l.iD)("div",{key:e.id,class:"tag"},[(0,l.Uk)((0,fe.zw)(e.name)+" ",1),(0,l._)("span",{onClick:t=>c.removeReference(e),class:"remove-tag"},"X",8,Rh)])))),128))]),(0,l._)("div",xh,[(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>o.newReference=e),onKeyup:t[10]||(t[10]=(0,a.D2)(((...e)=>c.addNewReference&&c.addNewReference(...e)),["enter"])),type:"text",placeholder:"Type to add a new reference",class:"form-control input-large"},null,544),[[a.nr,o.newReference]]),(0,l._)("button",{onClick:t[11]||(t[11]=(...e)=>c.addNewReference&&c.addNewReference(...e)),class:"btn btn-primary ms-2"}," Add ")])])]),(0,l._)("div",Lh,[$h,Bh,(0,l._)("div",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(o.editedBom.manufacturer_parts,(e=>((0,l.wg)(),(0,l.iD)("div",{key:e.id,class:"tag"},(0,fe.zw)(e.part_number)+" - "+(0,fe.zw)(e.manufacturer.name),1)))),128))]),Uh]),(0,l._)("div",Oh,[Nh,(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[12]||(t[12]=e=>o.editedBom.customer_part_number=e),type:"text",class:"form-control"},null,512),[[a.nr,o.editedBom.customer_part_number]])]),(0,l._)("div",jh,[(0,l._)("div",Mh,[(0,l._)("div",Eh,[Th,(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[13]||(t[13]=e=>o.editedBom.quantity=e),type:"text",class:"form-control"},null,512),[[a.nr,o.editedBom.quantity]])])]),(0,l._)("div",qh,[(0,l._)("div",Ah,[Fh,(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[14]||(t[14]=e=>o.editedBom.uom=e),type:"text",class:"form-control"},null,512),[[a.nr,o.editedBom.uom]])])])]),(0,l._)("div",Wh,[Vh,(0,l.wy)((0,l._)("select",{"onUpdate:modelValue":t[15]||(t[15]=e=>o.editedBom.assembly_stage=e),class:"form-control"},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(o.assembly_stages,(e=>((0,l.wg)(),(0,l.iD)("option",{key:e.id,value:e.id},(0,fe.zw)(e.name),9,Zh)))),128))],512),[[a.bM,o.editedBom.assembly_stage]])]),(0,l._)("div",zh,[Gh,(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[16]||(t[16]=e=>o.editedBom.ecn=e),type:"text",class:"form-control"},null,512),[[a.nr,o.editedBom.ecn]])]),(0,l._)("div",Qh,[Hh,(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[17]||(t[17]=e=>o.editedBom.msl=e),type:"text",class:"form-control"},null,512),[[a.nr,o.editedBom.msl]])]),(0,l._)("div",Yh,[Kh,(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[18]||(t[18]=e=>o.editedBom.remarks=e),type:"text",class:"form-control"},null,512),[[a.nr,o.editedBom.remarks]])])])]),(0,l._)("div",Jh,[(0,l._)("div",Xh,[(0,l._)("div",ep,[tp,(0,l._)("div",sp,[(0,l.Wm)(d,{manufacturerParts:o.manufacturerParts,selectedManufacturerParts:o.editedBom.manufacturer_parts,"onUpdate:selectedManufacturerParts":c.updateManufacturerParts},null,8,["manufacturerParts","selectedManufacturerParts","onUpdate:selectedManufacturerParts"])]),ap])])])]))])}const ip={class:"ag-theme-quartz",style:{height:"600px"}};function op(e,t,s,a,i,o){const c=(0,l.up)("ag-grid-vue");return(0,l.wg)(),(0,l.iD)("div",ip,[(0,l.Wm)(c,{ref:"agGrid",gridOptions:i.gridOptions,columnDefs:i.columnDefs,rowData:s.manufacturerParts,onFirstDataRendered:o.onFirstDataRendered,onSelectionChanged:o.onSelectionChanged},null,8,["gridOptions","columnDefs","rowData","onFirstDataRendered","onSelectionChanged"])])}var cp={components:{"ag-grid-vue":$t.n},props:{manufacturerParts:{type:Array,default:()=>[]},selectedManufacturerParts:{type:Array,default:()=>[]}},data(){return{gridOptions:{domLayout:"autoHeight",rowSelection:"multiple",rowMultiSelectWithClick:!0,pagination:!0,paginationPageSize:20},columnDefs:[{headerCheckboxSelection:!0,checkboxSelection:!0,headerName:"Part Number",field:"part_number"},{headerName:"Manufacturer Name",field:"manufacturer.name"}]}},methods:{onFirstDataRendered(e){const t=e.api;t.forEachNode((e=>{const t=e.data,s=this.selectedManufacturerParts.some((e=>e.id===t.id));e.setSelected(s)}))},onSelectionChanged(){const e=this.$refs.agGrid.api.getSelectedRows();this.$emit("update:selectedManufacturerParts",e)}}};const rp=(0,he.Z)(cp,[["render",op],["__scopeId","data-v-e9409d6a"]]);var dp=rp,np={data(){return{editedBom:{part_number:"",level:"",priority_level:"",value:"",pcb_footprint:"",line_item_type:"",description:"",references:[],manufacturer_parts:[],customer_part_number:"",quantity:"",uom:"",assembly_stage:"",ecn:"",msl:"",remarks:""},line_item_types:[],newReference:"",message:"",manufacturerParts:[],assembly_stages:[],bom_id:""}},components:{"manufacturer-parts-grid":dp},methods:{async fetchDataFromAPI(){try{this.$store.commit("setIsLoading",!0);const e=await ue.Z.get(`store/edit-bom-line-item/${this.$route.params.id}/`);console.log(" Main API response for line items",e.data),this.editedBom=e.data.bom_line_item,this.bom_id=e.data.bom_line_item.bom,console.log("bom-id",this.bom_id),this.line_item_types=e.data.line_item_types,this.manufacturerParts=e.data.manufacturers_parts,this.assembly_stages=e.data.assembly_stages,console.log("line_item_types",this.line_item_types),this.line_item_types.length>0&&(this.editedBom.line_item_type=e.data.bom_line_item.line_item_type.id),this.assembly_stages.length>0&&(this.editedBom.assembly_stage=e.data.bom_line_item.assembly_stage.id),console.log("this is edit bom",this.editedBom),this.$store.commit("setIsLoading",!1)}catch(e){console.error("Error fetching data from the API:",e),this.$store.commit("setIsLoading",!1)}},addNewReference(){if(""!==this.newReference.trim()){if(!this.isReferenceExists(this.newReference.trim())){const e={name:this.newReference.trim()};this.editedBom.references.push(e)}this.newReference=""}},isReferenceExists(e){return this.editedBom.references.some((t=>t.name.toLowerCase()===e.toLowerCase()))},removeReference(e){this.editedBom.references=this.editedBom.references.filter((t=>t!==e))},submit(){console.log(this.editedBom)},async saveChanges(){try{const e=await ue.Z.put(`store/edit-bom-line-item/${this.$route.params.id}/`,this.editedBom);console.log(e.data),this.$notify({title:"Success",text:"BOM Line Item successfully edited",type:"success"}),this.$router.go()}catch(e){console.error("Error updating BOM line item:",e),this.$notify({title:"Error",text:"Failed to edit BOM Line Item",type:"error"})}},async confirmDelete(){if(confirm("Are you sure you want to delete this BOM Line Item?"))try{const e=await ue.Z.delete(`store/delete-bom-line-item/${this.$route.params.id}`);204===e.status?(this.$notify({title:"Bom Line Item Deleted Successfully",type:"bg-success-subtle text-success",duration:5e3}),this.$router.push(`/bom/edit/${this.bom_id}`)):this.$notify({title:"An error occurred while deleting BOM Line Item",type:"alert-danger",duration:5e3})}catch(e){console.error("Error deleting BOM Line Item:",e),this.$notify({title:"An error occurred while deleting BOM Line Item",type:"alert-danger",duration:5e3})}},updateManufacturerParts(e){this.editedBom.manufacturer_parts=e},getReferences(e){return e&&e.length>0?e.map((e=>e.name)).join(", "):""},getManufacturerParts(e){return e&&e.length>0?e.map((e=>`${e.part_number} - ${e.manufacturer.name}`)).join(", "):""}},updateManufacturerParts(e){this.editedBom.manufacturer_parts=e},mounted(){this.fetchDataFromAPI()}};const up=(0,he.Z)(np,[["render",lp],["__scopeId","data-v-faa9e030"]]);var mp=up;const hp=e=>((0,l.dD)("data-v-9455daf4"),e=e(),(0,l.Cn)(),e),pp={key:0,class:"container text-center"},bp=hp((()=>(0,l._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,l._)("span",{class:"visually-hidden"},"Loading...")],-1))),fp=hp((()=>(0,l._)("div",null,[(0,l._)("b",null," Loading... ")],-1))),_p=[bp,fp],gp={key:1,class:"container"},yp={class:"row align-items-center"},vp={class:"col-md-6 mt-4"},kp={class:"d-flex align-items-center"},wp=hp((()=>(0,l._)("h2",{class:"mb-0"},"Users",-1))),Cp=hp((()=>(0,l._)("span",{class:"ms-3 fs-4 text-muted"},"|",-1))),Sp={"aria-label":"breadcrumb",class:"d-inline-block ms-3"},Dp={class:"breadcrumb bg-transparent m-0 p-0"},Ip={class:"breadcrumb-item"},Pp=hp((()=>(0,l._)("i",{class:"fas fa-home me-1"},null,-1))),Rp={class:"breadcrumb-item"},xp=hp((()=>(0,l._)("i",{class:"fas fa-users me-1"},null,-1))),Lp=hp((()=>(0,l._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,l._)("i",{class:"fas fa-edit me-1"}),(0,l.Uk)(" Edit User ")],-1))),$p={class:"col-md-6 mt-4 text-end"},Bp=hp((()=>(0,l._)("i",{class:"fas fa-save me-1"},null,-1))),Up=hp((()=>(0,l._)("i",{class:"fas fa-trash me-1"},null,-1))),Op={class:"card animate__animated animate__fadeIn mt-5"},Np=hp((()=>(0,l._)("div",{class:"card-header bg-primary text-white"},[(0,l._)("h4",{class:"card-title"},[(0,l._)("i",{class:"fas fa-user me-1"}),(0,l.Uk)(" User Information ")])],-1))),jp={class:"card-body"},Mp={class:"mb-3"},Ep=hp((()=>(0,l._)("label",{for:"email",class:"form-label"},"Email:",-1))),Tp={class:"input-group"},qp=hp((()=>(0,l._)("span",{class:"input-group-text"},[(0,l._)("i",{class:"fas fa-envelope"})],-1))),Ap={key:0,class:"text-danger"},Fp={class:"mb-3 row"},Wp={class:"col"},Vp=hp((()=>(0,l._)("label",{for:"first_name",class:"form-label"},"First Name:",-1))),Zp={class:"input-group"},zp=hp((()=>(0,l._)("span",{class:"input-group-text"},[(0,l._)("i",{class:"fas fa-user"})],-1))),Gp={key:0,class:"text-danger"},Qp={class:"col"},Hp=hp((()=>(0,l._)("label",{for:"last_name",class:"form-label"},"Last Name:",-1))),Yp={class:"input-group"},Kp=hp((()=>(0,l._)("span",{class:"input-group-text"},[(0,l._)("i",{class:"fas fa-user"})],-1))),Jp={class:"mb-3"},Xp=hp((()=>(0,l._)("label",{for:"phone_number",class:"form-label"},"Phone Number:",-1))),eb={class:"input-group"},tb=hp((()=>(0,l._)("span",{class:"input-group-text"},[(0,l._)("i",{class:"fas fa-phone"})],-1))),sb={class:"mb-3 row"},ab={class:"col"},lb={class:"form-check"},ib=hp((()=>(0,l._)("label",{class:"form-check-label",for:"is_superuser"},[(0,l._)("i",{class:"fas fa-user-shield me-1"}),(0,l.Uk)(" Is Admin")],-1))),ob={class:"col"},cb={class:"form-check"},rb=["disabled"],db=hp((()=>(0,l._)("label",{class:"form-check-label",for:"is_staff"},[(0,l._)("i",{class:"fas fa-user-cog me-1"}),(0,l.Uk)(" Is Staff")],-1))),nb={class:"mb-3 row"},ub={class:"col"},mb={class:"form-check"},hb=["disabled"],pb=hp((()=>(0,l._)("label",{class:"form-check-label",for:"is_store_team"},[(0,l._)("i",{class:"fas fa-user-shield me-1"}),(0,l.Uk)(" Is Store Team")],-1))),bb={class:"col"},fb={class:"form-check"},_b=["disabled"],gb=hp((()=>(0,l._)("label",{class:"form-check-label",for:"is_design_team"},[(0,l._)("i",{class:"fas fa-user-cog me-1"}),(0,l.Uk)(" Is Design Team")],-1)));function yb(e,t,s,i,o,c){const r=(0,l.up)("router-link");return e.$store.state.isLoading?((0,l.wg)(),(0,l.iD)("div",pp,_p)):((0,l.wg)(),(0,l.iD)("div",gp,[(0,l._)("div",yp,[(0,l._)("div",vp,[(0,l._)("div",kp,[wp,Cp,(0,l._)("nav",Sp,[(0,l._)("ol",Dp,[(0,l._)("li",Ip,[(0,l.Wm)(r,{to:"/"},{default:(0,l.w5)((()=>[Pp,(0,l.Uk)(" Home")])),_:1})]),(0,l._)("li",Rp,[(0,l.Wm)(r,{to:"/users"},{default:(0,l.w5)((()=>[xp,(0,l.Uk)(" Users")])),_:1})]),Lp])])])]),(0,l._)("div",$p,[(0,l._)("button",{type:"submit",class:"btn btn-primary btn-sm",onClick:t[0]||(t[0]=(...e)=>c.updateUser&&c.updateUser(...e))},[Bp,(0,l.Uk)(" Update User ")]),(0,l._)("button",{type:"button",class:"btn btn-danger ms-2 btn-sm",onClick:t[1]||(t[1]=(...e)=>c.deleteUser&&c.deleteUser(...e))},[Up,(0,l.Uk)(" Delete User ")])])]),(0,l._)("div",Op,[Np,(0,l._)("div",jp,[(0,l._)("div",Mp,[Ep,(0,l._)("div",Tp,[qp,(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>o.editedUser.email=e),type:"email",class:"form-control",id:"email",required:""},null,512),[[a.nr,o.editedUser.email]])]),o.editedUser.email?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("small",Ap,"Email is required."))]),(0,l._)("div",Fp,[(0,l._)("div",Wp,[Vp,(0,l._)("div",Zp,[zp,(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>o.editedUser.first_name=e),type:"text",class:"form-control",id:"first_name",required:""},null,512),[[a.nr,o.editedUser.first_name]])]),o.editedUser.first_name?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("small",Gp,"First Name is required."))]),(0,l._)("div",Qp,[Hp,(0,l._)("div",Yp,[Kp,(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>o.editedUser.last_name=e),type:"text",class:"form-control",id:"last_name"},null,512),[[a.nr,o.editedUser.last_name]])])])]),(0,l._)("div",Jp,[Xp,(0,l._)("div",eb,[tb,(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>o.editedUser.phone_number=e),type:"tel",class:"form-control",id:"phone_number"},null,512),[[a.nr,o.editedUser.phone_number]])])]),(0,l._)("div",sb,[(0,l._)("div",ab,[(0,l._)("div",lb,[(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>o.editedUser.is_superuser=e),onChange:t[7]||(t[7]=(...e)=>c.updateOthers&&c.updateOthers(...e)),type:"checkbox",class:"form-check-input",id:"is_superuser"},null,544),[[a.e8,o.editedUser.is_superuser]]),ib])]),(0,l._)("div",ob,[(0,l._)("div",cb,[(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>o.editedUser.is_staff=e),disabled:o.editedUser.is_superuser,type:"checkbox",class:"form-check-input",id:"is_staff"},null,8,rb),[[a.e8,o.editedUser.is_staff]]),db])])]),(0,l._)("div",nb,[(0,l._)("div",ub,[(0,l._)("div",mb,[(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>o.editedUser.is_store_team=e),disabled:o.editedUser.is_superuser,type:"checkbox",class:"form-check-input",id:"is_store_team"},null,8,hb),[[a.e8,o.editedUser.is_store_team]]),pb])]),(0,l._)("div",bb,[(0,l._)("div",fb,[(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>o.editedUser.is_design_team=e),disabled:o.editedUser.is_superuser,type:"checkbox",class:"form-check-input",id:"is_design_team"},null,8,_b),[[a.e8,o.editedUser.is_design_team]]),gb])])])])])]))}var vb={name:"EditUser",data(){return{userId:null,editedUser:{email:"",first_name:"",last_name:"",phone_number:"",is_superuser:!1,is_staff:!1,is_store_team:!1,is_design_team:!1}}},mounted(){this.userId=this.$route.params.id,this.fetchUserData()},methods:{fetchUserData(){this.$store.commit("setIsLoading",!0),ue.Z.get(`/accounts/users/${this.userId}/`).then((e=>{console.log("edit user response data",e.data),this.editedUser=e.data,this.$store.commit("setIsLoading",!1)})).catch((e=>{this.$store.commit("setIsLoading",!1),console.error("Error fetching user data:",e)}))},updateOthers(){this.editedUser.is_superuser&&(this.editedUser.is_staff=!0,this.editedUser.is_store_team=!0,this.editedUser.is_design_team=!0)},updateUser(){confirm("Are you sure you want to update this user?")&&(this.$store.commit("setIsLoading",!0),ue.Z.put(`/accounts/users/update/${this.userId}/`,this.editedUser).then((e=>{console.log("User updated successfully:",e.data),this.$store.commit("setIsLoading",!1),alert("User Updated successfully!")})).catch((e=>{console.error("Error updating user:",e),this.$store.commit("setIsLoading",!1)})))},deleteUser(){confirm("Are you sure you want to delete this user?")&&(this.$store.commit("setIsLoading",!0),ue.Z.delete(`/accounts/users/delete/${this.userId}/`).then((()=>{console.log("User deleted successfully."),this.$store.commit("setIsLoading",!1),alert("User Deleted successfully!"),this.$router.push("/users")})).catch((e=>{alert("error deleting!"),console.error("Error deleting user:",e)})))}}};const kb=(0,he.Z)(vb,[["render",yb],["__scopeId","data-v-9455daf4"]]);var wb=kb;const Cb=e=>((0,l.dD)("data-v-33779d33"),e=e(),(0,l.Cn)(),e),Sb={class:"container"},Db={class:"row align-items-center"},Ib={class:"col-md-6 mt-4"},Pb={class:"d-flex align-items-center"},Rb=Cb((()=>(0,l._)("h2",{class:"mb-0"},"Users",-1))),xb=Cb((()=>(0,l._)("span",{class:"ms-3 fs-4 text-muted"},"|",-1))),Lb={"aria-label":"breadcrumb",class:"d-inline-block ms-3"},$b={class:"breadcrumb bg-transparent m-0 p-0"},Bb={class:"breadcrumb-item"},Ub=Cb((()=>(0,l._)("i",{class:"fas fa-home me-1"},null,-1))),Ob={class:"breadcrumb-item"},Nb=Cb((()=>(0,l._)("i",{class:"fas fa-users me-1"},null,-1))),jb=Cb((()=>(0,l._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,l._)("i",{class:"fa fa-user-plus"}),(0,l.Uk)(" Create User ")],-1))),Mb={class:"col-md-6 mt-4 text-end"},Eb=Cb((()=>(0,l._)("i",{class:"fas fa-save me-1"},null,-1))),Tb={class:"card animate__animated animate__fadeIn mt-5"},qb=Cb((()=>(0,l._)("div",{class:"card-header bg-primary text-white"},[(0,l._)("h4",{class:"card-title"},[(0,l._)("i",{class:"fas fa-user"}),(0,l.Uk)(" User Information")])],-1))),Ab={class:"card-body"},Fb={class:"mb-3"},Wb=Cb((()=>(0,l._)("label",{for:"email",class:"form-label"},"Email:",-1))),Vb={class:"input-group"},Zb=Cb((()=>(0,l._)("span",{class:"input-group-text"},[(0,l._)("i",{class:"fas fa-envelope"})],-1))),zb={key:0,class:"text-danger"},Gb={class:"mb-3"},Qb=Cb((()=>(0,l._)("label",{for:"password",class:"form-label"},"Password:",-1))),Hb={class:"input-group"},Yb=Cb((()=>(0,l._)("span",{class:"input-group-text"},[(0,l._)("i",{class:"fas fa-lock"})],-1))),Kb=["type"],Jb={key:0,class:"text-danger"},Xb={key:1,class:"text-danger"},ef=Cb((()=>(0,l._)("i",{class:"fas fa-exclamation-triangle"},null,-1))),tf={class:"mb-3 row"},sf={class:"col"},af=Cb((()=>(0,l._)("label",{for:"first_name",class:"form-label"},"First Name:",-1))),lf={class:"input-group"},of=Cb((()=>(0,l._)("span",{class:"input-group-text"},[(0,l._)("i",{class:"fas fa-user"})],-1))),cf={key:0,class:"text-danger"},rf={class:"col"},df=Cb((()=>(0,l._)("label",{for:"last_name",class:"form-label"},"Last Name:",-1))),nf={class:"input-group"},uf=Cb((()=>(0,l._)("span",{class:"input-group-text"},[(0,l._)("i",{class:"fas fa-user"})],-1))),mf={class:"mb-3"},hf=Cb((()=>(0,l._)("label",{for:"phone_number",class:"form-label"},"Phone Number:",-1))),pf={class:"input-group"},bf=Cb((()=>(0,l._)("span",{class:"input-group-text"},[(0,l._)("i",{class:"fas fa-phone"})],-1))),ff={class:"mb-3 row"},_f={class:"col"},gf={class:"form-check"},yf=Cb((()=>(0,l._)("label",{class:"form-check-label",for:"is_superuser"},"Is Admin",-1))),vf={class:"col"},kf={class:"form-check"},wf=Cb((()=>(0,l._)("label",{class:"form-check-label",for:"is_staff"},"Is Staff",-1))),Cf={class:"mb-3 row"},Sf={class:"col"},Df={class:"form-check"},If=Cb((()=>(0,l._)("label",{class:"form-check-label",for:"is_store_team"}," Is Store Team",-1))),Pf={class:"col"},Rf={class:"form-check"},xf=Cb((()=>(0,l._)("label",{class:"form-check-label",for:"is_design_team"}," Is Design Team",-1)));function Lf(e,t,s,i,o,c){const r=(0,l.up)("router-link");return(0,l.wg)(),(0,l.iD)("div",Sb,[(0,l._)("div",Db,[(0,l._)("div",Ib,[(0,l._)("div",Pb,[Rb,xb,(0,l._)("nav",Lb,[(0,l._)("ol",$b,[(0,l._)("li",Bb,[(0,l.Wm)(r,{to:"/"},{default:(0,l.w5)((()=>[Ub,(0,l.Uk)("Home")])),_:1})]),(0,l._)("li",Ob,[(0,l.Wm)(r,{to:"/users"},{default:(0,l.w5)((()=>[Nb,(0,l.Uk)("Users")])),_:1})]),jb])])])]),(0,l._)("div",Mb,[(0,l._)("button",{type:"submit",class:"btn btn-primary btn-sm",onClick:t[0]||(t[0]=(...e)=>c.createUser&&c.createUser(...e))},[Eb,(0,l.Uk)(" Create User ")])])]),(0,l._)("div",Tb,[qb,(0,l._)("div",Ab,[(0,l._)("div",Fb,[Wb,(0,l._)("div",Vb,[Zb,(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>o.newUser.email=e),type:"email",class:"form-control",id:"email",required:""},null,512),[[a.nr,o.newUser.email]])]),!o.newUser.email&&o.formSubmitted?((0,l.wg)(),(0,l.iD)("small",zb," Email is required. ")):(0,l.kq)("",!0)]),(0,l._)("div",Gb,[Qb,(0,l._)("div",Hb,[Yb,(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>o.newUser.password=e),type:o.showPassword?"text":"password",class:"form-control",id:"password",required:"",onFocus:t[3]||(t[3]=(...e)=>c.clearPasswordError&&c.clearPasswordError(...e))},null,40,Kb),[[a.YZ,o.newUser.password]]),(0,l._)("span",{class:"input-group-text",onClick:t[4]||(t[4]=(...e)=>c.togglePasswordVisibility&&c.togglePasswordVisibility(...e))},[(0,l._)("i",{class:(0,fe.C_)(["fas",o.showPassword?"fa-eye-slash":"fa-eye"])},null,2)])]),!o.newUser.password&&o.formSubmitted?((0,l.wg)(),(0,l.iD)("small",Jb," Password is required. ")):(0,l.kq)("",!0),o.passwordAuthenticationError?((0,l.wg)(),(0,l.iD)("div",Xb,[(0,l._)("strong",null,[ef,(0,l.Uk)(" "+(0,fe.zw)(o.passwordAuthenticationError),1)])])):(0,l.kq)("",!0)]),(0,l._)("div",tf,[(0,l._)("div",sf,[af,(0,l._)("div",lf,[of,(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>o.newUser.first_name=e),type:"text",class:"form-control",id:"first_name",required:""},null,512),[[a.nr,o.newUser.first_name]])]),!o.newUser.first_name&&o.formSubmitted?((0,l.wg)(),(0,l.iD)("small",cf," First Name is required. ")):(0,l.kq)("",!0)]),(0,l._)("div",rf,[df,(0,l._)("div",nf,[uf,(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>o.newUser.last_name=e),type:"text",class:"form-control",id:"last_name",required:""},null,512),[[a.nr,o.newUser.last_name]])])])]),(0,l._)("div",mf,[hf,(0,l._)("div",pf,[bf,(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>o.newUser.phone_number=e),type:"tel",class:"form-control",id:"phone_number"},null,512),[[a.nr,o.newUser.phone_number]])])]),(0,l._)("div",ff,[(0,l._)("div",_f,[(0,l._)("div",gf,[(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>o.newUser.is_superuser=e),type:"checkbox",class:"form-check-input",id:"is_superuser"},null,512),[[a.e8,o.newUser.is_superuser]]),yf])]),(0,l._)("div",vf,[(0,l._)("div",kf,[(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>o.newUser.is_staff=e),type:"checkbox",class:"form-check-input",id:"is_staff"},null,512),[[a.e8,o.newUser.is_staff]]),wf])])])]),(0,l._)("div",Cf,[(0,l._)("div",Sf,[(0,l._)("div",Df,[(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>o.newUser.is_store_team=e),type:"checkbox",class:"form-check-input",id:"is_store_team"},null,512),[[a.e8,o.newUser.is_store_team]]),If])]),(0,l._)("div",Pf,[(0,l._)("div",Rf,[(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>o.newUser.is_design_team=e),type:"checkbox",class:"form-check-input",id:"is_design_team"},null,512),[[a.e8,o.newUser.is_design_team]]),xf])])])])])}var $f={name:"CreateUser",data(){return{newUser:{email:"",password:"",first_name:"",last_name:"",phone_number:"",is_superuser:!1,is_staff:!1,is_store_team:!1,is_design_team:!1},formSubmitted:!1,passwordAuthenticationError:null,showPassword:!1}},methods:{createUser(){console.log("form data",this.newUser),this.formSubmitted=!0,this.passwordAuthenticationError=null,this.newUser.email&&this.newUser.password&&this.newUser.first_name&&ue.Z.post("accounts/users/create/",this.newUser).then((e=>{console.log("User created successfully:",e.data),alert("User created successfully!"),this.$router.push("/users")})).catch((e=>{e.response&&e.response.data.password?this.passwordAuthenticationError=e.response.data.password[0]:console.error("Error creating user:",e)}))},clearPasswordError(){this.passwordAuthenticationError=null},togglePasswordVisibility(){this.showPassword=!this.showPassword}}};const Bf=(0,he.Z)($f,[["render",Lf],["__scopeId","data-v-33779d33"]]);var Uf=Bf;const Of={key:0,class:"container text-center"},Nf=(0,l._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,l._)("span",{class:"visually-hidden"},"Loading...")],-1),jf=(0,l._)("div",null,[(0,l._)("b",null," Loading... ")],-1),Mf=[Nf,jf],Ef={key:1,class:"container"},Tf={class:"row align-items-center"},qf=(0,l.uE)('<div class="col-md-6 mt-4"><div class="d-flex align-items-center"><h2 class="mb-0">Orders</h2><span class="ms-3 fs-4 text-muted">|</span><nav aria-label="breadcrumb" class="d-inline-block ms-3"><ol class="breadcrumb bg-transparent m-0 p-0"><li class="breadcrumb-item"><a href="/"><i class="fas fa-home me-1"></i>Home</a></li><li class="breadcrumb-item active" aria-current="page"><i class="fas fa-shopping-cart me-1"></i> Orders </li></ol></nav></div></div>',1),Af={class:"col-md-6 d-flex justify-content-end mt-4"};function Ff(e,t,s,a,i,o){const c=(0,l.up)("router-link"),r=(0,l.up)("OrderDetailsTableWithDelete");return e.$store.state.isLoading?((0,l.wg)(),(0,l.iD)("div",Of,Mf)):((0,l.wg)(),(0,l.iD)("div",Ef,[(0,l._)("div",Tf,[qf,(0,l._)("div",Af,[(0,l.Wm)(c,{to:"/orders/create",class:"btn btn-primary btn-sm ms-2"},{default:(0,l.w5)((()=>[(0,l.Uk)(" Create Order ")])),_:1})])]),(0,l.Wm)(r,{style:{"margin-top":"20px"},orders:i.orders,onRowClicked:o.handleRowClicked,onRowSelected:o.handleRowSelected},null,8,["orders","onRowClicked","onRowSelected"])]))}function Wf(e,t,s,a,i,o){const c=(0,l.up)("ag-grid-vue");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l.Wm)(c,{style:{height:"500px"},class:"ag-theme-quartz",rowData:s.orders,defaultColDef:i.defaultColDef,columnDefs:i.colDefs,pagination:!0,rowSelection:"multiple",onRowClicked:o.onRowClicked,onSelectionChanged:o.onSelectionChanged},null,8,["rowData","defaultColDef","columnDefs","onRowClicked","onSelectionChanged"])])}var Vf={name:"App",components:{AgGridVue:$t.n},props:{orders:{type:Array,required:!0}},data(){return{colDefs:[{field:"id",headerName:"Order ID",hide:!0},{field:"bom.id",headerName:"BOM ID ",hide:!0},{field:"bom.product.project.name",checkboxSelection:!0,headerName:"Project Name"},{field:"bom.product.name",headerName:"Product"},{field:"batch_quantity",headerName:"Batch Quantity"},{field:"bom.bom_file_name",headerName:"File Name"},{headerName:"Download",cellRenderer:this.editButtonRenderer},{headerName:"Actions",field:"actions",cellRenderer:this.actionsCellRenderer,sortable:!1,filter:!1}],defaultColDef:{filter:!0,sortable:!0,resizable:!0,autoSize:!0},selectedRows:[]}},methods:{onRowClicked(e){this.$emit("rowClicked",e.data)},onSelectionChanged(e){const t=e.api.getSelectedRows(),s=t.length>0?t[0]:null;s?this.$emit("rowSelected",s):this.$emit("rowDeselected")},editButtonRenderer(e){console.log(e);const t=document.createElement("button");return t.innerHTML='<i class="fas fa-download"></i>',t.classList.add("btn-sm","btn-primary"),t.addEventListener("click",(()=>this.downloadFile(e.data.bom.bom_file_url))),t},actionsCellRenderer(e){const t=document.createElement("button");t.innerHTML='<i class="fas fa-edit"></i>',t.classList.add("btn-sm","btn-primary","me-2"),t.addEventListener("click",(()=>this.onEditClick(e.data.id)));const s=document.createElement("button");s.innerHTML='<i class="fas fa-trash-alt"></i>',s.classList.add("btn-sm","btn-danger","ms-2"),s.addEventListener("click",(()=>this.deleteProduct(e.data.id)));const a=document.createElement("div");return a.appendChild(t),a.appendChild(s),a},onEditClick(e){this.$router.push(`/product/edit/${e}`)},async deleteProduct(e){if(console.log("order id",e),confirm("Are you sure you want to delete this Order?")){this.$store.commit("setIsLoading",!0);try{const t=await ue.Z.delete(`/store/delete-order/${e}/`);console.log("Response:",t),204===t.status?(console.log("Order deleted successfully."),this.$store.commit("setIsLoading",!1),this.$notify({title:"Order Deleted Successfully",type:"bg-success-subtle text-success",duration:"5000"}),window.location.reload()):(console.error("Error deleting Order. Unexpected status:",t.status),this.$notify({title:"Order Deletion Unsuccessful",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1))}catch(t){console.error("Error deleting Order:",t),this.$notify({title:"Order Deletion Unsuccessful",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1)}}},downloadFile(e){const t=document.createElement("a");t.href=e,t.target="_blank",t.download="BOM_File",document.body.appendChild(t),t.click(),document.body.removeChild(t)}}};const Zf=(0,he.Z)(Vf,[["render",Wf]]);var zf=Zf,Gf={components:{OrderDetailsTableWithDelete:zf},data(){return{orders:[]}},methods:{async fetchData(){try{this.$store.commit("setIsLoading",!0);const e=await ue.Z.get("store/get-orders/");console.log("response.data",e.data),this.orders=e.data.orders,console.log("orders",this.orders),this.$store.commit("setIsLoading",!1)}catch(e){console.error("Error fetching BOM data:",e),this.$store.commit("setIsLoading",!1)}},handleRowClicked(e){console.log("Clicked Row:",e)},handleRowSelected(e){console.log("Row Selected:",e),this.selectedRow=e}},mounted(){this.fetchData()}};const Qf=(0,he.Z)(Gf,[["render",Ff]]);var Hf=Qf;const Yf=e=>((0,l.dD)("data-v-ffafc8a8"),e=e(),(0,l.Cn)(),e),Kf={key:0,class:"container text-center"},Jf=Yf((()=>(0,l._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,l._)("span",{class:"visually-hidden"},"Loading...")],-1))),Xf=Yf((()=>(0,l._)("div",null,[(0,l._)("b",null," Loading... ")],-1))),e_=[Jf,Xf],t_={key:1,class:"container"},s_={class:"row align-items-center"},a_={class:"col-md-6 mt-4"},l_={class:"d-flex align-items-center"},i_=Yf((()=>(0,l._)("h2",{class:"mb-0"},"Orders",-1))),o_=Yf((()=>(0,l._)("span",{class:"ms-3 fs-4 text-muted"},"|",-1))),c_={"aria-label":"breadcrumb",class:"d-inline-block ms-3"},r_={class:"breadcrumb bg-transparent m-0 p-0"},d_=Yf((()=>(0,l._)("li",{class:"breadcrumb-item"},[(0,l._)("a",{href:"/"},[(0,l._)("i",{class:"fas fa-home me-1"}),(0,l.Uk)("Home")])],-1))),n_={class:"breadcrumb-item active"},u_=Yf((()=>(0,l._)("i",{class:"fas fa-shopping-cart me-1"},null,-1))),m_=Yf((()=>(0,l._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,l._)("i",{class:"fa-solid fa-receipt me-1"}),(0,l.Uk)(" Create Order ")],-1))),h_={class:"col-md-6 d-flex justify-content-end mt-4"},p_={class:"card p-3 mb-4 mt-4"},b_={class:"row mb-3"},f_={class:"col-md-6"},__=Yf((()=>(0,l._)("label",{for:"projectDropdown",class:"form-label"},"Select Project",-1))),g_=["value"],y_={class:"col-md-6"},v_=Yf((()=>(0,l._)("label",{for:"productCode",class:"form-label"},"Product ",-1))),k_=["value"],w_={key:0,class:"row mb-3"},C_={class:"col-md-6"},S_=Yf((()=>(0,l._)("label",{for:"bomType",class:"form-label"},"BOM Type",-1))),D_={class:"col-md-6"},I_=Yf((()=>(0,l._)("label",{for:"bomRevNo",class:"form-label"},"BOM REV No",-1))),P_={class:"row mb-3 justify-content-center"},R_={class:"col-md-6"},x_=Yf((()=>(0,l._)("label",{for:"batchQuantity",class:"form-label"},[(0,l._)("i",{class:"fas fa-flask me-2"}),(0,l.Uk)("Batch Quantity ")],-1))),L_={key:0,class:"col-md-6"},$_=Yf((()=>(0,l._)("label",{for:"issueDate",class:"form-label"},"Issue Date",-1))),B_={key:1,class:"card p-3 mb-4"},U_=Yf((()=>(0,l._)("label",{for:"fileInput",class:"form-label"},[(0,l._)("i",{class:"fas fa-cloud-upload-alt mr-2"}),(0,l.Uk)(" Choose BOM Excel file ")],-1))),O_={class:"custom-file"},N_={class:"custom-file-label",for:"fileInput"},j_={class:"radio-button"},M_={class:"form-check form-check-inline"},E_=Yf((()=>(0,l._)("label",{class:"form-check-label",for:"flexRadioDefault1"}," Upload a new BOM ",-1))),T_={class:"form-check form-check-inline"},q_=Yf((()=>(0,l._)("label",{class:"form-check-label",for:"flexRadioDefault2"}," Select BOM ",-1))),A_={key:2},F_={type:"button",class:"btn btn-primary mt-4","data-bs-toggle":"modal","data-bs-target":"#exampleModal"},W_={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},V_={class:"modal-dialog modal-xl"},Z_={class:"modal-content"},z_=Yf((()=>(0,l._)("div",{class:"modal-header"},[(0,l._)("h5",{class:"modal-title",id:"exampleModalLabel"},"Details"),(0,l._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),G_={class:"modal-body"},Q_={class:"modal-footer"},H_=Yf((()=>(0,l._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1)));function Y_(e,t,s,i,o,c){const r=(0,l.up)("router-link"),d=(0,l.up)("OrderBomDetailsVue");return o.isLoading?((0,l.wg)(),(0,l.iD)("div",Kf,e_)):((0,l.wg)(),(0,l.iD)("div",t_,[(0,l._)("div",s_,[(0,l._)("div",a_,[(0,l._)("div",l_,[i_,o_,(0,l._)("nav",c_,[(0,l._)("ol",r_,[d_,(0,l._)("li",n_,[(0,l.Wm)(r,{to:"/orders"},{default:(0,l.w5)((()=>[u_,(0,l.Uk)(" Orders ")])),_:1})]),m_])])])]),(0,l._)("div",h_,[(0,l._)("button",{type:"button",class:"btn-sm btn-primary",onClick:t[0]||(t[0]=(...e)=>c.createOrder&&c.createOrder(...e))}," Create Order ")])]),(0,l._)("section",p_,[(0,l._)("div",b_,[(0,l._)("div",f_,[__,(0,l.wy)((0,l._)("select",{class:"form-select",id:"projectDropdown","onUpdate:modelValue":t[1]||(t[1]=e=>o.selectedProject=e),required:""},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(o.projects,(e=>((0,l.wg)(),(0,l.iD)("option",{key:e.id,value:e.id},(0,fe.zw)(e.name),9,g_)))),128))],512),[[a.bM,o.selectedProject]])]),(0,l._)("div",y_,[v_,(0,l.wy)((0,l._)("select",{class:"form-select",id:"productCode","onUpdate:modelValue":t[2]||(t[2]=e=>o.selectedProduct=e),onChange:t[3]||(t[3]=(...e)=>c.filteredBoms&&c.filteredBoms(...e)),required:""},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(c.filteredProducts,(e=>((0,l.wg)(),(0,l.iD)("option",{key:e.id,value:e.id},(0,fe.zw)(e.name),9,k_)))),128))],544),[[a.bM,o.selectedProduct]])])]),"uploadNewBom"===o.selectedRadio?((0,l.wg)(),(0,l.iD)("div",w_,[(0,l._)("div",C_,[S_,(0,l.wy)((0,l._)("input",{type:"text",class:"form-control",id:"bomType","onUpdate:modelValue":t[4]||(t[4]=e=>o.bomType=e)},null,512),[[a.nr,o.bomType]])]),(0,l._)("div",D_,[I_,(0,l.wy)((0,l._)("input",{type:"text",class:"form-control",id:"bomRevNo","onUpdate:modelValue":t[5]||(t[5]=e=>o.bomRevNo=e),required:""},null,512),[[a.nr,o.bomRevNo]])])])):(0,l.kq)("",!0),(0,l._)("div",P_,[(0,l._)("div",R_,[x_,(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>o.order.batchQuantity=e),type:"number",class:"form-control",placeholder:"Enter Batch Quantity",min:"1",required:""},null,512),[[a.nr,o.order.batchQuantity]])]),"uploadNewBom"===o.selectedRadio?((0,l.wg)(),(0,l.iD)("div",L_,[$_,(0,l.wy)((0,l._)("input",{type:"date",class:"form-control",id:"issueDate","onUpdate:modelValue":t[7]||(t[7]=e=>o.issueDate=e),required:""},null,512),[[a.nr,o.issueDate]])])):(0,l.kq)("",!0)]),"uploadNewBom"===o.selectedRadio?((0,l.wg)(),(0,l.iD)("div",B_,[U_,(0,l._)("div",O_,[(0,l._)("input",{type:"file",class:"custom-file-input",id:"fileInput",onChange:t[8]||(t[8]=(...e)=>c.handleFileUpload&&c.handleFileUpload(...e)),accept:".xls, .xlsx",required:""},null,32),(0,l._)("label",N_,(0,fe.zw)(o.uploadedFileName||"Select file"),1)])])):(0,l.kq)("",!0),(0,l._)("div",j_,[(0,l._)("div",M_,[(0,l.wy)((0,l._)("input",{class:"form-check-input",type:"radio",name:"flexRadioDefault",id:"flexRadioDefault1","onUpdate:modelValue":t[9]||(t[9]=e=>o.selectedRadio=e),value:"uploadNewBom"},null,512),[[a.G2,o.selectedRadio]]),E_]),(0,l._)("div",T_,[(0,l.wy)((0,l._)("input",{class:"form-check-input",type:"radio",name:"flexRadioDefault",id:"flexRadioDefault2","onUpdate:modelValue":t[10]||(t[10]=e=>o.selectedRadio=e),value:"selectBom"},null,512),[[a.G2,o.selectedRadio]]),q_])]),"selectBom"===o.selectedRadio?((0,l.wg)(),(0,l.iD)("div",A_,[(0,l._)("button",F_,(0,fe.zw)(o.selectBomButtonText),1)])):(0,l.kq)("",!0)]),(0,l._)("div",W_,[(0,l._)("div",V_,[(0,l._)("div",Z_,[z_,(0,l._)("div",G_,[(0,l.Wm)(d,{bomByProducts:o.bomByProducts,onRowClicked:c.handleRowClicked,onRowSelected:c.handleRowSelected,onRowDeselected:c.handleRowDeselected},null,8,["bomByProducts","onRowClicked","onRowSelected","onRowDeselected"])]),(0,l._)("div",Q_,[H_,(0,l._)("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal",onClick:t[11]||(t[11]=(...e)=>c.saveChanges&&c.saveChanges(...e))}," Save changes ")])])])])]))}function K_(e,t,s,a,i,o){const c=(0,l.up)("ag-grid-vue");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l.Wm)(c,{style:{height:"500px"},class:"ag-theme-quartz",rowData:s.bomByProducts,defaultColDef:i.defaultColDef,columnDefs:i.colDefs,pagination:!0,onRowClicked:o.onRowClicked,onSelectionChanged:o.onSelectionChanged,rowSelection:"single"},null,8,["rowData","defaultColDef","columnDefs","onRowClicked","onSelectionChanged"])])}var J_={name:"OrderBomDetails",components:{AgGridVue:$t.n},props:{bomByProducts:{type:Array,required:!0}},data(){return{colDefs:[{field:"id",checkboxSelection:!0,headerName:"BOM ID"},{field:"product.project.name",headerName:"Project Name"},{field:"product.name",headerName:"Product Name"},{field:"product.product_code",headerName:"Product Code"},{field:"bom_type.name",headerName:"BOM Type"},{field:"issue_date",headerName:"Issue Date"},{field:"product.product_rev_number",headerName:"Product Rev No"},{headerName:"Download",cellRenderer:this.editButtonRenderer}],defaultColDef:{filter:!0,sortable:!0,resizable:!0,autoSize:!0},selectedRows:[]}},methods:{onRowClicked(e){this.$emit("rowClicked",e.data)},onSelectionChanged(e){const t=e.api.getSelectedRows(),s=t.length>0?t[0]:null;s?this.$emit("rowSelected",s):this.$emit("rowDeselected")},editButtonRenderer(e){console.log(e);const t=document.createElement("button");return t.innerHTML=`<i class="fas fa-download"></i> ${e.data.bom_file_name} `,t.classList.add("btn-sm","btn-primary"),t.addEventListener("click",(()=>this.downloadFile(e.data.bom_file_url))),t},downloadFile(e){const t=document.createElement("a");t.href=e,t.target="_blank",t.download="BOM_File",document.body.appendChild(t),t.click(),document.body.removeChild(t)},onEditClick(e){this.$router.push(`/bom/edit/${e}`)}}};const X_=(0,he.Z)(J_,[["render",K_]]);var eg=X_,tg={components:{OrderBomDetailsVue:eg},data(){return{selectedRadio:null,issueDate:"",order:{selectedBomId:null,batchQuantity:1},boms:[],projects:[],products:[],orders:[],selectedProduct:null,selectedProject:null,bomByProducts:[],selectedBomFileName:"",selectedBomId:null,selectBomButtonText:"Select BOM",bomRevNo:null,bomType:null,uploadedFileName:null,uploadedFile:null,isLoading:!1}},computed:{filteredProducts(){if(this.products&&this.projects&&this.products.length&&this.projects.length){if(console.log("selectedProject",this.selectedProject),null!==this.selectedProject){const e=this.products.filter((e=>{const t=e.project;return t===this.selectedProject}));return console.log("Filtered Products:",e),e}return console.log("All Products:",this.products),[]}return console.log("No Products or Projects available."),[]},prepopulatedIssueDate(){return this.bomByProducts.length>0?this.bomByProducts[0].issue_date:null},formattedIssueDate(){if(this.prepopulatedIssueDate){const[e,t,s]=this.prepopulatedIssueDate.split("/");return`${s}-${e.padStart(2,"0")}-${t.padStart(2,"0")}`}return null}},mounted(){this.getData()},methods:{setIsLoading(e){this.isLoading=e},notifySuccess(e){this.$notify({title:e,type:"bg-success-subtle text-success",duration:"5000"})},notifyError(e){this.$notify({title:e,type:"bg-danger-subtle text-danger",duration:"5000"})},handleError(e){this.notifyError(e),this.setIsLoading(!1)},handleFileUpload(e){const t=e.target.files[0];t&&(console.log("Uploaded file:",t),this.uploadedFileName=t.name,this.uploadedFile=t)},async getData(){try{this.setIsLoading(!0);const e=await ue.Z.get("store/create-order/");console.log("boms + products + projects",e.data),this.setIsLoading(!1),this.boms=e.data.boms,this.projects=e.data.projects,this.products=e.data.products,this.orders=e.data.orders}catch(e){console.error("Error fetching projects:",e),this.setIsLoading(!1)}},filteredBoms(){console.log(this.selectedProduct),this.boms&&null!==this.selectedProduct?(this.bomByProducts=this.boms.filter((e=>e.product.id===this.selectedProduct)),console.log("Filtered Boms i.e bomByProducts=:",this.bomByProducts)):(console.log("No Boms or Selected Product available."),this.bomByProducts=[])},handleRowClicked(e){console.log("Row Clicked:",e),this.selectedBomFileName=e.bom_file_name,this.selectedBomId=e.id},handleRowSelected(e){console.log("Row Selected:",e),this.selectedBomFileName=e.bom_file_name,this.selectedBomId=e.id},handleRowDeselected(){console.log("Row Deselected")},saveChanges(){this.selectedBomFileName&&null!==this.selectedBomId?(this.selectBomButtonText=this.selectedBomFileName,this.order.selectedBomId=this.selectedBomId,console.log("Selected BOM File Name:",this.selectedBomFileName),console.log("Selected BOM ID:",this.selectedBomId)):(console.warn("No BOM selected."),this.selectBomButtonText="Select BOM"),this.selectedBomFileName="",this.selectedBomId=null},async createSelectedBOMOrder(){this.setIsLoading(!0),await ue.Z.post("store/create-order/",this.order).then((e=>{console.log("Order Created:",e.data),this.notifySuccess("Order Created Successfully"),this.setIsLoading(!1),this.$router.push("/orders")})).catch((e=>{console.error("Error creating order:",e),this.handleError("Order Creation Failed")}))},createOrder(){this.setIsLoading(!0),"selectBom"===this.selectedRadio?this.createSelectedBOMOrder():"uploadNewBom"===this.selectedRadio&&this.createBomTask()},async createBomTask(){this.setIsLoading(!0);const e=new FormData;e.append("project_id",this.selectedProject),e.append("product_id",this.selectedProduct),e.append("bom_type",this.bomType),e.append("bom_rev_no",this.bomRevNo),e.append("issue_date",this.issueDate),e.append("batch_quantity",this.order.batchQuantity),e.append("bom_file",this.uploadedFile),await ue.Z.post("store/create-order-task/",e,{headers:{"Content-Type":"multipart/form-data"}}).then((e=>{console.log(e.data);const t=e.data.task_id;"IN PROGRESS"===e.data.task_status||"PENDING"===e.data.task_status?setTimeout((()=>{this.checkTaskStatus(t)}),1e4):"SUCCESS"===e.data.task_status?(this.setIsLoading(!1),this.notifySuccess("BOM Uploaded and Order Created Successfully"),this.$router.push("/orders")):(this.notifyError("BOM Upload and Order Creation Failed"),this.setIsLoading(!1))})).catch((e=>{console.log("error:",e),this.handleError("An error occurred, please try again later")}))},async checkTaskStatus(e){try{const t=await ue.Z.get(`store/check-task-status/${e}/`);"IN PROGRESS"===t.data.task_status||"PENDING"===t.data.task_status?setTimeout((()=>{this.checkTaskStatus(e)}),5e3):"SUCCESS"===t.data.task_status?(this.notifySuccess("BOM Uploaded and Order Created Successfully"),this.setIsLoading(!1),this.$router.push("/orders")):(this.notifyError("BOM Upload Failed"),this.setIsLoading(!1))}catch(t){console.log("error:",t),this.handleError("An error occurred, please try again later")}}}};const sg=(0,he.Z)(tg,[["render",Y_],["__scopeId","data-v-ffafc8a8"]]);var ag=sg;const lg={key:0,class:"container text-center"},ig=(0,l._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,l._)("span",{class:"visually-hidden"},"Loading...")],-1),og=(0,l._)("div",null,[(0,l._)("b",null," Loading... ")],-1),cg=[ig,og],rg={key:1,class:"container"},dg={class:"row align-items-center"},ng={class:"col-md-6 mt-4"},ug={class:"d-flex align-items-center"},mg=(0,l._)("h2",{class:"mb-0"},"Project",-1),hg=(0,l._)("span",{class:"ms-3 fs-4 text-muted"},"|",-1),pg={"aria-label":"breadcrumb",class:"d-inline-block ms-3"},bg={class:"breadcrumb bg-transparent m-0 p-0"},fg={class:"breadcrumb-item"},_g=(0,l._)("i",{class:"fas fa-home me-1"},null,-1),gg=(0,l._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,l._)("i",{class:"fas fa-project-diagram me-1"}),(0,l.Uk)(" Project ")],-1),yg={class:"col-md-6 mt-4 text-end"},vg=(0,l._)("i",{class:"fas fa-plus me-1"},null,-1);function kg(e,t,s,a,i,o){const c=(0,l.up)("router-link"),r=(0,l.up)("ProjectsLandingTable");return e.$store.state.isLoading?((0,l.wg)(),(0,l.iD)("div",lg,cg)):((0,l.wg)(),(0,l.iD)("div",rg,[(0,l._)("div",dg,[(0,l._)("div",ng,[(0,l._)("div",ug,[mg,hg,(0,l._)("nav",pg,[(0,l._)("ol",bg,[(0,l._)("li",fg,[(0,l.Wm)(c,{to:"/"},{default:(0,l.w5)((()=>[_g,(0,l.Uk)(" Home")])),_:1})]),gg])])])]),(0,l._)("div",yg,[(0,l.Wm)(c,{to:"/projects/create-project",class:"btn btn-primary btn-sm ms-2"},{default:(0,l.w5)((()=>[vg,(0,l.Uk)(" Create New Product ")])),_:1})])]),(0,l.Wm)(r,{style:{"margin-top":"20px"},projectList:i.projectList},null,8,["projectList"])]))}function wg(e,t,s,a,i,o){const c=(0,l.up)("ag-grid-vue");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l.Wm)(c,{style:{height:"500px"},class:"ag-theme-quartz",rowData:s.projectList,defaultColDef:i.defaultColDef,columnDefs:i.colDefs,pagination:!0,onRowClicked:o.onRowClicked,onSelectionChanged:o.onSelectionChanged},null,8,["rowData","defaultColDef","columnDefs","onRowClicked","onSelectionChanged"])])}var Cg={name:"App",components:{AgGridVue:$t.n},props:{projectList:{type:Array,required:!0}},data(){return{colDefs:[{field:"id",hide:!0},{field:"name",headerName:"Project Name",width:300},{field:"project_code",headerName:"Project Code",width:300},{field:"project_rev_number",headerName:"Project Rev No",width:300},{headerName:"Actions",cellRenderer:this.editButtonRenderer,width:250}],defaultColDef:{filter:!0,sortable:!0,resizable:!0,autoSize:!0},selectedRows:[]}},methods:{onRowClicked(e){this.$emit("rowClicked",e.data),this.$router.push(`/project-edit/${e.data.id}`)},onRowSelected(e){e.node.isSelected()&&this.$emit("rowSelected",e.node.data)},onSelectionChanged(e){const t=e.api.getSelectedRows(),s=t.length>0?t[0]:null;s?this.$emit("rowSelected",s):this.$emit("rowDeselected")},editButtonRenderer(e){console.log(e);const t=document.createElement("button");return t.innerHTML='<i class="fas fa-edit"></i>',t.classList.add("btn","btn-primary"),t.addEventListener("click",(()=>this.onEditClick(e.data.id))),t},onEditClick(e){this.$router.push(`/project-edit/${e}`)}}};const Sg=(0,he.Z)(Cg,[["render",wg]]);var Dg=Sg,Ig={components:{ProjectsLandingTable:Dg},data(){return{projectList:[]}},mounted(){this.getData()},methods:{getData(){this.$store.commit("setIsLoading",!0),ue.Z.get("/store/edit-project").then((e=>{console.log("response.data",e.data),this.projectList=e.data.projects,this.$store.commit("setIsLoading",!1)})).catch((e=>{console.error("Error fetching products:",e),this.$store.commit("setIsLoading",!1)}))}}};const Pg=(0,he.Z)(Ig,[["render",kg]]);var Rg=Pg;const xg=e=>((0,l.dD)("data-v-1745b83a"),e=e(),(0,l.Cn)(),e),Lg={key:0,class:"container text-center"},$g=xg((()=>(0,l._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,l._)("span",{class:"visually-hidden"},"Loading...")],-1))),Bg=xg((()=>(0,l._)("div",null,[(0,l._)("b",null," Loading...")],-1))),Ug=[$g,Bg],Og={key:1,class:"container"},Ng={class:"row align-items-center"},jg={class:"col-md-8 mt-4"},Mg={class:"d-flex align-items-center"},Eg=xg((()=>(0,l._)("h2",{class:"mb-0"},"Edit Project |",-1))),Tg={"aria-label":"breadcrumb",class:"ms-3"},qg={class:"breadcrumb bg-transparent m-0 p-0 justify-content-end"},Ag=xg((()=>(0,l._)("li",{class:"breadcrumb-item"},[(0,l._)("a",{href:"/"},[(0,l._)("i",{class:"fas fa-home me-1"}),(0,l.Uk)("Home")])],-1))),Fg={class:"breadcrumb-item active","aria-current":"page"},Wg=xg((()=>(0,l._)("i",{class:"fas fa-project-diagram me-1"},null,-1))),Vg=xg((()=>(0,l._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,l._)("i",{class:"fa fa-bars me-1","aria-hidden":"true"}),(0,l.Uk)("Project Details ")],-1))),Zg={class:"col-md-4 mt-4 d-flex justify-content-end"},zg={class:"mt-5"},Gg={class:"row"},Qg={class:"col-md-4"},Hg={class:"form-group"},Yg=xg((()=>(0,l._)("label",{for:"veplPartNumber"},"Project Name",-1))),Kg={class:"col-md-4"},Jg={class:"form-group"},Xg=xg((()=>(0,l._)("label",{for:"level"},"Project Code",-1))),ey={class:"col-md-4"},ty={class:"form-group"},sy=xg((()=>(0,l._)("label",{for:"priorityLevel"},"Project Rev No",-1))),ay={class:"form-group"},ly=xg((()=>(0,l._)("label",{for:"products"},"Products:",-1))),iy=xg((()=>(0,l._)("br",null,null,-1))),oy=xg((()=>(0,l._)("button",{type:"button",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#exampleModal"}," Add Product ",-1))),cy={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},ry={class:"modal-dialog modal-xl"},dy={class:"modal-content"},ny=xg((()=>(0,l._)("div",{class:"modal-header"},[(0,l._)("h1",{class:"modal-title fs-5",id:"exampleModalLabel"}," Create New Product "),(0,l._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),uy={class:"modal-body"},my={class:"card mt-4"},hy=xg((()=>(0,l._)("div",{class:"card-header bg-primary text-white"},[(0,l._)("h4",{class:"card-title"},[(0,l._)("i",{class:"fas fa-Product-diagram me-2"}),(0,l.Uk)(" Product Information ")])],-1))),py={class:"card-body"},by={class:"mb-3"},fy=xg((()=>(0,l._)("label",{for:"productName",class:"form-label"},"Product Name:",-1))),_y={key:0,class:"text-danger"},gy={class:"mb-3"},yy=xg((()=>(0,l._)("label",{for:"productCode",class:"form-label"},"Product Code:",-1))),vy={key:0,class:"text-danger"},ky={class:"mb-3"},wy=xg((()=>(0,l._)("label",{for:"ProductRevNo",class:"form-label"},"Product Rev No:",-1))),Cy={key:0,class:"text-danger"},Sy={class:"modal-footer"},Dy=xg((()=>(0,l._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1))),Iy=xg((()=>(0,l._)("i",{class:"fas fa-save me-1"},null,-1)));function Py(e,t,s,i,o,c){const r=(0,l.up)("router-link"),d=(0,l.up)("products-for-project-grid");return e.$store.state.isLoading?((0,l.wg)(),(0,l.iD)("div",Lg,Ug)):((0,l.wg)(),(0,l.iD)("div",Og,[(0,l._)("div",Ng,[(0,l._)("div",jg,[(0,l._)("div",Mg,[Eg,(0,l._)("nav",Tg,[(0,l._)("ol",qg,[Ag,(0,l._)("li",Fg,[(0,l.Wm)(r,{to:"/projects"},{default:(0,l.w5)((()=>[Wg,(0,l.Uk)("Projects ")])),_:1})]),Vg])])])]),(0,l._)("div",Zg,[(0,l._)("button",{type:"button",class:"btn btn-primary me-2",onClick:t[0]||(t[0]=(...e)=>c.updateProject&&c.updateProject(...e))}," Update Project "),(0,l._)("button",{type:"button",class:"btn btn-danger",onClick:t[1]||(t[1]=(...e)=>c.deleteProject&&c.deleteProject(...e))}," Delete Project ")])]),(0,l._)("section",zg,[(0,l._)("div",Gg,[(0,l._)("div",Qg,[(0,l._)("div",Hg,[Yg,(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>o.editedProject.name=e),type:"text",class:"form-control"},null,512),[[a.nr,o.editedProject.name]])])]),(0,l._)("div",Kg,[(0,l._)("div",Jg,[Xg,(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>o.editedProject.project_code=e),type:"text",class:"form-control"},null,512),[[a.nr,o.editedProject.project_code]])])]),(0,l._)("div",ey,[(0,l._)("div",ty,[sy,(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>o.editedProject.project_rev_number=e),type:"text",class:"form-control"},null,512),[[a.nr,o.editedProject.project_rev_number]])])])]),(0,l._)("div",ay,[ly,iy,oy,(0,l.Wm)(d,{style:{"margin-top":"20px"},products:o.project.products,onRowSelected:e.handleRowSelected},null,8,["products","onRowSelected"])])]),(0,l._)("div",cy,[(0,l._)("div",ry,[(0,l._)("div",dy,[ny,(0,l._)("div",uy,[(0,l._)("div",my,[hy,(0,l._)("div",py,[(0,l._)("div",by,[fy,(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>o.newProduct.name=e),type:"text",class:"form-control",id:"productName",required:""},null,512),[[a.nr,o.newProduct.name]]),o.newProduct.name?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("small",_y,"Product Name is required."))]),(0,l._)("div",gy,[yy,(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>o.newProduct.product_code=e),class:"form-control",id:"productCode",required:""},null,512),[[a.nr,o.newProduct.product_code]]),o.newProduct.product_code?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("small",vy,"Product Code is required."))]),(0,l._)("div",ky,[wy,(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>o.newProduct.product_rev_number=e),type:"text",class:"form-control",id:"productRevNo",required:""},null,512),[[a.nr,o.newProduct.product_rev_number]]),o.newProduct.product_rev_number?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("small",Cy,"Product Rev No is required."))])])])]),(0,l._)("div",Sy,[Dy,(0,l._)("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal",onClick:t[8]||(t[8]=(...e)=>c.createProduct&&c.createProduct(...e))},[Iy,(0,l.Uk)(" Create New Product ")])])])])])]))}const Ry={class:"ag-theme-quartz",style:{height:"600px"}};function xy(e,t,s,a,i,o){const c=(0,l.up)("ag-grid-vue");return(0,l.wg)(),(0,l.iD)("div",Ry,[(0,l.Wm)(c,{ref:"agGrid",gridOptions:i.gridOptions,columnDefs:i.columnDefs,rowData:s.products,onRowClicked:o.onRowClicked,onRowSelected:o.onRowSelected},null,8,["gridOptions","columnDefs","rowData","onRowClicked","onRowSelected"])])}var Ly={components:{"ag-grid-vue":$t.n},props:{products:{type:Array,default:()=>[]},selectedProducts:{type:Array,default:()=>[]}},data(){return{gridOptions:{domLayout:"autoHeight",rowSelection:"multiple",pagination:!0,paginationPageSize:20},columnDefs:[{headerCheckboxSelection:!0,checkboxSelection:!0,headerName:"Product name",field:"name",width:300},{headerName:"Product Code",field:"product_code",width:300},{headerName:"Product Rev No",field:"product_rev_number",width:300},{headerName:"Actions",field:"actions",cellRenderer:this.actionsCellRenderer,sortable:!1,filter:!1}]}},methods:{onRowClicked(e){this.$emit("rowClicked",e.data),this.$router.push(`/product/edit/${e.data.id}`)},onRowSelected(e){e.node.isSelected()&&this.$emit("rowSelected",e.data)},onSelectionChanged(){this.$refs.agGrid&&this.$refs.agGrid.api&&(this.selectedRows=this.$refs.agGrid.api.getSelectedRows())},actionsCellRenderer(e){const t=document.createElement("button");t.innerHTML='<i class="fas fa-edit"></i>',t.classList.add("btn","btn-primary","ms-2"),t.addEventListener("click",(()=>this.onEditClick(e.data.id)));const s=document.createElement("button");s.innerHTML='<i class="fas fa-trash-alt"></i>',s.classList.add("btn","btn-danger","ms-4"),s.addEventListener("click",(t=>this.deleteProduct(e.data.id,t)));const a=document.createElement("div");return a.appendChild(t),a.appendChild(s),a},onEditClick(e){this.$router.push(`/product/edit/${e}`)},async deleteProduct(e,t){t.stopPropagation(),confirm("Are you sure you want to delete this product?")&&(this.$store.commit("setIsLoading",!0),ue.Z.delete(`/store/delete-product/${e}/`).then((e=>{console.log(e.data),console.log("Product deleted successfully."),this.$store.commit("setIsLoading",!1),this.$notify({title:"Product Deleted Successfully",type:"bg-success-subtle text-success",duration:"5000"}),window.location.reload()})).catch((e=>{console.error("Error deleting user:",e),this.$notify({title:"Product Deletion Unsuccessful",type:"bg-danger-subtle text-danger",duration:"5000"})})))}}};const $y=(0,he.Z)(Ly,[["render",xy],["__scopeId","data-v-cbc677c0"]]);var By=$y,Uy={components:{"products-for-project-grid":By},data(){return{editedProject:{name:"",project_code:"",project_rev_number:"",products:[]},newProduct:{name:"",product_code:"",product_rev_number:""},project:[],products:[]}},mounted(){this.fetchData()},methods:{async fetchData(){this.$store.commit("setIsLoading",!0),ue.Z.get(`/store/edit-project/${this.$route.params.id}`).then((e=>{console.log("response.data",e.data),this.project=e.data.project,this.project&&(this.editedProject.name=this.project.name,this.editedProject.project_code=this.project.project_code,this.editedProject.project_rev_number=this.project.project_rev_number),this.$store.commit("setIsLoading",!1)})).catch((e=>{console.error("Error fetching products:",e),this.$store.commit("setIsLoading",!1)}))},updateProject(){console.log("Edited Project:",this.editedProject),confirm("Are you sure you want to update this project?")&&(this.$store.commit("setIsLoading",!0),ue.Z.put(`/store/edit-project/${this.$route.params.id}/`,this.editedProject).then((e=>{console.log("Project updated successfully:",e.data),this.$store.commit("setIsLoading",!1),this.$notify({title:"Project Updated Successfully",type:"bg-success-subtle text-success",duration:"5000"}),this.$router.push("/projects")})).catch((e=>{console.error("Error updating Project:",e),this.$notify({title:"Project Creation Unsuccessful",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1)})))},createProduct(){this.$store.commit("setIsLoading",!0),console.log("form data",this.newProduct),this.newProduct.name&&this.newProduct.product_code&&this.newProduct.product_rev_number&&ue.Z.post(`/store/create-product/${this.$route.params.id}/`,this.newProduct).then((e=>{console.log("Product created successfully:",e.data),this.$store.commit("setIsLoading",!1);const t=e.data.product;this.project.products.push(t),this.$notify({title:"Product Created Successfully",type:"bg-success-subtle text-success",duration:"5000"}),this.newProduct={};const s=this.$route.params.id;this.$router.push(`/project-edit/${s}`)})).catch((e=>{console.error("Error creating Product:",e),this.$store.commit("setIsLoading",!1),this.$notify({title:"Product Creation Unsuccessful",type:"bg-danger-subtle text-danger",duration:"5000"})}))},deleteProject(){confirm("Are you sure you want to delete this project?")&&(this.$store.commit("setIsLoading",!0),ue.Z.delete(`/store/delete-project/${this.$route.params.id}/`).then((e=>{console.log(e.data),console.log("Project deleted successfully."),this.$store.commit("setIsLoading",!1),this.$notify({title:"Project Deleted Successfully",type:"bg-success-subtle text-success",duration:"5000"}),this.$router.push("/projects")})).catch((e=>{console.error("Error deleting user:",e),this.$notify({title:"Project Deletion Unsuccessful",type:"bg-danger-subtle text-danger",duration:"5000"})})))}}};const Oy=(0,he.Z)(Uy,[["render",Py],["__scopeId","data-v-1745b83a"]]);var Ny=Oy;const jy=e=>((0,l.dD)("data-v-5c54ad78"),e=e(),(0,l.Cn)(),e),My={class:"container"},Ey={class:"row align-items-center"},Ty={class:"col-md-6 mt-4"},qy={class:"d-flex align-items-center"},Ay=jy((()=>(0,l._)("h2",{class:"mb-0"},"Projects",-1))),Fy=jy((()=>(0,l._)("span",{class:"ms-3 fs-4 text-muted"},"|",-1))),Wy={"aria-label":"breadcrumb",class:"d-inline-block ms-3"},Vy={class:"breadcrumb bg-transparent m-0 p-0"},Zy={class:"breadcrumb-item"},zy=jy((()=>(0,l._)("i",{class:"fas fa-home me-1"},null,-1))),Gy={class:"breadcrumb-item"},Qy=jy((()=>(0,l._)("i",{class:"fas fa-project-diagram me-1"},null,-1))),Hy=jy((()=>(0,l._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,l._)("i",{class:"fa fa-plus"}),(0,l.Uk)(" Create Project ")],-1))),Yy={class:"col-md-6 mt-4 text-end"},Ky=jy((()=>(0,l._)("i",{class:"fas fa-save me-1"},null,-1))),Jy={class:"card mt-4"},Xy=jy((()=>(0,l._)("div",{class:"card-header bg-primary text-white"},[(0,l._)("h4",{class:"card-title"},[(0,l._)("i",{class:"fas fa-project-diagram me-2"}),(0,l.Uk)(" Project Information ")])],-1))),ev={class:"card-body"},tv={class:"mb-3"},sv=jy((()=>(0,l._)("label",{for:"projectName",class:"form-label"},"Project Name:",-1))),av={key:0,class:"text-danger"},lv={class:"mb-3"},iv=jy((()=>(0,l._)("label",{for:"projectCode",class:"form-label"},"Project Code:",-1))),ov={key:0,class:"text-danger"},cv={class:"mb-3"},rv=jy((()=>(0,l._)("label",{for:"projectRevNo",class:"form-label"},"Project Rev No:",-1)));function dv(e,t,s,i,o,c){const r=(0,l.up)("router-link");return(0,l.wg)(),(0,l.iD)("div",My,[(0,l._)("div",Ey,[(0,l._)("div",Ty,[(0,l._)("div",qy,[Ay,Fy,(0,l._)("nav",Wy,[(0,l._)("ol",Vy,[(0,l._)("li",Zy,[(0,l.Wm)(r,{to:"/"},{default:(0,l.w5)((()=>[zy,(0,l.Uk)("Home")])),_:1})]),(0,l._)("li",Gy,[(0,l.Wm)(r,{to:"/projects"},{default:(0,l.w5)((()=>[Qy,(0,l.Uk)("Projects")])),_:1})]),Hy])])])]),(0,l._)("div",Yy,[(0,l._)("button",{type:"submit",class:"btn btn-success btn-sm",onClick:t[0]||(t[0]=(...e)=>c.createProject&&c.createProject(...e))},[Ky,(0,l.Uk)(" Create Project ")])])]),(0,l._)("div",Jy,[Xy,(0,l._)("div",ev,[(0,l._)("div",tv,[sv,(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>o.newProject.name=e),type:"text",class:"form-control",id:"projectName",required:""},null,512),[[a.nr,o.newProject.name]]),o.newProject.name?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("small",av,"Project Name is required."))]),(0,l._)("div",lv,[iv,(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>o.newProject.project_code=e),type:"text",class:"form-control",id:"projectCode",required:""},null,512),[[a.nr,o.newProject.project_code]]),o.newProject.project_code?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("small",ov,"Project Code is required."))]),(0,l._)("div",cv,[rv,(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>o.newProject.project_rev_number=e),type:"text",class:"form-control",id:"projectRevNo"},null,512),[[a.nr,o.newProject.project_rev_number]])])])])])}var nv={name:"CreateProject",data(){return{newProject:{name:"",project_code:"",project_rev_number:""}}},methods:{createProject(){this.$store.commit("setIsLoading",!0),this.newProject.name&&this.newProject.project_code&&this.newProject.project_rev_number&&ue.Z.post("/store/create-project/",this.newProject).then((e=>{console.log("Project created successfully:",e.data),this.$store.commit("setIsLoading",!1),this.$notify({title:"Project Created Successfully",type:"bg-success-subtle text-success",duration:"5000"}),this.$router.push("/projects")})).catch((e=>{console.error("Error creating project:",e),this.$store.commit("setIsLoading",!1),this.$notify({title:"Project Creation Unsuccessful",type:"bg-danger-subtle text-danger",duration:"5000"})}))}}};const uv=(0,he.Z)(nv,[["render",dv],["__scopeId","data-v-5c54ad78"]]);var mv=uv;const hv=e=>((0,l.dD)("data-v-b198b0c4"),e=e(),(0,l.Cn)(),e),pv={key:0,class:"container text-center"},bv=hv((()=>(0,l._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,l._)("span",{class:"visually-hidden"},"Loading...")],-1))),fv=hv((()=>(0,l._)("div",null,[(0,l._)("b",null," Loading... ")],-1))),_v=[bv,fv],gv={key:1,class:"container"},yv={class:"row align-items-center"},vv={class:"col-md-6 mt-4"},kv={class:"d-flex align-items-center"},wv=hv((()=>(0,l._)("h2",{class:"mb-0"},"Edit Product",-1))),Cv=hv((()=>(0,l._)("span",{class:"ms-3 fs-4 text-muted"},"|",-1))),Sv={"aria-label":"breadcrumb",class:"d-inline-block ms-3"},Dv={class:"breadcrumb bg-transparent m-0 p-0"},Iv={class:"breadcrumb-item"},Pv=hv((()=>(0,l._)("i",{class:"fas fa-home me-1"},null,-1))),Rv={class:"breadcrumb-item"},xv=hv((()=>(0,l._)("i",{class:"fas fa-project-diagram me-1"},null,-1))),Lv={class:"breadcrumb-item"},$v=hv((()=>(0,l._)("i",{class:"fas fa-bars me-1"},null,-1))),Bv=hv((()=>(0,l._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,l._)("i",{class:"fas fa-edit me-1"}),(0,l.Uk)(" Edit Product ")],-1))),Uv={class:"col-md-6 mt-4 text-end"},Ov=hv((()=>(0,l._)("i",{class:"fas fa-save me-1"},null,-1))),Nv=hv((()=>(0,l._)("i",{class:"fas fa-trash me-1"},null,-1))),jv={class:"card animate__animated animate__fadeIn mt-5"},Mv=hv((()=>(0,l._)("div",{class:"card-header bg-primary text-white"},[(0,l._)("h4",{class:"card-title"},[(0,l._)("i",{class:"fas fa-user me-1"}),(0,l.Uk)(" Product Information ")])],-1))),Ev={class:"card-body"},Tv={class:"mb-3"},qv=hv((()=>(0,l._)("label",{for:"email",class:"form-label"},"Product Name:",-1))),Av={class:"input-group"},Fv=hv((()=>(0,l._)("span",{class:"input-group-text"},[(0,l._)("i",{class:"fas fa-envelope"})],-1))),Wv={key:0,class:"text-danger"},Vv={class:"mb-3 row"},Zv={class:"col"},zv=hv((()=>(0,l._)("label",{for:"first_name",class:"form-label"},"Product Code:",-1))),Gv={class:"input-group"},Qv=hv((()=>(0,l._)("span",{class:"input-group-text"},[(0,l._)("i",{class:"fas fa-user"})],-1))),Hv={key:0,class:"text-danger"},Yv={class:"col"},Kv=hv((()=>(0,l._)("label",{for:"first_name",class:"form-label"},"Product Rev No:",-1))),Jv={class:"input-group"},Xv=hv((()=>(0,l._)("span",{class:"input-group-text"},[(0,l._)("i",{class:"fas fa-user"})],-1))),ek={key:0,class:"text-danger"};function tk(e,t,s,i,o,c){const r=(0,l.up)("router-link");return e.$store.state.isLoading?((0,l.wg)(),(0,l.iD)("div",pv,_v)):((0,l.wg)(),(0,l.iD)("div",gv,[(0,l._)("div",yv,[(0,l._)("div",vv,[(0,l._)("div",kv,[wv,Cv,(0,l._)("nav",Sv,[(0,l._)("ol",Dv,[(0,l._)("li",Iv,[(0,l.Wm)(r,{to:"/"},{default:(0,l.w5)((()=>[Pv,(0,l.Uk)(" Home")])),_:1})]),(0,l._)("li",Rv,[(0,l.Wm)(r,{to:"/projects"},{default:(0,l.w5)((()=>[xv,(0,l.Uk)(" Projects")])),_:1})]),(0,l._)("li",Lv,[(0,l.Wm)(r,{to:`/project-edit/${this.product.project}`},{default:(0,l.w5)((()=>[$v,(0,l.Uk)(" Products Details")])),_:1},8,["to"])]),Bv])])])]),(0,l._)("div",Uv,[(0,l._)("button",{type:"submit",class:"btn btn-primary btn-sm",onClick:t[0]||(t[0]=(...e)=>c.updateProduct&&c.updateProduct(...e))},[Ov,(0,l.Uk)(" Update Product ")]),(0,l._)("button",{type:"button",class:"btn btn-danger ms-2 btn-sm",onClick:t[1]||(t[1]=(...e)=>c.deleteProduct&&c.deleteProduct(...e))},[Nv,(0,l.Uk)(" Delete Product ")])])]),(0,l._)("div",jv,[Mv,(0,l._)("div",Ev,[(0,l._)("div",Tv,[qv,(0,l._)("div",Av,[Fv,(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>o.editedProduct.name=e),type:"text",class:"form-control",id:"project_name",required:""},null,512),[[a.nr,o.editedProduct.name]])]),o.editedProduct.name?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("small",Wv,"Project Name is required."))]),(0,l._)("div",Vv,[(0,l._)("div",Zv,[zv,(0,l._)("div",Gv,[Qv,(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>o.editedProduct.product_code=e),type:"text",class:"form-control",id:"product_code",required:""},null,512),[[a.nr,o.editedProduct.product_code]])]),o.editedProduct.product_code?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("small",Hv,"First Name is required."))]),(0,l._)("div",Yv,[Kv,(0,l._)("div",Jv,[Xv,(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>o.editedProduct.product_rev_number=e),type:"text",class:"form-control",id:"product_rev_number",required:""},null,512),[[a.nr,o.editedProduct.product_rev_number]])]),o.editedProduct.product_rev_number?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("small",ek,"Product Rev Number is required."))])])])])]))}var sk={name:"EditProduct",data(){return{editedProduct:{name:"",product_code:"",product_rev_number:""},product:[]}},mounted(){this.fetchData()},methods:{async fetchData(){this.$store.commit("setIsLoading",!0),console.log("id",this.$route.params.id),ue.Z.get(`/store/edit-product/${this.$route.params.id}`).then((e=>{console.log("response.data ",e.data),this.product=e.data.product,this.product&&(this.editedProduct.name=this.product.name,this.editedProduct.product_code=this.product.product_code,this.editedProduct.product_rev_number=this.product.product_rev_number),this.$store.commit("setIsLoading",!1)})).catch((e=>{console.error("Error fetching products:",e),this.$store.commit("setIsLoading",!1)}))},updateProduct(){confirm("Are you sure you want to update this product?")&&(this.$store.commit("setIsLoading",!0),ue.Z.put(`/store/edit-product/${this.$route.params.id}/`,this.editedProduct).then((e=>{console.log("Product updated successfully:",e.data),this.$store.commit("setIsLoading",!1),this.$notify({title:"Product Updated Successfully",type:"bg-success-subtle text-success",duration:"5000"});const t=this.product.project;this.$router.push(`/project-edit/${t}`)})).catch((e=>{console.error("Error updating Product:",e),this.$notify({title:"Product Creation Unsuccessful",type:"bg-danger-subtle text-danger",duration:"5000"}),this.$store.commit("setIsLoading",!1)})))},deleteProduct(){confirm("Are you sure you want to delete this product?")&&(this.$store.commit("setIsLoading",!0),ue.Z.delete(`/store/delete-product/${this.$route.params.id}/`).then((()=>{console.log("Product  deleted successfully."),this.$store.commit("setIsLoading",!1),this.$notify({title:"Product Deleted Successfully",type:"bg-success-subtle text-success",duration:"5000"});const e=this.product.project;this.$router.push(`/project-edit/${e}`)})).catch((e=>{console.error("Error deleting user:",e),this.$notify({title:"Product Deletion Unsuccessful",type:"bg-danger-subtle text-danger",duration:"5000"})})))}}};const ak=(0,he.Z)(sk,[["render",tk],["__scopeId","data-v-b198b0c4"]]);var lk=ak;const ik={key:0,class:"container text-center"},ok=(0,l._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,l._)("span",{class:"visually-hidden"},"Loading...")],-1),ck=(0,l._)("div",null,[(0,l._)("b",null," Loading... ")],-1),rk=[ok,ck],dk={key:1,class:"container"},nk={class:"row align-items-center"},uk=(0,l.uE)('<div class="col-md-6 mt-4"><div class="d-flex align-items-center"><h2 class="mb-0">Checklist</h2><span class="ms-3 fs-4 text-muted">|</span><nav aria-label="breadcrumb" class="d-inline-block ms-3"><ol class="breadcrumb bg-transparent m-0 p-0"><li class="breadcrumb-item"><a href="/"><i class="fas fa-home me-1"></i>Home</a></li><li class="breadcrumb-item active" aria-current="page"><i class="fas fa-list-alt me-1"></i> Checklist </li></ol></nav></div></div>',1),mk={class:"col-md-6 mt-4 text-end"},hk={class:"container has-text-centered"},pk={class:"d-flex"},bk=["disabled"],fk=["disabled"],_k=["disabled"],gk={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},yk={class:"modal-dialog"},vk={class:"modal-content"},kk=(0,l._)("div",{class:"modal-header"},[(0,l._)("h1",{class:"modal-title fs-5",id:"exampleModalLabel"}," Fill the Required Batch Quantity "),(0,l._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),wk={class:"modal-body"},Ck={class:"modal-footer"},Sk=(0,l._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1);function Dk(e,t,s,i,o,c){const r=(0,l.up)("OrderDetailsTable");return e.$store.state.isLoading?((0,l.wg)(),(0,l.iD)("div",ik,rk)):((0,l.wg)(),(0,l.iD)("div",dk,[(0,l._)("div",nk,[uk,(0,l._)("div",mk,[(0,l._)("div",hk,[(0,l._)("div",pk,[(0,l._)("button",{type:"button",disabled:!o.isButtonEnabled,class:"btn btn-primary btn-sm",onClick:t[0]||(t[0]=(...e)=>c.checkAndGenerateChecklist&&c.checkAndGenerateChecklist(...e))}," Generate New Checklist ",8,bk),(0,l._)("button",{onClick:t[1]||(t[1]=(...e)=>c.checkExistingChecklist&&c.checkExistingChecklist(...e)),disabled:!o.isButtonEnabled,class:"btn btn-warning btn-sm ms-2"}," View Ongoing Checklist ",8,fk),(0,l._)("button",{onClick:t[2]||(t[2]=(...e)=>c.viewGeneratedChecklists&&c.viewGeneratedChecklists(...e)),disabled:!o.isButtonEnabled,class:"btn btn-success btn-sm ms-2"}," View Generated Checklists ",8,_k)])])])]),(0,l.Wm)(r,{style:{"margin-top":"20px"},orders:e.orders,onRowClicked:c.handleRowClicked,onRowSelected:c.handleRowSelected,onRowDeselected:c.handleRowDeselected},null,8,["orders","onRowClicked","onRowSelected","onRowDeselected"]),(0,l._)("div",gk,[(0,l._)("div",yk,[(0,l._)("div",vk,[kk,(0,l._)("div",wk,[(0,l.wy)((0,l._)("input",{type:"number",class:"form-control",id:"requiredBatchQuantity","onUpdate:modelValue":t[3]||(t[3]=e=>o.batch_quantity=e),placeholder:"Enter Batch Quantity",min:"1"},null,512),[[a.nr,o.batch_quantity]])]),(0,l._)("div",Ck,[Sk,(0,l._)("button",{onClick:t[4]||(t[4]=(...e)=>c.checkAndGenerateChecklist&&c.checkAndGenerateChecklist(...e)),type:"button",class:"btn btn-primary","data-bs-dismiss":"modal"}," Generate Checklist ")])])])])]))}function Ik(e,t,s,a,i,o){const c=(0,l.up)("ag-grid-vue");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l.Wm)(c,{style:{height:"500px"},class:"ag-theme-quartz",rowData:s.orders,defaultColDef:i.defaultColDef,columnDefs:i.colDefs,pagination:!0,rowSelection:"multiple",onRowClicked:o.onRowClicked,onSelectionChanged:o.onSelectionChanged},null,8,["rowData","defaultColDef","columnDefs","onRowClicked","onSelectionChanged"])])}var Pk={name:"App",components:{AgGridVue:$t.n},props:{orders:{type:Array,required:!0}},data(){return{colDefs:[{field:"id",headerName:"Order ID",checkboxSelection:!0},{field:"bom.id",headerName:"BOM ID ",hide:!0},{field:"bom.product.project.name",headerName:"Project Name"},{field:"bom.product.name",headerName:"Product"},{field:"batch_quantity",headerName:"Batch Quantity"},{field:"bom.bom_file_name",headerName:"BOM File Name"},{headerName:"Download",cellRenderer:this.editButtonRenderer,flex:1}],defaultColDef:{filter:!0,sortable:!0,resizable:!0,autoSize:!0,autoSizeColumns:!0},selectedRows:[]}},methods:{onRowClicked(e){this.$emit("rowClicked",e.data)},onSelectionChanged(e){const t=e.api.getSelectedRows(),s=t.length>0?t[0]:null;s?this.$emit("rowSelected",s):this.$emit("rowDeselected")},editButtonRenderer(e){console.log(e);const t=document.createElement("button");return t.innerHTML='<i class="fas fa-download"></i>',t.classList.add("btn-sm","btn-primary"),t.addEventListener("click",(()=>this.downloadFile(e.data.bom.bom_file_url))),t},downloadFile(e){const t=document.createElement("a");t.href=e,t.target="_blank",t.download="BOM_File",document.body.appendChild(t),t.click(),document.body.removeChild(t)},onEditClick(e){this.$router.push(`/bom/edit/${e}`)}}};const Rk=(0,he.Z)(Pk,[["render",Ik]]);var xk=Rk,Lk={components:{OrderDetailsTable:xk},data(){return{rowData:[],selectedRow:null,clickedRowId:null,orderId:null,isButtonEnabled:!1,isExisting:!1,isActive:!1,batch_quantity:1}},methods:{async fetchData(){try{this.$store.commit("setIsLoading",!0);const e=await ue.Z.get("store/get-orders/");this.orders=e.data.orders,console.log(e.data.orders),this.$store.commit("setIsLoading",!1)}catch(e){console.error("Error fetching BOM data:",e),this.$store.commit("setIsLoading",!1)}},handleRowClicked(e){console.log("Clicked Row:",e)},handleRowSelected(e){console.log("Row Selected:",e),e&&e.id&&(this.selectedRow=e,this.clickedRowId=e.bom.id,this.orderId=e.id,console.log("clicked row id +BOM ID =",this.clickedRowId),console.log("Order ID =",this.orderId),this.isButtonEnabled=!0)},handleRowDeselected(){console.log("Row Deselected:"),this.isButtonEnabled=!1},async checkAndGenerateChecklist(){this.$store.commit("setIsLoading",!0),await ue.Z.post(`store/check-existing-checklist/${this.clickedRowId}/`).then((e=>{console.log(e.data),this.isActive=e.data.is_active,this.isExisting=e.data.is_existing,this.isExisting?this.$notify({title:"There is already an active ongoing checklist for this order, please end that checklist by viewing the ongoing checklist to generate a new one.",type:"bg-danger-subtle text-danger",duration:"5000"}):(this.$store.commit("setIsLoading",!0),this.generateChecklist())})).catch((e=>{console.log("error:",e),this.$notify({title:"An error occurred, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"})})).finally((()=>{this.$store.commit("setIsLoading",!1)}))},async generateChecklist(){this.$store.commit("setIsLoading",!0),await ue.Z.post(`store/generate-new-checklist/${this.orderId}/`).then((e=>{this.$store.commit("setIsLoading",!1),console.log(e.data),this.$router.push(`/begin-checklist/${this.clickedRowId}`)})).catch((e=>{this.$store.commit("setIsLoading",!1),console.log("error:",e),this.$notify({title:"An error occurred, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"})})).finally((()=>{this.$store.commit("setIsLoading",!1)}))},async checkExistingChecklist(){this.$store.commit("setIsLoading",!0),await ue.Z.post(`store/check-existing-checklist/${this.clickedRowId}/`).then((e=>{console.log(e.data),this.isActive=e.data.is_active,this.isExisting=e.data.is_existing,this.isExisting?this.isActive?this.$router.push(`/begin-checklist/${this.clickedRowId}`):this.$notify({title:"No active checklist found for this bom, please generate a new checklist",type:"bg-danger-subtle text-danger",duration:"5000"}):this.$notify({title:"No ongoing checklist found for this order, please generate a new checklist",type:"bg-danger-subtle text-danger",duration:"5000"})})).catch((e=>{console.log("error:",e),this.$notify({title:"An error occured, please try again later",type:"bg-danger-subtle text-danger",duration:"5000"})})).finally((()=>{this.$store.commit("setIsLoading",!1)}))},viewOngoingChecklists(){this.clickedRowId&&this.$router.push(`/begin-checklist/${this.clickedRowId}`)},viewGeneratedChecklists(){this.clickedRowId&&this.$router.push(`/generated-checklists/${this.clickedRowId}`)}},mounted(){this.fetchData()}};const $k=(0,he.Z)(Lk,[["render",Dk]]);var Bk=$k;const Uk={key:0,class:"container text-center"},Ok=(0,l._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,l._)("span",{class:"visually-hidden"},"Loading...")],-1),Nk=(0,l._)("div",null,[(0,l._)("b",null," Loading... ")],-1),jk=[Ok,Nk],Mk={key:1,class:"container"},Ek={class:"row align-items-center"},Tk=(0,l.uE)('<div class="col-md-6 mt-4"><div class="d-flex align-items-center"><h2 class="mb-0">IQC for Checklist</h2><span class="ms-3 fs-4 text-muted">|</span><nav aria-label="breadcrumb" class="d-inline-block ms-3"><ol class="breadcrumb bg-transparent m-0 p-0"><li class="breadcrumb-item"><a href="/"><i class="fas fa-home me-1"></i>Home</a></li><li class="breadcrumb-item active" aria-current="page"><i class="fas fa-list-alt me-1"></i> Checklist </li></ol></nav></div></div>',1),qk={class:"col-md-6 mt-4 text-end"},Ak={class:"container has-text-centered"},Fk={class:"d-flex justify-content-end"},Wk=["disabled"];function Vk(e,t,s,a,i,o){const c=(0,l.up)("PassedChecklistsTable");return e.$store.state.isLoading?((0,l.wg)(),(0,l.iD)("div",Uk,jk)):((0,l.wg)(),(0,l.iD)("div",Mk,[(0,l._)("div",Ek,[Tk,(0,l._)("div",qk,[(0,l._)("div",Ak,[(0,l._)("div",Fk,[(0,l._)("button",{onClick:t[0]||(t[0]=(...e)=>o.startIqc&&o.startIqc(...e)),disabled:!i.isButtonEnabled,class:"btn btn-success btn-sm ms-2"}," Start IQC ",8,Wk)])])])]),(0,l.Wm)(c,{style:{"margin-top":"20px"},passed_checklists:i.passed_checklists,onRowClicked:o.handleRowClicked,onRowSelected:o.handleRowSelected,onRowDeselected:o.handleRowDeselected},null,8,["passed_checklists","onRowClicked","onRowSelected","onRowDeselected"])]))}function Zk(e,t,s,a,i,o){const c=(0,l.up)("ag-grid-vue");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l.Wm)(c,{style:{height:"500px"},class:"ag-theme-quartz",rowData:s.passed_checklists,defaultColDef:i.defaultColDef,columnDefs:i.colDefs,pagination:!0,onRowClicked:o.onRowClicked,onSelectionChanged:o.onSelectionChanged},null,8,["rowData","defaultColDef","columnDefs","onRowClicked","onSelectionChanged"])])}var zk={components:{AgGridVue:$t.n},props:{passed_checklists:{type:Array,required:!0}},data(){return{colDefs:[{headerName:"Checklist ID",field:"id",checkboxSelection:!0},{headerName:"Unique Code",field:"unique_code",valueFormatter:function(e){return null===e.value?"null":e.value}},{headerName:"Project Name",field:"bom.product.project.name"},{headerName:"Product Name",field:"bom.product.name"},{headerName:"Product Code",field:"bom.product.product_code"},{headerName:"Updated At",field:"updated_at"},{headerName:"Updated By",valueGetter:function(e){if(console.log(e.data.updated_by),null!=e.data.updated_by){const t=e.data.updated_by.first_name||"",s=e.data.updated_by.last_name||"";return t||s?`${t} ${s}`:""}return""}},{headerName:"Created At",field:"created_at"},{headerName:"Created By",valueGetter:function(e){const t=e.data.created_by.first_name||"",s=e.data.created_by.last_name||"";return t||s?`${t} ${s}`:""}},{headerName:"Status",field:"status"},{headerName:"View",cellRenderer:this.viewButtonRenderer}],defaultColDef:{filter:!0,sortable:!0,resizable:!0,autoSize:!0},gridApi:null}},mounted(){},methods:{onRowClicked(e){this.$emit("rowClicked",e.data)},onSelectionChanged(e){const t=e.api.getSelectedRows(),s=t.length>0?t[0]:null;s?this.$emit("rowSelected",s):this.$emit("rowDeselected")},onGridReady(e){this.gridApi=e.api},viewButtonRenderer(e){const t=document.createElement("button");return t.innerHTML='<i class="fas fa-eye"></i>',t.classList.add("btn","btn-outline-secondary"),t.addEventListener("click",(()=>this.onViewClick(e.data))),t},onViewClick(e){"In Progress"===e.status?this.$router.push(`/begin-checklist/${e.bom.id}`):this.$router.push(`/checklist-details/${e.id}`)}}};const Gk=(0,he.Z)(zk,[["render",Zk],["__scopeId","data-v-b7ef300c"]]);var Qk=Gk,Hk={components:{PassedChecklistsTable:Qk},data(){return{selectedRow:null,clickedRowId:null,isButtonEnabled:!1,isExisting:!1,isActive:!1,passed_checklists:[]}},methods:{async fetchData(){try{this.$store.commit("setIsLoading",!0);const e=await ue.Z.get("store/get-passed-checklists/");this.passed_checklists=e.data.passed_checklists,console.log(e.data),this.$store.commit("setIsLoading",!1)}catch(e){console.error("Error fetching passed checklists:",e),this.$store.commit("setIsLoading",!1)}},handleRowClicked(e){console.log("Clicked Row:",e)},handleRowSelected(e){console.log("Row Selected:",e),e&&e.id&&(this.selectedRow=e,this.clickedRowId=e.id,this.isButtonEnabled=!0)},handleRowDeselected(){console.log("Row Deselected:"),this.isButtonEnabled=!1},startIqc(){this.clickedRowId&&this.$router.push(`/iqc-for-checklist/${this.clickedRowId}`)}},mounted(){this.fetchData()}};const Yk=(0,he.Z)(Hk,[["render",Vk]]);var Kk=Yk;const Jk=e=>((0,l.dD)("data-v-fb09ffc2"),e=e(),(0,l.Cn)(),e),Xk={key:0,class:"container text-center"},ew=Jk((()=>(0,l._)("div",{class:"spinner-border mt-5",style:{width:"4rem",height:"4rem"},role:"status"},[(0,l._)("span",{class:"visually-hidden"},"Loading...")],-1))),tw=Jk((()=>(0,l._)("div",null,[(0,l._)("b",null," Loading... ")],-1))),sw=[ew,tw],aw={key:1,class:"container"},lw={class:"row align-items-center"},iw={class:"col-md-6 mt-4"},ow={class:"d-flex align-items-center"},cw=Jk((()=>(0,l._)("h2",{class:"mb-0"},"Checklist",-1))),rw=Jk((()=>(0,l._)("span",{class:"ms-3 fs-4 text-muted me-3"},"|",-1))),dw={"aria-label":"breadcrumb"},nw={class:"breadcrumb bg-transparent m-0 p-0 justify-content-end"},uw=Jk((()=>(0,l._)("li",{class:"breadcrumb-item"},[(0,l._)("a",{href:"/"},[(0,l._)("i",{class:"fas fa-home me-1"}),(0,l.Uk)("Home")])],-1))),mw={class:"breadcrumb-item active","aria-current":"page"},hw=Jk((()=>(0,l._)("i",{class:"fas fa-list-alt me-1"},null,-1))),pw=Jk((()=>(0,l._)("li",{class:"breadcrumb-item active","aria-current":"page"},[(0,l._)("i",{class:"fas fa-spinner me-1"}),(0,l.Uk)(" Ongoing Checklist ")],-1))),bw={class:"col-md-6 mt-4"},fw={class:"container"},_w={class:"d-flex justify-content-end"},gw={key:0,type:"button","data-bs-toggle":"modal","data-bs-target":"#generateLabelModal",class:"btn btn-success me-2"},yw={key:1,type:"button","data-bs-toggle":"modal","data-bs-target":"#generateLabelModal",class:"btn btn-success me-2"},vw=Jk((()=>(0,l._)("button",{type:"button","data-bs-toggle":"modal","data-bs-target":"#endChecklistModal",class:"btn btn-danger"}," End Checklist ",-1))),kw={class:"modal fade",id:"generateLabelModal",tabindex:"-1","aria-labelledby":"generateLabelModalLabel","aria-hidden":"true"},ww={class:"modal-dialog"},Cw={class:"modal-content"},Sw=Jk((()=>(0,l._)("div",{class:"modal-header"},[(0,l._)("h1",{class:"modal-title fs-5",id:"generateLabelModalLabel"}," Generate Label "),(0,l._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),Dw={class:"modal-body"},Iw={key:0},Pw={key:0,id:"printable-content"},Rw=["src"],xw={key:1},Lw={key:1},$w={class:"modal-footer"},Bw=Jk((()=>(0,l._)("button",{type:"button",class:"btn btn-dark","data-bs-dismiss":"modal"}," Cancel ",-1))),Uw={key:0},Ow={class:"modal fade",id:"endChecklistModal",tabindex:"-1","aria-labelledby":"endChecklistModalLabel","aria-hidden":"true"},Nw={class:"modal-dialog"},jw={class:"modal-content"},Mw=Jk((()=>(0,l._)("div",{class:"modal-header"},[(0,l._)("h1",{class:"modal-title fs-5",id:"endChecklistModalLabel"}," End Checklist "),(0,l._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),Ew=Jk((()=>(0,l._)("div",{class:"modal-body"}," Are you sure you want to end this checklist? ",-1))),Tw={class:"modal-footer"},qw=Jk((()=>(0,l._)("button",{type:"button",class:"btn btn-dark","data-bs-dismiss":"modal"}," Cancel ",-1))),Aw={class:"card border-primary mb-4 mt-4"},Fw=Jk((()=>(0,l._)("div",{class:"card-header bg-primary text-white"},[(0,l._)("h4",{class:"mb-0"},"Bom Details")],-1))),Ww={class:"card-body"},Vw={class:"row"},Zw={key:0,class:"col"},zw=Jk((()=>(0,l._)("strong",null,"Project Name:",-1))),Gw={key:1,class:"col"},Qw=Jk((()=>(0,l._)("strong",null,"Product Name:",-1))),Hw={key:2,class:"col"},Yw=Jk((()=>(0,l._)("strong",null,"BOM Rev No:",-1))),Kw={key:3,class:"col"},Jw=Jk((()=>(0,l._)("strong",null,"Issue Date:",-1))),Xw={class:"accordion",id:"accordionPanelsStayOpenExample"},eC={class:"accordion-item"},tC={class:"accordion-header",id:"panelsStayOpen-headingOne"},sC={class:"accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseOne","aria-expanded":"true","aria-controls":"panelsStayOpen-collapseOne"},aC={key:0,class:"spinner-border ms-2",role:"status"},lC=Jk((()=>(0,l._)("span",{class:"visually-hidden"},"Loading...",-1))),iC=[lC],oC={key:1},cC=Jk((()=>(0,l._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),rC=[cC],dC={id:"panelsStayOpen-collapseOne",class:"accordion-collapse collapse show","aria-labelledby":"panelsStayOpen-headingOne"},nC={class:"accordion-body"},uC={class:"accordion-item"},mC={class:"accordion-header",id:"panelsStayOpen-headingTwo"},hC={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseTwo","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseTwo"},pC={key:0,class:"spinner-border ms-2",role:"status"},bC=Jk((()=>(0,l._)("span",{class:"visually-hidden"},"Loading...",-1))),fC=[bC],_C={key:1},gC=Jk((()=>(0,l._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),yC=[gC],vC={id:"panelsStayOpen-collapseTwo",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingTwo"},kC={class:"accordion-body"},wC={class:"accordion-item"},CC={class:"accordion-header",id:"panelsStayOpen-headingThree"},SC={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseThree","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseThree"},DC={key:0,class:"spinner-border ms-2",role:"status"},IC=Jk((()=>(0,l._)("span",{class:"visually-hidden"},"Loading...",-1))),PC=[IC],RC={key:1},xC=Jk((()=>(0,l._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),LC=[xC],$C={id:"panelsStayOpen-collapseThree",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingThree"},BC={class:"accordion-body"},UC={class:"accordion-item"},OC={class:"accordion-header",id:"panelsStayOpen-headingFour"},NC={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseFour","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseFour"},jC={key:0,class:"spinner-border ms-2",role:"status"},MC=Jk((()=>(0,l._)("span",{class:"visually-hidden"},"Loading...",-1))),EC=[MC],TC={key:1},qC=Jk((()=>(0,l._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),AC=[qC],FC={id:"panelsStayOpen-collapseFour",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingFour"},WC={class:"accordion-body"},VC={class:"accordion-item"},ZC={class:"accordion-header",id:"panelsStayOpen-headingFive"},zC={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseFive","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseFive"},GC={key:0,class:"spinner-border ms-2",role:"status"},QC=Jk((()=>(0,l._)("span",{class:"visually-hidden"},"Loading...",-1))),HC=[QC],YC={key:1},KC=Jk((()=>(0,l._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),JC=[KC],XC={id:"panelsStayOpen-collapseFive",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingFive"},eS={class:"accordion-body"},tS={class:"accordion-item"},sS={class:"accordion-header",id:"panelsStayOpen-headingSix"},aS={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseSix","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseSix"},lS={key:0,class:"spinner-border ms-2",role:"status"},iS=Jk((()=>(0,l._)("span",{class:"visually-hidden"},"Loading...",-1))),oS=[iS],cS={key:1},rS=Jk((()=>(0,l._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),dS=[rS],nS={id:"panelsStayOpen-collapseSix",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingSix"},uS={class:"accordion-body"},mS={class:"accordion-item"},hS={class:"accordion-header",id:"panelsStayOpen-headingSeven"},pS={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseSeven","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseSeven"},bS={key:0,class:"spinner-border ms-2",role:"status"},fS=Jk((()=>(0,l._)("span",{class:"visually-hidden"},"Loading...",-1))),_S=[fS],gS={key:1},yS=Jk((()=>(0,l._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),vS=[yS],kS={id:"panelsStayOpen-collapseSeven",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingSeven"},wS={class:"accordion-body"},CS={class:"accordion-item"},SS={class:"accordion-header",id:"panelsStayOpen-headingEight"},DS={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseEight","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseEight"},IS={key:0,class:"spinner-border ms-2",role:"status"},PS=Jk((()=>(0,l._)("span",{class:"visually-hidden"},"Loading...",-1))),RS=[PS],xS={key:1},LS=Jk((()=>(0,l._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),$S=[LS],BS={id:"panelsStayOpen-collapseEight",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingEight"},US={class:"accordion-body"},OS={class:"accordion-item"},NS={class:"accordion-header",id:"panelsStayOpen-headingNine"},jS={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseNine","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseNine"},MS={key:0,class:"spinner-border ms-2",role:"status"},ES=Jk((()=>(0,l._)("span",{class:"visually-hidden"},"Loading...",-1))),TS=[ES],qS={key:1},AS=Jk((()=>(0,l._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),FS=[AS],WS={id:"panelsStayOpen-collapseNine",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingNine"},VS={class:"accordion-body"},ZS={class:"accordion-item"},zS={class:"accordion-header",id:"panelsStayOpen-headingTen"},GS={class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseTen","aria-expanded":"false","aria-controls":"panelsStayOpen-collapseTen"},QS={key:0,class:"spinner-border ms-2",role:"status"},HS=Jk((()=>(0,l._)("span",{class:"visually-hidden"},"Loading...",-1))),YS=[HS],KS={key:1},JS=Jk((()=>(0,l._)("i",{class:"bi bi-check-circle-fill fs-4 ms-2"},null,-1))),XS=[JS],eD={id:"panelsStayOpen-collapseTen",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingTen"},tD={class:"accordion-body"};function sD(e,t,s,a,i,o){const c=(0,l.up)("router-link"),r=(0,l.up)("IqcChecklistTable"),d=(0,l.up)("CheckListTable");return e.$store.state.isLoading?((0,l.wg)(),(0,l.iD)("div",Xk,sw)):((0,l.wg)(),(0,l.iD)("div",aw,[(0,l._)("div",lw,[(0,l._)("div",iw,[(0,l._)("div",ow,[cw,rw,(0,l._)("nav",dw,[(0,l._)("ol",nw,[uw,(0,l._)("li",mw,[(0,l.Wm)(c,{to:"/checklist"},{default:(0,l.w5)((()=>[hw,(0,l.Uk)(" Checklist")])),_:1})]),pw])])])]),(0,l._)("div",bw,[(0,l._)("div",fw,[(0,l._)("div",_w,[i.generatedQRCode?((0,l.wg)(),(0,l.iD)("button",gw," View Generated Label ")):((0,l.wg)(),(0,l.iD)("button",yw," Generate Label ")),(0,l._)("button",{class:"btn btn-primary me-2",onClick:t[0]||(t[0]=(...e)=>o.downloadBOM&&o.downloadBOM(...e))}," Download BOM "),vw])])])]),(0,l._)("div",kw,[(0,l._)("div",ww,[(0,l._)("div",Cw,[Sw,(0,l._)("div",Dw,[i.isChecklistPassed?((0,l.wg)(),(0,l.iD)("div",Iw,[i.generatedQRCode?((0,l.wg)(),(0,l.iD)("div",Pw,[(0,l._)("img",{src:i.generatedQRCode,alt:"QR Code"},null,8,Rw)])):((0,l.wg)(),(0,l.iD)("p",xw," All Checks passed successfully, generate a label by pressing the generate button. "))])):((0,l.wg)(),(0,l.iD)("div",Lw," You can only generate a label if all checks are passed "))]),(0,l._)("div",$w,[Bw,i.isChecklistPassed?((0,l.wg)(),(0,l.iD)("div",Uw,[i.generatedQRCode?((0,l.wg)(),(0,l.iD)("button",{key:0,type:"button",class:"btn btn-success",onClick:t[1]||(t[1]=(...t)=>e.printQRCode&&e.printQRCode(...t))}," Print ")):((0,l.wg)(),(0,l.iD)("button",{key:1,type:"button",class:"btn btn-success",onClick:t[2]||(t[2]=(...t)=>e.generateQRCode&&e.generateQRCode(...t))}," Generate "))])):(0,l.kq)("",!0)])])])]),(0,l._)("div",Ow,[(0,l._)("div",Nw,[(0,l._)("div",jw,[Mw,Ew,(0,l._)("div",Tw,[qw,(0,l._)("button",{type:"button",class:"btn btn-danger",onClick:t[3]||(t[3]=(...t)=>e.endChecklist&&e.endChecklist(...t)),"data-bs-dismiss":"modal"}," End ")])])])]),(0,l._)("div",Aw,[Fw,(0,l._)("div",Ww,[(0,l._)("div",Vw,[i.checklist.bom?((0,l.wg)(),(0,l.iD)("div",Zw,[zw,(0,l.Uk)(" "+(0,fe.zw)(i.checklist.bom.product.project.name),1)])):(0,l.kq)("",!0),i.checklist.bom?((0,l.wg)(),(0,l.iD)("div",Gw,[Qw,(0,l.Uk)(" "+(0,fe.zw)(i.checklist.bom.product.name),1)])):(0,l.kq)("",!0),i.checklist.bom?((0,l.wg)(),(0,l.iD)("div",Hw,[Yw,(0,l.Uk)(" "+(0,fe.zw)(i.checklist.bom.bom_rev_number),1)])):(0,l.kq)("",!0),i.checklist.bom?((0,l.wg)(),(0,l.iD)("div",Kw,[Jw,(0,l.Uk)(" "+(0,fe.zw)(i.checklist.bom.issue_date),1)])):(0,l.kq)("",!0)])])]),(0,l._)("div",Xw,[(0,l._)("div",eC,[(0,l._)("h2",tC,[(0,l._)("button",sC,[(0,l.Uk)(" IQC Check "),!1===i.isRawMaterialSufficient?((0,l.wg)(),(0,l.iD)("div",aC,iC)):((0,l.wg)(),(0,l.iD)("div",oC,rC))])]),(0,l._)("div",dC,[(0,l._)("div",nC,[(0,l.Wm)(r,{checklist_uids:i.checklist_uids,onRowClicked:o.handleRowClicked,onRowSelected:o.handleRowSelected},null,8,["checklist_uids","onRowClicked","onRowSelected"])])])]),(0,l._)("div",uC,[(0,l._)("h2",mC,[(0,l._)("button",hC,[(0,l.Uk)(" PCB Check "),!1===i.isPcbSufficient?((0,l.wg)(),(0,l.iD)("div",pC,fC)):((0,l.wg)(),(0,l.iD)("div",_C,yC))])]),(0,l._)("div",vC,[(0,l._)("div",kC,[(0,l.Wm)(d,{checklistItems:i.filteredChecklistItems["PCB"]},null,8,["checklistItems"])])])]),(0,l._)("div",wC,[(0,l._)("h2",CC,[(0,l._)("button",SC,[(0,l.Uk)(" Solder Paste Check "),!1===i.isSolderPasteSufficient?((0,l.wg)(),(0,l.iD)("div",DC,PC)):((0,l.wg)(),(0,l.iD)("div",RC,LC))])]),(0,l._)("div",$C,[(0,l._)("div",BC,[(0,l.Wm)(d,{checklistItems:i.filteredChecklistItems["Solder Paste"]},null,8,["checklistItems"])])])]),(0,l._)("div",UC,[(0,l._)("h2",OC,[(0,l._)("button",NC,[(0,l.Uk)(" Solder Bar Check "),!1===i.isSolderBarSufficient?((0,l.wg)(),(0,l.iD)("div",jC,EC)):((0,l.wg)(),(0,l.iD)("div",TC,AC))])]),(0,l._)("div",FC,[(0,l._)("div",WC,[(0,l.Wm)(d,{checklistItems:i.filteredChecklistItems["Solder Bar"]},null,8,["checklistItems"]),(0,l.Uk)("> ")])])]),(0,l._)("div",VC,[(0,l._)("h2",ZC,[(0,l._)("button",zC,[(0,l.Uk)(" Solder Flux Check "),!1===i.isSolderFluxSufficient?((0,l.wg)(),(0,l.iD)("div",GC,HC)):((0,l.wg)(),(0,l.iD)("div",YC,JC))])]),(0,l._)("div",XC,[(0,l._)("div",eS,[(0,l.Wm)(d,{checklistItems:i.filteredChecklistItems["Solder Flux"]},null,8,["checklistItems"])])])]),(0,l._)("div",tS,[(0,l._)("h2",sS,[(0,l._)("button",aS,[(0,l.Uk)(" IPA Check "),!1===i.isIpaSufficient?((0,l.wg)(),(0,l.iD)("div",lS,oS)):((0,l.wg)(),(0,l.iD)("div",cS,dS))])]),(0,l._)("div",nS,[(0,l._)("div",uS,[(0,l.Wm)(d,{checklistItems:i.filteredChecklistItems["IPA"]},null,8,["checklistItems"])])])]),(0,l._)("div",mS,[(0,l._)("h2",hS,[(0,l._)("button",pS,[(0,l.Uk)(" Solder Wire Check "),!1===i.isSolderWireSufficient?((0,l.wg)(),(0,l.iD)("div",bS,_S)):((0,l.wg)(),(0,l.iD)("div",gS,vS))])]),(0,l._)("div",kS,[(0,l._)("div",wS,[(0,l.Wm)(d,{checklistItems:i.filteredChecklistItems["Solder Wire"]},null,8,["checklistItems"])])])]),(0,l._)("div",CS,[(0,l._)("h2",SS,[(0,l._)("button",DS,[(0,l.Uk)(" SMT Pallet Check "),!1===i.isSMTPalletSufficient?((0,l.wg)(),(0,l.iD)("div",IS,RS)):((0,l.wg)(),(0,l.iD)("div",xS,$S))])]),(0,l._)("div",BS,[(0,l._)("div",US,[(0,l.Wm)(d,{checklistItems:i.filteredChecklistItems["SMT Pallet"]},null,8,["checklistItems"])])])]),(0,l._)("div",OS,[(0,l._)("h2",NS,[(0,l._)("button",jS,[(0,l.Uk)(" Wave Pallet Check "),!1===i.isWavePalletSufficient?((0,l.wg)(),(0,l.iD)("div",MS,TS)):((0,l.wg)(),(0,l.iD)("div",qS,FS))])]),(0,l._)("div",WS,[(0,l._)("div",VS,[(0,l.Wm)(d,{checklistItems:i.filteredChecklistItems["Wave Pallet"]},null,8,["checklistItems"])])])]),(0,l._)("div",ZS,[(0,l._)("h2",zS,[(0,l._)("button",GS,[(0,l.Uk)(" PCB Serial Number Label Check "),!1===i.isLabelSufficient?((0,l.wg)(),(0,l.iD)("div",QS,YS)):((0,l.wg)(),(0,l.iD)("div",KS,XS))])]),(0,l._)("div",eD,[(0,l._)("div",tD,[(0,l.Wm)(d,{checklistItems:i.filteredChecklistItems["PCB Serial Number Label"]},null,8,["checklistItems"])])])])])]))}function aD(e,t,s,a,i,o){const c=(0,l.up)("ag-grid-vue");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l.Wm)(c,{ref:"agGrid",style:{height:"550px"},class:"ag-theme-quartz",rowData:s.checklist_uids,defaultColDef:i.defaultColDef,columnDefs:i.colDefs,pagination:!0,onRowClicked:o.onRowClicked,onSelectionChanged:o.onSelectionChanged},null,8,["rowData","defaultColDef","columnDefs","onRowClicked","onSelectionChanged"])])}var lD={props:{checklist_uids:{type:Array,required:!0}},components:{AgGridVue:$t.n},data(){return{gridApi:null,isGridReady:!1,colDefs:[{headerName:"UID",field:"uid",checkboxSelection:!0},{headerName:"VEPL Part No",field:"checklist_item.bom_line_item.part_number"},{headerName:"Updated At",field:"updated_at"},{headerName:"File",cellRenderer:this.fileCellRenderer}],defaultColDef:{filter:!0,sortable:!0,resizable:!0,autoSize:!0,domLayout:"autoHeight"},selectedRows:[]}},mounted(){},methods:{fileCellRenderer(e){const t=e.data&&e.data.iqc_file_url;if(t){const s=t.split("/").pop(),a=document.createElement("a");return a.href=e.data.iqc_file_url,a.textContent=s,a.style.color="blue",a.download=!0,a}{const e=document.createElement("button");return e.innerHTML='<i class="fas fa-upload"></i>',e.classList.add("btn-sm","btn-secondary"),e.addEventListener("click",this.uploadFile),e}},uploadFile(){console.log("Upload file functionality")},onRowClicked(e){this.$emit("rowClicked",e.data)},onSelectionChanged(e){const t=e.api.getSelectedRows(),s=t.length>0?t[0]:null;s?this.$emit("rowSelected",s):this.$emit("rowDeselected")}}};const iD=(0,he.Z)(lD,[["render",aD],["__scopeId","data-v-9499141c"]]);var oD=iD,cD={components:{CheckListTable:bo,IqcChecklistTable:oD},data(){return{activeBom:"",checklistItems:[],isChecklistPassed:!1,isChecklistEnded:!1,isRawMaterialSufficient:!1,isPcbSufficient:!1,isSolderPasteSufficient:!1,isSolderBarSufficient:!1,isSolderFluxSufficient:!1,isIpaSufficient:!1,isSolderWireSufficient:!1,isSMTPalletSufficient:!1,isWavePalletSufficient:!1,isLabelSufficient:!1,pollingInterval:"",generatedQRCode:"",filteredChecklistItems:{"Raw Material":[],PCB:[],"Solder Paste":[],"Solder Bar":[],"Solder Flux":[],Ipa:[],"Solder Wire":[],"SMT Pallet":[],"Wave Pallet":[],"PCB Serial Number Label":[]},checklist:[],checklist_uids:[],selectedRow:[]}},mounted(){this.getData()},methods:{getData(){this.$store.commit("setIsLoading",!0),ue.Z.get(`store/get-iqc-data/${this.$route.params.id}`).then((e=>{this.checklist=e.data.checklist,this.checklist_uids=e.data.checklist_uids,console.log(e.data),this.$store.commit("setIsLoading",!1)})).catch((e=>{console.error("Error fetching checklist details:",e),this.$store.commit("setIsLoading",!1)}))},downloadBOM(){try{const e=this.checklist.bom.bom_file_url;console.log("file url",e);const t=document.createElement("a");t.href=e,t.download=this.checklist.bom.bom_file_name,document.body.appendChild(t),t.click(),document.body.removeChild(t)}catch(e){console.error("Error downloading BOM:",e)}},handleRowClicked(e){console.log("Clicked Row:",e)},handleRowSelected(e){console.log("Row Selected:",e),this.selectedRow=e}}};const rD=(0,he.Z)(cD,[["render",sD],["__scopeId","data-v-fb09ffc2"]]);var dD=rD;const nD=[{path:"/",name:"Home",component:wu},{path:"/login",name:"LoginForm",component:xe},{path:"/bom",name:"BomLanding",component:Mt},{path:"/bom/upload",name:"UploadBom",component:vt},{path:"/CheckList",name:"CheckListOrderBased",component:Bk,props:!0},{path:"/reports",name:"ReportsList",component:Fd},{path:"/dashboard",name:"CheckListsDashboard",component:wu},{path:"/checklist-report",name:"ChecklistReport",component:cm},{path:"/bom/edit/:id",name:"BomLineLevel",component:xs,props:!0},{path:"/begin-checklist/:id",name:"begin-checklist",component:yo,props:!0},{path:"/generated-checklists/:id",name:"generated-checklist",component:Wo,props:!0},{path:"/checklist-details/:id",name:"checklist-details",component:Od,props:!0},{path:"/users",name:"users",component:jm},{path:"/users/edit-user/:id",name:"EditUser",component:wb},{path:"/users/create-user",name:"CreateUser",component:Uf},{path:"/bom-line-item/edit/:id",name:"BomLineItemEdit",component:mp,props:e=>({bom_id:e.params.id})},{path:"/orders",name:"OrdersLanding",component:Hf},{path:"/orders/create",name:"OrderCreation",component:ag},{path:"/projects",name:"ProjectsLanding",component:Rg},{path:"/projects/create-project",name:"CreateProject",component:mv},{path:"/project-edit/:id",name:"ProjectEdit",component:Ny,props:!0},{path:"/product/edit/:id",name:"ProductEdit",component:lk,props:!0},{path:"/new",name:"CheckList",component:aa,props:!0},{path:"/iqc",name:"IqcLanding",component:Kk,props:!0},{path:"/iqc-for-checklist/:id",name:"IqcForChecklist",component:dD,props:!0}],uD=(0,Ue.p7)({history:(0,Ue.PO)("/"),routes:nD});var mD=uD,hD=s(65);const pD=(0,hD.MT)({state:{user:{token:"",isAuthenticated:!1,username:"",password:"",first_name:"",last_name:"",is_staff:!1,is_superuser:!1,is_store_team:!1,is_design_team:!1},isLoading:!1},mutations:{initializeStore(e){if(localStorage.getItem("token")){e.user.token=localStorage.getItem("token"),ue.Z.defaults.headers.common["Authorization"]="Token "+e.user.token,e.user.isAuthenticated=!0;const t=localStorage.getItem("userDetails");if(t){const s=JSON.parse(t);e.user.first_name=s.first_name,e.user.last_name=s.last_name,e.user.is_staff=s.is_staff,e.user.is_superuser=s.is_superuser,e.user.is_store_team=s.is_store_team,e.user.is_design_team=s.is_design_team}}else e.user.token="",e.user.isAuthenticated=!1;e.isLoading=!1},setToken(e,t){e.user.token=t,ue.Z.defaults.headers.common["Authorization"]="Token "+e.user.token,e.user.isAuthenticated=!0},setUserDetails(e,t){e.user.first_name=t.first_name,e.user.last_name=t.last_name,e.user.is_staff=t.is_staff,e.user.is_superuser=t.is_superuser,e.user.is_store_team=t.is_store_team,e.user.is_design_team=t.is_design_team},setIsLoading(e,t){e.isLoading=t},removeToken(e){e.user.token="",e.user.first_name="",e.user.last_name="",e.user.is_staff=!1,e.user.is_superuser=!1,e.user.is_store_team=!1,e.user.is_design_team=!1,e.user.isAuthenticated=!1,localStorage.removeItem("token"),localStorage.removeItem("userDetails"),ue.Z.defaults.headers.common["Authorization"]=""},setAuthentication(e,t){e.user.isAuthenticated=t}},actions:{},modules:{}});pD.commit("initializeStore");var bD=pD,fD=s(1037);s(8830),s(5572);ue.Z.defaults.baseURL="https://sfcsdev.xtractautomation.com/api/v1/";const _D=(0,a.ri)(Be);_D.use(bD).use(mD).use(fD.ZP),_D.mount("#app")}},t={};function s(a){var l=t[a];if(void 0!==l)return l.exports;var i=t[a]={exports:{}};return e[a].call(i.exports,i,i.exports,s),i.exports}s.m=e,function(){var e=[];s.O=function(t,a,l,i){if(!a){var o=1/0;for(n=0;n<e.length;n++){a=e[n][0],l=e[n][1],i=e[n][2];for(var c=!0,r=0;r<a.length;r++)(!1&i||o>=i)&&Object.keys(s.O).every((function(e){return s.O[e](a[r])}))?a.splice(r--,1):(c=!1,i<o&&(o=i));if(c){e.splice(n--,1);var d=l();void 0!==d&&(t=d)}}return t}i=i||0;for(var n=e.length;n>0&&e[n-1][2]>i;n--)e[n]=e[n-1];e[n]=[a,l,i]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,a){var l,i,o=a[0],c=a[1],r=a[2],d=0;if(o.some((function(t){return 0!==e[t]}))){for(l in c)s.o(c,l)&&(s.m[l]=c[l]);if(r)var n=r(s)}for(t&&t(a);d<o.length;d++)i=o[d],s.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return s.O(n)},a=self["webpackChunksfcs_checklist"]=self["webpackChunksfcs_checklist"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=s.O(void 0,[998],(function(){return s(7960)}));a=s.O(a)})();
//# sourceMappingURL=app.1aeadbe2.js.map